import{a as N,b as fe,c as Ah,d as _,e as Ry,f as Nc,g as Py,h as Ny,i as Oy,j as Sh,k as ky,l as ys,m as Mh,n as Oc,o as Fy,p as Vy,q as Rh,r as ye,s as Nr,t as Jt,u as kc,v as vs,w as Ly,x as jy,y as Qn,z as rt}from"./chunk-W354PV4M.js";var By=null;var Ph=1,Uy=Symbol("SIGNAL");function _t(t){let e=By;return By=t,e}var $y={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Q1(t){if(!(kh(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Ph)){if(!t.producerMustRecompute(t)&&!Nh(t)){t.dirty=!1,t.lastCleanEpoch=Ph;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Ph}}function qy(t){return t&&(t.nextProducerIndex=0),_t(t)}function Hy(t,e){if(_t(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(kh(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Oh(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Nh(t){Fc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Q1(n),r!==n.version))return!0}return!1}function zy(t){if(Fc(t),kh(t))for(let e=0;e<t.producerNode.length;e++)Oh(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Oh(t,e){if(Y1(t),Fc(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Oh(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Fc(i),i.producerIndexOfThis[r]=e}}function kh(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Fc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Y1(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Z1(){throw new Error}var X1=Z1;function Gy(t){X1=t}function U(t){return typeof t=="function"}function Fi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Vc=Fi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Or(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ce=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(U(r))try{r()}catch(o){e=o instanceof Vc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Wy(o)}catch(s){e=e??[],s instanceof Vc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Vc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Wy(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Or(n,e)}remove(e){let{_finalizers:n}=this;n&&Or(n,e),e instanceof t&&e._removeParent(this)}};Ce.EMPTY=(()=>{let t=new Ce;return t.closed=!0,t})();var Fh=Ce.EMPTY;function Lc(t){return t instanceof Ce||t&&"closed"in t&&U(t.remove)&&U(t.add)&&U(t.unsubscribe)}function Wy(t){U(t)?t():t.unsubscribe()}var jt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Vi={setTimeout(t,e,...n){let{delegate:r}=Vi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Vi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function jc(t){Vi.setTimeout(()=>{let{onUnhandledError:e}=jt;if(e)e(t);else throw t})}function xs(){}var Ky=Vh("C",void 0,void 0);function Qy(t){return Vh("E",void 0,t)}function Yy(t){return Vh("N",t,void 0)}function Vh(t,e,n){return{kind:t,value:e,error:n}}var kr=null;function Li(t){if(jt.useDeprecatedSynchronousErrorHandling){let e=!kr;if(e&&(kr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=kr;if(kr=null,n)throw r}}else t()}function Zy(t){jt.useDeprecatedSynchronousErrorHandling&&kr&&(kr.errorThrown=!0,kr.error=t)}var Fr=class extends Ce{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Lc(e)&&e.add(this)):this.destination=tA}static create(e,n,r){return new Cn(e,n,r)}next(e){this.isStopped?jh(Yy(e),this):this._next(e)}error(e){this.isStopped?jh(Qy(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?jh(Ky,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},J1=Function.prototype.bind;function Lh(t,e){return J1.call(t,e)}var Bh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Bc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Bc(r)}else Bc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Bc(n)}}},Cn=class extends Fr{constructor(e,n,r){super();let i;if(U(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&jt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Lh(e.next,o),error:e.error&&Lh(e.error,o),complete:e.complete&&Lh(e.complete,o)}):i=e}this.destination=new Bh(i)}};function Bc(t){jt.useDeprecatedSynchronousErrorHandling?Zy(t):jc(t)}function eA(t){throw t}function jh(t,e){let{onStoppedNotification:n}=jt;n&&Vi.setTimeout(()=>n(t,e))}var tA={closed:!0,next:xs,error:eA,complete:xs};var ji=typeof Symbol=="function"&&Symbol.observable||"@@observable";function it(t){return t}function Uh(...t){return $h(t)}function $h(t){return t.length===0?it:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Z=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=rA(n)?n:new Cn(n,r,i);return Li(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Xy(r),new r((i,o)=>{let s=new Cn({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ji](){return this}pipe(...n){return $h(n)(this)}toPromise(n){return n=Xy(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Xy(t){var e;return(e=t??jt.Promise)!==null&&e!==void 0?e:Promise}function nA(t){return t&&U(t.next)&&U(t.error)&&U(t.complete)}function rA(t){return t&&t instanceof Fr||nA(t)&&Lc(t)}function qh(t){return U(t?.lift)}function K(t){return e=>{if(qh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Q(t,e,n,r,i){return new Hh(t,e,n,r,i)}var Hh=class extends Fr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Bi(){return K((t,e)=>{let n=null;t._refCount++;let r=Q(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Ui=class extends Z{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,qh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ce;let n=this.getSubject();e.add(this.source.subscribe(Q(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ce.EMPTY)}return e}refCount(){return Bi()(this)}};var Jy=Fi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ve=(()=>{class t extends Z{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Uc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Jy}next(n){Li(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Li(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Li(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Fh:(this.currentObservers=null,o.push(n),new Ce(()=>{this.currentObservers=null,Or(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Z;return n.source=this,n}}return t.create=(e,n)=>new Uc(e,n),t})(),Uc=class extends Ve{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Fh}};var ze=class extends Ve{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ws={now(){return(ws.delegate||Date).now()},delegate:void 0};var $c=class extends Ve{constructor(e=1/0,n=1/0,r=ws){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var qc=class extends Ce{constructor(e,n){super()}schedule(e,n=0){return this}};var Es={setInterval(t,e,...n){let{delegate:r}=Es;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Es;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var $i=class extends qc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Es.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Es.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Or(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var qi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};qi.now=ws.now;var Hi=class extends qi{constructor(e,n=qi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var bs=new Hi($i);var Hc=class extends $i{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var zc=class extends Hi{};var zh=new zc(Hc);var dt=new Z(t=>t.complete());function ev(t){return t&&U(t.schedule)}function Gh(t){return t[t.length-1]}function tv(t){return U(Gh(t))?t.pop():void 0}function en(t){return ev(Gh(t))?t.pop():void 0}function nv(t,e){return typeof Gh(t)=="number"?t.pop():e}var Gc=t=>t&&typeof t.length=="number"&&typeof t!="function";function Wc(t){return U(t?.then)}function Kc(t){return U(t[ji])}function Qc(t){return Symbol.asyncIterator&&U(t?.[Symbol.asyncIterator])}function Yc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function iA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Zc=iA();function Xc(t){return U(t?.[Zc])}function Jc(t){return Py(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Nc(n.read());if(i)return yield Nc(void 0);yield yield Nc(r)}}finally{n.releaseLock()}})}function eu(t){return U(t?.getReader)}function ve(t){if(t instanceof Z)return t;if(t!=null){if(Kc(t))return oA(t);if(Gc(t))return sA(t);if(Wc(t))return aA(t);if(Qc(t))return rv(t);if(Xc(t))return cA(t);if(eu(t))return uA(t)}throw Yc(t)}function oA(t){return new Z(e=>{let n=t[ji]();if(U(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function sA(t){return new Z(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function aA(t){return new Z(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,jc)})}function cA(t){return new Z(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function rv(t){return new Z(e=>{lA(t,e).catch(n=>e.error(n))})}function uA(t){return rv(Jc(t))}function lA(t,e){var n,r,i,o;return Ry(this,void 0,void 0,function*(){try{for(n=Ny(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function ht(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Tt(t,e=0){return K((n,r)=>{n.subscribe(Q(r,i=>ht(r,t,()=>r.next(i),e),()=>ht(r,t,()=>r.complete(),e),i=>ht(r,t,()=>r.error(i),e)))})}function Bt(t,e=0){return K((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function iv(t,e){return ve(t).pipe(Bt(e),Tt(e))}function ov(t,e){return ve(t).pipe(Bt(e),Tt(e))}function sv(t,e){return new Z(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function av(t,e){return new Z(n=>{let r;return ht(n,e,()=>{r=t[Zc](),ht(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>U(r?.return)&&r.return()})}function tu(t,e){if(!t)throw new Error("Iterable cannot be null");return new Z(n=>{ht(n,e,()=>{let r=t[Symbol.asyncIterator]();ht(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function cv(t,e){return tu(Jc(t),e)}function uv(t,e){if(t!=null){if(Kc(t))return iv(t,e);if(Gc(t))return sv(t,e);if(Wc(t))return ov(t,e);if(Qc(t))return tu(t,e);if(Xc(t))return av(t,e);if(eu(t))return cv(t,e)}throw Yc(t)}function ie(t,e){return e?uv(t,e):ve(t)}function F(...t){let e=en(t);return ie(t,e)}function zi(t,e){let n=U(t)?t:()=>t,r=i=>i.error(n());return new Z(e?i=>e.schedule(r,0,i):r)}function Wh(t){return!!t&&(t instanceof Z||U(t.lift)&&U(t.subscribe))}var Tn=Fi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function L(t,e){return K((n,r)=>{let i=0;n.subscribe(Q(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:dA}=Array;function hA(t,e){return dA(e)?t(...e):t(e)}function lv(t){return L(e=>hA(t,e))}var{isArray:fA}=Array,{getPrototypeOf:pA,prototype:gA,keys:mA}=Object;function dv(t){if(t.length===1){let e=t[0];if(fA(e))return{args:e,keys:null};if(_A(e)){let n=mA(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function _A(t){return t&&typeof t=="object"&&pA(t)===gA}function hv(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Is(...t){let e=en(t),n=tv(t),{args:r,keys:i}=dv(t);if(r.length===0)return ie([],e);let o=new Z(yA(r,e,i?s=>hv(i,s):it));return n?o.pipe(lv(n)):o}function yA(t,e,n=it){return r=>{fv(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)fv(e,()=>{let u=ie(t[c],e),l=!1;u.subscribe(Q(r,d=>{o[c]=d,l||(l=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function fv(t,e,n){t?ht(n,t,e):e()}function pv(t,e,n,r,i,o,s,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},f=y=>u<r?v(y):c.push(y),v=y=>{o&&e.next(y),u++;let m=!1;ve(n(y,l++)).subscribe(Q(e,E=>{i?.(E),o?f(E):e.next(E)},()=>{m=!0},void 0,()=>{if(m)try{for(u--;c.length&&u<r;){let E=c.shift();s?ht(e,s,()=>v(E)):v(E)}h()}catch(E){e.error(E)}}))};return t.subscribe(Q(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Re(t,e,n=1/0){return U(e)?Re((r,i)=>L((o,s)=>e(r,o,i,s))(ve(t(r,i))),n):(typeof e=="number"&&(n=e),K((r,i)=>pv(r,i,t,n)))}function Yn(t=1/0){return Re(it,t)}function gv(){return Yn(1)}function Gi(...t){return gv()(ie(t,en(t)))}function nu(t){return new Z(e=>{ve(t()).subscribe(e)})}function Kh(...t){let e=en(t),n=nv(t,1/0),r=t;return r.length?r.length===1?ve(r[0]):Yn(n)(ie(r,e)):dt}function Le(t,e){return K((n,r)=>{let i=0;n.subscribe(Q(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Zn(t){return K((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Q(n,void 0,void 0,s=>{o=ve(t(s,Zn(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function mv(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(Q(s,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function An(t,e){return U(e)?Re(t,e,1):Re(t,1)}function Xn(t){return K((e,n)=>{let r=!1;e.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Sn(t){return t<=0?()=>dt:K((e,n)=>{let r=0;e.subscribe(Q(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Qh(t){return L(()=>t)}function Yh(t,e=it){return t=t??vA,K((n,r)=>{let i,o=!0;n.subscribe(Q(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function vA(t,e){return t===e}function ru(t=xA){return K((e,n)=>{let r=!1;e.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function xA(){return new Tn}function Jn(t){return K((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function At(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Le((i,o)=>t(i,o,r)):it,Sn(1),n?Xn(e):ru(()=>new Tn))}function Wi(t){return t<=0?()=>dt:K((e,n)=>{let r=[];e.subscribe(Q(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Zh(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Le((i,o)=>t(i,o,r)):it,Wi(1),n?Xn(e):ru(()=>new Tn))}function Ds(){return K((t,e)=>{let n,r=!1;t.subscribe(Q(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function Vr(t,e){return K(mv(t,e,arguments.length>=2,!0))}function _v(t={}){let{connector:e=()=>new Ve,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,u=0,l=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=c=void 0,l=d=!1},v=()=>{let y=s;f(),y?.unsubscribe()};return K((y,m)=>{u++,!d&&!l&&h();let E=c=c??e();m.add(()=>{u--,u===0&&!d&&!l&&(a=Xh(v,i))}),E.subscribe(m),!s&&u>0&&(s=new Cn({next:R=>E.next(R),error:R=>{d=!0,h(),a=Xh(f,n,R),E.error(R)},complete:()=>{l=!0,h(),a=Xh(f,r),E.complete()}}),ve(y).subscribe(s))})(o)}}function Xh(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Cn({next:()=>{r.unsubscribe(),t()}});return ve(e(...n)).subscribe(r)}function iu(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,_v({connector:()=>new $c(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Lr(...t){let e=en(t);return K((n,r)=>{(e?Gi(t,n,e):Gi(t,n)).subscribe(r)})}function me(t,e){return K((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Q(r,c=>{i?.unsubscribe();let u=0,l=o++;ve(t(c,l)).subscribe(i=Q(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function ou(t,e){return U(e)?me(()=>t,e):me(()=>t)}function Jh(t){return K((e,n)=>{ve(t).subscribe(Q(n,()=>n.complete(),xs)),!n.closed&&e.subscribe(n)})}function Te(t,e,n){let r=U(t)||e||n?{next:t,error:e,complete:n}:t;return r?K((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Q(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):it}var B=class extends Error{constructor(e,n){super(Mu(e,n)),this.code=e}};function Mu(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ue(t){for(let e in t)if(t[e]===ue)return e;throw Error("Could not find renamed property on target object.")}function yt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(yt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function yv(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var wA=ue({__forward_ref__:ue});function qf(t){return t.__forward_ref__=qf,t.toString=function(){return yt(this())},t}function Mt(t){return ex(t)?t():t}function ex(t){return typeof t=="function"&&t.hasOwnProperty(wA)&&t.__forward_ref__===qf}function tx(t){return t&&!!t.\u0275providers}var EA=ue({\u0275cmp:ue}),bA=ue({\u0275dir:ue}),IA=ue({\u0275pipe:ue}),DA=ue({\u0275mod:ue}),fu=ue({\u0275fac:ue}),Cs=ue({__NG_ELEMENT_ID__:ue}),vv=ue({__NG_ENV_ID__:ue});function CA(t){return typeof t=="string"?t:t==null?"":String(t)}function TA(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():CA(t)}function AA(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new B(-200,t)}function Hf(t,e){throw new B(-201,!1)}function O(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function we(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ru(t){return xv(t,rx)||xv(t,ix)}function nx(t){return Ru(t)!==null}function xv(t,e){return t.hasOwnProperty(e)?t[e]:null}function SA(t){let e=t&&(t[rx]||t[ix]);return e||null}function wv(t){return t&&(t.hasOwnProperty(Ev)||t.hasOwnProperty(MA))?t[Ev]:null}var rx=ue({\u0275prov:ue}),Ev=ue({\u0275inj:ue}),ix=ue({ngInjectableDef:ue}),MA=ue({ngInjectorDef:ue}),Y=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Y||{}),lf;function ox(){return lf}function St(t){let e=lf;return lf=t,e}function sx(t,e,n){let r=Ru(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Y.Optional)return null;if(e!==void 0)return e;Hf(t,"Injector")}var vt=globalThis;var S=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=O({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var RA={},As=RA,df="__NG_DI_FLAG__",pu="ngTempTokenPath",PA="ngTokenPath",NA=/\n/gm,OA="\u0275",bv="__source",Xi;function kA(){return Xi}function er(t){let e=Xi;return Xi=t,e}function FA(t,e=Y.Default){if(Xi===void 0)throw new B(-203,!1);return Xi===null?sx(t,void 0,e):Xi.get(t,e&Y.Optional?null:void 0,e)}function b(t,e=Y.Default){return(ox()||FA)(Mt(t),e)}function I(t,e=Y.Default){return b(t,Pu(e))}function Pu(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function hf(t){let e=[];for(let n=0;n<t.length;n++){let r=Mt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new B(900,!1);let i,o=Y.Default;for(let s=0;s<r.length;s++){let a=r[s],c=VA(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(b(i,o))}else e.push(b(r))}return e}function ax(t,e){return t[df]=e,t.prototype[df]=e,t}function VA(t){return t[df]}function LA(t,e,n,r){let i=t[pu];throw e[bv]&&i.unshift(e[bv]),t.message=jA(`
`+t.message,i,n,r),t[PA]=i,t[pu]=null,t}function jA(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==OA?t.slice(2):t;let i=yt(e);if(Array.isArray(e))i=e.map(yt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):yt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(NA,`
  `)}`}function js(t){return{toString:t}.toString()}var cx=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(cx||{}),on=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(on||{}),Ss={},tn=[],Mn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Mn||{});function ux(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function ff(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];UA(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function BA(t){return t===3||t===4||t===6}function UA(t){return t.charCodeAt(0)===64}function zf(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Iv(t,n,i,null,e[++r]):Iv(t,n,i,null,null))}}return t}function Iv(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var lx="ng-template";function $A(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&ux(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function dx(t){return t.type===4&&t.value!==lx}function qA(t,e,n){let r=t.type===4&&!n?lx:t.value;return e===r}function HA(t,e,n){let r=4,i=t.attrs||[],o=WA(i),s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Ut(r)&&!Ut(c))return!1;if(s&&Ut(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!qA(t,c,n)||c===""&&e.length===1){if(Ut(r))return!1;s=!0}}else{let u=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!$A(t.attrs,u,n)){if(Ut(r))return!1;s=!0}continue}let l=r&8?"class":c,d=zA(l,i,dx(t),n);if(d===-1){if(Ut(r))return!1;s=!0;continue}if(u!==""){let h;d>o?h="":h=i[d+1].toLowerCase();let f=r&8?h:null;if(f&&ux(f,u,0)!==-1||r&2&&u!==h){if(Ut(r))return!1;s=!0}}}}return Ut(r)||s}function Ut(t){return(t&1)===0}function zA(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return KA(e,t)}function GA(t,e,n=!1){for(let r=0;r<e.length;r++)if(HA(t,e[r],n))return!0;return!1}function WA(t){for(let e=0;e<t.length;e++){let n=t[e];if(BA(n))return e}return t.length}function KA(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Dv(t,e){return t?":not("+e.trim()+")":e}function QA(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Ut(s)&&(e+=Dv(o,i),i=""),r=s,o=o||!Ut(r);n++}return i!==""&&(e+=Dv(o,i)),e}function YA(t){return t.map(QA).join(",")}function ZA(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Ut(i))break;i=o}r++}return{attrs:e,classes:n}}function Nu(t){return js(()=>{let e=mx(t),n=fe(N({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===cx.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||on.Emulated,styles:t.styles||tn,_:null,schemas:t.schemas||null,tView:null,id:""});_x(n);let r=t.dependencies;return n.directiveDefs=Tv(r,!1),n.pipeDefs=Tv(r,!0),n.id=eS(n),n})}function XA(t){return nr(t)||hx(t)}function JA(t){return t!==null}function Ee(t){return js(()=>({type:t.type,bootstrap:t.bootstrap||tn,declarations:t.declarations||tn,imports:t.imports||tn,exports:t.exports||tn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Cv(t,e){if(t==null)return Ss;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Mn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Mn.None?[r,a]:r,e[o]=s):n[o]=r}return n}function so(t){return js(()=>{let e=mx(t);return _x(e),e})}function nr(t){return t[EA]||null}function hx(t){return t[bA]||null}function fx(t){return t[IA]||null}function px(t){let e=nr(t)||hx(t)||fx(t);return e!==null?e.standalone:!1}function gx(t,e){let n=t[DA]||null;if(!n&&e===!0)throw new Error(`Type ${yt(t)} does not have '\u0275mod' property.`);return n}function mx(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ss,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||tn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Cv(t.inputs,e),outputs:Cv(t.outputs),debugInfo:null}}function _x(t){t.features?.forEach(e=>e(t))}function Tv(t,e){if(!t)return null;let n=e?fx:XA;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(JA)}function eS(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var On=0,ee=1,$=2,Ye=3,$t=4,qt=5,gu=6,Ms=7,Rn=8,eo=9,rr=10,xt=11,Rs=12,Av=13,Bs=14,sn=15,Gf=16,Ki=17,Wf=18,Ou=19,yx=20,tr=21,ef=22,Ur=23,$r=25,vx=1;var qr=7,mu=8,_u=9,Rt=10,Kf=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Kf||{});function jr(t){return Array.isArray(t)&&typeof t[vx]=="object"}function kn(t){return Array.isArray(t)&&t[vx]===!0}function xx(t){return(t.flags&4)!==0}function ku(t){return t.componentOffset>-1}function wx(t){return(t.flags&1)===1}function Us(t){return!!t.template}function tS(t){return(t[$]&512)!==0}function to(t,e){let n=t.hasOwnProperty(fu);return n?t[fu]:null}var pf=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Ex(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function $s(){return bx}function bx(t){return t.type.prototype.ngOnChanges&&(t.setInput=rS),nS}$s.ngInherit=!0;function nS(){let t=Dx(this),e=t?.current;if(e){let n=t.previous;if(n===Ss)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function rS(t,e,n,r,i){let o=this.declaredInputs[r],s=Dx(t)||iS(t,{previous:Ss,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new pf(u&&u.currentValue,n,c===Ss),Ex(t,e,i,n)}var Ix="__ngSimpleChanges__";function Dx(t){return t[Ix]||null}function iS(t,e){return t[Ix]=e}var Sv=null;var nn=function(t,e,n){Sv?.(t,e,n)},oS="svg",sS="math",aS=!1;function cS(){return aS}function Pn(t){for(;Array.isArray(t);)t=t[On];return t}function Ht(t,e){return Pn(e[t.index])}function Cx(t,e){return t.data[e]}function or(t,e){let n=e[t];return jr(n)?n:n[On]}function Qf(t){return(t[$]&128)===128}function uS(t){return kn(t[Ye])}function Mv(t,e){return e==null?null:t[e]}function Tx(t){t[Ki]=0}function lS(t){t[$]&1024||(t[$]|=1024,Qf(t)&&Ps(t))}function Yf(t){return!!(t[$]&9216||t[Ur]?.dirty)}function gf(t){Yf(t)?Ps(t):t[$]&64&&(cS()?(t[$]|=1024,Ps(t)):t[rr].changeDetectionScheduler?.notify())}function Ps(t){t[rr].changeDetectionScheduler?.notify();let e=Ns(t);for(;e!==null&&!(e[$]&8192||(e[$]|=8192,!Qf(e)));)e=Ns(e)}function Ax(t,e){if((t[$]&256)===256)throw new B(911,!1);t[tr]===null&&(t[tr]=[]),t[tr].push(e)}function dS(t,e){if(t[tr]===null)return;let n=t[tr].indexOf(e);n!==-1&&t[tr].splice(n,1)}function Ns(t){let e=t[Ye];return kn(e)?e[Ye]:e}var oe={lFrame:kx(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function hS(){return oe.lFrame.elementDepthCount}function fS(){oe.lFrame.elementDepthCount++}function pS(){oe.lFrame.elementDepthCount--}function Sx(){return oe.bindingsEnabled}function gS(){return oe.skipHydrationRootTNode!==null}function mS(t){return oe.skipHydrationRootTNode===t}function _S(){oe.skipHydrationRootTNode=null}function ot(){return oe.lFrame.lView}function ao(){return oe.lFrame.tView}function cn(){let t=Mx();for(;t!==null&&t.type===64;)t=t.parent;return t}function Mx(){return oe.lFrame.currentTNode}function yS(){let t=oe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Fu(t,e){let n=oe.lFrame;n.currentTNode=t,n.isParent=e}function Rx(){return oe.lFrame.isParent}function vS(){oe.lFrame.isParent=!1}function xS(t){return oe.lFrame.bindingIndex=t}function wS(){return oe.lFrame.bindingIndex++}function ES(){return oe.lFrame.inI18n}function bS(t,e){let n=oe.lFrame;n.bindingIndex=n.bindingRootIndex=t,mf(e)}function IS(){return oe.lFrame.currentDirectiveIndex}function mf(t){oe.lFrame.currentDirectiveIndex=t}function Px(t){oe.lFrame.currentQueryIndex=t}function DS(t){let e=t[ee];return e.type===2?e.declTNode:e.type===1?t[qt]:null}function Nx(t,e,n){if(n&Y.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&Y.Host);)if(i=DS(o),i===null||(o=o[Bs],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=oe.lFrame=Ox();return r.currentTNode=e,r.lView=t,!0}function Zf(t){let e=Ox(),n=t[ee];oe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Ox(){let t=oe.lFrame,e=t===null?null:t.child;return e===null?kx(t):e}function kx(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Fx(){let t=oe.lFrame;return oe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Vx=Fx;function Xf(){let t=Fx();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Lx(){return oe.lFrame.selectedIndex}function Hr(t){oe.lFrame.selectedIndex=t}function CS(){let t=oe.lFrame;return Cx(t.tView,t.selectedIndex)}function TS(){return oe.lFrame.currentNamespace}var jx=!0;function Bx(){return jx}function Ux(t){jx=t}function AS(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=bx(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function $x(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function cu(t,e,n){qx(t,e,3,n)}function uu(t,e,n,r){(t[$]&3)===n&&qx(t,e,n,r)}function tf(t,e){let n=t[$];(n&3)===e&&(n&=16383,n+=1,t[$]=n)}function qx(t,e,n,r){let i=r!==void 0?t[Ki]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Ki]+=65536),(a<o||o==-1)&&(SS(t,n,e,c),t[Ki]=(t[Ki]&4294901760)+c+2),c++}function Rv(t,e){nn(4,t,e);let n=_t(null);try{e.call(t)}finally{_t(n),nn(5,t,e)}}function SS(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[$]>>14<t[Ki]>>16&&(t[$]&3)===e&&(t[$]+=16384,Rv(a,o)):Rv(a,o)}var Ji=-1,Os=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function MS(t){return t instanceof Os}function RS(t){return(t.flags&8)!==0}function PS(t){return(t.flags&16)!==0}function Hx(t){return t!==Ji}function yu(t){return t&32767}function NS(t){return t>>16}function vu(t,e){let n=NS(t),r=e;for(;n>0;)r=r[Bs],n--;return r}var _f=!0;function Pv(t){let e=_f;return _f=t,e}var OS=256,zx=OS-1,Gx=5,kS=0,rn={};function FS(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Cs)&&(r=n[Cs]),r==null&&(r=n[Cs]=kS++);let i=r&zx,o=1<<i;e.data[t+(i>>Gx)]|=o}function Wx(t,e){let n=Kx(t,e);if(n!==-1)return n;let r=e[ee];r.firstCreatePass&&(t.injectorIndex=e.length,nf(r.data,t),nf(e,null),nf(r.blueprint,null));let i=Jf(t,e),o=t.injectorIndex;if(Hx(i)){let s=yu(i),a=vu(i,e),c=a[ee].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function nf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Kx(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Jf(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Jx(i),r===null)return Ji;if(n++,i=i[Bs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ji}function VS(t,e,n){FS(t,e,n)}function Qx(t,e,n){if(n&Y.Optional||t!==void 0)return t;Hf(e,"NodeInjector")}function Yx(t,e,n,r){if(n&Y.Optional&&r===void 0&&(r=null),!(n&(Y.Self|Y.Host))){let i=t[eo],o=St(void 0);try{return i?i.get(e,r,n&Y.Optional):sx(e,r,n&Y.Optional)}finally{St(o)}}return Qx(r,e,n)}function Zx(t,e,n,r=Y.Default,i){if(t!==null){if(e[$]&2048&&!(r&Y.Self)){let s=$S(t,e,n,r,rn);if(s!==rn)return s}let o=Xx(t,e,n,r,rn);if(o!==rn)return o}return Yx(e,n,r,i)}function Xx(t,e,n,r,i){let o=BS(n);if(typeof o=="function"){if(!Nx(e,t,r))return r&Y.Host?Qx(i,n,r):Yx(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&Y.Optional))Hf(n);else return s}finally{Vx()}}else if(typeof o=="number"){let s=null,a=Kx(t,e),c=Ji,u=r&Y.Host?e[sn][qt]:null;for((a===-1||r&Y.SkipSelf)&&(c=a===-1?Jf(t,e):e[a+8],c===Ji||!Ov(r,!1)?a=-1:(s=e[ee],a=yu(c),e=vu(c,e)));a!==-1;){let l=e[ee];if(Nv(o,a,l.data)){let d=LS(a,e,n,s,r,u);if(d!==rn)return d}c=e[a+8],c!==Ji&&Ov(r,e[ee].data[a+8]===u)&&Nv(o,a,e)?(s=l,a=yu(c),e=vu(c,e)):a=-1}}return i}function LS(t,e,n,r,i,o){let s=e[ee],a=s.data[t+8],c=r==null?ku(a)&&_f:r!=s&&(a.type&3)!==0,u=i&Y.Host&&o===a,l=jS(a,s,n,c,u);return l!==null?ks(e,s,l,a):rn}function jS(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,u=t.directiveEnd,l=o>>20,d=r?a:a+l,h=i?a+l:u;for(let f=d;f<h;f++){let v=s[f];if(f<c&&n===v||f>=c&&v.type===n)return f}if(i){let f=s[c];if(f&&Us(f)&&f.type===n)return c}return null}function ks(t,e,n,r){let i=t[n],o=e.data;if(MS(i)){let s=i;s.resolving&&AA(TA(o[n]));let a=Pv(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?St(s.injectImpl):null,l=Nx(t,r,Y.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&AS(n,o[n],e)}finally{u!==null&&St(u),Pv(a),s.resolving=!1,Vx()}}return i}function BS(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Cs)?t[Cs]:void 0;return typeof e=="number"?e>=0?e&zx:US:e}function Nv(t,e,n){let r=1<<t;return!!(n[e+(t>>Gx)]&r)}function Ov(t,e){return!(t&Y.Self)&&!(t&Y.Host&&e)}var Br=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Zx(this._tNode,this._lView,e,Pu(r),n)}};function US(){return new Br(cn(),ot())}function Vu(t){return js(()=>{let e=t.prototype.constructor,n=e[fu]||yf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[fu]||yf(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function yf(t){return ex(t)?()=>{let e=yf(Mt(t));return e&&e()}:to(t)}function $S(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[$]&2048&&!(s[$]&512);){let a=Xx(o,s,n,r|Y.Self,rn);if(a!==rn)return a;let c=o.parent;if(!c){let u=s[yx];if(u){let l=u.get(n,rn,r);if(l!==rn)return l}c=Jx(s),s=s[Bs]}o=c}return i}function Jx(t){let e=t[ee],n=e.type;return n===2?e.declTNode:n===1?t[qt]:null}var su="__parameters__";function qS(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function ew(t,e,n){return js(()=>{let r=qS(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,l){let d=c.hasOwnProperty(su)?c[su]:Object.defineProperty(c,su,{value:[]})[su];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function HS(t){let e=vt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function zS(t){return typeof t=="function"}function ep(t,e){t.forEach(n=>Array.isArray(n)?ep(n,e):e(n))}function tw(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function xu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var qs=ax(ew("Optional"),8);var nw=ax(ew("SkipSelf"),4);function GS(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(YS))}return o}return wu.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(u=>{i.template=u}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let u=i.styles.length,l=i.styleUrls;i.styleUrls.forEach((d,h)=>{a.push(""),s.push(r(d).then(f=>{a[u+h]=f,l.splice(l.indexOf(d),1),l.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(u=>{a.push(u),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>ZS(o));e.push(c)}),KS(),Promise.all(e).then(()=>{})}var wu=new Map,WS=new Set;function KS(){let t=wu;return wu=new Map,t}function QS(){return wu.size===0}function YS(t){return typeof t=="string"?t:t.text()}function ZS(t){WS.delete(t)}var no=new S(""),rw=new S("",-1),iw=new S(""),Eu=class{get(e,n=As){if(n===As){let r=new Error(`NullInjectorError: No provider for ${yt(e)}!`);throw r.name="NullInjectorError",r}return n}};function Lu(t){return{\u0275providers:t}}function XS(...t){return{\u0275providers:ow(!0,t),\u0275fromNgModule:!0}}function ow(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return ep(e,s=>{let a=s;vf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&sw(i,o),n}function sw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];tp(i,o=>{e(o,r)})}}function vf(t,e,n,r){if(t=Mt(t),!t)return!1;let i=null,o=wv(t),s=!o&&nr(t);if(!o&&!s){let c=t.ngModule;if(o=wv(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)vf(u,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{ep(o.imports,l=>{vf(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&sw(u,e)}if(!a){let u=to(i)||(()=>new i);e({provide:i,useFactory:u,deps:tn},i),e({provide:iw,useValue:i,multi:!0},i),e({provide:no,useValue:()=>b(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=t;tp(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function tp(t,e){for(let n of t)tx(n)&&(n=n.\u0275providers),Array.isArray(n)?tp(n,e):e(n)}var JS=ue({provide:String,useValue:ue});function aw(t){return t!==null&&typeof t=="object"&&JS in t}function eM(t){return!!(t&&t.useExisting)}function tM(t){return!!(t&&t.useFactory)}function xf(t){return typeof t=="function"}var ju=new S(""),lu={},nM={},rf;function np(){return rf===void 0&&(rf=new Eu),rf}var st=class{},Fs=class extends st{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ef(e,s=>this.processProvider(s)),this.records.set(rw,Qi(void 0,this)),i.has("environment")&&this.records.set(st,Qi(void 0,this));let o=this.records.get(ju);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(iw,tn,Y.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=er(this),r=St(void 0),i;try{return e()}finally{er(n),St(r)}}get(e,n=As,r=Y.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(vv))return e[vv](this);r=Pu(r);let i,o=er(this),s=St(void 0);try{if(!(r&Y.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=cM(e)&&Ru(e);u&&this.injectableDefInScope(u)?c=Qi(wf(e),lu):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Y.Self?np():this.parent;return n=r&Y.Optional&&n===As?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[pu]=a[pu]||[]).unshift(yt(e)),o)throw a;return LA(a,e,"R3InjectorError",this.source)}else throw a}finally{St(s),er(o)}}resolveInjectorInitializers(){let e=er(this),n=St(void 0),r;try{let i=this.get(no,tn,Y.Self);for(let o of i)o()}finally{er(e),St(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(yt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new B(205,!1)}processProvider(e){e=Mt(e);let n=xf(e)?e:Mt(e&&e.provide),r=iM(e);if(!xf(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Qi(void 0,lu,!0),i.factory=()=>hf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===lu&&(n.value=nM,n.value=n.factory()),typeof n.value=="object"&&n.value&&aM(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Mt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function wf(t){let e=Ru(t),n=e!==null?e.factory:to(t);if(n!==null)return n;if(t instanceof S)throw new B(204,!1);if(t instanceof Function)return rM(t);throw new B(204,!1)}function rM(t){if(t.length>0)throw new B(204,!1);let n=SA(t);return n!==null?()=>n.factory(t):()=>new t}function iM(t){if(aw(t))return Qi(void 0,t.useValue);{let e=oM(t);return Qi(e,lu)}}function oM(t,e,n){let r;if(xf(t)){let i=Mt(t);return to(i)||wf(i)}else if(aw(t))r=()=>Mt(t.useValue);else if(tM(t))r=()=>t.useFactory(...hf(t.deps||[]));else if(eM(t))r=()=>b(Mt(t.useExisting));else{let i=Mt(t&&(t.useClass||t.provide));if(sM(t))r=()=>new i(...hf(t.deps));else return to(i)||wf(i)}return r}function Qi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function sM(t){return!!t.deps}function aM(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function cM(t){return typeof t=="function"||typeof t=="object"&&t instanceof S}function Ef(t,e){for(let n of t)Array.isArray(n)?Ef(n,e):n&&tx(n)?Ef(n.\u0275providers,e):e(n)}function un(t,e){t instanceof Fs&&t.assertNotDestroyed();let n,r=er(t),i=St(void 0);try{return e()}finally{er(r),St(i)}}function uM(t){if(!ox()&&!kA())throw new B(-203,!1)}function kv(t,e=null,n=null,r){let i=cw(t,e,n,r);return i.resolveInjectorInitializers(),i}function cw(t,e=null,n=null,r,i=new Set){let o=[n||tn,XS(t)];return r=r||(typeof t=="object"?void 0:yt(t)),new Fs(o,e||np(),r||null,i)}var zt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return kv({name:""},i,r,"");{let o=r.name??"";return kv({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=As,e.NULL=new Eu,e.\u0275prov=O({token:e,providedIn:"any",factory:()=>b(rw)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var bf;function uw(t){bf=t}function lM(){if(bf!==void 0)return bf;if(typeof document<"u")return document;throw new B(210,!1)}var Bu=new S("",{providedIn:"root",factory:()=>dM}),dM="ng",rp=new S(""),Ze=new S("",{providedIn:"platform",factory:()=>"unknown"});var ip=new S("",{providedIn:"root",factory:()=>lM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function lw(t){return t instanceof Function?t():t}function hM(t){return(t??I(zt)).get(Ze)==="browser"}function dw(t){return(t.flags&128)===128}var zr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(zr||{});var hw=new Map,fM=0;function pM(){return fM++}function gM(t){hw.set(t[Ou],t)}function mM(t){hw.delete(t[Ou])}var Fv="__ngContext__";function ro(t,e){jr(e)?(t[Fv]=e[Ou],gM(e)):t[Fv]=e}var _M;function op(t,e){return _M(t,e)}function Yi(t,e,n,r,i){if(r!=null){let o,s=!1;kn(r)?o=r:jr(r)&&(s=!0,r=r[On]);let a=Pn(r);t===0&&n!==null?i==null?_w(e,n,a):bu(e,n,a,i||null,!0):t===1&&n!==null?bu(e,n,a,i||null,!0):t===2?NM(e,a,s):t===3&&e.destroyNode(a),o!=null&&kM(e,t,o,n,i)}}function yM(t,e){return t.createText(e)}function fw(t,e,n){return t.createElement(e,n)}function vM(t,e){pw(t,e),e[On]=null,e[qt]=null}function xM(t,e,n,r,i,o){r[On]=i,r[qt]=e,Uu(t,r,n,1,i,o)}function pw(t,e){Uu(t,e,e[xt],2,null,null)}function wM(t){let e=t[Rs];if(!e)return of(t[ee],t);for(;e;){let n=null;if(jr(e))n=e[Rs];else{let r=e[Rt];r&&(n=r)}if(!n){for(;e&&!e[$t]&&e!==t;)jr(e)&&of(e[ee],e),e=e[Ye];e===null&&(e=t),jr(e)&&of(e[ee],e),n=e&&e[$t]}e=n}}function EM(t,e,n,r){let i=Rt+r,o=n.length;r>0&&(n[i-1][$t]=e),r<o-Rt?(e[$t]=n[i],tw(n,Rt+r,e)):(n.push(e),e[$t]=null),e[Ye]=n;let s=e[Gf];s!==null&&n!==s&&bM(s,e);let a=e[Wf];a!==null&&a.insertView(t),gf(e),e[$]|=128}function bM(t,e){let n=t[_u],i=e[Ye][Ye][sn];e[sn]!==i&&(t[$]|=Kf.HasTransplantedViews),n===null?t[_u]=[e]:n.push(e)}function gw(t,e){let n=t[_u],r=n.indexOf(e);n.splice(r,1)}function If(t,e){if(t.length<=Rt)return;let n=Rt+e,r=t[n];if(r){let i=r[Gf];i!==null&&i!==t&&gw(i,r),e>0&&(t[n-1][$t]=r[$t]);let o=xu(t,Rt+e);vM(r[ee],r);let s=o[Wf];s!==null&&s.detachView(o[ee]),r[Ye]=null,r[$t]=null,r[$]&=-129}return r}function mw(t,e){if(!(e[$]&256)){let n=e[xt];n.destroyNode&&Uu(t,e,n,3,null,null),wM(e)}}function of(t,e){if(!(e[$]&256)){e[$]&=-129,e[$]|=256,e[Ur]&&zy(e[Ur]),DM(t,e),IM(t,e),e[ee].type===1&&e[xt].destroy();let n=e[Gf];if(n!==null&&kn(e[Ye])){n!==e[Ye]&&gw(n,e);let r=e[Wf];r!==null&&r.detachView(t)}mM(e)}}function IM(t,e){let n=t.cleanup,r=e[Ms];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Ms]=null);let i=e[tr];if(i!==null){e[tr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function DM(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Os)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];nn(4,a,c);try{c.call(a)}finally{nn(5,a,c)}}else{nn(4,i,o);try{o.call(i)}finally{nn(5,i,o)}}}}}function CM(t,e,n){return TM(t,e.parent,n)}function TM(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[On];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===on.None||o===on.Emulated)return null}return Ht(r,n)}}function bu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function _w(t,e,n){t.appendChild(e,n)}function Vv(t,e,n,r,i){r!==null?bu(t,e,n,r,i):_w(t,e,n)}function AM(t,e,n,r){t.removeChild(e,n,r)}function sp(t,e){return t.parentNode(e)}function SM(t,e){return t.nextSibling(e)}function MM(t,e,n){return PM(t,e,n)}function RM(t,e,n){return t.type&40?Ht(t,n):null}var PM=RM,Lv;function yw(t,e,n,r){let i=CM(t,r,e),o=e[xt],s=r.parent||e[qt],a=MM(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Vv(o,i,n[c],a,!1);else Vv(o,i,n,a,!1);Lv!==void 0&&Lv(o,r,e,n,i)}function du(t,e){if(e!==null){let n=e.type;if(n&3)return Ht(e,t);if(n&4)return Df(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return du(t,r);{let i=t[e.index];return kn(i)?Df(-1,i):Pn(i)}}else{if(n&32)return op(e,t)()||Pn(t[e.index]);{let r=vw(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ns(t[sn]);return du(i,r)}else return du(t,e.next)}}}return null}function vw(t,e){if(e!==null){let r=t[sn][qt],i=e.projection;return r.projection[i]}return null}function Df(t,e){let n=Rt+t+1;if(n<e.length){let r=e[n],i=r[ee].firstChild;if(i!==null)return du(r,i)}return e[qr]}function NM(t,e,n){let r=sp(t,e);r&&AM(t,r,e,n)}function ap(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&ro(Pn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)ap(t,e,n.child,r,i,o,!1),Yi(e,t,i,a,o);else if(c&32){let u=op(n,r),l;for(;l=u();)Yi(e,t,i,l,o);Yi(e,t,i,a,o)}else c&16?OM(t,e,r,n,i,o):Yi(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Uu(t,e,n,r,i,o){ap(n,r,t.firstChild,e,i,o,!1)}function OM(t,e,n,r,i,o){let s=n[sn],c=s[qt].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];Yi(e,t,i,l,o)}else{let u=c,l=s[Ye];dw(r)&&(u.flags|=128),ap(t,e,u,l,i,o,!0)}}function kM(t,e,n,r,i){let o=n[qr],s=Pn(n);o!==s&&Yi(e,t,r,o,i);for(let a=Rt;a<n.length;a++){let c=n[a];Uu(c[ee],c,t,e,r,o)}}function FM(t,e,n){t.setAttribute(e,"style",n)}function xw(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function ww(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&ff(t,e,r),i!==null&&xw(t,e,i),o!==null&&FM(t,e,o)}var Cf=class{};var VM="h",LM="b";var jM=()=>null;function cp(t,e,n=!1){return jM(t,e,n)}var Tf=class{},Iu=class{};function BM(t){let e=Error(`No component factory found for ${yt(t)}.`);return e[UM]=t,e}var UM="ngComponent";var Af=class{resolveComponentFactory(e){throw BM(e)}},$u=(()=>{let e=class e{};e.NULL=new Af;let t=e;return t})();function $M(){return up(cn(),ot())}function up(t,e){return new Gr(Ht(t,e))}var Gr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=$M;let t=e;return t})();var Vs=class{},co=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>qM();let t=e;return t})();function qM(){let t=ot(),e=cn(),n=or(e.index,t);return(jr(n)?n:t)[xt]}var HM=(()=>{let e=class e{};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),sf={};function Du(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(Pn(o)),kn(o)&&zM(o,r);let s=n.type;if(s&8)Du(t,e,n.child,r);else if(s&32){let a=op(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=vw(e,n);if(Array.isArray(a))r.push(...a);else{let c=Ns(e[sn]);Du(c[ee],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function zM(t,e){for(let n=Rt;n<t.length;n++){let r=t[n],i=r[ee].firstChild;i!==null&&Du(r[ee],r,i,e)}t[qr]!==t[On]&&e.push(t[qr])}var Ew=[];function GM(t){return t[Ur]??WM(t)}function WM(t){let e=Ew.pop()??Object.create(QM);return e.lView=t,e}function KM(t){t.lView[Ur]!==t&&(t.lView=null,Ew.push(t))}var QM=fe(N({},$y),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ps(t.lView)},consumerOnSignalRead(){this.lView[Ur]=this}});function bw(t){return Dw(t[Rs])}function Iw(t){return Dw(t[$t])}function Dw(t){for(;t!==null&&!kn(t);)t=t[$t];return t}var YM="ngOriginalError";function af(t){return t[YM]}var an=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&af(e);for(;n&&af(n);)n=af(n);return n||null}},Cw=new S("",{providedIn:"root",factory:()=>I(an).handleError.bind(void 0)});var Tw=!1,ZM=new S("",{providedIn:"root",factory:()=>Tw});var Aw={};function Sw(t=1){Mw(ao(),ot(),Lx()+t,!1)}function Mw(t,e,n,r){if(!r)if((e[$]&3)===3){let o=t.preOrderCheckHooks;o!==null&&cu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&uu(e,o,0,n)}Hr(n)}function Wr(t,e=Y.Default){let n=ot();if(n===null)return b(t,e);let r=cn();return Zx(r,n,Mt(t),e)}function Rw(){let t="invalid";throw new Error(t)}function Pw(t,e,n,r,i,o){let s=_t(null);try{let a=null;i&Mn.SignalBased&&(a=e[r][Uy]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Mn.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):Ex(e,a,r,o)}finally{_t(s)}}function XM(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Hr(~i);else{let o=i,s=n[++r],a=n[++r];bS(s,o);let c=e[o];a(2,c)}}}finally{Hr(-1)}}function lp(t,e,n,r,i,o,s,a,c,u,l){let d=e.blueprint.slice();return d[On]=i,d[$]=r|4|128|8|64,(u!==null||t&&t[$]&2048)&&(d[$]|=2048),Tx(d),d[Ye]=d[Bs]=t,d[Rn]=n,d[rr]=s||t&&t[rr],d[xt]=a||t&&t[xt],d[eo]=c||t&&t[eo]||null,d[qt]=o,d[Ou]=pM(),d[gu]=l,d[yx]=u,d[sn]=e.type==2?t[sn]:d,d}function dp(t,e,n,r,i){let o=t.data[e];if(o===null)o=JM(t,e,n,r,i),ES()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=yS();o.injectorIndex=s===null?-1:s.injectorIndex}return Fu(o,!0),o}function JM(t,e,n,r,i){let o=Mx(),s=Rx(),a=s?o:o&&o.parent,c=t.data[e]=sR(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function Nw(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Ow(t,e,n,r,i){let o=Lx(),s=r&2;try{Hr(-1),s&&e.length>$r&&Mw(t,e,$r,!1),nn(s?2:0,i),n(r,i)}finally{Hr(o),nn(s?3:1,i)}}function kw(t,e,n){if(xx(e)){let r=_t(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{_t(r)}}}function eR(t,e,n){Sx()&&(pR(t,e,n,Ht(n,e)),(n.flags&64)===64&&jw(t,e,n))}function tR(t,e,n=Ht){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function Fw(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Vw(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Vw(t,e,n,r,i,o,s,a,c,u,l){let d=$r+r,h=d+i,f=nR(d,h),v=typeof u=="function"?u():u;return f[ee]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:v,incompleteFirstPass:!1,ssrId:l}}function nR(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Aw);return n}function rR(t,e,n,r){let o=r.get(ZM,Tw)||n===on.ShadowDom,s=t.selectRootElement(e,o);return iR(s),s}function iR(t){oR(t)}var oR=()=>null;function sR(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return gS()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function jv(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Mn.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}t===0?Bv(r,n,u,a,c):Bv(r,n,u,a)}return r}function Bv(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function aR(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=o[l],h=n?n.get(d):null,f=h?h.inputs:null,v=h?h.outputs:null;c=jv(0,d.inputs,l,c,f),u=jv(1,d.outputs,l,u,v);let y=c!==null&&s!==null&&!dx(e)?bR(c,l,s):null;a.push(y)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function cR(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function uR(t,e,n,r,i,o,s,a){let c=Ht(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(fp(t,n,l,r,i),ku(e)&&lR(n,e.index)):e.type&3?(r=cR(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function lR(t,e){let n=or(e,t);n[$]&16||(n[$]|=64)}function dR(t,e,n,r){if(Sx()){let i=r===null?null:{"":-1},o=mR(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Lw(t,e,n,s,i,a),i&&_R(n,r,i)}n.mergedAttrs=zf(n.mergedAttrs,n.attrs)}function Lw(t,e,n,r,i,o){for(let u=0;u<r.length;u++)VS(Wx(n,e),t,r[u].type);vR(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=Nw(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=zf(n.mergedAttrs,l.hostAttrs),xR(t,n,e,c,l),yR(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}aR(t,n,o)}function hR(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;fR(s)!=a&&s.push(a),s.push(n,r,o)}}function fR(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function pR(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;ku(n)&&wR(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Wx(n,e),ro(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],u=ks(e,t,a,n);if(ro(u,e),s!==null&&ER(e,a-i,u,c,n,s),Us(c)){let l=or(n.index,e);l[Rn]=ks(e,t,a,n)}}}function jw(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=IS();try{Hr(o);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];mf(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&gR(c,u)}}finally{Hr(-1),mf(s)}}function gR(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function mR(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(GA(e,s.selectors,!1))if(r||(r=[]),Us(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Sf(t,e,c)}else r.unshift(s),Sf(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Sf(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function _R(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new B(-301,!1);r.push(e[i],o)}}}function yR(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Us(e)&&(n[""]=t)}}function vR(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function xR(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=to(i.type,!0)),s=new Os(o,Us(i),Wr);t.blueprint[r]=s,n[r]=s,hR(t,e,r,Nw(t,n,i.hostVars,Aw),i)}function wR(t,e,n){let r=Ht(e,t),i=Fw(n),o=t[rr].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=hp(t,lp(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function ER(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],l=s[a++],d=s[a++];Pw(r,n,c,u,l,d)}}function bR(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function IR(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Bw(t,e){let n=t.contentQueries;if(n!==null){let r=_t(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Px(o),a.contentQueries(2,e[s],s)}}}finally{_t(r)}}}function hp(t,e){return t[Rs]?t[Av][$t]=e:t[Rs]=e,t[Av]=e,e}function Mf(t,e,n){Px(0);let r=_t(null);try{e(t,n)}finally{_t(r)}}function DR(t){return t[Ms]||(t[Ms]=[])}function CR(t){return t.cleanup||(t.cleanup=[])}function Uw(t,e){let n=t[eo],r=n?n.get(an,null):null;r&&r.handleError(e)}function fp(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],u=e[s],l=t.data[s];Pw(l,u,r,a,c,i)}}var $w=100;function qw(t,e=!0,n=0){let r=t[rr],i=r.rendererFactory,o=!1;o||i.begin?.();try{TR(t,n)}catch(s){throw e&&Uw(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function TR(t,e){Rf(t,e);let n=0;for(;Yf(t);){if(n===$w)throw new B(103,!1);n++,Rf(t,1)}}function AR(t,e,n,r){let i=e[$];if((i&256)===256)return;let o=!1;!o&&e[rr].inlineEffectRunner?.flush(),Zf(e);let s=null,a=null;!o&&SR(t)&&(a=GM(e),s=qy(a));try{Tx(e),xS(t.bindingStartIndex),n!==null&&Ow(t,e,n,2,r);let c=(i&3)===3;if(!o)if(c){let d=t.preOrderCheckHooks;d!==null&&cu(e,d,null)}else{let d=t.preOrderHooks;d!==null&&uu(e,d,0,null),tf(e,0)}if(MR(e),Hw(e,0),t.contentQueries!==null&&Bw(t,e),!o)if(c){let d=t.contentCheckHooks;d!==null&&cu(e,d)}else{let d=t.contentHooks;d!==null&&uu(e,d,1),tf(e,1)}XM(t,e);let u=t.components;u!==null&&Gw(e,u,0);let l=t.viewQuery;if(l!==null&&Mf(2,l,r),!o)if(c){let d=t.viewCheckHooks;d!==null&&cu(e,d)}else{let d=t.viewHooks;d!==null&&uu(e,d,2),tf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[ef]){for(let d of e[ef])d();e[ef]=null}o||(e[$]&=-73)}catch(c){throw Ps(e),c}finally{a!==null&&(Hy(a,s),KM(a)),Xf()}}function SR(t){return t.type!==2}function Hw(t,e){for(let n=bw(t);n!==null;n=Iw(n))for(let r=Rt;r<n.length;r++){let i=n[r];zw(i,e)}}function MR(t){for(let e=bw(t);e!==null;e=Iw(e)){if(!(e[$]&Kf.HasTransplantedViews))continue;let n=e[_u];for(let r=0;r<n.length;r++){let i=n[r],o=i[Ye];lS(i)}}}function RR(t,e,n){let r=or(e,t);zw(r,n)}function zw(t,e){Qf(t)&&Rf(t,e)}function Rf(t,e){let r=t[ee],i=t[$],o=t[Ur],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Nh(o)),o&&(o.dirty=!1),t[$]&=-9217,s)AR(r,t,r.template,t[Rn]);else if(i&8192){Hw(t,1);let a=r.components;a!==null&&Gw(t,a,1)}}function Gw(t,e,n){for(let r=0;r<e.length;r++)RR(t,e[r],n)}function pp(t){for(t[rr].changeDetectionScheduler?.notify();t;){t[$]|=64;let e=Ns(t);if(tS(t)&&!e)return t;t=e}return null}var io=class{get rootNodes(){let e=this._lView,n=e[ee];return Du(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Rn]}set context(e){this._lView[Rn]=e}get destroyed(){return(this._lView[$]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ye];if(kn(e)){let n=e[mu],r=n?n.indexOf(this):-1;r>-1&&(If(e,r),xu(n,r))}this._attachedToViewContainer=!1}mw(this._lView[ee],this._lView)}onDestroy(e){Ax(this._lView,e)}markForCheck(){pp(this._cdRefInjectingView||this._lView)}detach(){this._lView[$]&=-129}reattach(){gf(this._lView),this._lView[$]|=128}detectChanges(){this._lView[$]|=1024,qw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,pw(this._lView[ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e,gf(this._lView)}},Hs=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=PR;let t=e;return t})();function PR(t){return NR(cn(),ot(),(t&16)===16)}function NR(t,e,n){if(ku(t)&&!n){let r=or(t.index,e);return new io(r,r)}else if(t.type&47){let r=e[sn];return new io(r,e)}return null}var Ww=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=OR,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Pf=class extends Ww{constructor(e){super(),this._lView=e}onDestroy(e){return Ax(this._lView,e),()=>dS(this._lView,e)}};function OR(){return new Pf(ot())}var Uv=new Set;function qu(t){Uv.has(t)||(Uv.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Nf=class extends Ve{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=cf(o),i&&(i=cf(i)),s&&(s=cf(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ce&&e.add(a),a}};function cf(t){return e=>{setTimeout(t,void 0,e)}}var Qe=Nf;function $v(...t){}function kR(){let t=typeof vt.requestAnimationFrame=="function",e=vt[t?"requestAnimationFrame":"setTimeout"],n=vt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var J=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qe(!1),this.onMicrotaskEmpty=new Qe(!1),this.onStable=new Qe(!1),this.onError=new Qe(!1),typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=kR().nativeRequestAnimationFrame,LR(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new B(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,FR,$v,$v);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},FR={};function gp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function VR(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(vt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Of(t),t.isCheckStableRunning=!0,gp(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Of(t))}function LR(t){let e=()=>{VR(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(jR(a))return n.invokeTask(i,o,s,a);try{return qv(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Hv(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return qv(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),Hv(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Of(t),gp(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Of(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function qv(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Hv(t){t._nesting--,gp(t)}var kf=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qe,this.onMicrotaskEmpty=new Qe,this.onStable=new Qe,this.onError=new Qe}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function jR(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function BR(t="zone.js",e){return t==="noop"?new kf:t==="zone.js"?new J(e):t}var Zi=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Zi||{}),UR={destroy(){}};function mp(t,e){!e&&uM(mp);let n=e?.injector??I(zt);if(!hM(n))return UR;qu("NgAfterNextRender");let r=n.get(_p),i=r.handler??=new Vf,o=e?.phase??Zi.MixedReadWrite,s=()=>{i.unregister(c),a()},a=n.get(Ww).onDestroy(s),c=new Ff(n,o,()=>{s(),t()});return i.register(c),{destroy:s}}var Ff=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(J),this.errorHandler=e.get(an,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Vf=class{constructor(){this.executingCallbacks=!1,this.buckets={[Zi.EarlyRead]:new Set,[Zi.Write]:new Set,[Zi.MixedReadWrite]:new Set,[Zi.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},_p=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i();this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function $R(t,e){let n=or(e,t),r=n[ee];qR(r,n);let i=n[On];i!==null&&n[gu]===null&&(n[gu]=cp(i,n[eo])),Kw(r,n,n[Rn])}function qR(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Kw(t,e,n){Zf(e);try{let r=t.viewQuery;r!==null&&Mf(1,r,n);let i=t.template;i!==null&&Ow(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Bw(t,e),t.staticViewQueries&&Mf(2,t.viewQuery,n);let o=t.components;o!==null&&HR(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[$]&=-5,Xf()}}function HR(t,e){for(let n=0;n<e.length;n++)$R(t,e[n])}function Lf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=yv(i,a);else if(o==2){let c=a,u=e[++s];r=yv(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Cu=class extends $u{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=nr(e);return new oo(n,this.ngModule)}};function zv(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function zR(t){let e=t.toLowerCase();return e==="svg"?oS:e==="math"?sS:null}var jf=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Pu(r);let i=this.injector.get(e,sf,r);return i!==sf||n===sf?i:this.parentInjector.get(e,n,r)}},oo=class extends Iu{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=zv(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return zv(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=YA(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let o=i instanceof st?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new jf(e,o):e,a=s.get(Vs,null);if(a===null)throw new B(407,!1);let c=s.get(HM,null),u=s.get(_p,null),l=s.get(Cf,null),d={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:l},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",v=r?rR(h,r,this.componentDef.encapsulation,s):fw(h,f,zR(f)),y=512;this.componentDef.signals?y|=4096:this.componentDef.onPush||(y|=16);let m=null;v!==null&&(m=cp(v,s,!0));let E=Vw(0,null,null,1,0,null,null,null,null,null,null),R=lp(null,E,null,y,null,null,d,h,s,null,m);Zf(R);let D,P;try{let j=this.componentDef,H,de=null;j.findHostDirectiveDefs?(H=[],de=new Map,j.findHostDirectiveDefs(j,H,de),H.push(j)):H=[j];let Ct=GR(R,v),Th=WR(Ct,v,j,H,R,d,h);P=Cx(E,$r),v&&YR(h,j,v,r),n!==void 0&&ZR(P,this.ngContentSelectors,n),D=QR(Th,j,H,de,R,[XR]),Kw(E,R,null)}finally{Xf()}return new Bf(this.componentType,D,up(P,R),R,P)}},Bf=class extends Tf{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new io(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;fp(o[ee],o,i,e,n),this.previousInputValues.set(e,n);let s=or(this._tNode.index,o);pp(s)}}get injector(){return new Br(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function GR(t,e){let n=t[ee],r=$r;return t[r]=e,dp(n,r,2,"#host",null)}function WR(t,e,n,r,i,o,s){let a=i[ee];KR(r,t,e,s);let c=null;e!==null&&(c=cp(e,i[eo]));let u=o.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=lp(i,Fw(n),null,l,i[t.index],t,o,u,null,null,c);return a.firstCreatePass&&Sf(a,t,r.length-1),hp(i,d),i[t.index]=d}function KR(t,e,n,r){for(let i of t)e.mergedAttrs=zf(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Lf(e,e.mergedAttrs,!0),n!==null&&ww(r,n,e))}function QR(t,e,n,r,i,o){let s=cn(),a=i[ee],c=Ht(s,i);Lw(a,i,s,n,null,r);for(let l=0;l<n.length;l++){let d=s.directiveStart+l,h=ks(i,a,d,s);ro(h,i)}jw(a,i,s),c&&ro(c,i);let u=ks(i,a,s.directiveStart+s.componentOffset,s);if(t[Rn]=i[Rn]=u,o!==null)for(let l of o)l(u,e);return kw(a,s,t),u}function YR(t,e,n,r){if(r)ff(t,n,["ng-version","17.1.3"]);else{let{attrs:i,classes:o}=ZA(e.selectors[0]);i&&ff(t,n,i),o&&o.length>0&&xw(t,n,o.join(" "))}}function ZR(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function XR(){let t=cn();$x(ot()[ee],t)}var IB=new RegExp(`^(\\d+)*(${LM}|${VM})*(.*)`);var JR=()=>null;function Gv(t,e){return JR(t,e)}function Wv(t,e){return!e||e.firstChild===null||dw(t)}function eP(t,e,n,r=!0){let i=e[ee];if(EM(i,e,t,n),r){let s=Df(n,t),a=e[xt],c=sp(a,t[qr]);c!==null&&xM(i,t[qt],a,e,c,s)}let o=e[gu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}var Hu=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=tP;let t=e;return t})();function tP(){let t=cn();return rP(t,ot())}var nP=Hu,Qw=class extends nP{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return up(this._hostTNode,this._hostLView)}get injector(){return new Br(this._hostTNode,this._hostLView)}get parentInjector(){let e=Jf(this._hostTNode,this._hostLView);if(Hx(e)){let n=vu(e,this._hostLView),r=yu(e),i=n[ee].data[r+8];return new Br(i,n)}else return new Br(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Kv(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Rt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Gv(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Wv(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!zS(e),a;if(s)a=n;else{let v=n||{};a=v.index,r=v.injector,i=v.projectableNodes,o=v.environmentInjector||v.ngModuleRef}let c=s?e:new oo(nr(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let y=(s?u:this.parentInjector).get(st,null);y&&(o=y)}let l=nr(c.componentType??{}),d=Gv(this._lContainer,l?.id??null),h=d?.firstChild??null,f=c.create(u,i,h,o);return this.insertImpl(f.hostView,a,Wv(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(uS(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ye],u=new Qw(c,c[qt],c[Ye]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return eP(s,i,o,r),e.attachToViewContainerRef(),tw(uf(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Kv(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=If(this._lContainer,n);r&&(xu(uf(this._lContainer),n),mw(r[ee],r))}detach(e){let n=this._adjustIndex(e,-1),r=If(this._lContainer,n);return r&&xu(uf(this._lContainer),n)!=null?new io(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Kv(t){return t[mu]}function uf(t){return t[mu]||(t[mu]=[])}function rP(t,e){let n,r=e[t.index];return kn(r)?n=r:(n=IR(r,e,null,t),e[t.index]=n,hp(e,n)),oP(n,e,t,r),new Qw(n,t,e)}function iP(t,e){let n=t[xt],r=n.createComment(""),i=Ht(e,t),o=sp(n,i);return bu(n,o,r,SM(n,i),!1),r}var oP=sP;function sP(t,e,n,r){if(t[qr])return;let i;n.type&8?i=Pn(r):i=iP(e,n),t[qr]=i}var ir=class{},Ls=class{};var Tu=class extends ir{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Cu(this);let i=gx(e);this._bootstrapComponents=lw(i.bootstrap),this._r3Injector=cw(e,n,[{provide:ir,useValue:this},{provide:$u,useValue:this.componentFactoryResolver},...r],yt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Au=class extends Ls{constructor(e){super(),this.moduleType=e}create(e){return new Tu(this.moduleType,e,[])}};function aP(t,e,n){return new Tu(t,e,n)}var Uf=class extends ir{constructor(e){super(),this.componentFactoryResolver=new Cu(this),this.instance=null;let n=new Fs([...e.providers,{provide:ir,useValue:this},{provide:$u,useValue:this.componentFactoryResolver}],e.parent||np(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function zu(t,e,n=null){return new Uf({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Kr=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ze(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function cP(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function yp(t,e,n){let r=ot(),i=wS();if(cP(r,i,e)){let o=ao(),s=CS();uR(o,s,r,t,e,r[xt],n,!1)}return yp}function Qv(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";fp(t,n,o[s],s,r)}function uP(t,e,n,r,i,o){let s=e.consts,a=Mv(s,i),c=dp(e,t,2,r,a);return dR(e,n,c,Mv(s,o)),c.attrs!==null&&Lf(c,c.attrs,!1),c.mergedAttrs!==null&&Lf(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function ft(t,e,n,r){let i=ot(),o=ao(),s=$r+t,a=i[xt],c=o.firstCreatePass?uP(s,o,i,e,n,r):o.data[s],u=lP(o,i,c,a,e,t);i[s]=u;let l=wx(c);return Fu(c,!0),ww(a,u,c),(c.flags&32)!==32&&Bx()&&yw(o,i,u,c),hS()===0&&ro(u,i),fS(),l&&(eR(o,i,c),kw(o,c,i)),r!==null&&tR(i,c),ft}function pt(){let t=cn();Rx()?vS():(t=t.parent,Fu(t,!1));let e=t;mS(e)&&_S(),pS();let n=ao();return n.firstCreatePass&&($x(n,t),xx(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&RS(e)&&Qv(n,e,ot(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&PS(e)&&Qv(n,e,ot(),e.stylesWithoutHost,!1),pt}function uo(t,e,n,r){return ft(t,e,n,r),pt(),uo}var lP=(t,e,n,r,i,o)=>(Ux(!0),fw(r,i,TS()));var Su="en-US";var dP=Su;function hP(t){typeof t=="string"&&(dP=t.toLowerCase().replace(/_/g,"-"))}function lo(t){return!!t&&typeof t.then=="function"}function Yw(t){return!!t&&typeof t.subscribe=="function"}function zs(t,e,n,r){let i=ot(),o=ao(),s=cn();return pP(o,i,i[xt],s,t,e,r),zs}function fP(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Ms],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function pP(t,e,n,r,i,o,s){let a=wx(r),u=t.firstCreatePass&&CR(t),l=e[Rn],d=DR(e),h=!0;if(r.type&3||s){let y=Ht(r,e),m=s?s(y):y,E=d.length,R=s?P=>s(Pn(P[r.index])):r.index,D=null;if(!s&&a&&(D=fP(t,e,i,r.index)),D!==null){let P=D.__ngLastListenerFn__||D;P.__ngNextListenerFn__=o,D.__ngLastListenerFn__=o,h=!1}else{o=Zv(r,e,l,o,!1);let P=n.listen(m,i,o);d.push(o,P),u&&u.push(i,R,E,E+1)}}else o=Zv(r,e,l,o,!1);let f=r.outputs,v;if(h&&f!==null&&(v=f[i])){let y=v.length;if(y)for(let m=0;m<y;m+=2){let E=v[m],R=v[m+1],j=e[E][R].subscribe(o),H=d.length;d.push(o,j),u&&u.push(i,r.index,H,-(H+1))}}}function Yv(t,e,n,r){try{return nn(6,e,n),n(r)!==!1}catch(i){return Uw(t,i),!1}finally{nn(7,e,n)}}function Zv(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?or(t.index,e):e;pp(a);let c=Yv(e,n,r,s),u=o.__ngNextListenerFn__;for(;u;)c=Yv(e,n,u,s)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function ln(t,e=""){let n=ot(),r=ao(),i=t+$r,o=r.firstCreatePass?dp(r,i,1,e,null):r.data[i],s=gP(r,n,o,e,t);n[i]=s,Bx()&&yw(r,n,s,o),Fu(o,!1)}var gP=(t,e,n,r,i)=>(Ux(!0),yM(e[xt],r));var mP=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=ow(!1,r.type),o=i.length>0?zu([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=O({token:e,providedIn:"environment",factory:()=>new e(b(st))});let t=e;return t})();function Zw(t){qu("NgStandalone"),t.getStandaloneInjector=e=>e.get(mP).getOrCreateStandaloneInjector(t)}var au=null;function _P(t){au!==null&&(t.defaultEncapsulation!==au.defaultEncapsulation||t.preserveWhitespaces!==au.preserveWhitespaces)||(au=t)}var Nn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Xw=new Nn("17.1.3"),Gu=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),$f=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Wu=(()=>{let e=class e{compileModuleSync(r){return new Au(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=gx(r),s=lw(o.declarations).reduce((a,c)=>{let u=nr(c);return u&&a.push(new oo(u)),a},[]);return new $f(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yP=new S("");var vp=new S(""),Gs=new S(""),Ku=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,xp||(vP(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{J.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(b(J),b(Qu),b(Gs))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),Qu=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return xp?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function vP(t){xp=t}var xp,Yu=new S(""),Jw=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=I(Yu,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(lo(s))r.push(s);else if(Yw(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Zu=new S("");function xP(t,e,n){let r=new Au(n);return Promise.resolve(r)}function wP(){Gy(()=>{throw new B(600,!1)})}function EP(t){return t.isBoundToModule}function bP(t,e,n){try{let r=n();return lo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function eE(t,e){return Array.isArray(e)?e.reduce(eE,t):N(N({},t),e)}var Qr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=I(Cw),this.afterRenderEffectManager=I(_p),this.componentTypes=[],this.components=[],this.isStable=I(Kr).hasPendingTasks.pipe(L(r=>!r)),this._injector=I(st)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Iu;if(!this._injector.get(Jw).done){let f=!o&&px(r),v=!1;throw new B(405,v)}let a;o?a=r:a=this._injector.get($u).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=EP(a)?void 0:this._injector.get(ir),u=i||a.selector,l=a.create(zt.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(vp,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),hu(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new B(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let r=0;do{if(r===$w)throw new B(103,!1);let i=r===0;for(let{_lView:o,notifyErrorHandler:s}of this._views)!i&&!Jv(o)||this.detectChangesInView(o,s,i);this.afterRenderEffectManager.execute(),r++}while(this._views.some(({_lView:i})=>Jv(i)))}detectChangesInView(r,i,o){let s;o?(s=0,r[$]|=1024):r[$]&64?s=0:s=1,qw(r,i,s)}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;hu(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Zu,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>hu(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new B(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Xv(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}function Jv(t){return Yf(t)}var IP=(()=>{let e=class e{constructor(){this.zone=I(J),this.applicationRef=I(Qr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function DP(t){return[{provide:J,useFactory:t},{provide:no,multi:!0,useFactory:()=>{let e=I(IP,{optional:!0});return()=>e.initialize()}},{provide:no,multi:!0,useFactory:()=>{let e=I(AP);return()=>{e.initialize()}}},{provide:Cw,useFactory:CP}]}function CP(){let t=I(J),e=I(an);return n=>t.runOutsideAngular(()=>e.handleError(n))}function TP(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var AP=(()=>{let e=class e{constructor(){this.subscription=new Ce,this.initialized=!1,this.zone=I(J),this.pendingTasks=I(Kr)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{J.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{J.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function SP(){return typeof $localize<"u"&&$localize.locale||Su}var wp=new S("",{providedIn:"root",factory:()=>I(wp,Y.Optional|Y.SkipSelf)||SP()});var tE=new S(""),nE=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=BR(i?.ngZone,TP({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{let s=aP(r.moduleType,this.injector,DP(()=>o)),a=s.injector.get(an,null);return o.runOutsideAngular(()=>{let c=o.onError.subscribe({next:u=>{a.handleError(u)}});s.onDestroy(()=>{hu(this._modules,s),c.unsubscribe()})}),bP(a,o,()=>{let c=s.injector.get(Jw);return c.runInitializers(),c.donePromise.then(()=>{let u=s.injector.get(wp,Su);return hP(u||Su),this._moduleDoBootstrap(s),s})})})}bootstrapModule(r,i=[]){let o=eE({},i);return xP(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(r){let i=r.injector.get(Qr);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new B(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new B(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(tE,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(b(zt))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Ts=null,rE=new S("");function MP(t){if(Ts&&!Ts.get(rE,!1))throw new B(400,!1);wP(),Ts=t;let e=t.get(nE);return NP(t),e}function Ep(t,e,n=[]){let r=`Platform: ${e}`,i=new S(r);return(o=[])=>{let s=iE();if(!s||s.injector.get(rE,!1)){let a=[...n,...o,{provide:i,useValue:!0}];t?t(a):MP(RP(a,r))}return PP(i)}}function RP(t=[],e){return zt.create({name:e,providers:[{provide:ju,useValue:"platform"},{provide:tE,useValue:new Set([()=>Ts=null])},...t]})}function PP(t){let e=iE();if(!e)throw new B(401,!1);return e}function iE(){return Ts?.get(nE)??null}function NP(t){t.get(rp,null)?.forEach(n=>n())}function bp(){return!1}var oE=Ep(null,"core",[]),sE=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(b(Qr))},e.\u0275mod=Ee({type:e}),e.\u0275inj=we({});let t=e;return t})();function aE(t){let e=nr(t);if(!e)return null;let n=new oo(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var dE=null;function Yr(){return dE}function hE(t){dE??=t}var Xu=class{},Xe=new S(""),Cp=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>I(VP),providedIn:"platform"});let t=e;return t})(),fE=new S(""),VP=(()=>{let e=class e extends Cp{constructor(){super(),this._doc=I(Xe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Yr().getBaseHref(this._doc)}onPopState(r){let i=Yr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Yr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Tp(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function cE(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Fn(t){return t&&t[0]!=="?"?"?"+t:t}var Zr=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>I(Ap),providedIn:"root"});let t=e;return t})(),pE=new S(""),Ap=(()=>{let e=class e extends Zr{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??I(Xe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Tp(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Fn(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Fn(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Fn(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(b(Cp),b(pE,8))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),gE=(()=>{let e=class e extends Zr{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Tp(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Fn(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Fn(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(b(Cp),b(pE,8))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),fo=(()=>{let e=class e{constructor(r){this._subject=new Qe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=BP(cE(uE(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Fn(i))}normalize(r){return e.stripTrailingSlash(jP(this._basePath,uE(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Fn(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Fn(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Fn,e.joinWithSlash=Tp,e.stripTrailingSlash=cE,e.\u0275fac=function(i){return new(i||e)(b(Zr))},e.\u0275prov=O({token:e,factory:()=>LP(),providedIn:"root"});let t=e;return t})();function LP(){return new fo(b(Zr))}function jP(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function uE(t){return t.replace(/\/index.html$/,"")}function BP(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Ju(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var mE=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ee({type:e}),e.\u0275inj=we({});let t=e;return t})(),Sp="browser",UP="server";function $P(t){return t===Sp}function Xr(t){return t===UP}var _E=(()=>{let e=class e{};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>$P(I(Ze))?new Ip(I(Xe),window):new Dp});let t=e;return t})(),Ip=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=qP(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function qP(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Dp=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},ho=class{};var Ks=class{},tl=class{},Jr=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Rp=class{encodeKey(e){return yE(e)}encodeValue(e){return yE(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function WP(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var KP=/%(\d[a-f0-9])/gi,QP={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function yE(t){return encodeURIComponent(t).replace(KP,(e,n)=>QP[n]??e)}function el(t){return`${t}`}var sr=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Rp,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=WP(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(el):[el(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(el(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(el(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Pp=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function YP(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function vE(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function xE(t){return typeof Blob<"u"&&t instanceof Blob}function wE(t){return typeof FormData<"u"&&t instanceof FormData}function ZP(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Ws=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(YP(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Jr,this.context??=new Pp,!this.params)this.params=new sr,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:vE(this.body)||xE(this.body)||wE(this.body)||ZP(this.body)||typeof this.body=="string"?this.body:this.body instanceof sr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||wE(this.body)?null:xE(this.body)?this.body.type||null:vE(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof sr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.body!==void 0?e.body:this.body,s=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,a=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,c=e.headers||this.headers,u=e.params||this.params,l=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),u)),new t(n,r,o,{params:u,headers:c,context:l,reportProgress:a,responseType:i,withCredentials:s})}},po=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(po||{}),Qs=class{constructor(e,n=il.Ok,r="OK"){this.headers=e.headers||new Jr,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Np=class t extends Qs{constructor(e={}){super(e),this.type=po.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},nl=class t extends Qs{constructor(e={}){super(e),this.type=po.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},rl=class extends Qs{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},il=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(il||{});function Mp(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var XP=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof Ws)s=r;else{let u;o.headers instanceof Jr?u=o.headers:u=new Jr(o.headers);let l;o.params&&(o.params instanceof sr?l=o.params:l=new sr({fromObject:o.params})),s=new Ws(r,i,o.body!==void 0?o.body:null,{headers:u,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=F(s).pipe(An(u=>this.handler.handle(u)));if(r instanceof Ws||o.observe==="events")return a;let c=a.pipe(Le(u=>u instanceof nl));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(L(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(L(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(L(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(L(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new sr().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,Mp(o,i))}post(r,i,o={}){return this.request("POST",r,Mp(o,i))}put(r,i,o={}){return this.request("PUT",r,Mp(o,i))}};e.\u0275fac=function(i){return new(i||e)(b(Ks))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function DE(t,e){return e(t)}function JP(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function eN(t,e,n){return(r,i)=>un(n,()=>e(r,o=>t(o,i)))}var tN=new S(""),Op=new S(""),nN=new S(""),rN=new S("");function iN(){let t=null;return(e,n)=>{t===null&&(t=(I(tN,{optional:!0})??[]).reduceRight(JP,DE));let r=I(Kr),i=r.add();return t(e,n).pipe(Jn(()=>r.remove(i)))}}var EE=(()=>{let e=class e extends Ks{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=I(Kr);let o=I(rN,{optional:!0});this.backend=o??r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(Op),...this.injector.get(nN,[])]));this.chain=o.reduceRight((s,a)=>eN(s,a,this.injector),DE)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(Jn(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(b(tl),b(st))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();var oN=/^\)\]\}',?\n/;function sN(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var bE=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new B(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?ie(i.\u0275loadImpl()):F(null)).pipe(me(()=>new Z(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((m,E)=>a.setRequestHeader(m,E.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let m=r.detectContentTypeHeader();m!==null&&a.setRequestHeader("Content-Type",m)}if(r.responseType){let m=r.responseType.toLowerCase();a.responseType=m!=="json"?m:"text"}let c=r.serializeBody(),u=null,l=()=>{if(u!==null)return u;let m=a.statusText||"OK",E=new Jr(a.getAllResponseHeaders()),R=sN(a)||r.url;return u=new Np({headers:E,status:a.status,statusText:m,url:R}),u},d=()=>{let{headers:m,status:E,statusText:R,url:D}=l(),P=null;E!==il.NoContent&&(P=typeof a.response>"u"?a.responseText:a.response),E===0&&(E=P?il.Ok:0);let j=E>=200&&E<300;if(r.responseType==="json"&&typeof P=="string"){let H=P;P=P.replace(oN,"");try{P=P!==""?JSON.parse(P):null}catch(de){P=H,j&&(j=!1,P={error:de,text:P})}}j?(s.next(new nl({body:P,headers:m,status:E,statusText:R,url:D||void 0})),s.complete()):s.error(new rl({error:P,headers:m,status:E,statusText:R,url:D||void 0}))},h=m=>{let{url:E}=l(),R=new rl({error:m,status:a.status||0,statusText:a.statusText||"Unknown Error",url:E||void 0});s.error(R)},f=!1,v=m=>{f||(s.next(l()),f=!0);let E={type:po.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(E.total=m.total),r.responseType==="text"&&a.responseText&&(E.partialText=a.responseText),s.next(E)},y=m=>{let E={type:po.UploadProgress,loaded:m.loaded};m.lengthComputable&&(E.total=m.total),s.next(E)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),r.reportProgress&&(a.addEventListener("progress",v),c!==null&&a.upload&&a.upload.addEventListener("progress",y)),a.send(c),s.next({type:po.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),r.reportProgress&&(a.removeEventListener("progress",v),c!==null&&a.upload&&a.upload.removeEventListener("progress",y)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(b(ho))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),CE=new S(""),aN="XSRF-TOKEN",cN=new S("",{providedIn:"root",factory:()=>aN}),uN="X-XSRF-TOKEN",lN=new S("",{providedIn:"root",factory:()=>uN}),ol=class{},dN=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ju(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(b(Xe),b(Ze),b(cN))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function hN(t,e){let n=t.url.toLowerCase();if(!I(CE)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=I(ol).getToken(),i=I(lN);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var TE=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(TE||{});function fN(t,e){return{\u0275kind:t,\u0275providers:e}}function pN(...t){let e=[XP,bE,EE,{provide:Ks,useExisting:EE},{provide:tl,useExisting:bE},{provide:Op,useValue:hN,multi:!0},{provide:CE,useValue:!0},{provide:ol,useClass:dN}];for(let n of t)e.push(...n.\u0275providers);return Lu(e)}var IE=new S("");function gN(){return fN(TE.LegacyInterceptors,[{provide:IE,useFactory:iN},{provide:Op,useExisting:IE,multi:!0}])}var AE=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ee({type:e}),e.\u0275inj=we({providers:[pN(gN())]});let t=e;return t})();var Vp=class extends Xu{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Lp=class t extends Vp{static makeCurrent(){hE(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=mN();return n==null?null:_N(n)}resetBaseElement(){Ys=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ju(document.cookie,e)}},Ys=null;function mN(){return Ys=Ys||document.querySelector("base"),Ys?Ys.getAttribute("href"):null}function _N(t){return new URL(t,document.baseURI).pathname}var jp=class{addToWindow(e){vt.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new B(5103,!1);return o},vt.getAllAngularTestabilities=()=>e.getAllTestabilities(),vt.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=vt.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};vt.frameworkStabilizers||(vt.frameworkStabilizers=[]),vt.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?Yr().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},yN=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),Bp=new S(""),PE=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new B(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(b(Bp),b(J))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),sl=class{constructor(e){this._doc=e}},kp="ng-app-id",NE=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Xr(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${kp}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(kp),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(kp,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(b(Xe),b(Bu),b(ip,8),b(Ze))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),Fp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$p=/%COMP%/g,OE="%COMP%",vN=`_nghost-${OE}`,xN=`_ngcontent-${OE}`,wN=!0,EN=new S("",{providedIn:"root",factory:()=>wN});function bN(t){return xN.replace($p,t)}function IN(t){return vN.replace($p,t)}function kE(t,e){return e.map(n=>n.replace($p,t))}var SE=(()=>{let e=class e{constructor(r,i,o,s,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Xr(c),this.defaultRenderer=new Zs(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===on.ShadowDom&&(i=fe(N({},i),{encapsulation:on.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof al?o.applyToHost(r):o instanceof Xs&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case on.Emulated:s=new al(u,l,i,this.appId,d,a,c,h);break;case on.ShadowDom:return new Up(u,l,r,i,a,c,this.nonce,h);default:s=new Xs(u,l,i,d,a,c,h);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(b(PE),b(NE),b(Bu),b(EN),b(Xe),b(Ze),b(J),b(ip))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),Zs=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Fp[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(ME(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(ME(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new B(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Fp[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Fp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(zr.DashCase|zr.Important)?e.style.setProperty(n,r,i&zr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&zr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Yr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function ME(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Up=class extends Zs{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=kE(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Xs=class extends Zs{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?kE(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},al=class extends Xs{constructor(e,n,r,i,o,s,a,c){let u=i+"-"+r.id;super(e,n,r,o,s,a,c,u),this.contentAttr=bN(u),this.hostAttr=IN(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},DN=(()=>{let e=class e extends sl{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(b(Xe))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),RE=["alt","control","meta","shift"],CN={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},TN={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},AN=(()=>{let e=class e extends sl{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Yr().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),RE.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=s,i.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let o=CN[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),RE.forEach(a=>{if(a!==o){let c=TN[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(b(Xe))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function SN(){Lp.makeCurrent()}function MN(){return new an}function RN(){return uw(document),document}var PN=[{provide:Ze,useValue:Sp},{provide:rp,useValue:SN,multi:!0},{provide:Xe,useFactory:RN,deps:[]}],FE=Ep(oE,"browser",PN),NN=new S(""),ON=[{provide:Gs,useClass:jp,deps:[]},{provide:vp,useClass:Ku,deps:[J,Qu,Gs]},{provide:Ku,useClass:Ku,deps:[J,Qu,Gs]}],kN=[{provide:ju,useValue:"root"},{provide:an,useFactory:MN,deps:[]},{provide:Bp,useClass:DN,multi:!0,deps:[Xe,J,Ze]},{provide:Bp,useClass:AN,multi:!0,deps:[Xe]},SE,NE,PE,{provide:Vs,useExisting:SE},{provide:ho,useClass:yN,deps:[]},[]],VE=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:Bu,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(b(NN,12))},e.\u0275mod=Ee({type:e}),e.\u0275inj=we({providers:[...kN,...ON],imports:[mE,sE]});let t=e;return t})();var LE=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(b(Xe))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var W="primary",fa=Symbol("RouteTitle"),Wp=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function vo(t){return new Wp(t)}function VN(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function LN(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!dn(t[n],e[n]))return!1;return!0}function dn(t,e){let n=t?Kp(t):void 0,r=e?Kp(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!KE(t[i],e[i]))return!1;return!0}function Kp(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function KE(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function QE(t){return t.length>0?t[t.length-1]:null}function lr(t){return Wh(t)?t:lo(t)?ie(Promise.resolve(t)):F(t)}var jN={exact:ZE,subset:XE},YE={exact:BN,subset:UN,ignored:()=>!0};function BE(t,e,n){return jN[n.paths](t.root,e.root,n.matrixParams)&&YE[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function BN(t,e){return dn(t,e)}function ZE(t,e,n){if(!ti(t.segments,e.segments)||!ll(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!ZE(t.children[r],e.children[r],n))return!1;return!0}function UN(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>KE(t[n],e[n]))}function XE(t,e,n){return JE(t,e,e.segments,n)}function JE(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ti(i,n)||e.hasChildren()||!ll(i,n,r))}else if(t.segments.length===n.length){if(!ti(t.segments,n)||!ll(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!XE(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ti(t.segments,i)||!ll(t.segments,i,r)||!t.children[W]?!1:JE(t.children[W],e,o,r)}}function ll(t,e,n){return e.every((r,i)=>YE[n](t[i].parameters,r.parameters))}var ar=class{constructor(e=new se([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=vo(this.queryParams),this._queryParamMap}toString(){return HN.serialize(this)}},se=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dl(this)}},ei=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=vo(this.parameters),this._parameterMap}toString(){return tb(this)}};function $N(t,e){return ti(t,e)&&t.every((n,r)=>dn(n.parameters,e[r].parameters))}function ti(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function qN(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===W&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==W&&(n=n.concat(e(i,r)))}),n}var pa=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>new oa,providedIn:"root"});let t=e;return t})(),oa=class{parse(e){let n=new Yp(e);return new ar(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Js(e.root,!0)}`,r=WN(e.queryParams),i=typeof e.fragment=="string"?`#${zN(e.fragment)}`:"";return`${n}${r}${i}`}},HN=new oa;function dl(t){return t.segments.map(e=>tb(e)).join("/")}function Js(t,e){if(!t.hasChildren())return dl(t);if(e){let n=t.children[W]?Js(t.children[W],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==W&&r.push(`${i}:${Js(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=qN(t,(r,i)=>i===W?[Js(t.children[W],!1)]:[`${i}:${Js(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[W]!=null?`${dl(t)}/${n[0]}`:`${dl(t)}/(${n.join("//")})`}}function eb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cl(t){return eb(t).replace(/%3B/gi,";")}function zN(t){return encodeURI(t)}function Qp(t){return eb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hl(t){return decodeURIComponent(t)}function UE(t){return hl(t.replace(/\+/g,"%20"))}function tb(t){return`${Qp(t.path)}${GN(t.parameters)}`}function GN(t){return Object.entries(t).map(([e,n])=>`;${Qp(e)}=${Qp(n)}`).join("")}function WN(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${cl(n)}=${cl(i)}`).join("&"):`${cl(n)}=${cl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var KN=/^[^\/()?;#]+/;function qp(t){let e=t.match(KN);return e?e[0]:""}var QN=/^[^\/()?;=#]+/;function YN(t){let e=t.match(QN);return e?e[0]:""}var ZN=/^[^=?&#]+/;function XN(t){let e=t.match(ZN);return e?e[0]:""}var JN=/^[^&#]+/;function e2(t){let e=t.match(JN);return e?e[0]:""}var Yp=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new se([],{}):new se([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[W]=new se(e,n)),r}parseSegment(){let e=qp(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new B(4009,!1);return this.capture(e),new ei(hl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=YN(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=qp(this.remaining);i&&(r=i,this.capture(r))}e[hl(n)]=hl(r)}parseQueryParam(e){let n=XN(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=e2(this.remaining);s&&(r=s,this.capture(r))}let i=UE(n),o=UE(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=qp(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new B(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=W);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[W]:new se([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new B(4011,!1)}};function nb(t){return t.segments.length>0?new se([],{[W]:t}):t}function rb(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=rb(i);if(r===W&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new se(t.segments,e);return t2(n)}function t2(t){if(t.numberOfChildren===1&&t.children[W]){let e=t.children[W];return new se(t.segments.concat(e.segments),e.children)}return t}function xo(t){return t instanceof ar}function n2(t,e,n=null,r=null){let i=ib(t);return ob(i,e,n,r)}function ib(t){let e;function n(o){let s={};for(let c of o.children){let u=n(c);s[c.outlet]=u}let a=new se(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=nb(r);return e??i}function ob(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Hp(i,i,i,n,r);let o=r2(e);if(o.toRoot())return Hp(i,i,new se([],{}),n,r);let s=i2(o,i,t),a=s.processChildren?na(s.segmentGroup,s.index,o.commands):ab(s.segmentGroup,s.index,o.commands);return Hp(i,s.segmentGroup,a,n,r)}function fl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function sa(t){return typeof t=="object"&&t!=null&&t.outlets}function Hp(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let s;t===e?s=n:s=sb(t,e,n);let a=nb(rb(s));return new ar(a,o,i)}function sb(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=sb(o,e,n)}),new se(t.segments,r)}var pl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&fl(r[0]))throw new B(4003,!1);let i=r.find(sa);if(i&&i!==QE(r))throw new B(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function r2(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new pl(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new pl(n,e,r)}var _o=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function i2(t,e,n){if(t.isAbsolute)return new _o(e,!0,0);if(!n)return new _o(e,!1,NaN);if(n.parent===null)return new _o(n,!0,0);let r=fl(t.commands[0])?0:1,i=n.segments.length-1+r;return o2(n,i,t.numberOfDoubleDots)}function o2(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new B(4005,!1);i=r.segments.length}return new _o(r,!1,i-o)}function s2(t){return sa(t[0])?t[0].outlets:{[W]:t}}function ab(t,e,n){if(t??=new se([],{}),t.segments.length===0&&t.hasChildren())return na(t,e,n);let r=a2(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new se(t.segments.slice(0,r.pathIndex),{});return o.children[W]=new se(t.segments.slice(r.pathIndex),t.children),na(o,0,i)}else return r.match&&i.length===0?new se(t.segments,{}):r.match&&!t.hasChildren()?Zp(t,e,n):r.match?na(t,0,i):Zp(t,e,n)}function na(t,e,n){if(n.length===0)return new se(t.segments,{});{let r=s2(n),i={};if(Object.keys(r).some(o=>o!==W)&&t.children[W]&&t.numberOfChildren===1&&t.children[W].segments.length===0){let o=na(t.children[W],e,n);return new se(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=ab(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new se(t.segments,i)}}function a2(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(sa(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!qE(c,u,s))return o;r+=2}else{if(!qE(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Zp(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(sa(o)){let c=c2(o.outlets);return new se(r,c)}if(i===0&&fl(n[0])){let c=t.segments[e];r.push(new ei(c.path,$E(n[0]))),i++;continue}let s=sa(o)?o.outlets[W]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&fl(a)?(r.push(new ei(s,$E(a))),i+=2):(r.push(new ei(s,{})),i++)}return new se(r,{})}function c2(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Zp(new se([],{}),0,r))}),e}function $E(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function qE(t,e,n){return t==n.path&&dn(e,n.parameters)}var ra="imperative",Be=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Be||{}),Nt=class{constructor(e,n){this.id=e,this.url=n}},wo=class extends Nt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Be.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Vn=class extends Nt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Be.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Pt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Pt||{}),gl=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(gl||{}),cr=class extends Nt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Be.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ur=class extends Nt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Be.NavigationSkipped}},aa=class extends Nt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Be.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ml=class extends Nt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Be.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xp=class extends Nt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Be.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jp=class extends Nt{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Be.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},eg=class extends Nt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Be.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tg=class extends Nt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Be.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ng=class{constructor(e){this.route=e,this.type=Be.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},rg=class{constructor(e){this.route=e,this.type=Be.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ig=class{constructor(e){this.snapshot=e,this.type=Be.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},og=class{constructor(e){this.snapshot=e,this.type=Be.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sg=class{constructor(e){this.snapshot=e,this.type=Be.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ag=class{constructor(e){this.snapshot=e,this.type=Be.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_l=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Be.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ca=class{},ua=class{constructor(e){this.url=e}};var cg=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ga,this.attachRef=null}},ga=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new cg,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=ug(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=ug(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=lg(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return lg(e,this._root).map(n=>n.value)}};function ug(t,e){if(t===e.value)return e;for(let n of e.children){let r=ug(t,n);if(r)return r}return null}function lg(t,e){if(t===e.value)return[e];for(let n of e.children){let r=lg(t,n);if(r.length)return r.unshift(e),r}return[]}var Et=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function mo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var vl=class extends yl{constructor(e,n){super(e),this.snapshot=n,xg(this,e)}toString(){return this.snapshot.toString()}};function cb(t){let e=u2(t),n=new ze([new ei("",{})]),r=new ze({}),i=new ze({}),o=new ze({}),s=new ze(""),a=new Eo(n,r,o,s,i,W,t,e.root);return a.snapshot=e.root,new vl(new Et(a,[]),e)}function u2(t){let e={},n={},r={},i="",o=new la([],e,r,i,n,W,t,null,{});return new xl("",new Et(o,[]))}var Eo=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(L(u=>u[fa]))??F(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(L(e=>vo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(L(e=>vo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function vg(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:N(N({},e.params),t.params),data:N(N({},e.data),t.data),resolve:N(N(N(N({},t.data),e.data),i?.data),t._resolvedData)}:r={params:N({},t.params),data:N({},t.data),resolve:N(N({},t.data),t._resolvedData??{})},i&&lb(i)&&(r.resolve[fa]=i.title),r}var la=class{get title(){return this.data?.[fa]}constructor(e,n,r,i,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=vo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=vo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},xl=class extends yl{constructor(e,n){super(n),this.url=e,xg(this,n)}toString(){return ub(this._root)}};function xg(t,e){e.value._routerState=t,e.children.forEach(n=>xg(t,n))}function ub(t){let e=t.children.length>0?` { ${t.children.map(ub).join(", ")} } `:"";return`${t.value}${e}`}function zp(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,dn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),dn(e.params,n.params)||t.paramsSubject.next(n.params),LN(e.url,n.url)||t.urlSubject.next(n.url),dn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function dg(t,e){let n=dn(t.params,e.params)&&$N(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||dg(t.parent,e.parent))}function lb(t){return typeof t.title=="string"||t.title===null}var l2=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=W,this.activateEvents=new Qe,this.deactivateEvents=new Qe,this.attachEvents=new Qe,this.detachEvents=new Qe,this.parentContexts=I(ga),this.location=I(Hu),this.changeDetector=I(Hs),this.environmentInjector=I(st),this.inputBinder=I(Dl,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new B(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new hg(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=so({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[$s]});let t=e;return t})(),hg=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Eo?this.route:e===ga?this.childContexts:this.parent.get(e,n)}},Dl=new S(""),HE=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=Is([i.queryParams,i.params,i.data]).pipe(me(([s,a,c],u)=>(c=N(N(N({},s),a),c),u===0?F(c):Promise.resolve(c)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=aE(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function d2(t,e,n){let r=da(t,e._root,n?n._root:void 0);return new vl(r,e)}function da(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=h2(t,e,n);return new Et(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>da(t,a)),s}}let r=f2(e.value),i=e.children.map(o=>da(t,o));return new Et(r,i)}}function h2(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return da(t,r,i);return da(t,r)})}function f2(t){return new Eo(new ze(t.url),new ze(t.params),new ze(t.queryParams),new ze(t.fragment),new ze(t.data),t.outlet,t.component,t)}var db="ngNavigationCancelingError";function hb(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=xo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=fb(!1,Pt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function fb(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[db]=!0,n.cancellationCode=e,n}function p2(t){return pb(t)&&xo(t.url)}function pb(t){return!!t&&t[db]}var g2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Nu({type:e,selectors:[["ng-component"]],standalone:!0,features:[Zw],decls:1,vars:0,template:function(i,o){i&1&&uo(0,"router-outlet")},dependencies:[l2],encapsulation:2});let t=e;return t})();function m2(t,e){return t.providers&&!t._injector&&(t._injector=zu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function wg(t){let e=t.children&&t.children.map(wg),n=e?fe(N({},t),{children:e}):N({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==W&&(n.component=g2),n}function hn(t){return t.outlet||W}function _2(t,e){let n=t.filter(r=>hn(r)===e);return n.push(...t.filter(r=>hn(r)!==e)),n}function ma(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var y2=(t,e,n,r)=>L(i=>(new fg(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),fg=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),zp(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=mo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=mo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=mo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=mo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new ag(o.value.snapshot))}),e.children.length&&this.forwardEvent(new og(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(zp(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),zp(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=ma(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},wl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},yo=class{constructor(e,n){this.component=e,this.route=n}};function v2(t,e,n){let r=t._root,i=e?e._root:null;return ea(r,i,n,[r.value])}function x2(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Io(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!nx(t)?t:e.get(t):r}function ea(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=mo(e);return t.children.forEach(s=>{w2(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ia(a,n.getContext(s),i)),i}function w2(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=E2(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new wl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ea(t,e,a?a.children:null,r,i):ea(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new yo(a.outlet.component,s))}else s&&ia(e,a,i),i.canActivateChecks.push(new wl(r)),o.component?ea(t,null,a?a.children:null,r,i):ea(t,null,n,r,i);return i}function E2(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ti(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ti(t.url,e.url)||!dn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dg(t,e)||!dn(t.queryParams,e.queryParams);case"paramsChange":default:return!dg(t,e)}}function ia(t,e,n){let r=mo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ia(s,e.children.getContext(o),n):ia(s,null,n):ia(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new yo(e.outlet.component,i)):n.canDeactivateChecks.push(new yo(null,i)):n.canDeactivateChecks.push(new yo(null,i))}function _a(t){return typeof t=="function"}function b2(t){return typeof t=="boolean"}function I2(t){return t&&_a(t.canLoad)}function D2(t){return t&&_a(t.canActivate)}function C2(t){return t&&_a(t.canActivateChild)}function T2(t){return t&&_a(t.canDeactivate)}function A2(t){return t&&_a(t.canMatch)}function gb(t){return t instanceof Tn||t?.name==="EmptyError"}var ul=Symbol("INITIAL_VALUE");function bo(){return me(t=>Is(t.map(e=>e.pipe(Sn(1),Lr(ul)))).pipe(L(e=>{for(let n of e)if(n!==!0){if(n===ul)return ul;if(n===!1||n instanceof ar)return n}return!0}),Le(e=>e!==ul),Sn(1)))}function S2(t,e){return Re(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?F(fe(N({},n),{guardsResult:!0})):M2(s,r,i,t).pipe(Re(a=>a&&b2(a)?R2(r,o,t,e):F(a)),L(a=>fe(N({},n),{guardsResult:a})))})}function M2(t,e,n,r){return ie(t).pipe(Re(i=>F2(i.component,i.route,n,e,r)),At(i=>i!==!0,!0))}function R2(t,e,n,r){return ie(e).pipe(An(i=>Gi(N2(i.route.parent,r),P2(i.route,r),k2(t,i.path,n),O2(t,i.route,n))),At(i=>i!==!0,!0))}function P2(t,e){return t!==null&&e&&e(new sg(t)),F(!0)}function N2(t,e){return t!==null&&e&&e(new ig(t)),F(!0)}function O2(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return F(!0);let i=r.map(o=>nu(()=>{let s=ma(e)??n,a=Io(o,s),c=D2(a)?a.canActivate(e,t):un(s,()=>a(e,t));return lr(c).pipe(At())}));return F(i).pipe(bo())}function k2(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>x2(s)).filter(s=>s!==null).map(s=>nu(()=>{let a=s.guards.map(c=>{let u=ma(s.node)??n,l=Io(c,u),d=C2(l)?l.canActivateChild(r,t):un(u,()=>l(r,t));return lr(d).pipe(At())});return F(a).pipe(bo())}));return F(o).pipe(bo())}function F2(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return F(!0);let s=o.map(a=>{let c=ma(e)??i,u=Io(a,c),l=T2(u)?u.canDeactivate(t,e,n,r):un(c,()=>u(t,e,n,r));return lr(l).pipe(At())});return F(s).pipe(bo())}function V2(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return F(!0);let o=i.map(s=>{let a=Io(s,t),c=I2(a)?a.canLoad(e,n):un(t,()=>a(e,n));return lr(c)});return F(o).pipe(bo(),mb(r))}function mb(t){return Uh(Te(e=>{if(xo(e))throw hb(t,e)}),L(e=>e===!0))}function L2(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return F(!0);let o=i.map(s=>{let a=Io(s,t),c=A2(a)?a.canMatch(e,n):un(t,()=>a(e,n));return lr(c)});return F(o).pipe(bo(),mb(r))}var ha=class{constructor(e){this.segmentGroup=e||null}},El=class extends Error{constructor(e){super(),this.urlTree=e}};function go(t){return zi(new ha(t))}function j2(t){return zi(new B(4e3,!1))}function B2(t){return zi(fb(!1,Pt.GuardRejected))}var pg=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return F(r);if(i.numberOfChildren>1||!i.children[W])return j2(e.redirectTo);i=i.children[W]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new El(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new ar(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new se(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new B(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},gg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function U2(t,e,n,r,i){let o=Eg(t,e,n);return o.matched?(r=m2(e,r),L2(r,e,n,i).pipe(L(s=>s===!0?o:N({},gg)))):F(o)}function Eg(t,e,n){if(e.path==="**")return $2(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?N({},gg):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||VN)(n,t,e);if(!i)return N({},gg);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?N(N({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function $2(t){return{matched:!0,parameters:t.length>0?QE(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function zE(t,e,n,r){return n.length>0&&z2(t,n,r)?{segmentGroup:new se(e,H2(r,new se(n,t.children))),slicedSegments:[]}:n.length===0&&G2(t,n,r)?{segmentGroup:new se(t.segments,q2(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new se(t.segments,t.children),slicedSegments:n}}function q2(t,e,n,r){let i={};for(let o of n)if(Cl(t,e,o)&&!r[hn(o)]){let s=new se([],{});i[hn(o)]=s}return N(N({},r),i)}function H2(t,e){let n={};n[W]=e;for(let r of t)if(r.path===""&&hn(r)!==W){let i=new se([],{});n[hn(r)]=i}return n}function z2(t,e,n){return n.some(r=>Cl(t,e,r)&&hn(r)!==W)}function G2(t,e,n){return n.some(r=>Cl(t,e,r))}function Cl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function W2(t,e,n,r){return hn(t)!==r&&(r===W||!Cl(e,n,t))?!1:Eg(e,t,n).matched}function K2(t,e,n){return e.length===0&&!t.children[n]}var mg=class{};function Q2(t,e,n,r,i,o,s="emptyOnly"){return new _g(t,e,n,r,i,s,o).recognize()}var Y2=31,_g=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new pg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new B(4002,`'${e.segmentGroup}'`)}recognize(){let e=zE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(L(n=>{let r=new la([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,{},W,this.rootComponentType,null,{}),i=new Et(r,n),o=new xl("",i),s=n2(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,W).pipe(Zn(r=>{if(r instanceof El)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ha?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=vg(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(L(o=>o instanceof Et?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return ie(i).pipe(An(o=>{let s=r.children[o],a=_2(n,o);return this.processSegmentGroup(e,a,s,o)}),Vr((o,s)=>(o.push(...s),o)),Xn(null),Zh(),Re(o=>{if(o===null)return go(r);let s=_b(o);return Z2(s),F(s)}))}processSegment(e,n,r,i,o,s){return ie(n).pipe(An(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(Zn(c=>{if(c instanceof ha)return F(null);throw c}))),At(a=>!!a),Zn(a=>{if(gb(a))return K2(r,i,o)?F(new mg):go(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return W2(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):go(i):go(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=Eg(n,i,o);if(!a)return go(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Y2&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe(Re(h=>this.processSegment(e,r,n,h.concat(l),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=U2(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(me(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(me(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new la(l,h,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,J2(r),hn(r),r.component??r._loadedComponent??null,r,eO(r)),{segmentGroup:v,slicedSegments:y}=zE(n,l,d,c);if(y.length===0&&v.hasChildren())return this.processChildren(u,c,v).pipe(L(E=>E===null?null:new Et(f,E)));if(c.length===0&&y.length===0)return F(new Et(f,[]));let m=hn(r)===o;return this.processSegment(u,c,v,y,m?W:o,!0).pipe(L(E=>new Et(f,E instanceof Et?[E]:[])))}))):go(n)))}getChildConfig(e,n,r){return n.children?F({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?F({routes:n._loadedRoutes,injector:n._loadedInjector}):V2(e,n,r,this.urlSerializer).pipe(Re(i=>i?this.configLoader.loadChildren(e,n).pipe(Te(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):B2(n))):F({routes:[],injector:e})}};function Z2(t){t.sort((e,n)=>e.value.outlet===W?-1:n.value.outlet===W?1:e.value.outlet.localeCompare(n.value.outlet))}function X2(t){let e=t.value.routeConfig;return e&&e.path===""}function _b(t){let e=[],n=new Set;for(let r of t){if(!X2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=_b(r.children);e.push(new Et(r.value,i))}return e.filter(r=>!n.has(r))}function J2(t){return t.data||{}}function eO(t){return t.resolve||{}}function tO(t,e,n,r,i,o){return Re(s=>Q2(t,e,n,r,s.extractedUrl,i,o).pipe(L(({state:a,tree:c})=>fe(N({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function nO(t,e){return Re(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return F(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of yb(c))s.add(u);let a=0;return ie(s).pipe(An(c=>o.has(c)?rO(c,r,t,e):(c.data=vg(c,c.parent,t).resolve,F(void 0))),Te(()=>a++),Wi(1),Re(c=>a===s.size?F(n):dt))})}function yb(t){let e=t.children.map(n=>yb(n)).flat();return[t,...e]}function rO(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!lb(i)&&(o[fa]=i.title),iO(o,t,e,r).pipe(L(s=>(t._resolvedData=s,t.data=vg(t,t.parent,n).resolve,null)))}function iO(t,e,n,r){let i=Kp(t);if(i.length===0)return F({});let o={};return ie(i).pipe(Re(s=>oO(t[s],e,n,r).pipe(At(),Te(a=>{o[s]=a}))),Wi(1),Qh(o),Zn(s=>gb(s)?dt:zi(s)))}function oO(t,e,n,r){let i=ma(e)??r,o=Io(t,i),s=o.resolve?o.resolve(e,n):un(i,()=>o(e,n));return lr(s)}function Gp(t){return me(e=>{let n=t(e);return n?ie(n).pipe(L(()=>e)):F(e)})}var vb=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===W);return i}getResolvedTitleForRoute(r){return r.data[fa]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>I(sO),providedIn:"root"});let t=e;return t})(),sO=(()=>{let e=class e extends vb{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(b(LE))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ya=new S("",{providedIn:"root",factory:()=>({})}),bl=new S(""),bg=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=I(Wu)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return F(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=lr(r.loadComponent()).pipe(L(xb),Te(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Jn(()=>{this.componentLoaders.delete(r)})),o=new Ui(i,()=>new Ve).pipe(Bi());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return F({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=aO(i,this.compiler,r,this.onLoadEndListener).pipe(Jn(()=>{this.childrenLoaders.delete(i)})),a=new Ui(s,()=>new Ve).pipe(Bi());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function aO(t,e,n,r){return lr(t.loadChildren()).pipe(L(xb),Re(i=>i instanceof Ls||Array.isArray(i)?F(i):ie(e.compileModuleAsync(i))),L(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(bl,[],{optional:!0,self:!0}).flat()),{routes:s.map(wg),injector:o}}))}function cO(t){return t&&typeof t=="object"&&"default"in t}function xb(t){return cO(t)?t.default:t}var Ig=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>I(uO),providedIn:"root"});let t=e;return t})(),uO=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wb=new S(""),Eb=new S("");function lO(t,e,n){let r=t.get(Eb),i=t.get(Xe);return t.get(J).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),dO(t))),{onViewTransitionCreated:c}=r;return c&&un(t,()=>c({transition:a,from:e,to:n})),s})}function dO(t){return new Promise(e=>{mp(e,{injector:t})})}var Dg=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ve,this.transitionAbortSubject=new Ve,this.configLoader=I(bg),this.environmentInjector=I(st),this.urlSerializer=I(pa),this.rootContexts=I(ga),this.location=I(fo),this.inputBindingEnabled=I(Dl,{optional:!0})!==null,this.titleStrategy=I(vb),this.options=I(ya,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=I(Ig),this.createViewTransition=I(wb,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>F(void 0),this.rootComponentType=null;let r=o=>this.events.next(new ng(o)),i=o=>this.events.next(new rg(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(fe(N(N({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new ze({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ra,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Le(s=>s.id!==0),L(s=>fe(N({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),me(s=>{this.currentTransition=s;let a=!1,c=!1;return F(s).pipe(Te(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?fe(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),me(u=>{let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new ur(u.id,this.urlSerializer.serialize(u.rawUrl),h,gl.IgnoredSameUrlNavigation)),u.resolve(null),dt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return F(u).pipe(me(h=>{let f=this.transitions?.getValue();return this.events.next(new wo(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?dt:Promise.resolve(h)}),tO(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Te(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=fe(N({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new ml(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:f,source:v,restoredState:y,extras:m}=u,E=new wo(h,this.urlSerializer.serialize(f),v,y);this.events.next(E);let R=cb(this.rootComponentType).snapshot;return this.currentTransition=s=fe(N({},u),{targetSnapshot:R,urlAfterRedirects:f,extras:fe(N({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,F(s)}else{let h="";return this.events.next(new ur(u.id,this.urlSerializer.serialize(u.extractedUrl),h,gl.IgnoredByUrlHandlingStrategy)),u.resolve(null),dt}}),Te(u=>{let l=new Xp(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),L(u=>(this.currentTransition=s=fe(N({},u),{guards:v2(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),S2(this.environmentInjector,u=>this.events.next(u)),Te(u=>{if(s.guardsResult=u.guardsResult,xo(u.guardsResult))throw hb(this.urlSerializer,u.guardsResult);let l=new Jp(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Le(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Pt.GuardRejected),!1)),Gp(u=>{if(u.guards.canActivateChecks.length)return F(u).pipe(Te(l=>{let d=new eg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),me(l=>{let d=!1;return F(l).pipe(nO(this.paramsInheritanceStrategy,this.environmentInjector),Te({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Pt.NoDataFromResolver)}}))}),Te(l=>{let d=new tg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Gp(u=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Te(f=>{d.component=f}),L(()=>{})));for(let f of d.children)h.push(...l(f));return h};return Is(l(u.targetSnapshot.root)).pipe(Xn(null),Sn(1))}),Gp(()=>this.afterPreactivation()),me(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?ie(d).pipe(L(()=>s)):F(s)}),L(u=>{let l=d2(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=fe(N({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Te(()=>{this.events.next(new ca)}),y2(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Sn(1),Te({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Vn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),Jh(this.transitionAbortSubject.pipe(Te(u=>{throw u}))),Jn(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",Pt.SupersededByNewNavigation),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Zn(u=>{if(c=!0,pb(u))this.events.next(new cr(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),p2(u)?this.events.next(new ua(u.url)):s.resolve(!1);else{this.events.next(new aa(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(l)}}return dt}))}))}cancelNavigationTransition(r,i,o){let s=new cr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hO(t){return t!==ra}var fO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>I(pO),providedIn:"root"});let t=e;return t})(),yg=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},pO=(()=>{let e=class e extends yg{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Vu(e)))(o||e)}})(),e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>I(gO),providedIn:"root"});let t=e;return t})(),gO=(()=>{let e=class e extends bb{constructor(){super(...arguments),this.location=I(fo),this.urlSerializer=I(pa),this.options=I(ya,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=I(Ig),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ar,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=cb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof wo)this.stateMemento=this.createStateMemento();else if(r instanceof ur)this.rawUrlTree=i.initialUrl;else if(r instanceof ml){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof ca?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof cr&&(r.code===Pt.GuardRejected||r.code===Pt.NoDataFromResolver)?this.restoreHistory(i):r instanceof aa?this.restoreHistory(i,!0):r instanceof Vn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=N(N({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=N(N({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Vu(e)))(o||e)}})(),e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ta=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ta||{});function Ib(t,e){t.events.pipe(Le(n=>n instanceof Vn||n instanceof cr||n instanceof aa||n instanceof ur),L(n=>n instanceof Vn||n instanceof ur?ta.COMPLETE:(n instanceof cr?n.code===Pt.Redirect||n.code===Pt.SupersededByNewNavigation:!1)?ta.REDIRECTING:ta.FAILED),Le(n=>n!==ta.REDIRECTING),Sn(1)).subscribe(()=>{e()})}function mO(t){throw t}var _O={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ni=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=I(Gu),this.stateManager=I(bb),this.options=I(ya,{optional:!0})||{},this.pendingTasks=I(Kr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=I(Dg),this.urlSerializer=I(pa),this.location=I(fo),this.urlHandlingStrategy=I(Ig),this._events=new Ve,this.errorHandler=this.options.errorHandler||mO,this.navigated=!1,this.routeReuseStrategy=I(fO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=I(bl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!I(Dl,{optional:!0}),this.eventsSubscription=new Ce,this.isNgZoneEnabled=I(J)instanceof J&&J.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof cr&&i.code!==Pt.Redirect&&i.code!==Pt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Vn)this.navigated=!0;else if(i instanceof ua){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||hO(o.source)};this.scheduleNavigation(a,ra,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}xO(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ra,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let u=N({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(wg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=N(N({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=ib(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return ob(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=xo(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,ra,null,i)}navigate(r,i={skipLocationChange:!1}){return vO(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=N({},_O):i===!1?o=N({},yO):o=i,xo(r))return BE(this.currentUrlTree,r,o);let s=this.parseUrl(r);return BE(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((h,f)=>{c=h,u=f});let d=this.pendingTasks.add();return Ib(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vO(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new B(4008,!1)}function xO(t){return!(t instanceof ca)&&!(t instanceof ua)}var Il=class{};var wO=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Le(r=>r instanceof Vn),An(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=zu(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return ie(o).pipe(Yn())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=F(null);let s=o.pipe(Re(a=>a===null?F(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return ie([s,a]).pipe(Yn())}else return s})}};e.\u0275fac=function(i){return new(i||e)(b(ni),b(Wu),b(st),b(Il),b(bg))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Db=new S(""),EO=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof wo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Vn?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof ur&&r.code===gl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof _l&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new _l(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){Rw()},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function bO(t){return t.routerState.root}function va(t,e){return{\u0275kind:t,\u0275providers:e}}function IO(){let t=I(zt);return e=>{let n=t.get(Qr);if(e!==n.components[0])return;let r=t.get(ni),i=t.get(Cb);t.get(Cg)===1&&r.initialNavigation(),t.get(Tb,null,Y.Optional)?.setUpPreloading(),t.get(Db,null,Y.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Cb=new S("",{factory:()=>new Ve}),Cg=new S("",{providedIn:"root",factory:()=>1});function DO(){return va(2,[{provide:Cg,useValue:0},{provide:Yu,multi:!0,deps:[zt],useFactory:e=>{let n=e.get(fE,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(ni),o=e.get(Cb);Ib(i,()=>{r(!0)}),e.get(Dg).afterPreactivation=()=>(r(!0),o.closed?F(void 0):o),i.initialNavigation()}))}}])}function CO(){return va(3,[{provide:Yu,multi:!0,useFactory:()=>{let e=I(ni);return()=>{e.setUpLocationChangeListener()}}},{provide:Cg,useValue:2}])}var Tb=new S("");function TO(t){return va(0,[{provide:Tb,useExisting:wO},{provide:Il,useExisting:t}])}function AO(){return va(8,[HE,{provide:Dl,useExisting:HE}])}function SO(t){let e=[{provide:wb,useValue:lO},{provide:Eb,useValue:N({skipNextTransition:!!t?.skipInitialTransition},t)}];return va(9,e)}var GE=new S("ROUTER_FORROOT_GUARD"),MO=[fo,{provide:pa,useClass:oa},ni,ga,{provide:Eo,useFactory:bO,deps:[ni]},bg,[]],Tg=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[MO,[],{provide:bl,multi:!0,useValue:r},{provide:GE,useFactory:OO,deps:[[ni,new qs,new nw]]},{provide:ya,useValue:i||{}},i?.useHash?PO():NO(),RO(),i?.preloadingStrategy?TO(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?kO(i):[],i?.bindToComponentInputs?AO().\u0275providers:[],i?.enableViewTransitions?SO().\u0275providers:[],FO()]}}static forChild(r){return{ngModule:e,providers:[{provide:bl,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(b(GE,8))},e.\u0275mod=Ee({type:e}),e.\u0275inj=we({});let t=e;return t})();function RO(){return{provide:Db,useFactory:()=>{let t=I(_E),e=I(J),n=I(ya),r=I(Dg),i=I(pa);return n.scrollOffset&&t.setOffset(n.scrollOffset),new EO(i,r,t,e,n)}}}function PO(){return{provide:Zr,useClass:gE}}function NO(){return{provide:Zr,useClass:Ap}}function OO(t){return"guarded"}function kO(t){return[t.initialNavigation==="disabled"?CO().\u0275providers:[],t.initialNavigation==="enabledBlocking"?DO().\u0275providers:[]]}var WE=new S("");function FO(){return[{provide:WE,useFactory:IO},{provide:Zu,multi:!0,useExisting:WE}]}var VO=[],Ab=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ee({type:e}),e.\u0275inj=we({imports:[Tg.forRoot(VO),Tg]});let t=e;return t})();var Sb=(()=>{let e=class e{constructor(r,i){this.elementRef=r,this.renderer=i,this.Colors={Default:"#8c84f3",Green:"#0bb7af",Blue:"#4880d4",Purple:"#845ae7",Red:"#f64e60",Gold:"#ffad2e",Dark:"#473e69"},this.backgroundColor="Default",this.ButtonCornner=""}onMouseEnter(){this.renderer.setStyle(this.elementRef.nativeElement,"opacity","0.7")}onMouseLeave(){this.renderer.setStyle(this.elementRef.nativeElement,"opacity","1")}GetColor(){return this.Colors[this.backgroundColor]}GetRound(){return this.ButtonCornner=="Round"?"100px":"6px"}ngAfterViewInit(){let r=this.elementRef.nativeElement;console.log(...jO("4267869522_37_4_37_32_4",this.GetRound()));let i={outline:"none",background:this.GetColor(),color:"#fff",border:"none",padding:"7px 15px","border-radius":this.GetRound(),cursor:"pointer","white-space":"nowrap"};Object.keys(i).forEach(o=>{this.renderer.setStyle(r,o,i[o])})}};e.\u0275fac=function(i){return new(i||e)(Wr(Gr),Wr(co))},e.\u0275dir=so({type:e,selectors:[["","ButtonStyle",""]],hostBindings:function(i,o){i&1&&zs("mouseenter",function(){return o.onMouseEnter()})("mouseleave",function(){return o.onMouseLeave()})},inputs:{backgroundColor:"backgroundColor",ButtonCornner:"ButtonCornner"}});let t=e;return t})();function LO(){try{return(0,eval)("globalThis._console_ninja")||(0,eval)(`/* https://github.com/wallabyjs/console-ninja#how-does-it-work */'use strict';var _0x49fb4d=_0x3f4d;(function(_0x1acf27,_0x12311b){var _0x4be3a1=_0x3f4d,_0x186b9e=_0x1acf27();while(!![]){try{var _0x3a0304=-parseInt(_0x4be3a1(0x237))/0x1*(-parseInt(_0x4be3a1(0x1f0))/0x2)+parseInt(_0x4be3a1(0x22a))/0x3*(-parseInt(_0x4be3a1(0x20b))/0x4)+parseInt(_0x4be3a1(0x1e7))/0x5+-parseInt(_0x4be3a1(0x1a3))/0x6+-parseInt(_0x4be3a1(0x203))/0x7*(-parseInt(_0x4be3a1(0x268))/0x8)+parseInt(_0x4be3a1(0x1e3))/0x9*(parseInt(_0x4be3a1(0x1a7))/0xa)+-parseInt(_0x4be3a1(0x206))/0xb*(parseInt(_0x4be3a1(0x1fe))/0xc);if(_0x3a0304===_0x12311b)break;else _0x186b9e['push'](_0x186b9e['shift']());}catch(_0x3f6fd1){_0x186b9e['push'](_0x186b9e['shift']());}}}(_0xa8b3,0x4644a));var j=Object[_0x49fb4d(0x20c)],H=Object['defineProperty'],G=Object['getOwnPropertyDescriptor'],ee=Object[_0x49fb4d(0x20a)],te=Object[_0x49fb4d(0x252)],ne=Object[_0x49fb4d(0x23b)][_0x49fb4d(0x238)],re=(_0x19e4ee,_0x307292,_0x5ddcd4,_0x597f3e)=>{var _0x276304=_0x49fb4d;if(_0x307292&&typeof _0x307292=='object'||typeof _0x307292==_0x276304(0x227)){for(let _0xe4d419 of ee(_0x307292))!ne[_0x276304(0x19a)](_0x19e4ee,_0xe4d419)&&_0xe4d419!==_0x5ddcd4&&H(_0x19e4ee,_0xe4d419,{'get':()=>_0x307292[_0xe4d419],'enumerable':!(_0x597f3e=G(_0x307292,_0xe4d419))||_0x597f3e[_0x276304(0x1f1)]});}return _0x19e4ee;},x=(_0x19f759,_0x1bd7e3,_0x13a753)=>(_0x13a753=_0x19f759!=null?j(te(_0x19f759)):{},re(_0x1bd7e3||!_0x19f759||!_0x19f759[_0x49fb4d(0x1bc)]?H(_0x13a753,_0x49fb4d(0x1f6),{'value':_0x19f759,'enumerable':!0x0}):_0x13a753,_0x19f759)),X=class{constructor(_0x2e25ed,_0x10638b,_0x4aa9da,_0x228426,_0x47794b){var _0x520f1a=_0x49fb4d;this['global']=_0x2e25ed,this[_0x520f1a(0x1cc)]=_0x10638b,this['port']=_0x4aa9da,this[_0x520f1a(0x1f3)]=_0x228426,this[_0x520f1a(0x196)]=_0x47794b,this[_0x520f1a(0x1bb)]=!0x0,this['_allowedToConnectOnSend']=!0x0,this[_0x520f1a(0x24e)]=!0x1,this[_0x520f1a(0x219)]=!0x1,this[_0x520f1a(0x247)]=_0x2e25ed[_0x520f1a(0x202)]?.['env']?.[_0x520f1a(0x21f)]===_0x520f1a(0x1e5),this[_0x520f1a(0x187)]=!this[_0x520f1a(0x1aa)][_0x520f1a(0x202)]?.[_0x520f1a(0x1d7)]?.[_0x520f1a(0x21e)]&&!this[_0x520f1a(0x247)],this['_WebSocketClass']=null,this[_0x520f1a(0x249)]=0x0,this[_0x520f1a(0x24c)]=0x14,this[_0x520f1a(0x189)]=_0x520f1a(0x26e),this[_0x520f1a(0x1ef)]=(this[_0x520f1a(0x187)]?_0x520f1a(0x209):'Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20restarting\\x20the\\x20process\\x20may\\x20help;\\x20also\\x20see\\x20')+this[_0x520f1a(0x189)];}async[_0x49fb4d(0x20f)](){var _0x58fff2=_0x49fb4d;if(this['_WebSocketClass'])return this[_0x58fff2(0x257)];let _0xefce6;if(this[_0x58fff2(0x187)]||this[_0x58fff2(0x247)])_0xefce6=this[_0x58fff2(0x1aa)][_0x58fff2(0x1a0)];else{if(this[_0x58fff2(0x1aa)][_0x58fff2(0x202)]?.[_0x58fff2(0x1b6)])_0xefce6=this[_0x58fff2(0x1aa)][_0x58fff2(0x202)]?.['_WebSocket'];else try{let _0x2ec1ee=await import('path');_0xefce6=(await import((await import('url'))[_0x58fff2(0x248)](_0x2ec1ee[_0x58fff2(0x1dd)](this[_0x58fff2(0x1f3)],'ws/index.js'))[_0x58fff2(0x244)]()))[_0x58fff2(0x1f6)];}catch{try{_0xefce6=require(require(_0x58fff2(0x1ed))[_0x58fff2(0x1dd)](this[_0x58fff2(0x1f3)],'ws'));}catch{throw new Error(_0x58fff2(0x24b));}}}return this[_0x58fff2(0x257)]=_0xefce6,_0xefce6;}['_connectToHostNow'](){var _0x5bfdea=_0x49fb4d;this[_0x5bfdea(0x219)]||this[_0x5bfdea(0x24e)]||this[_0x5bfdea(0x249)]>=this[_0x5bfdea(0x24c)]||(this[_0x5bfdea(0x25c)]=!0x1,this['_connecting']=!0x0,this[_0x5bfdea(0x249)]++,this[_0x5bfdea(0x1c7)]=new Promise((_0x5458b3,_0x1a3969)=>{var _0x47867b=_0x5bfdea;this[_0x47867b(0x20f)]()[_0x47867b(0x243)](_0x37146c=>{var _0x46e321=_0x47867b;let _0x3b0f16=new _0x37146c(_0x46e321(0x255)+(!this['_inBrowser']&&this[_0x46e321(0x196)]?_0x46e321(0x198):this[_0x46e321(0x1cc)])+':'+this[_0x46e321(0x1ea)]);_0x3b0f16[_0x46e321(0x1c2)]=()=>{var _0x17c575=_0x46e321;this[_0x17c575(0x1bb)]=!0x1,this[_0x17c575(0x21b)](_0x3b0f16),this[_0x17c575(0x230)](),_0x1a3969(new Error(_0x17c575(0x1b9)));},_0x3b0f16[_0x46e321(0x24a)]=()=>{var _0x4814fe=_0x46e321;this[_0x4814fe(0x187)]||_0x3b0f16[_0x4814fe(0x1d2)]&&_0x3b0f16['_socket'][_0x4814fe(0x223)]&&_0x3b0f16[_0x4814fe(0x1d2)][_0x4814fe(0x223)](),_0x5458b3(_0x3b0f16);},_0x3b0f16[_0x46e321(0x1eb)]=()=>{var _0x5dc92e=_0x46e321;this['_allowedToConnectOnSend']=!0x0,this[_0x5dc92e(0x21b)](_0x3b0f16),this[_0x5dc92e(0x230)]();},_0x3b0f16[_0x46e321(0x251)]=_0x2ca71b=>{var _0x50a3e9=_0x46e321;try{_0x2ca71b&&_0x2ca71b[_0x50a3e9(0x1ec)]&&this[_0x50a3e9(0x187)]&&JSON[_0x50a3e9(0x1db)](_0x2ca71b['data'])[_0x50a3e9(0x201)]===_0x50a3e9(0x1e4)&&this[_0x50a3e9(0x1aa)][_0x50a3e9(0x215)]['reload']();}catch{}};})[_0x47867b(0x243)](_0x41451c=>(this[_0x47867b(0x24e)]=!0x0,this[_0x47867b(0x219)]=!0x1,this[_0x47867b(0x25c)]=!0x1,this['_allowedToSend']=!0x0,this[_0x47867b(0x249)]=0x0,_0x41451c))['catch'](_0x4894d5=>(this['_connected']=!0x1,this['_connecting']=!0x1,console[_0x47867b(0x225)](_0x47867b(0x240)+this[_0x47867b(0x189)]),_0x1a3969(new Error('failed\\x20to\\x20connect\\x20to\\x20host:\\x20'+(_0x4894d5&&_0x4894d5[_0x47867b(0x1a9)])))));}));}[_0x49fb4d(0x21b)](_0x5c7c3d){var _0x1d9e5=_0x49fb4d;this[_0x1d9e5(0x24e)]=!0x1,this[_0x1d9e5(0x219)]=!0x1;try{_0x5c7c3d[_0x1d9e5(0x1eb)]=null,_0x5c7c3d['onerror']=null,_0x5c7c3d[_0x1d9e5(0x24a)]=null;}catch{}try{_0x5c7c3d[_0x1d9e5(0x193)]<0x2&&_0x5c7c3d[_0x1d9e5(0x25e)]();}catch{}}[_0x49fb4d(0x230)](){var _0x36144e=_0x49fb4d;clearTimeout(this['_reconnectTimeout']),!(this['_connectAttemptCount']>=this['_maxConnectAttemptCount'])&&(this[_0x36144e(0x1c9)]=setTimeout(()=>{var _0x47905e=_0x36144e;this['_connected']||this[_0x47905e(0x219)]||(this['_connectToHostNow'](),this[_0x47905e(0x1c7)]?.[_0x47905e(0x220)](()=>this['_attemptToReconnectShortly']()));},0x1f4),this[_0x36144e(0x1c9)][_0x36144e(0x223)]&&this[_0x36144e(0x1c9)]['unref']());}async[_0x49fb4d(0x1fb)](_0x2e3f38){var _0xa77768=_0x49fb4d;try{if(!this[_0xa77768(0x1bb)])return;this[_0xa77768(0x25c)]&&this[_0xa77768(0x1d9)](),(await this[_0xa77768(0x1c7)])[_0xa77768(0x1fb)](JSON['stringify'](_0x2e3f38));}catch(_0x5779df){console[_0xa77768(0x225)](this[_0xa77768(0x1ef)]+':\\x20'+(_0x5779df&&_0x5779df[_0xa77768(0x1a9)])),this[_0xa77768(0x1bb)]=!0x1,this[_0xa77768(0x230)]();}}};function b(_0x179cf7,_0x3d1613,_0x2867e6,_0x250dec,_0x5bfd42,_0x177690){var _0x589f00=_0x49fb4d;let _0x5b60de=_0x2867e6[_0x589f00(0x1e2)](',')['map'](_0x3f1c14=>{var _0x4513ce=_0x589f00;try{_0x179cf7['_console_ninja_session']||((_0x5bfd42==='next.js'||_0x5bfd42===_0x4513ce(0x1f8)||_0x5bfd42===_0x4513ce(0x1de)||_0x5bfd42===_0x4513ce(0x1ad))&&(_0x5bfd42+=!_0x179cf7[_0x4513ce(0x202)]?.[_0x4513ce(0x1d7)]?.[_0x4513ce(0x21e)]&&_0x179cf7[_0x4513ce(0x202)]?.[_0x4513ce(0x1fc)]?.[_0x4513ce(0x21f)]!==_0x4513ce(0x1e5)?'\\x20browser':_0x4513ce(0x259)),_0x179cf7[_0x4513ce(0x24d)]={'id':+new Date(),'tool':_0x5bfd42});let _0x16b5bb=new X(_0x179cf7,_0x3d1613,_0x3f1c14,_0x250dec,_0x177690);return _0x16b5bb[_0x4513ce(0x1fb)][_0x4513ce(0x1c0)](_0x16b5bb);}catch(_0x5d5a7d){return console[_0x4513ce(0x225)](_0x4513ce(0x1ca),_0x5d5a7d&&_0x5d5a7d[_0x4513ce(0x1a9)]),()=>{};}});return _0x34bf18=>_0x5b60de[_0x589f00(0x1b7)](_0x20ade0=>_0x20ade0(_0x34bf18));}function _0x3f4d(_0x4207f7,_0x16c298){var _0xa8b363=_0xa8b3();return _0x3f4d=function(_0x3f4ddd,_0x1d981a){_0x3f4ddd=_0x3f4ddd-0x185;var _0x3292a4=_0xa8b363[_0x3f4ddd];return _0x3292a4;},_0x3f4d(_0x4207f7,_0x16c298);}function W(_0x2db0ba){var _0x253c03=_0x49fb4d;let _0x481b52=function(_0x2fb3f1,_0xfce8fd){return _0xfce8fd-_0x2fb3f1;},_0x3b89e6;if(_0x2db0ba[_0x253c03(0x1cd)])_0x3b89e6=function(){var _0x3f1522=_0x253c03;return _0x2db0ba[_0x3f1522(0x1cd)][_0x3f1522(0x1cb)]();};else{if(_0x2db0ba[_0x253c03(0x202)]&&_0x2db0ba['process'][_0x253c03(0x256)]&&_0x2db0ba[_0x253c03(0x202)]?.[_0x253c03(0x1fc)]?.[_0x253c03(0x21f)]!=='edge')_0x3b89e6=function(){var _0x326d61=_0x253c03;return _0x2db0ba[_0x326d61(0x202)][_0x326d61(0x256)]();},_0x481b52=function(_0x2245c6,_0x494066){return 0x3e8*(_0x494066[0x0]-_0x2245c6[0x0])+(_0x494066[0x1]-_0x2245c6[0x1])/0xf4240;};else try{let {performance:_0x7fc435}=require('perf_hooks');_0x3b89e6=function(){var _0x25bad1=_0x253c03;return _0x7fc435[_0x25bad1(0x1cb)]();};}catch{_0x3b89e6=function(){return+new Date();};}}return{'elapsed':_0x481b52,'timeStamp':_0x3b89e6,'now':()=>Date['now']()};}function _0xa8b3(){var _0x48b6bb=['getOwnPropertyNames','5144stCSqN','create','_setNodeQueryPath','_consoleNinjaAllowedToStart','getWebSocketClass','_isMap','depth','[object\\x20Set]','autoExpandMaxDepth','symbol','location','_isNegativeZero','push','stackTraceLimit','_connecting','_Symbol','_disposeWebsocket','_processTreeNodeResult','value','node','NEXT_RUNTIME','catch','[object\\x20BigInt]','expressionsToEvaluate','unref','time','warn','elements','function','type','_property','27raOYgR','allStrLength','strLength','Set','object','totalStrLength','_attemptToReconnectShortly','length','autoExpandPreviousObjects','noFunctions','_regExpToString','nuxt','autoExpandLimit','5EfjEQL','hasOwnProperty','HTMLAllCollection','timeEnd','prototype','_propertyName','concat','console','_keyStrRegExp','logger\\x20failed\\x20to\\x20connect\\x20to\\x20host,\\x20see\\x20','negativeInfinity','boolean','then','toString','parent','slice','_inNextEdge','pathToFileURL','_connectAttemptCount','onopen','failed\\x20to\\x20find\\x20and\\x20load\\x20WebSocket','_maxConnectAttemptCount','_console_ninja_session','_connected','cappedProps','_cleanNode','onmessage','getPrototypeOf','stack','toLowerCase','ws://','hrtime','_WebSocketClass','_p_name','\\x20server','_type','null','_allowedToConnectOnSend','_getOwnPropertyNames','close','log','valueOf','getOwnPropertySymbols','error','String','index','_capIfString','root_exp_id','_treeNodePropertiesBeforeFullValue','113704JDUAAU','_undefined','number','_hasMapOnItsPath','_blacklistedProperty','127.0.0.1','https://tinyurl.com/37x8b79t','_quotedRegExp','_p_length','_inBrowser','_addObjectProperty','_webSocketErrorDocsLink','_numberRegExp','angular','substr',"c:\\\\Users\\\\progr\\\\.vscode\\\\extensions\\\\wallabyjs.console-ninja-1.0.289\\\\node_modules",'_isSet','[object\\x20Map]','match','1','_setNodeLabel','readyState','level','','dockerizedApp','reduceLimits','gateway.docker.internal','_console_ninja','call','string','Map','62037','undefined','_objectToString','WebSocket','_getOwnPropertySymbols','elapsed','1956048quYmFa','autoExpand','unknown','_dateToString','1180LvzpFP','Error','message','global','Buffer','rootExpression','angular','sortProps','capped','replace','serialize','unshift','_isArray','date','_p_','_WebSocket','forEach','_additionalMetadata','logger\\x20websocket\\x20error','1709150881674','_allowedToSend','__es'+'Module','_getOwnPropertyDescriptor','_setNodePermissions','_isPrimitiveWrapperType','bind','get','onerror','_isPrimitiveType','autoExpandPropertyCount','_HTMLAllCollection','bigint','_ws','_treeNodePropertiesAfterFullValue','_reconnectTimeout','logger\\x20failed\\x20to\\x20connect\\x20to\\x20host','now','host','performance','nan','_setNodeId','count','trace','_socket','[object\\x20Array]','negativeZero','RegExp','Boolean','versions','set','_connectToHostNow','test','parse','_addLoadNode','join','astro','Number','setter','[object\\x20Date]','split','37629eZIXEu','reload','edge','cappedElements','931905LapKax','_sortProps','props','port','onclose','data','path',["localhost","127.0.0.1","example.cypress.io","Mahmoud","192.168.1.104"],'_sendErrorMessage','115286mvsVVa','enumerable','getter','nodeModules','_addFunctionsNode','hits','default','constructor','remix','_setNodeExpandableState','includes','send','env','array','12nbkufu','_addProperty','isExpressionToEvaluate','method','process','161pyeWYe','stringify','current','7363983dacdXO','name','_setNodeExpressionPath','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20refreshing\\x20the\\x20page\\x20may\\x20help;\\x20also\\x20see\\x20'];_0xa8b3=function(){return _0x48b6bb;};return _0xa8b3();}function J(_0x54fd95,_0x150aad,_0x3e378a){var _0x555256=_0x49fb4d;if(_0x54fd95[_0x555256(0x20e)]!==void 0x0)return _0x54fd95[_0x555256(0x20e)];let _0x133aa9=_0x54fd95[_0x555256(0x202)]?.['versions']?.[_0x555256(0x21e)]||_0x54fd95[_0x555256(0x202)]?.[_0x555256(0x1fc)]?.[_0x555256(0x21f)]===_0x555256(0x1e5);return _0x133aa9&&_0x3e378a===_0x555256(0x235)?_0x54fd95['_consoleNinjaAllowedToStart']=!0x1:_0x54fd95['_consoleNinjaAllowedToStart']=_0x133aa9||!_0x150aad||_0x54fd95[_0x555256(0x215)]?.['hostname']&&_0x150aad[_0x555256(0x1fa)](_0x54fd95[_0x555256(0x215)]['hostname']),_0x54fd95[_0x555256(0x20e)];}function Y(_0x52ead8,_0x488bad,_0x1c6742,_0x593e90){var _0x59ed02=_0x49fb4d;_0x52ead8=_0x52ead8,_0x488bad=_0x488bad,_0x1c6742=_0x1c6742,_0x593e90=_0x593e90;let _0x162e99=W(_0x52ead8),_0x4f7dfd=_0x162e99['elapsed'],_0x523b6a=_0x162e99['timeStamp'];class _0x5402cc{constructor(){var _0x48baff=_0x3f4d;this[_0x48baff(0x23f)]=/^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/,this[_0x48baff(0x18a)]=/^(0|[1-9][0-9]*)$/,this[_0x48baff(0x185)]=/'([^\\\\']|\\\\')*'/,this['_undefined']=_0x52ead8['undefined'],this[_0x48baff(0x1c5)]=_0x52ead8[_0x48baff(0x239)],this[_0x48baff(0x1bd)]=Object['getOwnPropertyDescriptor'],this['_getOwnPropertyNames']=Object[_0x48baff(0x20a)],this[_0x48baff(0x21a)]=_0x52ead8['Symbol'],this[_0x48baff(0x234)]=RegExp[_0x48baff(0x23b)][_0x48baff(0x244)],this['_dateToString']=Date['prototype']['toString'];}['serialize'](_0x3716dc,_0x42b252,_0x312a4a,_0x19a23e){var _0x3f39eb=_0x3f4d,_0x1095fb=this,_0x50f7d4=_0x312a4a['autoExpand'];function _0x543af4(_0x1b9ee9,_0x6e0cac,_0xafbc9e){var _0xac3fef=_0x3f4d;_0x6e0cac['type']=_0xac3fef(0x1a5),_0x6e0cac[_0xac3fef(0x262)]=_0x1b9ee9[_0xac3fef(0x1a9)],_0x2953a6=_0xafbc9e[_0xac3fef(0x21e)][_0xac3fef(0x205)],_0xafbc9e[_0xac3fef(0x21e)][_0xac3fef(0x205)]=_0x6e0cac,_0x1095fb[_0xac3fef(0x267)](_0x6e0cac,_0xafbc9e);}try{_0x312a4a[_0x3f39eb(0x194)]++,_0x312a4a[_0x3f39eb(0x1a4)]&&_0x312a4a[_0x3f39eb(0x232)][_0x3f39eb(0x217)](_0x42b252);var _0x3d7ff9,_0x3059e2,_0x2f29b7,_0x32acc0,_0x55e3f9=[],_0x300a89=[],_0x1d094d,_0x3459b6=this[_0x3f39eb(0x25a)](_0x42b252),_0x61b33c=_0x3459b6==='array',_0x466d79=!0x1,_0x549262=_0x3459b6==='function',_0xde1723=this[_0x3f39eb(0x1c3)](_0x3459b6),_0x1a0a1d=this[_0x3f39eb(0x1bf)](_0x3459b6),_0x59d471=_0xde1723||_0x1a0a1d,_0x1a7aaa={},_0x5391b1=0x0,_0x2bb1ef=!0x1,_0x2953a6,_0x1532bc=/^(([1-9]{1}[0-9]*)|0)$/;if(_0x312a4a[_0x3f39eb(0x211)]){if(_0x61b33c){if(_0x3059e2=_0x42b252[_0x3f39eb(0x231)],_0x3059e2>_0x312a4a[_0x3f39eb(0x226)]){for(_0x2f29b7=0x0,_0x32acc0=_0x312a4a[_0x3f39eb(0x226)],_0x3d7ff9=_0x2f29b7;_0x3d7ff9<_0x32acc0;_0x3d7ff9++)_0x300a89[_0x3f39eb(0x217)](_0x1095fb[_0x3f39eb(0x1ff)](_0x55e3f9,_0x42b252,_0x3459b6,_0x3d7ff9,_0x312a4a));_0x3716dc[_0x3f39eb(0x1e6)]=!0x0;}else{for(_0x2f29b7=0x0,_0x32acc0=_0x3059e2,_0x3d7ff9=_0x2f29b7;_0x3d7ff9<_0x32acc0;_0x3d7ff9++)_0x300a89[_0x3f39eb(0x217)](_0x1095fb[_0x3f39eb(0x1ff)](_0x55e3f9,_0x42b252,_0x3459b6,_0x3d7ff9,_0x312a4a));}_0x312a4a[_0x3f39eb(0x1c4)]+=_0x300a89[_0x3f39eb(0x231)];}if(!(_0x3459b6===_0x3f39eb(0x25b)||_0x3459b6===_0x3f39eb(0x19e))&&!_0xde1723&&_0x3459b6!==_0x3f39eb(0x263)&&_0x3459b6!==_0x3f39eb(0x1ab)&&_0x3459b6!==_0x3f39eb(0x1c6)){var _0x7b31a6=_0x19a23e[_0x3f39eb(0x1e9)]||_0x312a4a[_0x3f39eb(0x1e9)];if(this[_0x3f39eb(0x18e)](_0x42b252)?(_0x3d7ff9=0x0,_0x42b252[_0x3f39eb(0x1b7)](function(_0x389511){var _0x46c7e2=_0x3f39eb;if(_0x5391b1++,_0x312a4a['autoExpandPropertyCount']++,_0x5391b1>_0x7b31a6){_0x2bb1ef=!0x0;return;}if(!_0x312a4a[_0x46c7e2(0x200)]&&_0x312a4a[_0x46c7e2(0x1a4)]&&_0x312a4a[_0x46c7e2(0x1c4)]>_0x312a4a[_0x46c7e2(0x236)]){_0x2bb1ef=!0x0;return;}_0x300a89[_0x46c7e2(0x217)](_0x1095fb[_0x46c7e2(0x1ff)](_0x55e3f9,_0x42b252,'Set',_0x3d7ff9++,_0x312a4a,function(_0x12376d){return function(){return _0x12376d;};}(_0x389511)));})):this['_isMap'](_0x42b252)&&_0x42b252[_0x3f39eb(0x1b7)](function(_0x113116,_0x1d77f9){var _0x36ac1c=_0x3f39eb;if(_0x5391b1++,_0x312a4a['autoExpandPropertyCount']++,_0x5391b1>_0x7b31a6){_0x2bb1ef=!0x0;return;}if(!_0x312a4a[_0x36ac1c(0x200)]&&_0x312a4a[_0x36ac1c(0x1a4)]&&_0x312a4a[_0x36ac1c(0x1c4)]>_0x312a4a[_0x36ac1c(0x236)]){_0x2bb1ef=!0x0;return;}var _0x3c19c8=_0x1d77f9[_0x36ac1c(0x244)]();_0x3c19c8[_0x36ac1c(0x231)]>0x64&&(_0x3c19c8=_0x3c19c8[_0x36ac1c(0x246)](0x0,0x64)+'...'),_0x300a89[_0x36ac1c(0x217)](_0x1095fb[_0x36ac1c(0x1ff)](_0x55e3f9,_0x42b252,_0x36ac1c(0x19c),_0x3c19c8,_0x312a4a,function(_0x3755b7){return function(){return _0x3755b7;};}(_0x113116)));}),!_0x466d79){try{for(_0x1d094d in _0x42b252)if(!(_0x61b33c&&_0x1532bc[_0x3f39eb(0x1da)](_0x1d094d))&&!this[_0x3f39eb(0x26c)](_0x42b252,_0x1d094d,_0x312a4a)){if(_0x5391b1++,_0x312a4a['autoExpandPropertyCount']++,_0x5391b1>_0x7b31a6){_0x2bb1ef=!0x0;break;}if(!_0x312a4a['isExpressionToEvaluate']&&_0x312a4a[_0x3f39eb(0x1a4)]&&_0x312a4a[_0x3f39eb(0x1c4)]>_0x312a4a['autoExpandLimit']){_0x2bb1ef=!0x0;break;}_0x300a89['push'](_0x1095fb[_0x3f39eb(0x188)](_0x55e3f9,_0x1a7aaa,_0x42b252,_0x3459b6,_0x1d094d,_0x312a4a));}}catch{}if(_0x1a7aaa[_0x3f39eb(0x186)]=!0x0,_0x549262&&(_0x1a7aaa[_0x3f39eb(0x258)]=!0x0),!_0x2bb1ef){var _0x23e773=[][_0x3f39eb(0x23d)](this[_0x3f39eb(0x25d)](_0x42b252))[_0x3f39eb(0x23d)](this[_0x3f39eb(0x1a1)](_0x42b252));for(_0x3d7ff9=0x0,_0x3059e2=_0x23e773[_0x3f39eb(0x231)];_0x3d7ff9<_0x3059e2;_0x3d7ff9++)if(_0x1d094d=_0x23e773[_0x3d7ff9],!(_0x61b33c&&_0x1532bc['test'](_0x1d094d[_0x3f39eb(0x244)]()))&&!this['_blacklistedProperty'](_0x42b252,_0x1d094d,_0x312a4a)&&!_0x1a7aaa[_0x3f39eb(0x1b5)+_0x1d094d[_0x3f39eb(0x244)]()]){if(_0x5391b1++,_0x312a4a[_0x3f39eb(0x1c4)]++,_0x5391b1>_0x7b31a6){_0x2bb1ef=!0x0;break;}if(!_0x312a4a[_0x3f39eb(0x200)]&&_0x312a4a[_0x3f39eb(0x1a4)]&&_0x312a4a['autoExpandPropertyCount']>_0x312a4a[_0x3f39eb(0x236)]){_0x2bb1ef=!0x0;break;}_0x300a89[_0x3f39eb(0x217)](_0x1095fb[_0x3f39eb(0x188)](_0x55e3f9,_0x1a7aaa,_0x42b252,_0x3459b6,_0x1d094d,_0x312a4a));}}}}}if(_0x3716dc[_0x3f39eb(0x228)]=_0x3459b6,_0x59d471?(_0x3716dc[_0x3f39eb(0x21d)]=_0x42b252[_0x3f39eb(0x260)](),this[_0x3f39eb(0x265)](_0x3459b6,_0x3716dc,_0x312a4a,_0x19a23e)):_0x3459b6===_0x3f39eb(0x1b4)?_0x3716dc[_0x3f39eb(0x21d)]=this[_0x3f39eb(0x1a6)]['call'](_0x42b252):_0x3459b6===_0x3f39eb(0x1c6)?_0x3716dc[_0x3f39eb(0x21d)]=_0x42b252[_0x3f39eb(0x244)]():_0x3459b6===_0x3f39eb(0x1d5)?_0x3716dc[_0x3f39eb(0x21d)]=this[_0x3f39eb(0x234)]['call'](_0x42b252):_0x3459b6===_0x3f39eb(0x214)&&this[_0x3f39eb(0x21a)]?_0x3716dc[_0x3f39eb(0x21d)]=this['_Symbol']['prototype']['toString'][_0x3f39eb(0x19a)](_0x42b252):!_0x312a4a[_0x3f39eb(0x211)]&&!(_0x3459b6==='null'||_0x3459b6===_0x3f39eb(0x19e))&&(delete _0x3716dc[_0x3f39eb(0x21d)],_0x3716dc[_0x3f39eb(0x1af)]=!0x0),_0x2bb1ef&&(_0x3716dc[_0x3f39eb(0x24f)]=!0x0),_0x2953a6=_0x312a4a[_0x3f39eb(0x21e)][_0x3f39eb(0x205)],_0x312a4a[_0x3f39eb(0x21e)][_0x3f39eb(0x205)]=_0x3716dc,this['_treeNodePropertiesBeforeFullValue'](_0x3716dc,_0x312a4a),_0x300a89[_0x3f39eb(0x231)]){for(_0x3d7ff9=0x0,_0x3059e2=_0x300a89[_0x3f39eb(0x231)];_0x3d7ff9<_0x3059e2;_0x3d7ff9++)_0x300a89[_0x3d7ff9](_0x3d7ff9);}_0x55e3f9[_0x3f39eb(0x231)]&&(_0x3716dc[_0x3f39eb(0x1e9)]=_0x55e3f9);}catch(_0x1458df){_0x543af4(_0x1458df,_0x3716dc,_0x312a4a);}return this['_additionalMetadata'](_0x42b252,_0x3716dc),this[_0x3f39eb(0x1c8)](_0x3716dc,_0x312a4a),_0x312a4a[_0x3f39eb(0x21e)][_0x3f39eb(0x205)]=_0x2953a6,_0x312a4a[_0x3f39eb(0x194)]--,_0x312a4a[_0x3f39eb(0x1a4)]=_0x50f7d4,_0x312a4a[_0x3f39eb(0x1a4)]&&_0x312a4a[_0x3f39eb(0x232)]['pop'](),_0x3716dc;}[_0x59ed02(0x1a1)](_0x48e43d){var _0x37989b=_0x59ed02;return Object[_0x37989b(0x261)]?Object[_0x37989b(0x261)](_0x48e43d):[];}[_0x59ed02(0x18e)](_0x5eed41){var _0x50aae4=_0x59ed02;return!!(_0x5eed41&&_0x52ead8[_0x50aae4(0x22d)]&&this['_objectToString'](_0x5eed41)===_0x50aae4(0x212)&&_0x5eed41[_0x50aae4(0x1b7)]);}[_0x59ed02(0x26c)](_0x43ea5c,_0x547c7c,_0x12c9ea){var _0x545f1b=_0x59ed02;return _0x12c9ea[_0x545f1b(0x233)]?typeof _0x43ea5c[_0x547c7c]==_0x545f1b(0x227):!0x1;}['_type'](_0x2fa91f){var _0x33d161=_0x59ed02,_0x50fc90='';return _0x50fc90=typeof _0x2fa91f,_0x50fc90===_0x33d161(0x22e)?this[_0x33d161(0x19f)](_0x2fa91f)===_0x33d161(0x1d3)?_0x50fc90=_0x33d161(0x1fd):this['_objectToString'](_0x2fa91f)===_0x33d161(0x1e1)?_0x50fc90=_0x33d161(0x1b4):this[_0x33d161(0x19f)](_0x2fa91f)===_0x33d161(0x221)?_0x50fc90=_0x33d161(0x1c6):_0x2fa91f===null?_0x50fc90=_0x33d161(0x25b):_0x2fa91f[_0x33d161(0x1f7)]&&(_0x50fc90=_0x2fa91f[_0x33d161(0x1f7)][_0x33d161(0x207)]||_0x50fc90):_0x50fc90==='undefined'&&this[_0x33d161(0x1c5)]&&_0x2fa91f instanceof this[_0x33d161(0x1c5)]&&(_0x50fc90=_0x33d161(0x239)),_0x50fc90;}[_0x59ed02(0x19f)](_0x4677c8){var _0x36deba=_0x59ed02;return Object[_0x36deba(0x23b)][_0x36deba(0x244)][_0x36deba(0x19a)](_0x4677c8);}[_0x59ed02(0x1c3)](_0x2553af){var _0x36485b=_0x59ed02;return _0x2553af===_0x36485b(0x242)||_0x2553af===_0x36485b(0x19b)||_0x2553af==='number';}[_0x59ed02(0x1bf)](_0x3689a8){var _0x5762f0=_0x59ed02;return _0x3689a8===_0x5762f0(0x1d6)||_0x3689a8===_0x5762f0(0x263)||_0x3689a8===_0x5762f0(0x1df);}[_0x59ed02(0x1ff)](_0x25f0de,_0x328f09,_0x47c53f,_0x37002d,_0x49f21c,_0x521c90){var _0x409b17=this;return function(_0x168fc9){var _0x5eaaf1=_0x3f4d,_0x14b1d5=_0x49f21c[_0x5eaaf1(0x21e)]['current'],_0x31c4d1=_0x49f21c[_0x5eaaf1(0x21e)]['index'],_0x1e7d12=_0x49f21c['node']['parent'];_0x49f21c[_0x5eaaf1(0x21e)][_0x5eaaf1(0x245)]=_0x14b1d5,_0x49f21c[_0x5eaaf1(0x21e)][_0x5eaaf1(0x264)]=typeof _0x37002d==_0x5eaaf1(0x26a)?_0x37002d:_0x168fc9,_0x25f0de['push'](_0x409b17[_0x5eaaf1(0x229)](_0x328f09,_0x47c53f,_0x37002d,_0x49f21c,_0x521c90)),_0x49f21c[_0x5eaaf1(0x21e)]['parent']=_0x1e7d12,_0x49f21c[_0x5eaaf1(0x21e)][_0x5eaaf1(0x264)]=_0x31c4d1;};}[_0x59ed02(0x188)](_0x41aa81,_0x1c7f86,_0x311f4d,_0x26014b,_0x1c7967,_0x577642,_0x5981a6){var _0x13f414=_0x59ed02,_0xe8b123=this;return _0x1c7f86[_0x13f414(0x1b5)+_0x1c7967[_0x13f414(0x244)]()]=!0x0,function(_0x3411f4){var _0x40672b=_0x13f414,_0x17180a=_0x577642[_0x40672b(0x21e)][_0x40672b(0x205)],_0x3da467=_0x577642[_0x40672b(0x21e)][_0x40672b(0x264)],_0x3b5746=_0x577642[_0x40672b(0x21e)][_0x40672b(0x245)];_0x577642[_0x40672b(0x21e)][_0x40672b(0x245)]=_0x17180a,_0x577642[_0x40672b(0x21e)][_0x40672b(0x264)]=_0x3411f4,_0x41aa81['push'](_0xe8b123[_0x40672b(0x229)](_0x311f4d,_0x26014b,_0x1c7967,_0x577642,_0x5981a6)),_0x577642[_0x40672b(0x21e)][_0x40672b(0x245)]=_0x3b5746,_0x577642[_0x40672b(0x21e)][_0x40672b(0x264)]=_0x3da467;};}[_0x59ed02(0x229)](_0x1fe10f,_0x3e26b4,_0xcbc90a,_0x30ba01,_0x4f8e0a){var _0x32ffe9=_0x59ed02,_0x1350ab=this;_0x4f8e0a||(_0x4f8e0a=function(_0x17ba27,_0x275ad6){return _0x17ba27[_0x275ad6];});var _0x3104eb=_0xcbc90a[_0x32ffe9(0x244)](),_0x399b04=_0x30ba01[_0x32ffe9(0x222)]||{},_0x23f998=_0x30ba01[_0x32ffe9(0x211)],_0x1c7153=_0x30ba01['isExpressionToEvaluate'];try{var _0x113b54=this[_0x32ffe9(0x210)](_0x1fe10f),_0x4d0792=_0x3104eb;_0x113b54&&_0x4d0792[0x0]==='\\x27'&&(_0x4d0792=_0x4d0792['substr'](0x1,_0x4d0792[_0x32ffe9(0x231)]-0x2));var _0xcebf6a=_0x30ba01[_0x32ffe9(0x222)]=_0x399b04[_0x32ffe9(0x1b5)+_0x4d0792];_0xcebf6a&&(_0x30ba01[_0x32ffe9(0x211)]=_0x30ba01['depth']+0x1),_0x30ba01['isExpressionToEvaluate']=!!_0xcebf6a;var _0x4430a0=typeof _0xcbc90a=='symbol',_0x5b6464={'name':_0x4430a0||_0x113b54?_0x3104eb:this[_0x32ffe9(0x23c)](_0x3104eb)};if(_0x4430a0&&(_0x5b6464[_0x32ffe9(0x214)]=!0x0),!(_0x3e26b4===_0x32ffe9(0x1fd)||_0x3e26b4===_0x32ffe9(0x1a8))){var _0x36c5ab=this[_0x32ffe9(0x1bd)](_0x1fe10f,_0xcbc90a);if(_0x36c5ab&&(_0x36c5ab[_0x32ffe9(0x1d8)]&&(_0x5b6464[_0x32ffe9(0x1e0)]=!0x0),_0x36c5ab[_0x32ffe9(0x1c1)]&&!_0xcebf6a&&!_0x30ba01['resolveGetters']))return _0x5b6464[_0x32ffe9(0x1f2)]=!0x0,this[_0x32ffe9(0x21c)](_0x5b6464,_0x30ba01),_0x5b6464;}var _0x409c28;try{_0x409c28=_0x4f8e0a(_0x1fe10f,_0xcbc90a);}catch(_0x29bf72){return _0x5b6464={'name':_0x3104eb,'type':_0x32ffe9(0x1a5),'error':_0x29bf72[_0x32ffe9(0x1a9)]},this['_processTreeNodeResult'](_0x5b6464,_0x30ba01),_0x5b6464;}var _0x58cabb=this[_0x32ffe9(0x25a)](_0x409c28),_0x50c021=this['_isPrimitiveType'](_0x58cabb);if(_0x5b6464[_0x32ffe9(0x228)]=_0x58cabb,_0x50c021)this['_processTreeNodeResult'](_0x5b6464,_0x30ba01,_0x409c28,function(){var _0x526428=_0x32ffe9;_0x5b6464[_0x526428(0x21d)]=_0x409c28['valueOf'](),!_0xcebf6a&&_0x1350ab[_0x526428(0x265)](_0x58cabb,_0x5b6464,_0x30ba01,{});});else{var _0xc0102=_0x30ba01['autoExpand']&&_0x30ba01[_0x32ffe9(0x194)]<_0x30ba01[_0x32ffe9(0x213)]&&_0x30ba01['autoExpandPreviousObjects']['indexOf'](_0x409c28)<0x0&&_0x58cabb!==_0x32ffe9(0x227)&&_0x30ba01[_0x32ffe9(0x1c4)]<_0x30ba01[_0x32ffe9(0x236)];_0xc0102||_0x30ba01[_0x32ffe9(0x194)]<_0x23f998||_0xcebf6a?(this[_0x32ffe9(0x1b1)](_0x5b6464,_0x409c28,_0x30ba01,_0xcebf6a||{}),this['_additionalMetadata'](_0x409c28,_0x5b6464)):this[_0x32ffe9(0x21c)](_0x5b6464,_0x30ba01,_0x409c28,function(){var _0x523ae7=_0x32ffe9;_0x58cabb===_0x523ae7(0x25b)||_0x58cabb===_0x523ae7(0x19e)||(delete _0x5b6464[_0x523ae7(0x21d)],_0x5b6464[_0x523ae7(0x1af)]=!0x0);});}return _0x5b6464;}finally{_0x30ba01[_0x32ffe9(0x222)]=_0x399b04,_0x30ba01['depth']=_0x23f998,_0x30ba01[_0x32ffe9(0x200)]=_0x1c7153;}}[_0x59ed02(0x265)](_0x3eef25,_0x84db6f,_0x10550d,_0x428813){var _0x225042=_0x59ed02,_0x59c62a=_0x428813[_0x225042(0x22c)]||_0x10550d[_0x225042(0x22c)];if((_0x3eef25===_0x225042(0x19b)||_0x3eef25===_0x225042(0x263))&&_0x84db6f[_0x225042(0x21d)]){let _0x801e17=_0x84db6f['value']['length'];_0x10550d[_0x225042(0x22b)]+=_0x801e17,_0x10550d[_0x225042(0x22b)]>_0x10550d[_0x225042(0x22f)]?(_0x84db6f[_0x225042(0x1af)]='',delete _0x84db6f[_0x225042(0x21d)]):_0x801e17>_0x59c62a&&(_0x84db6f[_0x225042(0x1af)]=_0x84db6f[_0x225042(0x21d)]['substr'](0x0,_0x59c62a),delete _0x84db6f[_0x225042(0x21d)]);}}[_0x59ed02(0x210)](_0x6bf6fa){var _0x48ea70=_0x59ed02;return!!(_0x6bf6fa&&_0x52ead8[_0x48ea70(0x19c)]&&this[_0x48ea70(0x19f)](_0x6bf6fa)===_0x48ea70(0x18f)&&_0x6bf6fa['forEach']);}['_propertyName'](_0xd5fa1d){var _0x235bdf=_0x59ed02;if(_0xd5fa1d[_0x235bdf(0x190)](/^\\d+$/))return _0xd5fa1d;var _0x50be6f;try{_0x50be6f=JSON[_0x235bdf(0x204)](''+_0xd5fa1d);}catch{_0x50be6f='\\x22'+this[_0x235bdf(0x19f)](_0xd5fa1d)+'\\x22';}return _0x50be6f[_0x235bdf(0x190)](/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?_0x50be6f=_0x50be6f[_0x235bdf(0x18c)](0x1,_0x50be6f[_0x235bdf(0x231)]-0x2):_0x50be6f=_0x50be6f[_0x235bdf(0x1b0)](/'/g,'\\x5c\\x27')['replace'](/\\\\"/g,'\\x22')['replace'](/(^"|"$)/g,'\\x27'),_0x50be6f;}[_0x59ed02(0x21c)](_0x1576d5,_0x3ad3fb,_0x582215,_0x4dbd3a){var _0x278397=_0x59ed02;this[_0x278397(0x267)](_0x1576d5,_0x3ad3fb),_0x4dbd3a&&_0x4dbd3a(),this[_0x278397(0x1b8)](_0x582215,_0x1576d5),this[_0x278397(0x1c8)](_0x1576d5,_0x3ad3fb);}[_0x59ed02(0x267)](_0x2cc14c,_0x4bc3cc){var _0x557e08=_0x59ed02;this[_0x557e08(0x1cf)](_0x2cc14c,_0x4bc3cc),this[_0x557e08(0x20d)](_0x2cc14c,_0x4bc3cc),this[_0x557e08(0x208)](_0x2cc14c,_0x4bc3cc),this[_0x557e08(0x1be)](_0x2cc14c,_0x4bc3cc);}[_0x59ed02(0x1cf)](_0x13bf9a,_0x36221e){}['_setNodeQueryPath'](_0x46a402,_0x59b4ec){}['_setNodeLabel'](_0x4be1bf,_0x53f6f5){}['_isUndefined'](_0x3c4f93){var _0x36f3fd=_0x59ed02;return _0x3c4f93===this[_0x36f3fd(0x269)];}[_0x59ed02(0x1c8)](_0x1710a6,_0x3f678a){var _0x24bd27=_0x59ed02;this['_setNodeLabel'](_0x1710a6,_0x3f678a),this[_0x24bd27(0x1f9)](_0x1710a6),_0x3f678a[_0x24bd27(0x1ae)]&&this[_0x24bd27(0x1e8)](_0x1710a6),this[_0x24bd27(0x1f4)](_0x1710a6,_0x3f678a),this[_0x24bd27(0x1dc)](_0x1710a6,_0x3f678a),this[_0x24bd27(0x250)](_0x1710a6);}['_additionalMetadata'](_0x5c7c62,_0x4c51a3){var _0x1f411e=_0x59ed02;let _0x2bdd3f;try{_0x52ead8[_0x1f411e(0x23e)]&&(_0x2bdd3f=_0x52ead8[_0x1f411e(0x23e)]['error'],_0x52ead8[_0x1f411e(0x23e)]['error']=function(){}),_0x5c7c62&&typeof _0x5c7c62[_0x1f411e(0x231)]==_0x1f411e(0x26a)&&(_0x4c51a3[_0x1f411e(0x231)]=_0x5c7c62[_0x1f411e(0x231)]);}catch{}finally{_0x2bdd3f&&(_0x52ead8[_0x1f411e(0x23e)][_0x1f411e(0x262)]=_0x2bdd3f);}if(_0x4c51a3[_0x1f411e(0x228)]===_0x1f411e(0x26a)||_0x4c51a3['type']===_0x1f411e(0x1df)){if(isNaN(_0x4c51a3[_0x1f411e(0x21d)]))_0x4c51a3[_0x1f411e(0x1ce)]=!0x0,delete _0x4c51a3['value'];else switch(_0x4c51a3[_0x1f411e(0x21d)]){case Number['POSITIVE_INFINITY']:_0x4c51a3['positiveInfinity']=!0x0,delete _0x4c51a3['value'];break;case Number['NEGATIVE_INFINITY']:_0x4c51a3[_0x1f411e(0x241)]=!0x0,delete _0x4c51a3['value'];break;case 0x0:this[_0x1f411e(0x216)](_0x4c51a3[_0x1f411e(0x21d)])&&(_0x4c51a3[_0x1f411e(0x1d4)]=!0x0);break;}}else _0x4c51a3['type']===_0x1f411e(0x227)&&typeof _0x5c7c62[_0x1f411e(0x207)]=='string'&&_0x5c7c62[_0x1f411e(0x207)]&&_0x4c51a3[_0x1f411e(0x207)]&&_0x5c7c62[_0x1f411e(0x207)]!==_0x4c51a3['name']&&(_0x4c51a3['funcName']=_0x5c7c62[_0x1f411e(0x207)]);}['_isNegativeZero'](_0x3edf20){return 0x1/_0x3edf20===Number['NEGATIVE_INFINITY'];}['_sortProps'](_0x2c1ca7){var _0x4e6de1=_0x59ed02;!_0x2c1ca7[_0x4e6de1(0x1e9)]||!_0x2c1ca7[_0x4e6de1(0x1e9)][_0x4e6de1(0x231)]||_0x2c1ca7['type']===_0x4e6de1(0x1fd)||_0x2c1ca7[_0x4e6de1(0x228)]===_0x4e6de1(0x19c)||_0x2c1ca7[_0x4e6de1(0x228)]===_0x4e6de1(0x22d)||_0x2c1ca7[_0x4e6de1(0x1e9)]['sort'](function(_0x48acb5,_0x4dc490){var _0x5cb219=_0x4e6de1,_0x49b532=_0x48acb5['name'][_0x5cb219(0x254)](),_0x599cf3=_0x4dc490['name'][_0x5cb219(0x254)]();return _0x49b532<_0x599cf3?-0x1:_0x49b532>_0x599cf3?0x1:0x0;});}[_0x59ed02(0x1f4)](_0x56fd6d,_0xe19b40){var _0x22c24a=_0x59ed02;if(!(_0xe19b40[_0x22c24a(0x233)]||!_0x56fd6d[_0x22c24a(0x1e9)]||!_0x56fd6d['props'][_0x22c24a(0x231)])){for(var _0x3912ba=[],_0x2eb732=[],_0x4889c5=0x0,_0x1bcf08=_0x56fd6d[_0x22c24a(0x1e9)][_0x22c24a(0x231)];_0x4889c5<_0x1bcf08;_0x4889c5++){var _0x3f04a8=_0x56fd6d[_0x22c24a(0x1e9)][_0x4889c5];_0x3f04a8[_0x22c24a(0x228)]===_0x22c24a(0x227)?_0x3912ba[_0x22c24a(0x217)](_0x3f04a8):_0x2eb732['push'](_0x3f04a8);}if(!(!_0x2eb732['length']||_0x3912ba[_0x22c24a(0x231)]<=0x1)){_0x56fd6d[_0x22c24a(0x1e9)]=_0x2eb732;var _0xf7cce1={'functionsNode':!0x0,'props':_0x3912ba};this[_0x22c24a(0x1cf)](_0xf7cce1,_0xe19b40),this[_0x22c24a(0x192)](_0xf7cce1,_0xe19b40),this[_0x22c24a(0x1f9)](_0xf7cce1),this['_setNodePermissions'](_0xf7cce1,_0xe19b40),_0xf7cce1['id']+='\\x20f',_0x56fd6d[_0x22c24a(0x1e9)][_0x22c24a(0x1b2)](_0xf7cce1);}}}[_0x59ed02(0x1dc)](_0x52f693,_0x439baf){}[_0x59ed02(0x1f9)](_0x1d169f){}[_0x59ed02(0x1b3)](_0x163fe9){var _0x555a59=_0x59ed02;return Array['isArray'](_0x163fe9)||typeof _0x163fe9==_0x555a59(0x22e)&&this['_objectToString'](_0x163fe9)==='[object\\x20Array]';}[_0x59ed02(0x1be)](_0x35f57d,_0x209198){}['_cleanNode'](_0x57cb19){var _0x5357de=_0x59ed02;delete _0x57cb19['_hasSymbolPropertyOnItsPath'],delete _0x57cb19['_hasSetOnItsPath'],delete _0x57cb19[_0x5357de(0x26b)];}[_0x59ed02(0x208)](_0x2d261b,_0x1b5255){}}let _0x3e5085=new _0x5402cc(),_0x2afba0={'props':0x64,'elements':0x64,'strLength':0x400*0x32,'totalStrLength':0x400*0x32,'autoExpandLimit':0x1388,'autoExpandMaxDepth':0xa},_0x259076={'props':0x5,'elements':0x5,'strLength':0x100,'totalStrLength':0x100*0x3,'autoExpandLimit':0x1e,'autoExpandMaxDepth':0x2};function _0x4ebc79(_0x450cd1,_0x5a1759,_0xf26d46,_0x28b3ec,_0x1173d3,_0xa39da9){var _0xa64412=_0x59ed02;let _0x468409,_0x56f8b0;try{_0x56f8b0=_0x523b6a(),_0x468409=_0x1c6742[_0x5a1759],!_0x468409||_0x56f8b0-_0x468409['ts']>0x1f4&&_0x468409[_0xa64412(0x1d0)]&&_0x468409[_0xa64412(0x224)]/_0x468409[_0xa64412(0x1d0)]<0x64?(_0x1c6742[_0x5a1759]=_0x468409={'count':0x0,'time':0x0,'ts':_0x56f8b0},_0x1c6742[_0xa64412(0x1f5)]={}):_0x56f8b0-_0x1c6742[_0xa64412(0x1f5)]['ts']>0x32&&_0x1c6742[_0xa64412(0x1f5)][_0xa64412(0x1d0)]&&_0x1c6742[_0xa64412(0x1f5)][_0xa64412(0x224)]/_0x1c6742['hits'][_0xa64412(0x1d0)]<0x64&&(_0x1c6742[_0xa64412(0x1f5)]={});let _0x1e7805=[],_0x4365d5=_0x468409[_0xa64412(0x197)]||_0x1c6742['hits'][_0xa64412(0x197)]?_0x259076:_0x2afba0,_0x192577=_0x4a8ff7=>{var _0x4c6205=_0xa64412;let _0x1d3fe4={};return _0x1d3fe4[_0x4c6205(0x1e9)]=_0x4a8ff7[_0x4c6205(0x1e9)],_0x1d3fe4[_0x4c6205(0x226)]=_0x4a8ff7[_0x4c6205(0x226)],_0x1d3fe4[_0x4c6205(0x22c)]=_0x4a8ff7[_0x4c6205(0x22c)],_0x1d3fe4[_0x4c6205(0x22f)]=_0x4a8ff7[_0x4c6205(0x22f)],_0x1d3fe4[_0x4c6205(0x236)]=_0x4a8ff7[_0x4c6205(0x236)],_0x1d3fe4[_0x4c6205(0x213)]=_0x4a8ff7[_0x4c6205(0x213)],_0x1d3fe4['sortProps']=!0x1,_0x1d3fe4['noFunctions']=!_0x488bad,_0x1d3fe4[_0x4c6205(0x211)]=0x1,_0x1d3fe4[_0x4c6205(0x194)]=0x0,_0x1d3fe4['expId']=_0x4c6205(0x266),_0x1d3fe4[_0x4c6205(0x1ac)]='root_exp',_0x1d3fe4[_0x4c6205(0x1a4)]=!0x0,_0x1d3fe4[_0x4c6205(0x232)]=[],_0x1d3fe4[_0x4c6205(0x1c4)]=0x0,_0x1d3fe4['resolveGetters']=!0x0,_0x1d3fe4[_0x4c6205(0x22b)]=0x0,_0x1d3fe4[_0x4c6205(0x21e)]={'current':void 0x0,'parent':void 0x0,'index':0x0},_0x1d3fe4;};for(var _0x186f57=0x0;_0x186f57<_0x1173d3['length'];_0x186f57++)_0x1e7805[_0xa64412(0x217)](_0x3e5085[_0xa64412(0x1b1)]({'timeNode':_0x450cd1===_0xa64412(0x224)||void 0x0},_0x1173d3[_0x186f57],_0x192577(_0x4365d5),{}));if(_0x450cd1===_0xa64412(0x1d1)){let _0x3914f0=Error['stackTraceLimit'];try{Error[_0xa64412(0x218)]=0x1/0x0,_0x1e7805[_0xa64412(0x217)](_0x3e5085[_0xa64412(0x1b1)]({'stackNode':!0x0},new Error()[_0xa64412(0x253)],_0x192577(_0x4365d5),{'strLength':0x1/0x0}));}finally{Error['stackTraceLimit']=_0x3914f0;}}return{'method':_0xa64412(0x25f),'version':_0x593e90,'args':[{'ts':_0xf26d46,'session':_0x28b3ec,'args':_0x1e7805,'id':_0x5a1759,'context':_0xa39da9}]};}catch(_0x101027){return{'method':_0xa64412(0x25f),'version':_0x593e90,'args':[{'ts':_0xf26d46,'session':_0x28b3ec,'args':[{'type':_0xa64412(0x1a5),'error':_0x101027&&_0x101027[_0xa64412(0x1a9)]}],'id':_0x5a1759,'context':_0xa39da9}]};}finally{try{if(_0x468409&&_0x56f8b0){let _0x115a65=_0x523b6a();_0x468409[_0xa64412(0x1d0)]++,_0x468409['time']+=_0x4f7dfd(_0x56f8b0,_0x115a65),_0x468409['ts']=_0x115a65,_0x1c6742[_0xa64412(0x1f5)][_0xa64412(0x1d0)]++,_0x1c6742['hits'][_0xa64412(0x224)]+=_0x4f7dfd(_0x56f8b0,_0x115a65),_0x1c6742['hits']['ts']=_0x115a65,(_0x468409[_0xa64412(0x1d0)]>0x32||_0x468409[_0xa64412(0x224)]>0x64)&&(_0x468409[_0xa64412(0x197)]=!0x0),(_0x1c6742['hits'][_0xa64412(0x1d0)]>0x3e8||_0x1c6742[_0xa64412(0x1f5)][_0xa64412(0x224)]>0x12c)&&(_0x1c6742[_0xa64412(0x1f5)][_0xa64412(0x197)]=!0x0);}}catch{}}}return _0x4ebc79;}((_0x38628b,_0x1f03cc,_0x2aa4e5,_0xf0b36c,_0x29597c,_0x4852cd,_0xf3b8bd,_0x326d0f,_0x11152c,_0x173079)=>{var _0x3d1755=_0x49fb4d;if(_0x38628b['_console_ninja'])return _0x38628b[_0x3d1755(0x199)];if(!J(_0x38628b,_0x326d0f,_0x29597c))return _0x38628b[_0x3d1755(0x199)]={'consoleLog':()=>{},'consoleTrace':()=>{},'consoleTime':()=>{},'consoleTimeEnd':()=>{},'autoLog':()=>{},'autoLogMany':()=>{},'autoTraceMany':()=>{},'coverage':()=>{},'autoTrace':()=>{},'autoTime':()=>{},'autoTimeEnd':()=>{}},_0x38628b[_0x3d1755(0x199)];let _0xdacf90=W(_0x38628b),_0x20fe7a=_0xdacf90[_0x3d1755(0x1a2)],_0x5eb7d1=_0xdacf90['timeStamp'],_0x114d0b=_0xdacf90[_0x3d1755(0x1cb)],_0x7694f5={'hits':{},'ts':{}},_0x1764d8=Y(_0x38628b,_0x11152c,_0x7694f5,_0x4852cd),_0x178886=_0x207530=>{_0x7694f5['ts'][_0x207530]=_0x5eb7d1();},_0x11f474=(_0x700a86,_0x29b86d)=>{var _0x2cbef3=_0x3d1755;let _0x30e3a0=_0x7694f5['ts'][_0x29b86d];if(delete _0x7694f5['ts'][_0x29b86d],_0x30e3a0){let _0x56d048=_0x20fe7a(_0x30e3a0,_0x5eb7d1());_0x17d9cf(_0x1764d8(_0x2cbef3(0x224),_0x700a86,_0x114d0b(),_0x138b24,[_0x56d048],_0x29b86d));}},_0x56a592=_0x2e2c32=>_0x36556b=>{var _0x5b3d79=_0x3d1755;try{_0x178886(_0x36556b),_0x2e2c32(_0x36556b);}finally{_0x38628b[_0x5b3d79(0x23e)][_0x5b3d79(0x224)]=_0x2e2c32;}},_0x842d19=_0x27b330=>_0x5d7d00=>{var _0x4bbd9d=_0x3d1755;try{let [_0x202e29,_0x23f73b]=_0x5d7d00[_0x4bbd9d(0x1e2)](':logPointId:');_0x11f474(_0x23f73b,_0x202e29),_0x27b330(_0x202e29);}finally{_0x38628b[_0x4bbd9d(0x23e)]['timeEnd']=_0x27b330;}};_0x38628b['_console_ninja']={'consoleLog':(_0x25cb35,_0xd40039)=>{var _0x48c878=_0x3d1755;_0x38628b[_0x48c878(0x23e)][_0x48c878(0x25f)][_0x48c878(0x207)]!=='disabledLog'&&_0x17d9cf(_0x1764d8(_0x48c878(0x25f),_0x25cb35,_0x114d0b(),_0x138b24,_0xd40039));},'consoleTrace':(_0x3398a9,_0x4514fc)=>{var _0x835e28=_0x3d1755;_0x38628b[_0x835e28(0x23e)]['log'][_0x835e28(0x207)]!=='disabledTrace'&&_0x17d9cf(_0x1764d8(_0x835e28(0x1d1),_0x3398a9,_0x114d0b(),_0x138b24,_0x4514fc));},'consoleTime':()=>{var _0x4b3354=_0x3d1755;_0x38628b[_0x4b3354(0x23e)][_0x4b3354(0x224)]=_0x56a592(_0x38628b['console'][_0x4b3354(0x224)]);},'consoleTimeEnd':()=>{var _0x410270=_0x3d1755;_0x38628b[_0x410270(0x23e)]['timeEnd']=_0x842d19(_0x38628b[_0x410270(0x23e)][_0x410270(0x23a)]);},'autoLog':(_0x29f36a,_0x14ab8c)=>{_0x17d9cf(_0x1764d8('log',_0x14ab8c,_0x114d0b(),_0x138b24,[_0x29f36a]));},'autoLogMany':(_0x7308ae,_0x468fe0)=>{var _0x46173b=_0x3d1755;_0x17d9cf(_0x1764d8(_0x46173b(0x25f),_0x7308ae,_0x114d0b(),_0x138b24,_0x468fe0));},'autoTrace':(_0x1cc2f0,_0x351e00)=>{var _0xe4fcf6=_0x3d1755;_0x17d9cf(_0x1764d8(_0xe4fcf6(0x1d1),_0x351e00,_0x114d0b(),_0x138b24,[_0x1cc2f0]));},'autoTraceMany':(_0x4c7a1c,_0x2db2d1)=>{var _0x1f9984=_0x3d1755;_0x17d9cf(_0x1764d8(_0x1f9984(0x1d1),_0x4c7a1c,_0x114d0b(),_0x138b24,_0x2db2d1));},'autoTime':(_0x4897a0,_0x114719,_0x2819bd)=>{_0x178886(_0x2819bd);},'autoTimeEnd':(_0x25206b,_0x7ac882,_0x573aea)=>{_0x11f474(_0x7ac882,_0x573aea);},'coverage':_0x59fc26=>{_0x17d9cf({'method':'coverage','version':_0x4852cd,'args':[{'id':_0x59fc26}]});}};let _0x17d9cf=b(_0x38628b,_0x1f03cc,_0x2aa4e5,_0xf0b36c,_0x29597c,_0x173079),_0x138b24=_0x38628b[_0x3d1755(0x24d)];return _0x38628b['_console_ninja'];})(globalThis,_0x49fb4d(0x26d),_0x49fb4d(0x19d),_0x49fb4d(0x18d),_0x49fb4d(0x18b),'1.0.0',_0x49fb4d(0x1ba),_0x49fb4d(0x1ee),_0x49fb4d(0x191),_0x49fb4d(0x195));`)}catch{}}function jO(t,...e){try{LO().consoleLog(t,e)}catch{}return e}var Mb=(()=>{let e=class e{constructor(){this.title="Front"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Nu({type:e,selectors:[["app-root"]],decls:31,vars:1,consts:[[1,"container"],[1,"section","Shop"],[1,"Shop-Name"],[1,"section"],[1,"link"],["ButtonStyle","",3,"ButtonCornner"],[1,"group"],[1,"content"],[1,"Head-content"],[1,"Text-content"],[1,"img"],["src","assets/img/xboxController.png","alt","",1,"Xbox-Controller-logo"]],template:function(i,o){i&1&&(ft(0,"div",0)(1,"nav")(2,"div",1)(3,"span",2),ln(4,"BBA"),pt(),ft(5,"span"),ln(6,"Shop"),pt()(),ft(7,"div",3)(8,"span",4),ln(9,"Home"),pt(),ft(10,"span",4),ln(11,"Contact"),pt()(),ft(12,"div",3)(13,"button",5),ln(14,"SIGN UP"),pt()()(),ft(15,"div",6)(16,"div",7)(17,"p",8),ln(18,"Welcome To BBA Shop"),pt(),ft(19,"p",9),ln(20,"Change your gaming exprerience to the next level"),pt()(),ft(21,"div",10),uo(22,"img",11),pt()(),ft(23,"div",6)(24,"div",7)(25,"p",8),ln(26,"Welcome To Simpa Shop"),pt(),ft(27,"p",9),ln(28,"Change your gaming exprerience to the next level"),pt()(),ft(29,"div",10),uo(30,"img",11),pt()()()),i&2&&(Sw(13),yp("ButtonCornner","Round"))},dependencies:[Sb],styles:[".container[_ngcontent-%COMP%]{padding-top:28px}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap;align-items:center}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{padding:8px 0;margin:auto}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section.Shop[_ngcontent-%COMP%]{font-size:20px;background:#433a6561;box-shadow:0 0 100px 12px #433a65;padding:8px 16px;border-radius:7px;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px)}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section.Shop[_ngcontent-%COMP%]   .Shop-Name[_ngcontent-%COMP%]{color:#8d88be;font-weight:700;margin-inline-end:6px}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{padding:8px;margin-inline-end:6px;cursor:pointer}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{opacity:.5}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{display:flex;align-items:center;margin:14px 0}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;text-align:center}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .Head-content[_ngcontent-%COMP%]{font-size:clamp(1.5rem,7vw,2.6rem);white-space:nowrap;color:#bab4eb}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .Text-content[_ngcontent-%COMP%]{color:#8d88be}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{display:flex;position:relative}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   .Xbox-Controller-logo[_ngcontent-%COMP%]{width:100%;filter:drop-shadow(0px 0px 90px #5f528b) opacity(.9)}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;font-size:clamp(4.8rem,20vw,5.6rem);font-weight:bolder;left:50%;top:70%;transform:translate(-50%,-50%);font-family:sans-serif;color:#ccbdff;z-index:0;text-shadow:0px 0px 20px #ccbdff}@media screen and (max-width: 768px){.container[_ngcontent-%COMP%]{padding-top:128px}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{flex-wrap:wrap-reverse}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:1;background-color:#433a65d7;background-color:#252039ad;width:100%;box-shadow:0 4px 29px -7px #433a65;padding:6px 0}}"]});let t=e;return t})();var UO={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},x$=fe(N({},UO),{"[class.ng-submitted]":"isSubmitted"});var $O=new S("CallSetDisabledState",{providedIn:"root",factory:()=>Rb}),Rb="always";var qO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ee({type:e}),e.\u0275inj=we({});let t=e;return t})();var Pb=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:$O,useValue:r.callSetDisabledState??Rb}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ee({type:e}),e.\u0275inj=we({imports:[qO]});let t=e;return t})();var HO="firebase",zO="10.8.0";Qn(HO,zO,"app");var ii=new Nn("ANGULARFIRE2_VERSION");var GO=(t,e)=>{let n=e?[e]:jy(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ri=class{constructor(){return GO(WO)}},WO="app-check";function Ag(){}var Tl=class{zone;delegate;constructor(e,n=zh){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},Sg=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ag,{},Ag,Ag)),n.pipe(Te({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Al=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Tl(Zone.current)),this.insideAngular=n.run(()=>new Tl(Zone.current,bs)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(b(J))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function KO(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function gt(t){return QO(KO())(t)}function QO(t){return function(n){return n=n.lift(new Sg(t.ngZone)),n.pipe(Bt(t.outsideAngular),Tt(t.insideAngular))}}var XO=new Map,JO={activated:!1,tokenObservers:[]},ek={initialized:!1,enabled:!1};function Gt(t){return XO.get(t)||Object.assign({},JO)}function Lb(){return ek}var tk="https://content-firebaseappcheck.googleapis.com/v1";var nk="exchangeDebugToken",Ob={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},j$=24*60*60*1e3;var Rg=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new Sh,this.pending.promise.catch(n=>{}),yield rk(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Sh,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function rk(t){return new Promise(e=>{setTimeout(e,t)})}var ik={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},dr=new Vy("appCheck","AppCheck",ik);function jb(t){if(!Gt(t).activated)throw dr.create("use-before-activation",{appName:t.name})}function Bb(r,i){return _(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let f=yield s.getHeartbeatsHeader();f&&(o["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(f){throw dr.create("fetch-network-error",{originalErrorMessage:f?.message})}if(c.status!==200)throw dr.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(f){throw dr.create("fetch-parse-error",{originalErrorMessage:f?.message})}let l=u.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw dr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let d=Number(l[1])*1e3,h=Date.now();return{token:u.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function Ub(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${tk}/projects/${n}/apps/${r}:${nk}?key=${i}`,body:{debug_token:e}}}var ok="firebase-app-check-database",sk=1,Pg="firebase-app-check-store";var Sl=null;function ak(){return Sl||(Sl=new Promise((t,e)=>{try{let n=indexedDB.open(ok,sk);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(dr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Pg,{keyPath:"compositeKey"})}}}catch(n){e(dr.create("storage-open",{originalErrorMessage:n?.message}))}}),Sl)}function ck(t,e){return uk(lk(t),e)}function uk(t,e){return _(this,null,function*(){let r=(yield ak()).transaction(Pg,"readwrite"),o=r.objectStore(Pg).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(dr.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function lk(t){return`${t.options.appId}-${t.name}`}var Ng=new kc("@firebase/app-check");function Mg(t,e){return Oc()?ck(t,e).catch(n=>{Ng.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function $b(){return Lb().enabled}function qb(){return _(this,null,function*(){let t=Lb();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var dk={error:"UNKNOWN_ERROR"};function hk(t){return Oy.encodeString(JSON.stringify(t),!1)}function Og(t,e=!1){return _(this,null,function*(){let n=t.app;jb(n);let r=Gt(n),i=r.token,o;if(i&&!xa(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(xa(c)?i=c:yield Mg(n,void 0))}if(!e&&i&&xa(i))return{token:i.token};let s=!1;if($b()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Bb(Ub(n,yield qb()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield Mg(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Gt(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Ng.warn(c.message):Ng.error(c),o=c}let a;return i?o?xa(i)?a={token:i.token,internalError:o}:a=Fb(o):(a={token:i.token},r.token=i,yield Mg(n,i)):a=Fb(o),s&&mk(n,a),a})}function fk(t){return _(this,null,function*(){let e=t.app;jb(e);let{provider:n}=Gt(e);if($b()){let r=yield qb(),{token:i}=yield Bb(Ub(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function pk(t,e,n,r){let{app:i}=t,o=Gt(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&xa(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),kb(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>kb(t))}function Hb(t,e){let n=Gt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function kb(t){let{app:e}=t,n=Gt(e),r=n.tokenRefresher;r||(r=gk(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function gk(t){let{app:e}=t;return new Rg(()=>_(this,null,function*(){let n=Gt(e),r;if(n.token?r=yield Og(t,!0):r=yield Og(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Gt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Ob.RETRIAL_MIN_WAIT,Ob.RETRIAL_MAX_WAIT)}function mk(t,e){let n=Gt(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function xa(t){return t.expireTimeMillis-Date.now()>0}function Fb(t){return{token:hk(dk),error:t}}var kg=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Gt(this.app);for(let n of e)Hb(this.app,n.next);return Promise.resolve()}};function _k(t,e){return new kg(t,e)}function yk(t){return{getToken:e=>Og(t,e),getLimitedUseToken:()=>fk(t),addTokenListener:e=>pk(t,"INTERNAL",e),removeTokenListener:e=>Hb(t.app,e)}}var vk="@firebase/app-check",xk="0.8.2";var wk="app-check",Vb="app-check-internal";function Ek(){vs(new Nr(wk,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return _k(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(Vb).initialize()})),vs(new Nr(Vb,t=>{let e=t.getProvider("app-check").getImmediate();return yk(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Qn(vk,xk)}Ek();var bk=["localhost","0.0.0.0","127.0.0.1"],Z$=typeof window<"u"&&bk.includes(window.location.hostname);var Ik="firebase",Dk="10.8.0";rt.registerVersion(Ik,Dk,"app-compat");var Ck=["ngOnDestroy"],Wb=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(Ck.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(u=>n.run(()=>u)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,u)=>s.then(l=>{let d=l?.(...u);return r?.spy?.apply&&r.spy.apply(o,u,d),d})})})});var Ml=class{constructor(e){return e}},Do=new S("angularfire2.app.options"),Co=new S("angularfire2.app.name");function wa(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=rt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>rt.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;Tk("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Ml(s)}var Tk=(t,...e)=>{bp()&&typeof console<"u"&&console[t](...e)},Ak={provide:Ml,useFactory:wa,deps:[Do,J,[new qs,Co]]},Kb=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Do,useValue:n},{provide:Co,useValue:r}]}}constructor(n){rt.registerVersion("angularfire",ii.full,"core"),rt.registerVersion("angularfire",ii.full,"app-compat"),rt.registerVersion("angular",Xw.full,n.toString())}static \u0275fac=function(r){return new(r||t)(b(Ze))};static \u0275mod=Ee({type:t});static \u0275inj=we({providers:[Ak]})}return t})();function Rl(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return Sk(i,s)||(Gb("error",`${e} was already initialized on the ${n} Firebase App with different settings.${Mk?" You may need to reload as Firebase is not HMR aware.":""}`),Gb("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function Sk(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var Mk=typeof module<"u"&&!!module.hot,Gb=(t,...e)=>{bp()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Fg=new S("angularfire2.auth.use-emulator"),Vg=new S("angularfire2.auth.settings"),Lg=new S("angularfire2.auth.tenant-id"),jg=new S("angularfire2.auth.langugage-code"),Bg=new S("angularfire2.auth.use-device-language"),Ug=new S("angularfire.auth.persistence"),$g=(t,e,n,r,i,o,s,a)=>Rl(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[u,l]of Object.entries(s))c.settings[u]=l;return a&&c.setPersistence(a),c},[n,r,i,o,s,a]),qg=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,c,u,l,d,h,f){let v=new Ve,y=F(void 0).pipe(Tt(s.outsideAngular),me(()=>o.runOutsideAngular(()=>import("./chunk-SFVC2T43.js"))),L(()=>wa(n,o,r)),L(m=>$g(m,o,a,u,l,d,c,h)),iu({bufferSize:1,refCount:!1}));if(Xr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=F(null);else{y.pipe(At()).subscribe();let m=y.pipe(me(D=>D.getRedirectResult().then(P=>P,()=>null)),gt,iu({bufferSize:1,refCount:!1})),E=y.pipe(me(D=>new Z(P=>({unsubscribe:o.runOutsideAngular(()=>D.onAuthStateChanged(j=>P.next(j),j=>P.error(j),()=>P.complete()))})))),R=y.pipe(me(D=>new Z(P=>({unsubscribe:o.runOutsideAngular(()=>D.onIdTokenChanged(j=>P.next(j),j=>P.error(j),()=>P.complete()))}))));this.authState=m.pipe(ou(E),Bt(s.outsideAngular),Tt(s.insideAngular)),this.user=m.pipe(ou(R),Bt(s.outsideAngular),Tt(s.insideAngular)),this.idToken=this.user.pipe(me(D=>D?ie(D.getIdToken()):F(null))),this.idTokenResult=this.user.pipe(me(D=>D?ie(D.getIdTokenResult()):F(null))),this.credential=Kh(m,v,this.authState.pipe(Le(D=>!D))).pipe(L(D=>D?.user?D:null),Bt(s.outsideAngular),Tt(s.insideAngular))}return Wb(this,y,o,{spy:{apply:(m,E,R)=>{(m.startsWith("signIn")||m.startsWith("createUser"))&&R.then(D=>v.next(D))}}})}static \u0275fac=function(r){return new(r||t)(b(Do),b(Co,8),b(Ze),b(J),b(Al),b(Fg,8),b(Vg,8),b(Lg,8),b(jg,8),b(Bg,8),b(Ug,8),b(ri,8))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),Qb=(()=>{class t{constructor(){rt.registerVersion("angularfire",ii.full,"auth-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ee({type:t});static \u0275inj=we({providers:[qg]})}return t})();var Pk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Kt={},T,dm=dm||{},q=Pk||self;function zl(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ka(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Nk(t){return Object.prototype.hasOwnProperty.call(t,Hg)&&t[Hg]||(t[Hg]=++Ok)}var Hg="closure_uid_"+(1e9*Math.random()>>>0),Ok=0;function kk(t,e,n){return t.call.apply(t.bind,arguments)}function Fk(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Je(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Je=kk:Je=Fk,Je.apply(null,arguments)}function Pl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function $e(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function hr(){this.s=this.s,this.o=this.o}var Vk=0;hr.prototype.s=!1;hr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Vk!=0)&&Nk(this)};hr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var cI=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function hm(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Yb(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(zl(r)){let i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function et(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}et.prototype.h=function(){this.defaultPrevented=!0};var Lk=function(){if(!q.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};q.addEventListener("test",n,e),q.removeEventListener("test",n,e)}catch{}return t}();function Ta(t){return/^[\s\xa0]*$/.test(t)}function Gl(){var t=q.navigator;return t&&(t=t.userAgent)?t:""}function fn(t){return Gl().indexOf(t)!=-1}function fm(t){return fm[" "](t),t}fm[" "]=function(){};function jk(t,e){var n=TF;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var Bk=fn("Opera"),Mo=fn("Trident")||fn("MSIE"),uI=fn("Edge"),Qg=uI||Mo,lI=fn("Gecko")&&!(Gl().toLowerCase().indexOf("webkit")!=-1&&!fn("Edge"))&&!(fn("Trident")||fn("MSIE"))&&!fn("Edge"),Uk=Gl().toLowerCase().indexOf("webkit")!=-1&&!fn("Edge");function dI(){var t=q.document;return t?t.documentMode:void 0}var Yg;e:{if(Nl="",Ol=function(){var t=Gl();if(lI)return/rv:([^\);]+)(\)|;)/.exec(t);if(uI)return/Edge\/([\d\.]+)/.exec(t);if(Mo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Uk)return/WebKit\/(\S+)/.exec(t);if(Bk)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Ol&&(Nl=Ol?Ol[1]:""),Mo&&(kl=dI(),kl!=null&&kl>parseFloat(Nl))){Yg=String(kl);break e}Yg=Nl}var Nl,Ol,kl,Zg;q.document&&Mo?(zg=dI(),Zg=zg||parseInt(Yg,10)||void 0):Zg=void 0;var zg,$k=Zg;function Aa(t,e){if(et.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(lI){e:{try{fm(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:qk[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Aa.$.h.call(this)}}$e(Aa,et);var qk={2:"touch",3:"pen",4:"mouse"};Aa.prototype.h=function(){Aa.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Fa="closure_listenable_"+(1e6*Math.random()|0),Hk=0;function zk(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++Hk,this.fa=this.ia=!1}function Wl(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function pm(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function Gk(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function hI(t){let e={};for(let n in t)e[n]=t[n];return e}var Zb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fI(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<Zb.length;o++)n=Zb[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Kl(t){this.src=t,this.g={},this.h=0}Kl.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=Jg(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new zk(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function Xg(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=cI(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Wl(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Jg(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var gm="closure_lm_"+(1e6*Math.random()|0),Gg={};function pI(t,e,n,r,i){if(r&&r.once)return mI(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)pI(t,e[o],n,r,i);return null}return n=ym(n),t&&t[Fa]?t.O(e,n,ka(r)?!!r.capture:!!r,i):gI(t,e,n,!1,r,i)}function gI(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=ka(i)?!!i.capture:!!i,a=_m(t);if(a||(t[gm]=a=new Kl(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=Wk(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Lk||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(yI(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Wk(){function t(n){return e.call(t.src,t.listener,n)}let e=Kk;return t}function mI(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)mI(t,e[o],n,r,i);return null}return n=ym(n),t&&t[Fa]?t.P(e,n,ka(r)?!!r.capture:!!r,i):gI(t,e,n,!0,r,i)}function _I(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)_I(t,e[o],n,r,i);else r=ka(r)?!!r.capture:!!r,n=ym(n),t&&t[Fa]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=Jg(o,n,r,i),-1<n&&(Wl(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=_m(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Jg(e,n,r,i)),(n=-1<t?e[t]:null)&&mm(n))}function mm(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Fa])Xg(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(yI(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_m(e))?(Xg(n,t),n.h==0&&(n.src=null,e[gm]=null)):Wl(t)}}}function yI(t){return t in Gg?Gg[t]:Gg[t]="on"+t}function Kk(t,e){if(t.fa)t=!0;else{e=new Aa(e,this);var n=t.listener,r=t.la||t.src;t.ia&&mm(t),t=n.call(r,e)}return t}function _m(t){return t=t[gm],t instanceof Kl?t:null}var Wg="__closure_events_fn_"+(1e9*Math.random()>>>0);function ym(t){return typeof t=="function"?t:(t[Wg]||(t[Wg]=function(e){return t.handleEvent(e)}),t[Wg])}function Ue(){hr.call(this),this.i=new Kl(this),this.S=this,this.J=null}$e(Ue,hr);Ue.prototype[Fa]=!0;Ue.prototype.removeEventListener=function(t,e,n,r){_I(this,t,e,n,r)};function We(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new et(e,t);else if(e instanceof et)e.target=e.target||t;else{var i=e;e=new et(r,t),fI(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Fl(s,r,!0,e)&&i}if(s=e.g=t,i=Fl(s,r,!0,e)&&i,i=Fl(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=Fl(s,r,!1,e)&&i}Ue.prototype.N=function(){if(Ue.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Wl(n[r]);delete t.g[e],t.h--}}this.J=null};Ue.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Ue.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Fl(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,c=s.la||s.src;s.ia&&Xg(t.i,s),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var vm=q.JSON.stringify,em=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function Qk(){var t=xm;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var tm=class{constructor(){this.h=this.g=null}add(e,n){let r=vI.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},vI=new em(()=>new nm,t=>t.reset()),nm=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function Yk(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Zk(t){q.setTimeout(()=>{throw t},0)}var Sa,Ma=!1,xm=new tm,xI=()=>{let t=q.Promise.resolve(void 0);Sa=()=>{t.then(Xk)}},Xk=()=>{for(var t;t=Qk();){try{t.h.call(t.g)}catch(n){Zk(n)}var e=vI;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ma=!1};function Ql(t,e){Ue.call(this),this.h=t||1,this.g=e||q,this.j=Je(this.qb,this),this.l=Date.now()}$e(Ql,Ue);T=Ql.prototype;T.ga=!1;T.T=null;T.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),We(this,"tick"),this.ga&&(wm(this),this.start()))}};T.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function wm(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}T.N=function(){Ql.$.N.call(this),wm(this),delete this.g};function Em(t,e,n){if(typeof t=="function")n&&(t=Je(t,n));else if(t&&typeof t.handleEvent=="function")t=Je(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:q.setTimeout(t,e||0)}function wI(t){t.g=Em(()=>{t.g=null,t.i&&(t.i=!1,wI(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var rm=class extends hr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:wI(this)}N(){super.N(),this.g&&(q.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Ra(t){hr.call(this),this.h=t,this.g={}}$e(Ra,hr);var Xb=[];function EI(t,e,n,r){Array.isArray(n)||(n&&(Xb[0]=n.toString()),n=Xb);for(var i=0;i<n.length;i++){var o=pI(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function bI(t){pm(t.g,function(e,n){this.g.hasOwnProperty(n)&&mm(e)},t),t.g={}}Ra.prototype.N=function(){Ra.$.N.call(this),bI(this)};Ra.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Yl(){this.g=!0}Yl.prototype.Ea=function(){this.g=!1};function Jk(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");s=2<=d.length&&d[1]=="type"?s+(l+"="+u+"&"):s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function eF(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function Ao(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+nF(t,n)+(r?" "+r:"")})}function tF(t,e){t.info(function(){return"TIMEOUT: "+e})}Yl.prototype.info=function(){};function nF(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return vm(n)}catch{return e}}var ci={},Jb=null;function Zl(){return Jb=Jb||new Ue}ci.Ta="serverreachability";function II(t){et.call(this,ci.Ta,t)}$e(II,et);function Pa(t){let e=Zl();We(e,new II(e))}ci.STAT_EVENT="statevent";function DI(t,e){et.call(this,ci.STAT_EVENT,t),this.stat=e}$e(DI,et);function at(t){let e=Zl();We(e,new DI(e,t))}ci.Ua="timingevent";function CI(t,e){et.call(this,ci.Ua,t),this.size=e}$e(CI,et);function Va(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return q.setTimeout(function(){t()},e)}var Xl={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},TI={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function bm(){}bm.prototype.h=null;function eI(t){return t.h||(t.h=t.i())}function AI(){}var La={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Im(){et.call(this,"d")}$e(Im,et);function Dm(){et.call(this,"c")}$e(Dm,et);var im;function Jl(){}$e(Jl,bm);Jl.prototype.g=function(){return new XMLHttpRequest};Jl.prototype.i=function(){return{}};im=new Jl;function ja(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Ra(this),this.P=rF,t=Qg?125:void 0,this.V=new Ql(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new SI}function SI(){this.i=null,this.g="",this.h=!1}var rF=45e3,MI={},om={};T=ja.prototype;T.setTimeout=function(t){this.P=t};function sm(t,e,n){t.L=1,t.A=td(jn(e)),t.u=n,t.S=!0,RI(t,null)}function RI(t,e){t.G=Date.now(),Ba(t),t.B=jn(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),jI(n.i,"t",r),t.o=0,n=t.l.J,t.h=new SI,t.g=sD(t.l,n?e:null,!t.u),0<t.O&&(t.M=new rm(Je(t.Pa,t,t.g),t.O)),EI(t.U,t.g,"readystatechange",t.nb),e=t.I?hI(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Pa(),Jk(t.j,t.v,t.B,t.m,t.W,t.u)}T.nb=function(t){t=t.target;let e=this.M;e&&pn(t)==3?e.l():this.Pa(t)};T.Pa=function(t){try{if(t==this.g)e:{let l=pn(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||Qg||this.g&&(this.h.h||this.g.ja()||iI(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?Pa(3):Pa(2)),ed(this);var n=this.g.da();this.ca=n;t:if(PI(this)){var r=iI(this.g);t="";var i=r.length,o=pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){oi(this),Ca(this);var s="";break t}this.h.i=new q.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,eF(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ta(a)){var u=a;break t}}u=null}if(n=u)Ao(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,am(this,n);else{this.i=!1,this.s=3,at(12),oi(this),Ca(this);break e}}this.S?(NI(this,l,s),Qg&&this.i&&l==3&&(EI(this.U,this.V,"tick",this.mb),this.V.start())):(Ao(this.j,this.m,s,null),am(this,s)),l==4&&oi(this),this.i&&!this.J&&(l==4?nD(this.l,this):(this.i=!1,Ba(this)))}else IF(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),oi(this),Ca(this)}}}catch{}finally{}};function PI(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function NI(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=iF(t,n),i==om){e==4&&(t.s=4,at(14),r=!1),Ao(t.j,t.m,null,"[Incomplete Response]");break}else if(i==MI){t.s=4,at(15),Ao(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ao(t.j,t.m,i,null),am(t,i);PI(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,at(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Rm(e),e.M=!0,at(11))):(Ao(t.j,t.m,n,"[Invalid Chunked Response]"),oi(t),Ca(t))}T.mb=function(){if(this.g){var t=pn(this.g),e=this.g.ja();this.o<e.length&&(ed(this),NI(this,t,e),this.i&&t!=4&&Ba(this))}};function iF(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?om:(n=Number(e.substring(n,r)),isNaN(n)?MI:(r+=1,r+n>e.length?om:(e=e.slice(r,r+n),t.o=r+n,e)))}T.cancel=function(){this.J=!0,oi(this)};function Ba(t){t.Y=Date.now()+t.P,OI(t,t.P)}function OI(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Va(Je(t.lb,t),e)}function ed(t){t.C&&(q.clearTimeout(t.C),t.C=null)}T.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(tF(this.j,this.B),this.L!=2&&(Pa(),at(17)),oi(this),this.s=2,Ca(this)):OI(this,this.Y-t)};function Ca(t){t.l.H==0||t.J||nD(t.l,t)}function oi(t){ed(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,wm(t.V),bI(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function am(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||cm(n.i,t))){if(!t.K&&cm(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Ul(n),id(n);else break e;Mm(n),at(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Va(Je(n.ib,n),6e3));if(1>=$I(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else si(n,11)}else if((t.K||n.g==t)&&Ul(n),!Ta(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let v=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var o=r.i;o.g||v.indexOf("spdy")==-1&&v.indexOf("quic")==-1&&v.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(Cm(o,o.h),o.h=null))}if(r.F){let y=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.Da=y,pe(r.I,r.F,y))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=oD(r,r.J?r.pa:null,r.Y),s.K){qI(r.i,s);var a=s,c=r.L;c&&a.setTimeout(c),a.C&&(ed(a),Ba(a)),r.g=s}else eD(r);0<n.j.length&&od(n)}else u[0]!="stop"&&u[0]!="close"||si(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?si(n,7):Sm(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Pa(4)}catch{}}function oF(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(zl(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function sF(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(zl(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function kI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(zl(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=sF(t),r=oF(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var FI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aF(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ai(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ai){this.h=t.h,jl(this,t.j),this.s=t.s,this.g=t.g,Bl(this,t.m),this.l=t.l;var e=t.i,n=new Na;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),tI(this,n),this.o=t.o}else t&&(e=String(t).match(FI))?(this.h=!1,jl(this,e[1]||"",!0),this.s=Ia(e[2]||""),this.g=Ia(e[3]||"",!0),Bl(this,e[4]),this.l=Ia(e[5]||"",!0),tI(this,e[6]||"",!0),this.o=Ia(e[7]||"")):(this.h=!1,this.i=new Na(null,this.h))}ai.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Da(e,nI,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Da(e,nI,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Da(n,n.charAt(0)=="/"?lF:uF,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Da(n,hF)),t.join("")};function jn(t){return new ai(t)}function jl(t,e,n){t.j=n?Ia(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Bl(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function tI(t,e,n){e instanceof Na?(t.i=e,fF(t.i,t.h)):(n||(e=Da(e,dF)),t.i=new Na(e,t.h))}function pe(t,e,n){t.i.set(e,n)}function td(t){return pe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ia(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Da(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,cF),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function cF(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var nI=/[#\/\?@]/g,uF=/[#\?:]/g,lF=/[#\?]/g,dF=/[#\?@]/g,hF=/#/g;function Na(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function fr(t){t.g||(t.g=new Map,t.h=0,t.i&&aF(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}T=Na.prototype;T.add=function(t,e){fr(this),this.i=null,t=Ro(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function VI(t,e){fr(t),e=Ro(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function LI(t,e){return fr(t),e=Ro(t,e),t.g.has(e)}T.forEach=function(t,e){fr(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};T.ta=function(){fr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};T.Z=function(t){fr(this);let e=[];if(typeof t=="string")LI(this,t)&&(e=e.concat(this.g.get(Ro(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};T.set=function(t,e){return fr(this),this.i=null,t=Ro(this,t),LI(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};T.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function jI(t,e,n){VI(t,e),0<n.length&&(t.i=null,t.g.set(Ro(t,e),hm(n)),t.h+=n.length)}T.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function Ro(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function fF(t,e){e&&!t.j&&(fr(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(VI(this,r),jI(this,i,n))},t)),t.j=e}var pF=class{constructor(t,e){this.g=t,this.map=e}};function BI(t){this.l=t||gF,q.PerformanceNavigationTiming?(t=q.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(q.g&&q.g.Ka&&q.g.Ka()&&q.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var gF=10;function UI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function $I(t){return t.h?1:t.g?t.g.size:0}function cm(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Cm(t,e){t.g?t.g.add(e):t.h=e}function qI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}BI.prototype.cancel=function(){if(this.i=HI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function HI(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return hm(t.i)}var mF=class{stringify(t){return q.JSON.stringify(t,void 0)}parse(t){return q.JSON.parse(t,void 0)}};function _F(){this.g=new mF}function yF(t,e,n){let r=n||"";try{kI(t,function(i,o){let s=i;ka(i)&&(s=vm(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function vF(t,e){let n=new Yl;if(q.Image){let r=new Image;r.onload=Pl(Vl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Pl(Vl,n,r,"TestLoadImage: error",!1,e),r.onabort=Pl(Vl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Pl(Vl,n,r,"TestLoadImage: timeout",!1,e),q.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Vl(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ua(t){this.l=t.ec||null,this.j=t.ob||!1}$e(Ua,bm);Ua.prototype.g=function(){return new nd(this.l,this.j)};Ua.prototype.i=function(t){return function(){return t}}({});function nd(t,e){Ue.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Tm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$e(nd,Ue);var Tm=0;T=nd.prototype;T.open=function(t,e){if(this.readyState!=Tm)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Oa(this)};T.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||q).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};T.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$a(this)),this.readyState=Tm};T.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Oa(this)),this.g&&(this.readyState=3,Oa(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof q.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zI(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function zI(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}T.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?$a(this):Oa(this),this.readyState==3&&zI(this)}};T.Za=function(t){this.g&&(this.response=this.responseText=t,$a(this))};T.Ya=function(t){this.g&&(this.response=t,$a(this))};T.ka=function(){this.g&&$a(this)};function $a(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Oa(t)}T.setRequestHeader=function(t,e){this.v.append(t,e)};T.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};T.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Oa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(nd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var xF=q.JSON.parse;function be(t){Ue.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=GI,this.L=this.M=!1}$e(be,Ue);var GI="",wF=/^https?$/i,EF=["POST","PUT"];T=be.prototype;T.Oa=function(t){this.M=t};T.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():im.g(),this.C=this.u?eI(this.u):eI(im),this.g.onreadystatechange=Je(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){rI(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=q.FormData&&t instanceof q.FormData,!(0<=cI(EF,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{QI(this),0<this.B&&((this.L=bF(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Je(this.ua,this)):this.A=Em(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){rI(this,o)}};function bF(t){return Mo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}T.ua=function(){typeof dm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,We(this,"timeout"),this.abort(8))};function rI(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,WI(t),rd(t)}function WI(t){t.F||(t.F=!0,We(t,"complete"),We(t,"error"))}T.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,We(this,"complete"),We(this,"abort"),rd(this))};T.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rd(this,!0)),be.$.N.call(this)};T.La=function(){this.s||(this.G||this.v||this.l?KI(this):this.kb())};T.kb=function(){KI(this)};function KI(t){if(t.h&&typeof dm<"u"&&(!t.C[1]||pn(t)!=4||t.da()!=2)){if(t.v&&pn(t)==4)Em(t.La,0,t);else if(We(t,"readystatechange"),pn(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(FI)[1]||null;!i&&q.self&&q.self.location&&(i=q.self.location.protocol.slice(0,-1)),r=!wF.test(i?i.toLowerCase():"")}n=r}if(n)We(t,"complete"),We(t,"success");else{t.m=6;try{var o=2<pn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",WI(t)}}finally{rd(t)}}}}function rd(t,e){if(t.g){QI(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||We(t,"ready");try{n.onreadystatechange=r}catch{}}}function QI(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(q.clearTimeout(t.A),t.A=null)}T.isActive=function(){return!!this.g};function pn(t){return t.g?t.g.readyState:0}T.da=function(){try{return 2<pn(this)?this.g.status:-1}catch{return-1}};T.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};T.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),xF(e)}};function iI(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case GI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function IF(t){let e={};t=(t.g&&2<=pn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Ta(t[r]))continue;var n=Yk(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[i]||[];e[i]=o,o.push(n)}Gk(e,function(r){return r.join(", ")})}T.Ia=function(){return this.m};T.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function YI(t){let e="";return pm(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Am(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=YI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):pe(t,e,n))}function Ea(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ZI(t){this.Ga=0,this.j=[],this.l=new Yl,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ea("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ea("baseRetryDelayMs",5e3,t),this.hb=Ea("retryDelaySeedMs",1e4,t),this.eb=Ea("forwardChannelMaxRetries",2,t),this.xa=Ea("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new BI(t&&t.concurrentRequestLimit),this.Ja=new _F,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}T=ZI.prototype;T.ra=8;T.H=1;function Sm(t){if(XI(t),t.H==3){var e=t.W++,n=jn(t.I);if(pe(n,"SID",t.K),pe(n,"RID",e),pe(n,"TYPE","terminate"),qa(t,n),e=new ja(t,t.l,e),e.L=2,e.A=td(jn(n)),n=!1,q.navigator&&q.navigator.sendBeacon)try{n=q.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&q.Image&&(new Image().src=e.A,n=!0),n||(e.g=sD(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Ba(e)}iD(t)}function id(t){t.g&&(Rm(t),t.g.cancel(),t.g=null)}function XI(t){id(t),t.u&&(q.clearTimeout(t.u),t.u=null),Ul(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&q.clearTimeout(t.m),t.m=null)}function od(t){if(!UI(t.i)&&!t.m){t.m=!0;var e=t.Na;Sa||xI(),Ma||(Sa(),Ma=!0),xm.add(e,t),t.C=0}}function DF(t,e){return $I(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Va(Je(t.Na,t,e),rD(t,t.C)),t.C++,!0)}T.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new ja(this,this.l,t),o=this.s;if(this.U&&(o?(o=hI(o),fI(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=JI(this,i,e),n=jn(this.I),pe(n,"RID",t),pe(n,"CVER",22),this.F&&pe(n,"X-HTTP-Session-Id",this.F),qa(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(YI(o)))+"&"+e:this.o&&Am(n,this.o,o)),Cm(this.i,i),this.bb&&pe(n,"TYPE","init"),this.P?(pe(n,"$req",e),pe(n,"SID","null"),i.aa=!0,sm(i,n,null)):sm(i,n,e),this.H=2}}else this.H==3&&(t?oI(this,t):this.j.length==0||UI(this.i)||oI(this))};function oI(t,e){var n;e?n=e.m:n=t.W++;let r=jn(t.I);pe(r,"SID",t.K),pe(r,"RID",n),pe(r,"AID",t.V),qa(t,r),t.o&&t.s&&Am(r,t.o,t.s),n=new ja(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=JI(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Cm(t.i,n),sm(n,r,e)}function qa(t,e){t.na&&pm(t.na,function(n,r){pe(e,r,n)}),t.h&&kI({},function(n,r){pe(e,r,n)})}function JI(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Je(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=o,0>u)o=Math.max(0,i[c].g-100),a=!1;else try{yF(l,s,"req"+u+"_")}catch{r&&r(l)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function eD(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Sa||xI(),Ma||(Sa(),Ma=!0),xm.add(e,t),t.A=0}}function Mm(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Va(Je(t.Ma,t),rD(t,t.A)),t.A++,!0)}T.Ma=function(){if(this.u=null,tD(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Va(Je(this.jb,this),t)}};T.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,at(10),id(this),tD(this))};function Rm(t){t.B!=null&&(q.clearTimeout(t.B),t.B=null)}function tD(t){t.g=new ja(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=jn(t.wa);pe(e,"RID","rpc"),pe(e,"SID",t.K),pe(e,"AID",t.V),pe(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&pe(e,"TO",t.qa),pe(e,"TYPE","xmlhttp"),qa(t,e),t.o&&t.s&&Am(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=td(jn(e)),n.u=null,n.S=!0,RI(n,t)}T.ib=function(){this.v!=null&&(this.v=null,id(this),Mm(this),at(19))};function Ul(t){t.v!=null&&(q.clearTimeout(t.v),t.v=null)}function nD(t,e){var n=null;if(t.g==e){Ul(t),Rm(t),t.g=null;var r=2}else if(cm(t.i,e))n=e.F,qI(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Zl(),We(r,new CI(r,n)),od(t)}else eD(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&DF(t,e)||r==2&&Mm(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:si(t,5);break;case 4:si(t,10);break;case 3:si(t,6);break;default:si(t,2)}}}function rD(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function si(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Je(t.pb,t);n||(n=new ai("//www.google.com/images/cleardot.gif"),q.location&&q.location.protocol=="http"||jl(n,"https"),td(n)),vF(n.toString(),r)}else at(2);t.H=0,t.h&&t.h.za(e),iD(t),XI(t)}T.pb=function(t){t?(this.l.info("Successfully pinged google.com"),at(2)):(this.l.info("Failed to ping google.com"),at(1))};function iD(t){if(t.H=0,t.ma=[],t.h){let e=HI(t.i);(e.length!=0||t.j.length!=0)&&(Yb(t.ma,e),Yb(t.ma,t.j),t.i.i.length=0,hm(t.j),t.j.length=0),t.h.ya()}}function oD(t,e,n){var r=n instanceof ai?jn(n):new ai(n);if(r.g!="")e&&(r.g=e+"."+r.g),Bl(r,r.m);else{var i=q.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new ai(null);r&&jl(o,r),e&&(o.g=e),i&&Bl(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&pe(r,n,e),pe(r,"VER",t.ra),qa(t,r),r}function sD(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new be(new Ua({ob:n})):new be(t.va),e.Oa(t.J),e}T.isActive=function(){return!!this.h&&this.h.isActive(this)};function aD(){}T=aD.prototype;T.Ba=function(){};T.Aa=function(){};T.za=function(){};T.ya=function(){};T.isActive=function(){return!0};T.Va=function(){};function $l(){if(Mo&&!(10<=Number($k)))throw Error("Environmental error: no available transport.")}$l.prototype.g=function(t,e){return new bt(t,e)};function bt(t,e){Ue.call(this),this.g=new ZI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ta(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ta(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Po(this)}$e(bt,Ue);bt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;at(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=oD(t,null,t.Y),od(t)};bt.prototype.close=function(){Sm(this.g)};bt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=vm(t),t=n);e.j.push(new pF(e.fb++,t)),e.H==3&&od(e)};bt.prototype.N=function(){this.g.h=null,delete this.j,Sm(this.g),delete this.g,bt.$.N.call(this)};function cD(t){Im.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}$e(cD,Im);function uD(){Dm.call(this),this.status=1}$e(uD,Dm);function Po(t){this.g=t}$e(Po,aD);Po.prototype.Ba=function(){We(this.g,"a")};Po.prototype.Aa=function(t){We(this.g,new cD(t))};Po.prototype.za=function(t){We(this.g,new uD)};Po.prototype.ya=function(){We(this.g,"b")};function CF(){this.blockSize=-1}function Wt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}$e(Wt,CF);Wt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Kg(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}Wt.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)Kg(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){Kg(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){Kg(this,r),i=0;break}}this.h=i,this.i+=e};Wt.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ae(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var TF={};function Pm(t){return-128<=t&&128>t?jk(t,function(e){return new ae([e|0],0>e?-1:0)}):new ae([t|0],0>t?-1:0)}function gn(t){if(isNaN(t)||!isFinite(t))return So;if(0>t)return Ge(gn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=um;return new ae(e,0)}function lD(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ge(lD(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=gn(Math.pow(e,8)),r=So,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=gn(Math.pow(e,o)),r=r.R(o).add(gn(s))):(r=r.R(n),r=r.add(gn(s)))}return r}var um=4294967296,So=Pm(0),lm=Pm(1),sI=Pm(16777216);T=ae.prototype;T.ea=function(){if(Ot(this))return-Ge(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:um+r)*e,e*=um}return t};T.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Ln(this))return"0";if(Ot(this))return"-"+Ge(this).toString(t);for(var e=gn(Math.pow(t,6)),n=this,r="";;){var i=Hl(n,e).g;n=ql(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Ln(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};T.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Ln(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Ot(t){return t.h==-1}T.X=function(t){return t=ql(this,t),Ot(t)?-1:Ln(t)?0:1};function Ge(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ae(n,~t.h).add(lm)}T.abs=function(){return Ot(this)?Ge(this):this};T.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new ae(n,n[n.length-1]&-2147483648?-1:0)};function ql(t,e){return t.add(Ge(e))}T.R=function(t){if(Ln(this)||Ln(t))return So;if(Ot(this))return Ot(t)?Ge(this).R(Ge(t)):Ge(Ge(this).R(t));if(Ot(t))return Ge(this.R(Ge(t)));if(0>this.X(sI)&&0>t.X(sI))return gn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=s*c,Ll(n,2*r+2*i),n[2*r+2*i+1]+=o*c,Ll(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Ll(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Ll(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ae(n,0)};function Ll(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ba(t,e){this.g=t,this.h=e}function Hl(t,e){if(Ln(e))throw Error("division by zero");if(Ln(t))return new ba(So,So);if(Ot(t))return e=Hl(Ge(t),e),new ba(Ge(e.g),Ge(e.h));if(Ot(e))return e=Hl(t,Ge(e)),new ba(Ge(e.g),e.h);if(30<t.g.length){if(Ot(t)||Ot(e))throw Error("slowDivide_ only works with positive integers.");for(var n=lm,r=e;0>=r.X(t);)n=aI(n),r=aI(r);var i=To(n,1),o=To(r,1);for(r=To(r,2),n=To(n,2);!Ln(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=To(r,1),n=To(n,1)}return e=ql(t,i.R(e)),new ba(i,e)}for(i=So;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=gn(n),s=o.R(e);Ot(s)||0<s.X(t);)n-=r,o=gn(n),s=o.R(e);Ln(o)&&(o=lm),i=i.add(o),t=ql(t,s)}return new ba(i,t)}T.gb=function(t){return Hl(this,t).h};T.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ae(n,this.h&t.h)};T.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ae(n,this.h|t.h)};T.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ae(n,this.h^t.h)};function aI(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ae(n,t.h)}function To(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new ae(i,t.h)}$l.prototype.createWebChannel=$l.prototype.g;bt.prototype.send=bt.prototype.u;bt.prototype.open=bt.prototype.m;bt.prototype.close=bt.prototype.close;Xl.NO_ERROR=0;Xl.TIMEOUT=8;Xl.HTTP_ERROR=6;TI.COMPLETE="complete";AI.EventType=La;La.OPEN="a";La.CLOSE="b";La.ERROR="c";La.MESSAGE="d";Ue.prototype.listen=Ue.prototype.O;be.prototype.listenOnce=be.prototype.P;be.prototype.getLastError=be.prototype.Sa;be.prototype.getLastErrorCode=be.prototype.Ia;be.prototype.getStatus=be.prototype.da;be.prototype.getResponseJson=be.prototype.Wa;be.prototype.getResponseText=be.prototype.ja;be.prototype.send=be.prototype.ha;be.prototype.setWithCredentials=be.prototype.Oa;Wt.prototype.digest=Wt.prototype.l;Wt.prototype.reset=Wt.prototype.reset;Wt.prototype.update=Wt.prototype.j;ae.prototype.add=ae.prototype.add;ae.prototype.multiply=ae.prototype.R;ae.prototype.modulo=ae.prototype.gb;ae.prototype.compare=ae.prototype.X;ae.prototype.toNumber=ae.prototype.ea;ae.prototype.toString=ae.prototype.toString;ae.prototype.getBits=ae.prototype.D;ae.fromNumber=gn;ae.fromString=lD;var dD=Kt.createWebChannelTransport=function(){return new $l},hD=Kt.getStatEventTarget=function(){return Zl()},sd=Kt.ErrorCode=Xl,fD=Kt.EventType=TI,pD=Kt.Event=ci,Nm=Kt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},E8=Kt.FetchXmlHttpFactory=Ua,Ha=Kt.WebChannel=AI,gD=Kt.XhrIo=be,mD=Kt.Md5=Wt,ui=Kt.Integer=ae;var _D="@firebase/firestore";var Oe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Oe.UNAUTHENTICATED=new Oe(null),Oe.GOOGLE_CREDENTIALS=new Oe("google-credentials-uid"),Oe.FIRST_PARTY=new Oe("first-party-uid"),Oe.MOCK_USER=new Oe("mock-user");var cs="10.8.0";var xr=new kc("@firebase/firestore");function Vo(){return xr.logLevel}function mC(t){xr.setLogLevel(t)}function w(t,...e){if(xr.logLevel<=Jt.DEBUG){let n=e.map(k_);xr.debug(`Firestore (${cs}): ${t}`,...n)}}function Ae(t,...e){if(xr.logLevel<=Jt.ERROR){let n=e.map(k_);xr.error(`Firestore (${cs}): ${t}`,...n)}}function Ft(t,...e){if(xr.logLevel<=Jt.WARN){let n=e.map(k_);xr.warn(`Firestore (${cs}): ${t}`,...n)}}function k_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function M(t="Unexpected state"){let e=`FIRESTORE (${cs}) INTERNAL ASSERTION FAILED: `+t;throw Ae(e),new Error(e)}function k(t,e){t||M()}function _C(t,e){t||M()}function A(t,e){return t}var g={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},x=class extends Fy{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ke=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var _d=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Lm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Oe.UNAUTHENTICATED))}shutdown(){}},jm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Bm=class{constructor(e){this.t=e,this.currentUser=Oe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new ke;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ke,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>_(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{w("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(w("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ke)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(w("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(k(typeof r.accessToken=="string"),new _d(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return k(e===null||typeof e=="string"),new Oe(e)}},Um=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Oe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},$m=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Um(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Oe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},qm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Hm=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&w("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,w("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{w("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):w("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(k(typeof n.token=="string"),this.R=n.token,new qm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function AF(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var yd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=AF(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function z(t,e){return t<e?-1:t>e?1:0}function Go(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function yC(t){return t+"\0"}var xe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new x(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new x(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new x(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?z(this.nanoseconds,e.nanoseconds):z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var V=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new xe(0,0))}static max(){return new t(new xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var vd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&M(),r===void 0?r=e.length-n:r>e.length-n&&M(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ne=class t extends vd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new x(g.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},SF=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Se=class t extends vd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return SF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new x(g.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new x(g.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new x(g.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new x(g.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var C=class t{constructor(e){this.path=e}static fromPath(e){return new t(ne.fromString(e))}static fromName(e){return new t(ne.fromString(e).popFirst(5))}static empty(){return new t(ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ne(e.slice()))}};var Wo=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function zm(t){return t.fields.find(e=>e.kind===2)}function di(t){return t.fields.filter(e=>e.kind!==2)}Wo.UNKNOWN_ID=-1;var qo=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var nc=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Vt.min())}};function vC(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=V.fromTimestamp(r===1e9?new xe(n+1,0):new xe(n,r));return new Vt(i,C.empty(),e)}function xC(t){return new Vt(t.readTime,t.key,-1)}var Vt=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(V.min(),C.empty(),-1)}static max(){return new t(V.max(),C.empty(),-1)}};function F_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=C.comparator(t.documentKey,e.documentKey),n!==0?n:z(t.largestBatchId,e.largestBatchId))}var wC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",xd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Mr(t){return _(this,null,function*(){if(t.code!==g.FAILED_PRECONDITION||t.message!==wC)throw t;w("LocalStore","Unexpectedly lost primary lease")})}var p=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&M(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;n(e[u]).next(l=>{s[u]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var wd=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new ke,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new _i(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=V_(r.target.error);this.V.reject(new _i(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new _i(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(w("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new Wm(n)}},$n=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(ys())===12.2&&Ae("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return w("SimpleDb","Removing database:",e),hi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Oc())return!1;if(t.C())return!0;let e=ys(),n=t.S(e),r=0<n&&n<10,i=t.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return _(this,null,function*(){return this.db||(w("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new _i(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new x(g.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new x(g.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new _i(e,s))},i.onupgradeneeded=o=>{w("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{w("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return _(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(e);let a=wd.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),p.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&s<3;if(w("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Gm=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return hi(this.k.delete())}},_i=class extends x{constructor(e,n){super(g.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Rr(t){return t.name==="IndexedDbTransactionError"}var Wm=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(w("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(w("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),hi(r)}add(e){return w("SimpleDb","ADD",this.store.name,e,e),hi(this.store.add(e))}get(e){return hi(this.store.get(e)).next(n=>(n===void 0&&(n=null),w("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return w("SimpleDb","DELETE",this.store.name,e),hi(this.store.delete(e))}count(){return w("SimpleDb","COUNT",this.store.name),hi(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new p((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.G(o,(a,c)=>{s.push(c)}).next(()=>s)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new p((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){w("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new p((r,i)=>{n.onerror=o=>{let s=V_(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){let r=[];return new p((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new Gm(a),u=n(a.primaryKey,a.value,c);if(u instanceof p){let l=u.catch(d=>(c.done(),p.reject(d)));r.push(l)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>p.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function hi(t){return new p((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=V_(r.target.error);n(i)}})}var yD=!1;function V_(t){let e=$n.S(ys());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new x("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yD||(yD=!0,setTimeout(()=>{throw r},0)),r}}return t}var Km=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){w("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>_(this,null,function*(){this.task=null;try{w("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(n){Rr(n)?w("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Mr(n)}yield this.ee(6e4)}))}},Qm=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return _(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let r=new Set,i=n,o=!0;return p.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return w("IndexBackfiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(w("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=xC(o);F_(s,r)>0&&(r=s)}),new Vt(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var It=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Dc(t){return t==null}function rc(t){return t===0&&1/t==-1/0}function EC(t){return typeof t=="number"&&Number.isInteger(t)&&!rc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function ct(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=vD(e)),e=MF(t.get(n),e);return vD(e)}function MF(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function vD(t){return t+""}function mn(t){let e=t.length;if(k(e>=2),e===2)return k(t.charAt(0)===""&&t.charAt(1)===""),ne.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&M(),t.charAt(s+1)){case"":let a=t.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:M()}o=s+2}return new ne(r)}var xD=["userId","batchId"];function dd(t,e){return[t,ct(e)]}function bC(t,e,n){return[t,ct(e),n]}var RF={},PF=["prefixPath","collectionGroup","readTime","documentId"],NF=["prefixPath","collectionGroup","documentId"],OF=["collectionGroup","readTime","prefixPath","documentId"],kF=["canonicalId","targetId"],FF=["targetId","path"],VF=["path","targetId"],LF=["collectionId","parent"],jF=["indexId","uid"],BF=["uid","sequenceNumber"],UF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$F=["indexId","uid","orderedDocumentKey"],qF=["userId","collectionPath","documentId"],HF=["userId","collectionPath","largestBatchId"],zF=["userId","collectionGroup","largestBatchId"],IC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],GF=[...IC,"documentOverlays"],DC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],CC=DC,WF=[...CC,"indexConfiguration","indexState","indexEntries"];var ic=class extends xd{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function He(t,e){let n=A(t);return $n.M(n.ae,e)}function wD(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Si(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function TC(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ge=class t{constructor(e,n){this.comparator=e,this.root=n||yn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $o(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $o(this.root,e,this.comparator,!1)}getReverseIterator(){return new $o(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $o(this.root,e,this.comparator,!0)}},$o=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},yn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw M();let e=this.left.check();if(e!==this.right.check())throw M();return e+(this.isRed()?0:1)}};yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw M()}get value(){throw M()}get color(){throw M()}get left(){throw M()}get right(){throw M()}copy(e,n,r,i,o){return this}insert(e,n,r){return new yn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var le=class t{constructor(e){this.comparator=e,this.data=new ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ed(this.data.getIterator())}getIteratorFrom(e){return new Ed(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Ed=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function No(t){return t.hasNext()?t.getNext():void 0}var Dt=class t{constructor(e){this.fields=e,e.sort(Se.comparator)}static empty(){return new t([])}unionWith(e){let n=new le(Se.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Go(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var bd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function AC(){return typeof atob<"u"}var qe=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new bd("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};qe.EMPTY_BYTE_STRING=new qe("");var KF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wr(t){if(k(!!t),typeof t=="string"){let e=0,n=KF.exec(t);if(k(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ie(t.seconds),nanos:Ie(t.nanos)}}function Ie(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Er(t){return typeof t=="string"?qe.fromBase64String(t):qe.fromUint8Array(t)}function fh(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function L_(t){let e=t.mapValue.fields.__previous_value__;return fh(e)?L_(e):e}function oc(t){let e=wr(t.mapValue.fields.__local_write_time__.timestampValue);return new xe(e.seconds,e.nanos)}var Ym=class{constructor(e,n,r,i,o,s,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},br=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var yr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},hd={nullValue:"NULL_VALUE"};function yi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fh(t)?4:SC(t)?9007199254740991:10:M()}function wn(t,e){if(t===e)return!0;let n=yi(t);if(n!==yi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return oc(t).isEqual(oc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=wr(i.timestampValue),a=wr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Er(i.bytesValue).isEqual(Er(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ie(i.geoPointValue.latitude)===Ie(o.geoPointValue.latitude)&&Ie(i.geoPointValue.longitude)===Ie(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ie(i.integerValue)===Ie(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ie(i.doubleValue),a=Ie(o.doubleValue);return s===a?rc(s)===rc(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Go(t.arrayValue.values||[],e.arrayValue.values||[],wn);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(wD(s)!==wD(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!wn(s[c],a[c])))return!1;return!0}(t,e);default:return M()}}function sc(t,e){return(t.values||[]).find(n=>wn(n,e))!==void 0}function Ir(t,e){if(t===e)return 0;let n=yi(t),r=yi(e);if(n!==r)return z(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return z(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ie(o.integerValue||o.doubleValue),c=Ie(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return ED(t.timestampValue,e.timestampValue);case 4:return ED(oc(t),oc(e));case 5:return z(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Er(o),c=Er(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=z(a[u],c[u]);if(l!==0)return l}return z(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=z(Ie(o.latitude),Ie(s.latitude));return a!==0?a:z(Ie(o.longitude),Ie(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=Ir(a[u],c[u]);if(l)return l}return z(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===yr.mapValue&&s===yr.mapValue)return 0;if(o===yr.mapValue)return 1;if(s===yr.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let h=z(c[d],l[d]);if(h!==0)return h;let f=Ir(a[c[d]],u[l[d]]);if(f!==0)return f}return z(c.length,l.length)}(t.mapValue,e.mapValue);default:throw M()}}function ED(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return z(t,e);let n=wr(t),r=wr(e),i=z(n.seconds,r.seconds);return i!==0?i:z(n.nanos,r.nanos)}function Ko(t){return Zm(t)}function Zm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=wr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Er(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return C.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Zm(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Zm(n.fields[s])}`;return i+"}"}(t.mapValue):M()}function vi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Xm(t){return!!t&&"integerValue"in t}function ac(t){return!!t&&"arrayValue"in t}function bD(t){return!!t&&"nullValue"in t}function ID(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fd(t){return!!t&&"mapValue"in t}function Za(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Si(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Za(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Za(t.arrayValue.values[n]);return e}return Object.assign({},t)}function SC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function QF(t){return"nullValue"in t?hd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?vi(br.empty(),C.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:M()}function YF(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?vi(br.empty(),C.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?yr:M()}function DD(t,e){let n=Ir(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function CD(t,e){let n=Ir(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var nt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Za(n)}setAll(e){let n=Se.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Za(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());fd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];fd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Si(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Za(this.value))}};function MC(t){let e=[];return Si(t.fields,(n,r)=>{let i=new Se([n]);if(fd(r)){let o=MC(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Dt(e)}var Fe=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,V.min(),V.min(),V.min(),nt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,V.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,V.min(),V.min(),nt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,V.min(),V.min(),nt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(V.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=V.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var En=class{constructor(e,n){this.position=e,this.inclusive=n}};function TD(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=C.comparator(C.fromName(s.referenceValue),n.key):r=Ir(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function AD(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wn(t.position[n],e.position[n]))return!1;return!0}var xi=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function ZF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Id=class{},X=class t extends Id{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new t0(e,n,r):n==="array-contains"?new i0(e,r):n==="in"?new Dd(e,r):n==="not-in"?new o0(e,r):n==="array-contains-any"?new s0(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new n0(e,r):new r0(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ir(n,this.value)):n!==null&&yi(this.value)===yi(n)&&this.matchesComparison(Ir(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return M()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ce=class t extends Id{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return Qo(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function Qo(t){return t.op==="and"}function Jm(t){return t.op==="or"}function j_(t){return RC(t)&&Qo(t)}function RC(t){for(let e of t.filters)if(e instanceof ce)return!1;return!0}function e0(t){if(t instanceof X)return t.field.canonicalString()+t.op.toString()+Ko(t.value);if(j_(t))return t.filters.map(e=>e0(e)).join(",");{let e=t.filters.map(n=>e0(n)).join(",");return`${t.op}(${e})`}}function PC(t,e){return t instanceof X?function(r,i){return i instanceof X&&r.op===i.op&&r.field.isEqual(i.field)&&wn(r.value,i.value)}(t,e):t instanceof ce?function(r,i){return i instanceof ce&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&PC(s,i.filters[a]),!0):!1}(t,e):void M()}function NC(t,e){let n=t.filters.concat(e);return ce.create(n,t.op)}function OC(t){return t instanceof X?function(n){return`${n.field.canonicalString()} ${n.op} ${Ko(n.value)}`}(t):t instanceof ce?function(n){return n.op.toString()+" {"+n.getFilters().map(OC).join(" ,")+"}"}(t):"Filter"}var t0=class extends X{constructor(e,n,r){super(e,n,r),this.key=C.fromName(r.referenceValue)}matches(e){let n=C.comparator(e.key,this.key);return this.matchesComparison(n)}},n0=class extends X{constructor(e,n){super(e,"in",n),this.keys=kC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},r0=class extends X{constructor(e,n){super(e,"not-in",n),this.keys=kC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function kC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>C.fromName(r.referenceValue))}var i0=class extends X{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return ac(n)&&sc(n.arrayValue,this.value)}},Dd=class extends X{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&sc(this.value.arrayValue,n)}},o0=class extends X{constructor(e,n){super(e,"not-in",n)}matches(e){if(sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!sc(this.value.arrayValue,n)}},s0=class extends X{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!ac(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sc(this.value.arrayValue,r))}};var a0=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function c0(t,e=null,n=[],r=[],i=null,o=null,s=null){return new a0(t,e,n,r,i,o,s)}function wi(t){let e=A(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>e0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Dc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ko(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ko(r)).join(",")),e.ce=n}return e.ce}function Cc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ZF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!PC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!AD(t.startAt,e.startAt)&&AD(t.endAt,e.endAt)}function Cd(t){return C.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Td(t,e){return t.filters.filter(n=>n instanceof X&&n.field.isEqual(e))}function SD(t,e,n){let r=hd,i=!0;for(let o of Td(t,e)){let s=hd,a=!0;switch(o.op){case"<":case"<=":s=QF(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=hd}DD({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];DD({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function MD(t,e,n){let r=yr,i=!0;for(let o of Td(t,e)){let s=yr,a=!0;switch(o.op){case">=":case">":s=YF(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=yr}CD({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];CD({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var Qt=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function FC(t,e,n,r,i,o,s,a){return new Qt(t,e,n,r,i,o,s,a)}function us(t){return new Qt(t)}function RD(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function B_(t){return t.collectionGroup!==null}function Ho(t){let e=A(t);if(e.le===null){e.le=[];let n=new Set;for(let o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new le(Se.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new xi(o,r))}),n.has(Se.keyField().canonicalString())||e.le.push(new xi(Se.keyField(),r))}return e.le}function ut(t){let e=A(t);return e.he||(e.he=XF(e,Ho(t))),e.he}function XF(t,e){if(t.limitType==="F")return c0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new xi(i.field,o)});let n=t.endAt?new En(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new En(t.startAt.position,t.startAt.inclusive):null;return c0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function u0(t,e){let n=t.filters.concat([e]);return new Qt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ad(t,e,n){return new Qt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Tc(t,e){return Cc(ut(t),ut(e))&&t.limitType===e.limitType}function VC(t){return`${wi(ut(t))}|lt:${t.limitType}`}function Lo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>OC(i)).join(", ")}]`),Dc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ko(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ko(i)).join(",")),`Target(${r})`}(ut(t))}; limitType=${t.limitType})`}function Ac(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):C.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Ho(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=TD(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,Ho(r),i)||r.endAt&&!function(s,a,c){let u=TD(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,Ho(r),i))}(t,e)}function LC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function jC(t){return(e,n)=>{let r=!1;for(let i of Ho(t)){let o=JF(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function JF(t,e,n){let r=t.field.isKeyField()?C.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Ir(c,u):M()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return M()}}var bn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Si(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return TC(this.inner)}size(){return this.innerSize}};var eV=new ge(C.comparator);function mt(){return eV}var BC=new ge(C.comparator);function Qa(...t){let e=BC;for(let n of t)e=e.insert(n.key,n);return e}function UC(t){let e=BC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function _n(){return Xa()}function $C(){return Xa()}function Xa(){return new bn(t=>t.toString(),(t,e)=>t.isEqual(e))}var tV=new ge(C.comparator),nV=new le(C.comparator);function G(...t){let e=nV;for(let n of t)e=e.add(n);return e}var rV=new le(z);function U_(){return rV}function qC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rc(e)?"-0":e}}function HC(t){return{integerValue:""+t}}function zC(t,e){return EC(e)?HC(e):qC(t,e)}var Yo=class{constructor(){this._=void 0}};function iV(t,e,n){return t instanceof Dr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&fh(o)&&(o=L_(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof qn?WC(t,e):t instanceof Hn?KC(t,e):function(i,o){let s=GC(i,o),a=PD(s)+PD(i.Ie);return Xm(s)&&Xm(i.Ie)?HC(a):qC(i.serializer,a)}(t,e)}function oV(t,e,n){return t instanceof qn?WC(t,e):t instanceof Hn?KC(t,e):n}function GC(t,e){return t instanceof Cr?function(r){return Xm(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Dr=class extends Yo{},qn=class extends Yo{constructor(e){super(),this.elements=e}};function WC(t,e){let n=QC(e);for(let r of t.elements)n.some(i=>wn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Hn=class extends Yo{constructor(e){super(),this.elements=e}};function KC(t,e){let n=QC(e);for(let r of t.elements)n=n.filter(i=>!wn(i,r));return{arrayValue:{values:n}}}var Cr=class extends Yo{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function PD(t){return Ie(t.integerValue||t.doubleValue)}function QC(t){return ac(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ei=class{constructor(e,n){this.field=e,this.transform=n}};function sV(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof qn&&i instanceof qn||r instanceof Hn&&i instanceof Hn?Go(r.elements,i.elements,wn):r instanceof Cr&&i instanceof Cr?wn(r.Ie,i.Ie):r instanceof Dr&&i instanceof Dr}(t.transform,e.transform)}var l0=class{constructor(e,n){this.version=e,this.transformResults=n}},De=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function pd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Zo=class{};function YC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ar(t.key,De.none()):new Tr(t.key,t.data,De.none());{let n=t.data,r=nt.empty(),i=new le(Se.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Yt(t.key,r,new Dt(i.toArray()),De.none())}}function aV(t,e,n){t instanceof Tr?function(i,o,s){let a=i.value.clone(),c=OD(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Yt?function(i,o,s){if(!pd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=OD(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(ZC(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Ja(t,e,n,r){return t instanceof Tr?function(o,s,a,c){if(!pd(o.precondition,s))return a;let u=o.value.clone(),l=kD(o.fieldTransforms,c,s);return u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Yt?function(o,s,a,c){if(!pd(o.precondition,s))return a;let u=kD(o.fieldTransforms,c,s),l=s.data;return l.setAll(ZC(o)),l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,a){return pd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function cV(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=GC(r.transform,i||null);o!=null&&(n===null&&(n=nt.empty()),n.set(r.field,o))}return n||null}function ND(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Go(r,i,(o,s)=>sV(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Tr=class extends Zo{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Yt=class extends Zo{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function ZC(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function OD(t,e,n){let r=new Map;k(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,oV(s,a,n[i]))}return r}function kD(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,iV(o,s,e))}return r}var Ar=class extends Zo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},cc=class extends Zo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var uc=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&aV(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ja(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Ja(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=$C();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=YC(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(V.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),G())}isEqual(e){return this.batchId===e.batchId&&Go(this.mutations,e.mutations,(n,r)=>ND(n,r))&&Go(this.baseMutations,e.baseMutations,(n,r)=>ND(n,r))}},d0=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){k(e.mutations.length===r.length);let i=function(){return tV}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var lc=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var h0=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Pe,te;function XC(t){switch(t){default:return M();case g.CANCELLED:case g.UNKNOWN:case g.DEADLINE_EXCEEDED:case g.RESOURCE_EXHAUSTED:case g.INTERNAL:case g.UNAVAILABLE:case g.UNAUTHENTICATED:return!1;case g.INVALID_ARGUMENT:case g.NOT_FOUND:case g.ALREADY_EXISTS:case g.PERMISSION_DENIED:case g.FAILED_PRECONDITION:case g.ABORTED:case g.OUT_OF_RANGE:case g.UNIMPLEMENTED:case g.DATA_LOSS:return!0}}function JC(t){if(t===void 0)return Ae("GRPC error has no .code"),g.UNKNOWN;switch(t){case Pe.OK:return g.OK;case Pe.CANCELLED:return g.CANCELLED;case Pe.UNKNOWN:return g.UNKNOWN;case Pe.DEADLINE_EXCEEDED:return g.DEADLINE_EXCEEDED;case Pe.RESOURCE_EXHAUSTED:return g.RESOURCE_EXHAUSTED;case Pe.INTERNAL:return g.INTERNAL;case Pe.UNAVAILABLE:return g.UNAVAILABLE;case Pe.UNAUTHENTICATED:return g.UNAUTHENTICATED;case Pe.INVALID_ARGUMENT:return g.INVALID_ARGUMENT;case Pe.NOT_FOUND:return g.NOT_FOUND;case Pe.ALREADY_EXISTS:return g.ALREADY_EXISTS;case Pe.PERMISSION_DENIED:return g.PERMISSION_DENIED;case Pe.FAILED_PRECONDITION:return g.FAILED_PRECONDITION;case Pe.ABORTED:return g.ABORTED;case Pe.OUT_OF_RANGE:return g.OUT_OF_RANGE;case Pe.UNIMPLEMENTED:return g.UNIMPLEMENTED;case Pe.DATA_LOSS:return g.DATA_LOSS;default:return M()}}(te=Pe||(Pe={}))[te.OK=0]="OK",te[te.CANCELLED=1]="CANCELLED",te[te.UNKNOWN=2]="UNKNOWN",te[te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",te[te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",te[te.NOT_FOUND=5]="NOT_FOUND",te[te.ALREADY_EXISTS=6]="ALREADY_EXISTS",te[te.PERMISSION_DENIED=7]="PERMISSION_DENIED",te[te.UNAUTHENTICATED=16]="UNAUTHENTICATED",te[te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",te[te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",te[te.ABORTED=10]="ABORTED",te[te.OUT_OF_RANGE=11]="OUT_OF_RANGE",te[te.UNIMPLEMENTED=12]="UNIMPLEMENTED",te[te.INTERNAL=13]="INTERNAL",te[te.UNAVAILABLE=14]="UNAVAILABLE",te[te.DATA_LOSS=15]="DATA_LOSS";var FD=null;function eT(){return new TextEncoder}var uV=new ui([4294967295,4294967295],0);function VD(t){let e=eT().encode(t),n=new mD;return n.update(e),new Uint8Array(n.digest())}function LD(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ui([n,r],0),new ui([i,o],0)]}var f0=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new mi(`Invalid padding: ${n}`);if(r<0)throw new mi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new mi(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=ui.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(ui.fromNumber(r)));return i.compare(uV)===1&&(i=new ui([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=VD(e),[r,i]=LD(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let n=VD(e),[r,i]=LD(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Re(s)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},mi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var dc=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,hc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(V.min(),i,new ge(z),mt(),G())}},hc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,G(),G(),G())}};var zo=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},Sd=class{constructor(e,n){this.targetId=e,this.fe=n}},Md=class{constructor(e,n,r=qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Rd=class{constructor(){this.ge=0,this.pe=BD(),this.ye=qe.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=G(),n=G(),r=G();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:M()}}),new hc(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=BD()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,k(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},p0=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=mt(),this.Qe=jD(),this.Ke=new ge(z)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:M()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let o=i.target;if(Cd(o))if(r===0){let s=new C(o.path);this.We(n,s,Fe.newNoDocument(s,V.min()))}else k(r===1);else{let s=this.Ze(n);if(s!==r){let a=this.Xe(e),c=a?this.et(a,e,s):1;if(c!==0){this.He(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}FD?.tt(function(l,d,h,f,v){var y,m,E,R,D,P;let j={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},H=d.unchangedNames;return H&&(j.bloomFilter={applied:v===0,hashCount:(y=H?.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(R=(E=(m=H?.bits)===null||m===void 0?void 0:m.bitmap)===null||E===void 0?void 0:E.length)!==null&&R!==void 0?R:0,padding:(P=(D=H?.bits)===null||D===void 0?void 0:D.padding)!==null&&P!==void 0?P:0,mightContain:de=>{var Ct;return(Ct=f?.mightContain(de))!==null&&Ct!==void 0&&Ct}}),j}(s,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Er(r).toUint8Array()}catch(c){if(c instanceof bd)return Ft("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new f0(s,i,o)}catch(c){return Ft(c instanceof mi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&Cd(a.target)){let c=new C(a.target.path);this.qe.get(c)!==null||this.st(s,c)||this.We(s,c,Fe.newNoDocument(c,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=G();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));let i=new dc(e,n,this.Ke,this.qe,r);return this.qe=mt(),this.Qe=jD(),this.Ke=new ge(z),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Rd,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new le(z),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||w("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Rd),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function jD(){return new ge(C.comparator)}function BD(){return new ge(C.comparator)}var lV={asc:"ASCENDING",desc:"DESCENDING"},dV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hV={and:"AND",or:"OR"},g0=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function m0(t,e){return t.useProto3Json||Dc(e)?e:{value:e}}function Xo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fV(t,e){return Xo(t,e.toTimestamp())}function Me(t){return k(!!t),V.fromTimestamp(function(n){let r=wr(n);return new xe(r.seconds,r.nanos)}(t))}function $_(t,e){return _0(t,e).canonicalString()}function _0(t,e){let n=function(i){return new ne(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function nT(t){let e=ne.fromString(t);return k(hT(e)),e}function fc(t,e){return $_(t.databaseId,e.path)}function vn(t,e){let n=nT(e);if(n.get(1)!==t.databaseId.projectId)throw new x(g.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new x(g.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new C(oT(n))}function rT(t,e){return $_(t.databaseId,e)}function iT(t){let e=nT(t);return e.length===4?ne.emptyPath():oT(e)}function y0(t){return new ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oT(t){return k(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function UD(t,e,n){return{name:fc(t,e),fields:n.value.mapValue.fields}}function sT(t,e,n){let r=vn(t,e.name),i=Me(e.updateTime),o=e.createTime?Me(e.createTime):V.min(),s=new nt({mapValue:{fields:e.fields}}),a=Fe.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function pV(t,e){return"found"in e?function(r,i){k(!!i.found),i.found.name,i.found.updateTime;let o=vn(r,i.found.name),s=Me(i.found.updateTime),a=i.found.createTime?Me(i.found.createTime):V.min(),c=new nt({mapValue:{fields:i.found.fields}});return Fe.newFoundDocument(o,s,a,c)}(t,e):"missing"in e?function(r,i){k(!!i.missing),k(!!i.readTime);let o=vn(r,i.missing),s=Me(i.readTime);return Fe.newNoDocument(o,s)}(t,e):M()}function gV(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:M()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,l){return u.useProto3Json?(k(l===void 0||typeof l=="string"),qe.fromBase64String(l||"")):(k(l===void 0||l instanceof Uint8Array),qe.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let l=u.code===void 0?g.UNKNOWN:JC(u.code);return new x(l,u.message||"")}(s);n=new Md(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=vn(t,r.document.name),o=Me(r.document.updateTime),s=r.document.createTime?Me(r.document.createTime):V.min(),a=new nt({mapValue:{fields:r.document.fields}}),c=Fe.newFoundDocument(i,o,s,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new zo(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=vn(t,r.document),o=r.readTime?Me(r.readTime):V.min(),s=Fe.newNoDocument(i,o),a=r.removedTargetIds||[];n=new zo([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=vn(t,r.document),o=r.removedTargetIds||[];n=new zo([],o,i,null)}else{if(!("filter"in e))return M();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new h0(i,o),a=r.targetId;n=new Sd(a,s)}}return n}function pc(t,e){let n;if(e instanceof Tr)n={update:UD(t,e.key,e.value)};else if(e instanceof Ar)n={delete:fc(t,e.key)};else if(e instanceof Yt)n={update:UD(t,e.key,e.data),updateMask:wV(e.fieldMask)};else{if(!(e instanceof cc))return M();n={verify:fc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Dr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qn)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Hn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Cr)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw M()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:fV(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:M()}(t,e.precondition)),n}function v0(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?De.updateTime(Me(o.updateTime)):o.exists!==void 0?De.exists(o.exists):De.none()}(e.currentDocument):De.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)k(a.setToServerValue==="REQUEST_TIME"),c=new Dr;else if("appendMissingElements"in a){let l=a.appendMissingElements.values||[];c=new qn(l)}else if("removeAllFromArray"in a){let l=a.removeAllFromArray.values||[];c=new Hn(l)}else"increment"in a?c=new Cr(s,a.increment):M();let u=Se.fromServerFormat(a.fieldPath);return new Ei(u,c)}(t,i)):[];if(e.update){e.update.name;let i=vn(t,e.update.name),o=new nt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let u=c.fieldPaths||[];return new Dt(u.map(l=>Se.fromServerFormat(l)))}(e.updateMask);return new Yt(i,o,s,n,r)}return new Tr(i,o,n,r)}if(e.delete){let i=vn(t,e.delete);return new Ar(i,n)}if(e.verify){let i=vn(t,e.verify);return new cc(i,n)}return M()}function mV(t,e){return t&&t.length>0?(k(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Me(i.updateTime):Me(o);return s.isEqual(V.min())&&(s=Me(o)),new l0(s,i.transformResults||[])}(n,e))):[]}function aT(t,e){return{documents:[rT(t,e.path)]}}function cT(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=rT(t,i);let o=function(u){if(u.length!==0)return dT(ce.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(l=>function(h){return{field:jo(h.field),direction:yV(h.dir)}}(l))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=m0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ut:n,parent:i}}function uT(t){let e=iT(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){k(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];n.where&&(o=function(d){let h=lT(d);return h instanceof ce&&j_(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(v){return new xi(Bo(v.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Dc(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new En(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){let h=!d.before,f=d.values||[];return new En(f,h)}(n.endAt)),FC(e,i,s,o,a,"F",c,u)}function _V(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return M()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Bo(n.unaryFilter.field);return X.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Bo(n.unaryFilter.field);return X.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Bo(n.unaryFilter.field);return X.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Bo(n.unaryFilter.field);return X.create(s,"!=",{nullValue:"NULL_VALUE"});default:return M()}}(t):t.fieldFilter!==void 0?function(n){return X.create(Bo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return M()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ce.create(n.compositeFilter.filters.map(r=>lT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return M()}}(n.compositeFilter.op))}(t):M()}function yV(t){return lV[t]}function vV(t){return dV[t]}function xV(t){return hV[t]}function jo(t){return{fieldPath:t.canonicalString()}}function Bo(t){return Se.fromServerFormat(t.fieldPath)}function dT(t){return t instanceof X?function(n){if(n.op==="=="){if(ID(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NAN"}};if(bD(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ID(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NAN"}};if(bD(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(n.field),op:vV(n.op),value:n.value}}}(t):t instanceof ce?function(n){let r=n.getFilters().map(i=>dT(i));return r.length===1?r[0]:{compositeFilter:{op:xV(n.op),filters:r}}}(t):M()}function wV(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Jo=class t{constructor(e,n,r,i,o=V.min(),s=V.min(),a=qe.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Pd=class{constructor(e){this.ct=e}};function EV(t,e){let n;if(e.document)n=sT(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=C.fromSegments(e.noDocument.path),i=Ii(e.noDocument.readTime);n=Fe.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return M();{let r=C.fromSegments(e.unknownDocument.path),i=Ii(e.unknownDocument.version);n=Fe.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new xe(i[0],i[1]);return V.fromTimestamp(o)}(e.readTime)),n}function $D(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Nd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:fc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Xo(o,s.version.toTimestamp()),createTime:Xo(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:bi(e.version)};else{if(!e.isUnknownDocument())return M();r.unknownDocument={path:n.path.toArray(),version:bi(e.version)}}return r}function Nd(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function bi(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ii(t){let e=new xe(t.seconds,t.nanoseconds);return V.fromTimestamp(e)}function fi(t,e){let n=(e.baseMutations||[]).map(o=>v0(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>v0(t.ct,o)),i=xe.fromMillis(e.localWriteTimeMs);return new uc(e.batchId,i,n,r)}function Ya(t){let e=Ii(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ii(t.lastLimboFreeSnapshotVersion):V.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return k(o.documents.length===1),ut(us(iT(o.documents[0])))}(t.query):function(o){return ut(uT(o))}(t.query),new Jo(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,qe.fromBase64String(t.resumeToken))}function fT(t,e){let n=bi(e.snapshotVersion),r=bi(e.lastLimboFreeSnapshotVersion),i;i=Cd(e.target)?aT(t.ct,e.target):cT(t.ct,e.target).ut;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wi(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function q_(t){let e=uT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ad(e,e.limit,"L"):e}function Om(t,e){return new lc(e.largestBatchId,v0(t.ct,e.overlayMutation))}function qD(t,e){let n=e.path.lastSegment();return[t,ct(e.path.popLast()),n]}function HD(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:bi(r.readTime),documentKey:ct(r.documentKey.path),largestBatchId:r.largestBatchId}}var x0=class{getBundleMetadata(e,n){return zD(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Ii(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return zD(e).put(function(i){return{bundleId:i.id,createTime:bi(Me(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return GD(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:q_(o.bundledQuery),readTime:Ii(o.readTime)}}(r)})}saveNamedQuery(e,n){return GD(e).put(function(i){return{name:i.name,readTime:bi(Me(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function zD(t){return He(t,"bundles")}function GD(t){return He(t,"namedQueries")}var Od=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return za(e).get(qD(this.userId,n)).next(r=>r?Om(this.serializer,r):null)}getOverlays(e,n){let r=_n();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new lc(n,s);i.push(this.ht(e,a))}),p.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(ct(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(za(e).H("collectionPathOverlayIndex",a))}),p.waitFor(o)}getOverlaysForCollection(e,n,r){let i=_n(),o=ct(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return za(e).W("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let u=Om(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=_n(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return za(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,u,l)=>{let d=Om(this.serializer,u);o.size()<i||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):l.done()}).next(()=>o)}ht(e,n){return za(e).put(function(i,o,s){let[a,c,u]=qD(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:pc(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function za(t){return He(t,"documentOverlays")}var Bn=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Ie(e.integerValue));else if("doubleValue"in e){let r=Ie(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),rc(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Er(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?SC(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):M()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),C.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Bn.bt=new Bn;function bV(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function WD(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=bV(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var w0=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Bt(e){let n=this.Lt(e),r=WD(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Lt(e),r=WD(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},E0=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}},b0=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},pi=class{constructor(){this.Gt=new w0,this.zt=new E0(this.Gt),this.jt=new b0(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var gi=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function pr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=KD(t.arrayValue,e.arrayValue),n!==0?n:(n=KD(t.directionalValue,e.directionalValue),n!==0?n:C.comparator(t.documentKey,e.documentKey)))}function KD(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var kd=class{constructor(e){this.Yt=new le((n,r)=>Se.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(k(e.collectionGroup===this.collectionId),this.en)return!1;let n=zm(e);if(n!==void 0&&!this.nn(n))return!1;let r=di(e),i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.rn(a,c)||!this.sn(this.Zt[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new le(Se.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new qo(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new qo(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new qo(r.field,r.dir==="asc"?0:1)));return new Wo(Wo.UNKNOWN_ID,this.collectionId,n,nc.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function pT(t){var e,n;if(k(t instanceof X||t instanceof ce),t instanceof X){if(t instanceof Dd){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>X.create(t.field,"==",o)))||[];return ce.create(i,"or")}return t}let r=t.filters.map(i=>pT(i));return ce.create(r,t.op)}function IV(t){if(t.getFilters().length===0)return[];let e=C0(pT(t));return k(gT(e)),I0(e)||D0(e)?[e]:e.getFilters()}function I0(t){return t instanceof X}function D0(t){return t instanceof ce&&j_(t)}function gT(t){return I0(t)||D0(t)||function(n){if(n instanceof ce&&Jm(n)){for(let r of n.getFilters())if(!I0(r)&&!D0(r))return!1;return!0}return!1}(t)}function C0(t){if(k(t instanceof X||t instanceof ce),t instanceof X)return t;if(t.filters.length===1)return C0(t.filters[0]);let e=t.filters.map(r=>C0(r)),n=ce.create(e,t.op);return n=Fd(n),gT(n)?n:(k(n instanceof ce),k(Qo(n)),k(n.filters.length>1),n.filters.reduce((r,i)=>H_(r,i)))}function H_(t,e){let n;return k(t instanceof X||t instanceof ce),k(e instanceof X||e instanceof ce),n=t instanceof X?e instanceof X?function(i,o){return ce.create([i,o],"and")}(t,e):QD(t,e):e instanceof X?QD(e,t):function(i,o){if(k(i.filters.length>0&&o.filters.length>0),Qo(i)&&Qo(o))return NC(i,o.getFilters());let s=Jm(i)?i:o,a=Jm(i)?o:i,c=s.filters.map(u=>H_(u,a));return ce.create(c,"or")}(t,e),Fd(n)}function QD(t,e){if(Qo(e))return NC(e,t.getFilters());{let n=e.filters.map(r=>H_(t,r));return ce.create(n,"or")}}function Fd(t){if(k(t instanceof X||t instanceof ce),t instanceof X)return t;let e=t.getFilters();if(e.length===1)return Fd(e[0]);if(RC(t))return t;let n=e.map(i=>Fd(i)),r=[];return n.forEach(i=>{i instanceof X?r.push(i):i instanceof ce&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ce.create(r,t.op)}var T0=class{constructor(){this._n=new gc}addToCollectionParentIndex(e,n){return this._n.add(n),p.resolve()}getCollectionParents(e,n){return p.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return p.resolve()}deleteFieldIndex(e,n){return p.resolve()}deleteAllFieldIndexes(e){return p.resolve()}createTargetIndexes(e,n){return p.resolve()}getDocumentsMatchingTarget(e,n){return p.resolve(null)}getIndexType(e,n){return p.resolve(0)}getFieldIndexes(e,n){return p.resolve([])}getNextCollectionGroupToUpdate(e){return p.resolve(null)}getMinOffset(e,n){return p.resolve(Vt.min())}getMinOffsetFromCollectionGroup(e,n){return p.resolve(Vt.min())}updateCollectionGroup(e,n,r){return p.resolve()}updateIndexEntries(e,n){return p.resolve()}},gc=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new le(ne.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new le(ne.comparator)).toArray()}};var ad=new Uint8Array(0),A0=class{constructor(e,n){this.databaseId=n,this.an=new gc,this.un=new bn(r=>wi(r),(r,i)=>Cc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:r,parent:ct(i)};return YD(e).put(o)}return p.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[yC(n),""],!1,!0);return YD(e).W(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(mn(s.parent))}return r})}addFieldIndex(e,n){let r=Ga(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=ko(e);return o.next(a=>{s.put(HD(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=Ga(e),i=ko(e),o=Oo(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Ga(e),r=Oo(e),i=ko(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return p.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new kd(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=Oo(e),i=!0,o=new Map;return p.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=G(),a=[];return p.forEach(o,(c,u)=>{w("IndexedDbIndexManager",`Using index ${function(D){return`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(P=>`${P.fieldPath}:${P.kind}`).join(",")}`}(c)} to execute ${wi(n)}`);let l=function(D,P){let j=zm(P);if(j===void 0)return null;for(let H of Td(D,j.fieldPath))switch(H.op){case"array-contains-any":return H.value.arrayValue.values||[];case"array-contains":return[H.value]}return null}(u,c),d=function(D,P){let j=new Map;for(let H of di(P))for(let de of Td(D,H.fieldPath))switch(de.op){case"==":case"in":j.set(H.fieldPath.canonicalString(),de.value);break;case"not-in":case"!=":return j.set(H.fieldPath.canonicalString(),de.value),Array.from(j.values())}return null}(u,c),h=function(D,P){let j=[],H=!0;for(let de of di(P)){let Ct=de.kind===0?SD(D,de.fieldPath,D.startAt):MD(D,de.fieldPath,D.startAt);j.push(Ct.value),H&&(H=Ct.inclusive)}return new En(j,H)}(u,c),f=function(D,P){let j=[],H=!0;for(let de of di(P)){let Ct=de.kind===0?MD(D,de.fieldPath,D.endAt):SD(D,de.fieldPath,D.endAt);j.push(Ct.value),H&&(H=Ct.inclusive)}return new En(j,H)}(u,c),v=this.hn(c,u,h),y=this.hn(c,u,f),m=this.Pn(c,u,d),E=this.In(c.indexId,l,v,h.inclusive,y,f.inclusive,m);return p.forEach(E,R=>r.j(R,n.limit).next(D=>{D.forEach(P=>{let j=C.fromSegments(P.documentKey);s.has(j)||(s=s.add(j),a.push(j))})}))}).next(()=>a)}return p.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=IV(ce.create(e.filters,"and")).map(r=>c0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){let c=(n!=null?n.length:1)*Math.max(r.length,o.length),u=c/(n!=null?n.length:1),l=[];for(let d=0;d<c;++d){let h=n?this.Tn(n[d/u]):ad,f=this.En(e,h,r[d%u],i),v=this.dn(e,h,o[d%u],s),y=a.map(m=>this.En(e,h,m,!0));l.push(...this.createRange(f,v,y))}return l}En(e,n,r,i){let o=new gi(e,C.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){let o=new gi(e,C.empty(),n,r);return i?o.Jt():o}ln(e,n){let r=new kd(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.cn(n);return p.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let u=new le(Se.comparator),l=!1;for(let d of c.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?l=!0:u=u.add(h.field));for(let d of c.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(l?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new pi;for(let i of di(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Ht(i.kind);Bn.bt.Pt(o,s)}return r.Wt()}Tn(e){let n=new pi;return Bn.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new pi;return Bn.bt.Pt(vi(this.databaseId,n),r.Ht(function(o){let s=di(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new pi);let o=0;for(let s of di(e)){let a=r[o++];for(let c of i)if(this.Vn(n,s.fieldPath)&&ac(a))i=this.mn(i,s,a);else{let u=c.Ht(s.kind);Bn.bt.Pt(a,u)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new pi;c.seed(a.Wt()),Bn.bt.Pt(s,c.Ht(n.kind)),o.push(c)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof X&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Ga(e),i=ko(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{let s=[];return p.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(l,d){let h=d?new nc(d.sequenceNumber,new Vt(Ii(d.readTime),new C(mn(d.documentKey)),d.largestBatchId)):nc.empty(),f=l.fields.map(([v,y])=>new qo(Se.fromServerFormat(v),y));return new Wo(l.indexId,l.collectionGroup,f,h)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:z(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Ga(e),o=ko(e);return this.gn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>p.forEach(a,c=>o.put(HD(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return p.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?p.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),p.forEach(a,c=>this.pn(e,i,c).next(u=>{let l=this.yn(o,c);return u.isEqual(l)?p.resolve():this.wn(e,o,c,u,l)}))))})}Sn(e,n,r,i){return Oo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Oo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=Oo(e),o=new le(pr);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new gi(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new le(pr),i=this.An(n,e);if(i==null)return r;let o=zm(n);if(o!=null){let s=e.data.field(o.fieldPath);if(ac(s))for(let a of s.arrayValue.values||[])r=r.add(new gi(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new gi(n.indexId,e.key,ad,i));return r}wn(e,n,r,i,o){w("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,u,l,d,h){let f=c.getIterator(),v=u.getIterator(),y=No(f),m=No(v);for(;y||m;){let E=!1,R=!1;if(y&&m){let D=l(y,m);D<0?R=!0:D>0&&(E=!0)}else y!=null?R=!0:E=!0;E?(d(m),m=No(v)):R?(h(y),y=No(f)):(y=No(f),m=No(v))}}(i,o,pr,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),p.waitFor(s)}gn(e){let n=1;return ko(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>pr(s,a)).filter((s,a,c)=>!a||pr(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=pr(s,e),c=pr(s,n);if(a===0)i[0]=e.Jt();else if(a>0&&c<0)i.push(s),i.push(s.Jt());else if(c>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,ad,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,ad,[]];o.push(IDBKeyRange.bound(a,c))}return o}Dn(e,n){return pr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(ZD)}getMinOffset(e,n){return p.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||M())).next(ZD)}};function YD(t){return He(t,"collectionParents")}function Oo(t){return He(t,"indexEntries")}function Ga(t){return He(t,"indexConfiguration")}function ko(t){return He(t,"indexState")}function ZD(t){k(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;F_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Vt(e.readTime,e.documentKey,n)}var XD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function mT(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=r.Y({range:s},(l,d,h)=>(a++,h.delete()));o.push(c.next(()=>{k(a===1)}));let u=[];for(let l of n.mutations){let d=bC(e,l.key.path,n.batchId);o.push(i.delete(d)),u.push(l.key)}return p.waitFor(o).next(()=>u)}function Vd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw M();e=t.noDocument}return JSON.stringify(e).length}kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(41943040,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);var Ld=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){k(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gr(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=Uo(e),s=gr(e);return s.add({}).next(a=>{k(typeof a=="number");let c=new uc(a,n,r,i),u=function(f,v,y){let m=y.baseMutations.map(R=>pc(f.ct,R)),E=y.mutations.map(R=>pc(f.ct,R));return{userId:v,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:m,mutations:E}}(this.serializer,this.userId,c),l=[],d=new le((h,f)=>z(h.canonicalString(),f.canonicalString()));for(let h of i){let f=bC(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),l.push(s.put(u)),l.push(o.put(f,RF))}return d.forEach(h=>{l.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),p.waitFor(l).next(()=>c)})}lookupMutationBatch(e,n){return gr(e).get(n).next(r=>r?(k(r.userId===this.userId),fi(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?p.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return gr(e).Y({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(k(a.batchId>=r),o=fi(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return gr(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gr(e).W("userMutationsIndex",n).next(r=>r.map(i=>fi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=dd(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Uo(e).Y({range:i},(s,a,c)=>{let[u,l,d]=s,h=mn(l);if(u===this.userId&&n.path.isEqual(h))return gr(e).get(d).next(f=>{if(!f)throw M();k(f.userId===this.userId),o.push(fi(this.serializer,f))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new le(z),i=[];return n.forEach(o=>{let s=dd(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Uo(e).Y({range:a},(u,l,d)=>{let[h,f,v]=u,y=mn(f);h===this.userId&&o.path.isEqual(y)?r=r.add(v):d.done()});i.push(c)}),p.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=dd(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new le(z);return Uo(e).Y({range:s},(c,u,l)=>{let[d,h,f]=c,v=mn(h);d===this.userId&&r.isPrefixOf(v)?v.length===i&&(a=a.add(f)):l.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(gr(e).get(o).next(s=>{if(s===null)throw M();k(s.userId===this.userId),r.push(fi(this.serializer,s))}))}),p.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return mT(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),p.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return p.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Uo(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=mn(o[1]);i.push(c)}else a.done()}).next(()=>{k(i.length===0)})})}containsKey(e,n){return _T(e,this.userId,n)}xn(e){return yT(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function _T(t,e,n){let r=dd(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Uo(t).Y({range:o,J:!0},(a,c,u)=>{let[l,d,h]=a;l===e&&d===i&&(s=!0),u.done()}).next(()=>s)}function gr(t){return He(t,"mutations")}function Uo(t){return He(t,"documentMutations")}function yT(t){return He(t,"mutationQueues")}var es=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Bn(){return new t(-1)}};var S0=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{let r=new es(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>V.fromTimestamp(new xe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Fo(e).delete(n.targetId)).next(()=>this.Ln(e)).next(r=>(k(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return Fo(e).Y((s,a)=>{let c=Ya(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>p.waitFor(o)).next(()=>i)}forEachTarget(e,n){return Fo(e).Y((r,i)=>{let o=Ya(i);n(o)})}Ln(e){return JD(e).get("targetGlobalKey").next(n=>(k(n!==null),n))}kn(e,n){return JD(e).put("targetGlobalKey",n)}qn(e,n){return Fo(e).put(fT(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){let r=wi(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Fo(e).Y({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let u=Ya(a);Cc(n,u.target)&&(o=u,c.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=mr(e);return n.forEach(s=>{let a=ct(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),p.waitFor(i)}removeMatchingKeys(e,n,r){let i=mr(e);return p.forEach(n,o=>{let s=ct(o.path);return p.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=mr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=mr(e),o=G();return i.Y({range:r,J:!0},(s,a,c)=>{let u=mn(s[1]),l=new C(u);o=o.add(l)}).next(()=>o)}containsKey(e,n){let r=ct(n.path),i=IDBKeyRange.bound([r],[yC(r)],!1,!0),o=0;return mr(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],c,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}_t(e,n){return Fo(e).get(n).next(r=>r?Ya(r):null)}};function Fo(t){return He(t,"targets")}function JD(t){return He(t,"targetGlobal")}function mr(t){return He(t,"targetDocuments")}function eC([t,e],[n,r]){let i=z(t,n);return i===0?z(e,r):i}var M0=class{constructor(e){this.Kn=e,this.buffer=new le(eC),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();eC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},R0=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){w("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Rr(n)?w("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Mr(n)}yield this.zn(3e5)}))}},P0=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return p.resolve(It._e);let r=new M0(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(w("LruGarbageCollector","Garbage collection skipped; disabled"),p.resolve(XD)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(w("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XD):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,c,u,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(w("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(o=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),Vo()<=Jt.DEBUG&&w("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-l}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-l}ms`),p.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})))}};function DV(t,e){return new P0(t,e)}var N0=class{constructor(e,n){this.db=e,this.garbageCollector=DV(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return cd(e,r)}removeReference(e,n,r){return cd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return cd(e,n)}er(e,n){return function(i,o){let s=!1;return yT(i).Z(a=>_T(i,a,o).next(c=>(c&&(s=!0),p.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Xn(e,(s,a)=>{if(a<=n){let c=this.er(e,s).next(u=>{if(!u)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,V.min()),mr(e).delete(function(d){return[0,ct(d.path)]}(s))))});i.push(c)}}).next(()=>p.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return cd(e,n)}Xn(e,n){let r=mr(e),i,o=It._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:u})=>{s===0?(o!==It._e&&n(new C(mn(i)),o),o=u,i=c):o=It._e}).next(()=>{o!==It._e&&n(new C(mn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function cd(t,e){return mr(t).put(function(r,i){return{targetId:0,path:ct(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var jd=class{constructor(){this.changes=new bn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Fe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?p.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var O0=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return li(e).put(r)}removeEntry(e,n,r){return li(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Nd(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Fe.newInvalidDocument(n);return li(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Wa(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:Fe.newInvalidDocument(n)};return li(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Wa(n))},(i,o)=>{r={document:this.nr(n,o),size:Vd(o)}}).next(()=>r)}getEntries(e,n){let r=mt();return this.ir(e,n,(i,o)=>{let s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=mt(),i=new ge(C.comparator);return this.ir(e,n,(o,s)=>{let a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,Vd(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return p.resolve();let i=new le(rC);n.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(Wa(i.first()),Wa(i.last())),s=i.getIterator(),a=s.getNext();return li(e).Y({index:"documentKeyIndex",range:o},(c,u,l)=>{let d=C.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&rC(a,d)<0;)r(a,null),a=s.getNext();a&&a.isEqual(d)&&(r(a,u),a=s.hasNext()?s.getNext():null),a?l.U(Wa(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Nd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return li(e).W(IDBKeyRange.bound(a,c,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let l=mt();for(let d of u){let h=this.nr(C.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(Ac(n,h)||i.has(h.key))&&(l=l.insert(h.key,h))}return l})}getAllFromCollectionGroup(e,n,r,i){let o=mt(),s=nC(n,r),a=nC(n,Vt.max());return li(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,u,l)=>{let d=this.nr(C.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(d.key,d),o.size===i&&l.done()}).next(()=>o)}newChangeBuffer(e){return new k0(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return tC(e).get("remoteDocumentGlobalKey").next(n=>(k(!!n),n))}tr(e,n){return tC(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=EV(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(V.min())))return r}return Fe.newInvalidDocument(e)}};function vT(t){return new O0(t)}var k0=class extends jd{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new bn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new le((o,s)=>z(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=$D(this.ar.serializer,s);i=i.add(o.path.popLast());let u=Vd(c);r+=u-a.size,n.push(this.ar.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=$D(this.ar.serializer,s.convertToNoDocument(V.min()));n.push(this.ar.addEntry(e,o,c))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),p.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function tC(t){return He(t,"remoteDocumentGlobal")}function li(t){return He(t,"remoteDocumentsV14")}function Wa(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nC(t,e){let n=e.documentKey.path.toArray();return[t,Nd(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function rC(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=z(n[o],r[o]),i)return i;return i=z(n.length,r.length),i||(i=z(n[n.length-2],r[r.length-2]),i||z(n[n.length-1],r[r.length-1]))}var F0=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Bd=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ja(r.mutation,i,Dt.empty(),xe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,G()).next(()=>r))}getLocalViewOfDocuments(e,n,r=G()){let i=_n();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Qa();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=_n();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,G()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=mt(),s=Xa(),a=function(){return Xa()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof Yt)?o=o.insert(u.key,u):l!==void 0?(s.set(u.key,l.mutation.getFieldMask()),Ja(l.mutation,u,l.mutation.getFieldMask(),xe.now())):s.set(u.key,Dt.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,l)=>s.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new F0(l,(d=s.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Xa(),i=new ge((s,a)=>s-a),o=G();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||Dt.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||G()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=$C();l.forEach(h=>{if(!o.has(h)){let f=YC(n.get(h),r.get(h));f!==null&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,d))}return p.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return C.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):B_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):p.resolve(_n()),a=-1,c=o;return s.next(u=>p.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(l)?p.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,G())).next(l=>({batchId:a,changes:UC(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new C(n)).next(r=>{let i=Qa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Qa();return this.indexManager.getCollectionParents(e,o).next(a=>p.forEach(a,c=>{let u=function(d,h){return new Qt(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,u)=>{let l=u.getKey();s.get(l)===null&&(s=s.insert(l,Fe.newInvalidDocument(l)))});let a=Qa();return s.forEach((c,u)=>{let l=o.get(c);l!==void 0&&Ja(l.mutation,u,Dt.empty(),xe.now()),Ac(n,u)&&(a=a.insert(c,u))}),a})}};var V0=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return p.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Me(i.createTime)}}(n)),p.resolve()}getNamedQuery(e,n){return p.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:q_(i.bundledQuery),readTime:Me(i.readTime)}}(n)),p.resolve()}};var L0=class{constructor(){this.overlays=new ge(C.comparator),this.hr=new Map}getOverlay(e,n){return p.resolve(this.overlays.get(n))}getOverlays(e,n){let r=_n();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),p.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),p.resolve()}getOverlaysForCollection(e,n,r){let i=_n(),o=n.length+1,s=new C(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return p.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new ge((u,l)=>u-l),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=o.get(u.largestBatchId);l===null&&(l=_n(),o=o.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=_n(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return p.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new lc(n,r));let o=this.hr.get(n);o===void 0&&(o=G(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}};var mc=class{constructor(){this.Pr=new le(Ne.Ir),this.Tr=new le(Ne.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new Ne(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Ne(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new C(new ne([])),r=new Ne(n,e),i=new Ne(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new C(new ne([])),r=new Ne(n,e),i=new Ne(n,e+1),o=G();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ne(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ne=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return C.comparator(e.key,n.key)||z(e.pr,n.pr)}static Er(e,n){return z(e.pr,n.pr)||C.comparator(e.key,n.key)}};var j0=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new le(Ne.Ir)}checkEmpty(e){return p.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new uc(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new Ne(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return p.resolve(s)}lookupMutationBatch(e,n){return p.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),o=i<0?0:i;return p.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return p.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return p.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ne(n,0),i=new Ne(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),p.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new le(z);return n.forEach(i=>{let o=new Ne(i,0),s=new Ne(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),p.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;C.isDocumentKey(o)||(o=o.child(""));let s=new Ne(new C(o),0),a=new le(z);return this.wr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},s),p.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){k(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return p.forEach(n.mutations,i=>{let o=new Ne(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new Ne(n,0),i=this.wr.firstAfterOrEqual(r);return p.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,p.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var B0=class{constructor(e){this.vr=e,this.docs=function(){return new ge(C.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return p.resolve(r?r.document.mutableCopy():Fe.newInvalidDocument(n))}getEntries(e,n){let r=mt();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Fe.newInvalidDocument(i))}),p.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=mt(),s=n.path,a=new C(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||F_(xC(l),r)<=0||(i.has(l.key)||Ac(n,l))&&(o=o.insert(l.key,l.mutableCopy()))}return p.resolve(o)}getAllFromCollectionGroup(e,n,r,i){M()}Fr(e,n){return p.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new U0(this)}getSize(e){return p.resolve(this.size)}},U0=class extends jd{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),p.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var $0=class{constructor(e){this.persistence=e,this.Mr=new bn(n=>wi(n),Cc),this.lastRemoteSnapshotVersion=V.min(),this.highestTargetId=0,this.Or=0,this.Nr=new mc,this.targetCount=0,this.Br=es.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),p.resolve()}getLastRemoteSnapshotVersion(e){return p.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return p.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),p.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),p.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new es(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,p.resolve()}updateTargetData(e,n){return this.qn(n),p.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,p.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),p.waitFor(o).next(()=>i)}getTargetCount(e){return p.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return p.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),p.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),p.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),p.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return p.resolve(r)}containsKey(e,n){return p.resolve(this.Nr.containsKey(n))}};var Ud=class{constructor(e,n){this.Lr={},this.overlays={},this.kr=new It(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new $0(this),this.indexManager=new T0,this.remoteDocumentCache=function(i){return new B0(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Pd(n),this.$r=new V0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new L0,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new j0(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){w("MemoryPersistence","Starting transaction:",e);let i=new q0(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return p.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},q0=class extends xd{constructor(e){super(),this.currentSequenceNumber=e}},$d=class t{constructor(e){this.persistence=e,this.zr=new mc,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw M()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),p.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),p.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),p.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return p.forEach(this.Jr,r=>{let i=C.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,V.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return p.or([()=>p.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var H0=class{constructor(e){this.serializer=e}N(e,n,r,i){let o=new wd("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xD,{unique:!0}),c.createObjectStore("documentMutations")}(e),iC(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=p.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),iC(e)),s=s.next(()=>function(c){let u=c.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:V.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",l)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,u){return u.store("mutations").W().next(l=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xD,{unique:!0});let d=u.store("mutations"),h=l.map(f=>d.put(f));return p.waitFor(h)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let u=c.createObjectStore("documentOverlays",{keyPath:qF});u.createIndex("collectionPathOverlayIndex",HF,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",zF,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let u=c.createObjectStore("remoteDocumentsV14",{keyPath:PF});u.createIndex("documentKeyIndex",NF),u.createIndex("collectionGroupIndex",OF)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:jF}).createIndex("sequenceNumberIndex",BF,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:UF}).createIndex("documentKeyIndex",$F,{unique:!1})}(e))),s}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=Vd(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>p.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>p.forEach(a,c=>{k(c.userId===o.userId);let u=fi(this.serializer,c);return mT(e,o.userId,u).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.Y((s,a)=>{let c=new ne(s),u=function(d){return[0,ct(d)]}(c);o.push(n.get(u).next(l=>l?p.resolve():(d=>n.put({targetId:0,path:ct(d),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>p.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:LF});let r=n.store("collectionParents"),i=new gc,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:ct(c)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{let c=new ne(s);return o(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,c],u)=>{let l=mn(a);return o(l.popLast())}))}ri(e){let n=e.store("targets");return n.Y((r,i)=>{let o=Ya(i),s=fT(this.serializer,o);return n.put(s)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(d){return d.document?new C(ne.fromString(d.document.name).popFirst(5)):d.noDocument?C.fromSegments(d.noDocument.path):d.unknownDocument?C.fromSegments(d.unknownDocument.path):M()}(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(u))}).next(()=>p.waitFor(i))}si(e,n){let r=n.store("mutations"),i=vT(this.serializer),o=new Ud($d.Hr,this.serializer.ct);return r.W().next(s=>{let a=new Map;return s.forEach(c=>{var u;let l=(u=a.get(c.userId))!==null&&u!==void 0?u:G();fi(this.serializer,c).keys().forEach(d=>l=l.add(d)),a.set(c.userId,l)}),p.forEach(a,(c,u)=>{let l=new Oe(u),d=Od.lt(this.serializer,l),h=o.getIndexManager(l),f=Ld.lt(l,this.serializer,h,o.referenceDelegate);return new Bd(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new ic(n,It._e),c).next()})})}};function iC(t){t.createObjectStore("targetDocuments",{keyPath:FF}).createIndex("documentTargetsIndex",VF,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kF,{unique:!0}),t.createObjectStore("targetGlobal")}var km="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",z0=class t{constructor(e,n,r,i,o,s,a,c,u,l,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=u,this.ai=l,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!t.D())throw new x(g.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new N0(this,i),this.Ti=n+"main",this.serializer=new Pd(c),this.Ei=new $n(this.Ti,this.ui,new H0(this.serializer)),this.Qr=new S0(this.referenceDelegate,this.serializer),this.remoteDocumentCache=vT(this.serializer),this.$r=new x0,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,l===!1&&Ae("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new x(g.FAILED_PRECONDITION,km);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new It(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>_(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>_(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>_(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ud(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Rr(e))return w("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return w("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Ka(e).get("owner").next(n=>p.resolve(this.Si(n)))}bi(e){return ud(e).delete(this.clientId)}Di(){return _(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=He(n,"clientMetadata");return r.W().next(i=>{let o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return p.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?p.resolve(!0):Ka(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new x(g.FAILED_PRECONDITION,km);return!1}}return!(!this.networkEnabled||!this.inForeground)||ud(e).W().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&w("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return _(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new ic(e,It._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Bi()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>ud(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Ld.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new A0(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Od.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){w("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(c){return c===15?WF:c===14?CC:c===13?DC:c===12?GF:c===11?IC:void M()}(this.ui),s;return this.Ei.runTransaction(e,i,o,a=>(s=new ic(a,this.kr?this.kr.next():It._e),n==="readwrite-primary"?this.gi(s).next(c=>!!c||this.pi(s)).next(c=>{if(!c)throw Ae(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new x(g.FAILED_PRECONDITION,wC);return r(s)}).next(c=>this.wi(s).next(()=>c)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return Ka(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new x(g.FAILED_PRECONDITION,km)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ka(e).put("owner",n)}static D(){return $n.D()}yi(e){let n=Ka(e);return n.get("owner").next(r=>this.Si(r)?(w("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):p.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Ae(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;Mh()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return w("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ae("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Ae("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Ka(t){return He(t,"owner")}function ud(t){return He(t,"clientMetadata")}function z_(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var G0=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=G(),i=G();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var W0=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var qd=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Mh()?8:$n.v(ys())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new W0;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Vo()<=Jt.DEBUG&&w("QueryEngine","SDK will not create cache indexes for query:",Lo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),p.resolve()):(Vo()<=Jt.DEBUG&&w("QueryEngine","Query:",Lo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Vo()<=Jt.DEBUG&&w("QueryEngine","The SDK decides to create cache indexes for query:",Lo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ut(n))):p.resolve())}ji(e,n){if(RD(n))return p.resolve(null);let r=ut(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ad(n,null,"F"),r=ut(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=G(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Zi(n,a);return this.Xi(n,u,s,c.readTime)?this.ji(e,Ad(n,null,"F")):this.es(e,u,n,c)}))})))}Hi(e,n,r,i){return RD(n)||i.isEqual(V.min())?p.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,r,i)?p.resolve(null):(Vo()<=Jt.DEBUG&&w("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Lo(n)),this.es(e,s,n,vC(i,-1)).next(a=>a))})}Zi(e,n){let r=new le(jC(e));return n.forEach((i,o)=>{Ac(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return Vo()<=Jt.DEBUG&&w("QueryEngine","Using full collection scan to execute query:",Lo(n)),this.zi.getDocumentsMatchingQuery(e,n,Vt.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var K0=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new ge(z),this.rs=new bn(o=>wi(o),Cc),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bd(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function xT(t,e,n,r){return new K0(t,e,n,r)}function wT(t,e){return _(this,null,function*(){let n=A(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=G();for(let u of i){s.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of o){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:s,addedBatchIds:a}))})})})}function CV(t,e){let n=A(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let d=u.batch,h=d.keys(),f=p.resolve();return h.forEach(v=>{f=f.next(()=>l.getEntry(c,v)).next(y=>{let m=u.docVersions.get(v);k(m!==null),y.version.compareTo(m)<0&&(d.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),l.addEntry(y)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=G();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function ET(t){let e=A(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function TV(t,e){let n=A(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(o,l.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(o,l.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(qe.EMPTY_BYTE_STRING,V.min()).withLastLimboFreeSnapshotVersion(V.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(y,m,E){return y.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(h,f,l)&&a.push(n.Qr.updateTargetData(o,f))});let c=mt(),u=G();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(bT(o,s,e.documentUpdates).next(l=>{c=l.cs,u=l.ls})),!r.isEqual(V.min())){let l=n.Qr.getLastRemoteSnapshotVersion(o).next(d=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return p.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.ns=i,o))}function bT(t,e,n){let r=G(),i=G();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=mt();return n.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(V.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):w("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:s,ls:i}})}function AV(t,e){let n=A(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ts(t,e){let n=A(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,p.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new Jo(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function ns(t,e,n){return _(this,null,function*(){let r=A(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Rr(s))throw s;w("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function Hd(t,e,n){let r=A(t),i=V.min(),o=G();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,l){let d=A(c),h=d.rs.get(l);return h!==void 0?p.resolve(d.ns.get(h)):d.Qr.getTargetData(u,l)}(r,s,ut(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:V.min(),n?o:G())).next(a=>(CT(r,LC(e),a),{documents:a,hs:o})))}function IT(t,e){let n=A(t),r=A(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function DT(t,e){let n=A(t),r=n.ss.get(e)||V.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,vC(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(CT(n,e,i),i))}function CT(t,e,n){let r=t.ss.get(e)||V.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}function SV(t,e,n,r){return _(this,null,function*(){let i=A(t),o=G(),s=mt();for(let u of n){let l=e.Ps(u.metadata.name);u.document&&(o=o.add(l));let d=e.Is(u);d.setReadTime(e.Ts(u.metadata.readTime)),s=s.insert(l,d)}let a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield ts(i,function(l){return ut(us(ne.fromString(`__bundle__/docs/${l}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>bT(u,a,s).next(l=>(a.apply(u),l)).next(l=>i.Qr.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Qr.addMatchingKeys(u,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,l.cs,l.ls)).next(()=>l.cs)))})}function MV(r,i){return _(this,arguments,function*(t,e,n=G()){let o=yield ts(t,ut(q_(e.bundledQuery))),s=A(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Me(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.$r.saveNamedQuery(a,e);let u=o.withResumeToken(qe.EMPTY_BYTE_STRING,c);return s.ns=s.ns.insert(u.targetId,u),s.Qr.updateTargetData(a,u).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function oC(t,e){return`firestore_clients_${t}_${e}`}function sC(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Fm(t,e){return`firestore_targets_${t}_${e}`}var zd=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new x(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(Ae("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},ec=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new x(r.error.code,r.error.message))),o?new t(e,r.state,i):(Ae("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Gd=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=U_();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=EC(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Ae("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},Q0=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Ae("SharedClientState",`Failed to parse online state: ${e}`),null)}},_c=class{constructor(){this.activeTargetIds=U_()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},tc=class{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new ge(z),this.started=!1,this.ys=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=oC(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new _c),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return _(this,null,function*(){let e=yield this.syncEngine.Li();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(oC(this.persistenceKey,r));if(i){let o=Gd.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,r){this.Bs(e,n,r),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(Fm(this.persistenceKey,e));if(r){let i=ec.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fm(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return w("SharedClientState","READ",e,n),n}setItem(e,n){w("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){w("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(w("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Ae("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>_(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(o){let s=It._e;if(o!=null)try{let a=JSON.parse(o);k(typeof a=="number"),s=a}catch(a){Ae("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==It._e&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,r){let i=new zd(this.currentUser,e,n,r),o=sC(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Ls(e){let n=sC(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=Fm(this.persistenceKey,e),o=new ec(e,n,r);this.setItem(i,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return Gd.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return zd.Es(new Oe(o),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return ec.Es(i,n)}xs(e){return Q0.Es(e)}Js(e){return JSON.parse(e)}zs(e){return _(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);w("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=U_();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},Wd=class{constructor(){this.no=new _c,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new _c,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Y0=class{io(e){}shutdown(){}};var Kd=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){w("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){w("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ld=null;function Vm(){return ld===null?ld=function(){return 268435456+Math.round(2147483648*Math.random())}():ld++,"0x"+ld.toString(16)}var RV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Z0=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var tt="WebChannelConnection",X0=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(n,r,i,o,s){let a=Vm(),c=this.bo(n,r.toUriEncodedString());w("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,o,s),this.Co(n,c,u,i).then(l=>(w("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw Ft("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}vo(n,r,i,o,s,a){return this.So(n,r,i,o,s)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}bo(n,r){let i=RV[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let o=Vm();return new Promise((s,a)=>{let c=new gD;c.setWithCredentials(!0),c.listenOnce(fD.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case sd.NO_ERROR:let l=c.getResponseJson();w(tt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),s(l);break;case sd.TIMEOUT:w(tt,`RPC '${e}' ${o} timed out`),a(new x(g.DEADLINE_EXCEEDED,"Request time out"));break;case sd.HTTP_ERROR:let d=c.getStatus();if(w(tt,`RPC '${e}' ${o} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let v=function(m){let E=m.toLowerCase().replace(/_/g,"-");return Object.values(g).indexOf(E)>=0?E:g.UNKNOWN}(f.status);a(new x(v,f.message))}else a(new x(g.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new x(g.UNAVAILABLE,"Connection failed."));break;default:M()}}finally{w(tt,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);w(tt,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",u,r,15)})}Fo(e,n,r){let i=Vm(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=dD(),a=hD(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=o.join("");w(tt,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=s.createWebChannel(l,c),h=!1,f=!1,v=new Z0({lo:m=>{f?w(tt,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(h||(w(tt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),w(tt,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},ho:()=>d.close()}),y=(m,E,R)=>{m.listen(E,D=>{try{R(D)}catch(P){setTimeout(()=>{throw P},0)}})};return y(d,Ha.EventType.OPEN,()=>{f||w(tt,`RPC '${e}' stream ${i} transport opened.`)}),y(d,Ha.EventType.CLOSE,()=>{f||(f=!0,w(tt,`RPC '${e}' stream ${i} transport closed`),v.Vo())}),y(d,Ha.EventType.ERROR,m=>{f||(f=!0,Ft(tt,`RPC '${e}' stream ${i} transport errored:`,m),v.Vo(new x(g.UNAVAILABLE,"The operation could not be completed")))}),y(d,Ha.EventType.MESSAGE,m=>{var E;if(!f){let R=m.data[0];k(!!R);let D=R,P=D.error||((E=D[0])===null||E===void 0?void 0:E.error);if(P){w(tt,`RPC '${e}' stream ${i} received error:`,P);let j=P.status,H=function(Th){let My=Pe[Th];if(My!==void 0)return JC(My)}(j),de=P.message;H===void 0&&(H=g.INTERNAL,de="Unknown error status: "+j+" with message "+P.message),f=!0,v.Vo(new x(H,de)),d.close()}else w(tt,`RPC '${e}' stream ${i} received:`,R),v.mo(R)}}),y(a,pD.STAT_EVENT,m=>{m.stat===Nm.PROXY?w(tt,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===Nm.NOPROXY&&w(tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.Ro()},0),v}};function TT(){return typeof window<"u"?window:null}function gd(){return typeof document<"u"?document:null}function Sc(t){return new g0(t,!0)}var yc=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&w("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var Qd=class{constructor(e,n,r,i,o,s,a,c){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new yc(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return _(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return _(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return _(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===g.RESOURCE_EXHAUSTED?(Ae(n.toString()),Ae("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===g.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new x(g.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>_(this,null,function*(){this.state=0,this.start()}))}__(e){return w("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(w("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},J0=class extends Qd{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=gV(this.serializer,e),r=function(o){if(!("targetChange"in o))return V.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?V.min():s.readTime?Me(s.readTime):V.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=y0(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=Cd(c)?{documents:aT(o,c)}:{query:cT(o,c).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=tT(o,s.resumeToken);let u=m0(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(V.min())>0){a.readTime=Xo(o,s.snapshotVersion.toTimestamp());let u=m0(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=_V(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=y0(this.serializer),n.removeTarget=e,this.t_(n)}},e_=class extends Qd{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(k(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=mV(e.writeResults,e.commitTime),r=Me(e.commitTime);return this.listener.T_(r,n)}return k(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=y0(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>pc(this.serializer,r))};this.t_(n)}};var t_=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new x(g.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,_0(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new x(g.UNKNOWN,o.toString())})}vo(e,n,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,_0(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new x(g.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var n_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Ae(n),this.g_=!1):w("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var r_=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{r.enqueueAndForget(()=>_(this,null,function*(){Pr(this)&&(w("RemoteStore","Restarting streams for network reachability change."),yield function(c){return _(this,null,function*(){let u=A(c);u.v_.add(4),yield ls(u),u.x_.set("Unknown"),u.v_.delete(4),yield Mc(u)})}(this))}))}),this.x_=new n_(r,i)}};function Mc(t){return _(this,null,function*(){if(Pr(t))for(let e of t.F_)yield e(!0)})}function ls(t){return _(this,null,function*(){for(let e of t.F_)yield e(!1)})}function ph(t,e){let n=A(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),K_(n)?W_(n):hs(n).Jo()&&G_(n,e))}function vc(t,e){let n=A(t),r=hs(n);n.C_.delete(e),r.Jo()&&AT(n,e),n.C_.size===0&&(r.Jo()?r.Xo():Pr(n)&&n.x_.set("Unknown"))}function G_(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(V.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}hs(t).c_(e)}function AT(t,e){t.O_.Oe(e),hs(t).l_(e)}function W_(t){t.O_=new p0({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),hs(t).start(),t.x_.p_()}function K_(t){return Pr(t)&&!hs(t).Ho()&&t.C_.size>0}function Pr(t){return A(t).v_.size===0}function ST(t){t.O_=void 0}function PV(t){return _(this,null,function*(){t.C_.forEach((e,n)=>{G_(t,e)})})}function NV(t,e){return _(this,null,function*(){ST(t),K_(t)?(t.x_.S_(e),W_(t)):t.x_.set("Unknown")})}function OV(t,e,n){return _(this,null,function*(){if(t.x_.set("Online"),e instanceof Md&&e.state===2&&e.cause)try{yield function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){w("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Yd(t,r)}else if(e instanceof zo?t.O_.$e(e):e instanceof Sd?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(V.min()))try{let r=yield ET(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.O_.it(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=o.C_.get(u);l&&o.C_.set(u,l.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let l=o.C_.get(c);if(!l)return;o.C_.set(c,l.withResumeToken(qe.EMPTY_BYTE_STRING,l.snapshotVersion)),AT(o,c);let d=new Jo(l.target,c,u,l.sequenceNumber);G_(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){w("RemoteStore","Failed to raise snapshot:",r),yield Yd(t,r)}})}function Yd(t,e,n){return _(this,null,function*(){if(!Rr(e))throw e;t.v_.add(1),yield ls(t),t.x_.set("Offline"),n||(n=()=>ET(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){w("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Mc(t)}))})}function MT(t,e){return e().catch(n=>Yd(t,n,e))}function ds(t){return _(this,null,function*(){let e=A(t),n=Sr(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;kV(e);)try{let i=yield AV(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,FV(e,i)}catch(i){yield Yd(e,i)}RT(e)&&PT(e)})}function kV(t){return Pr(t)&&t.D_.length<10}function FV(t,e){t.D_.push(e);let n=Sr(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function RT(t){return Pr(t)&&!Sr(t).Ho()&&t.D_.length>0}function PT(t){Sr(t).start()}function VV(t){return _(this,null,function*(){Sr(t).d_()})}function LV(t){return _(this,null,function*(){let e=Sr(t);for(let n of t.D_)e.I_(n.mutations)})}function jV(t,e,n){return _(this,null,function*(){let r=t.D_.shift(),i=d0.from(r,e,n);yield MT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ds(t)})}function BV(t,e){return _(this,null,function*(){e&&Sr(t).P_&&(yield function(r,i){return _(this,null,function*(){if(function(s){return XC(s)&&s!==g.ABORTED}(i.code)){let o=r.D_.shift();Sr(r).Zo(),yield MT(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ds(r)}})}(t,e)),RT(t)&&PT(t)})}function aC(t,e){return _(this,null,function*(){let n=A(t);n.asyncQueue.verifyOperationInProgress(),w("RemoteStore","RemoteStore received new credentials");let r=Pr(n);n.v_.add(3),yield ls(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Mc(n)})}function i_(t,e){return _(this,null,function*(){let n=A(t);e?(n.v_.delete(2),yield Mc(n)):e||(n.v_.add(2),yield ls(n),n.x_.set("Unknown"))})}function hs(t){return t.N_||(t.N_=function(n,r,i){let o=A(n);return o.R_(),new J0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:PV.bind(null,t),To:NV.bind(null,t),u_:OV.bind(null,t)}),t.F_.push(e=>_(this,null,function*(){e?(t.N_.Zo(),K_(t)?W_(t):t.x_.set("Unknown")):(yield t.N_.stop(),ST(t))}))),t.N_}function Sr(t){return t.B_||(t.B_=function(n,r,i){let o=A(n);return o.R_(),new e_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:VV.bind(null,t),To:BV.bind(null,t),E_:LV.bind(null,t),T_:jV.bind(null,t)}),t.F_.push(e=>_(this,null,function*(){e?(t.B_.Zo(),yield ds(t)):(yield t.B_.stop(),t.D_.length>0&&(w("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}var o_=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ke,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(g.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function fs(t,e){if(Ae("AsyncQueue",`${e}: ${t}`),Rr(t))return new x(g.UNAVAILABLE,`${e}: ${t}`);throw t}var Zd=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||C.comparator(n.key,r.key):(n,r)=>C.comparator(n.key,r.key),this.keyedMap=Qa(),this.sortedSet=new ge(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Xd=class{constructor(){this.L_=new ge(C.comparator)}track(e){let n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):M():this.L_=this.L_.insert(n,e)}k_(){let e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}},rs=class t{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Zd.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var s_=class{constructor(){this.q_=void 0,this.Q_=[]}},a_=class{constructor(){this.queries=new bn(e=>VC(e),Tc),this.onlineState="Unknown",this.K_=new Set}};function Q_(t,e){return _(this,null,function*(){let n=A(t),r=e.query,i=!1,o=n.queries.get(r);if(o||(i=!0,o=new s_),i)try{o.q_=yield n.onListen(r)}catch(s){let a=fs(s,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.Q_.push(e),e.U_(n.onlineState),o.q_&&e.W_(o.q_)&&Z_(n)})}function Y_(t,e){return _(this,null,function*(){let n=A(t),r=e.query,i=!1,o=n.queries.get(r);if(o){let s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),i=o.Q_.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function UV(t,e){let n=A(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Q_)a.W_(i)&&(r=!0);s.q_=i}}r&&Z_(n)}function $V(t,e,n){let r=A(t),i=r.queries.get(e);if(i)for(let o of i.Q_)o.onError(n);r.queries.delete(e)}function Z_(t){t.K_.forEach(e=>{e.next()})}var xc=class{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new rs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;let n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=rs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}};var c_=class{constructor(e,n){this.X_=e,this.byteLength=n}ea(){return"metadata"in this.X_}};var Jd=class{constructor(e){this.serializer=e}Ps(e){return vn(this.serializer,e)}Is(e){return e.metadata.exists?sT(this.serializer,e.document,!1):Fe.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Me(e)}},u_=class{constructor(e,n,r){this.ta=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=NT(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++n;let r=ne.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ra(e){let n=new Map,r=new Jd(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ps(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||G()).add(o);n.set(s,a)}}return n}complete(){return _(this,null,function*(){let e=yield SV(this.localStore,new Jd(this.serializer),this.documents,this.ta.id),n=this.ra(this.documents);for(let r of this.queries)yield MV(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}})}};function NT(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var eh=class{constructor(e){this.key=e}},th=class{constructor(e){this.key=e}},nh=class{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=G(),this.mutatedKeys=G(),this.ua=jC(e),this.ca=new Zd(this.ua)}get la(){return this.oa}ha(e,n){let r=n?n.Pa:new Xd,i=n?n.ca:this.ca,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=Ac(this.query,d)?d:null,v=!!h&&this.mutatedKeys.has(h.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),m=!1;h&&f?h.data.isEqual(f.data)?v!==y&&(r.track({type:3,doc:f}),m=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),m=!0,(c&&this.ua(f,c)>0||u&&this.ua(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(c||u)&&(a=!0)),m&&(f?(s=s.add(f),o=y?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let l=this.query.limitType==="F"?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ca:s,Pa:r,Xi:a,mutatedKeys:o}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;let s=e.Pa.k_();s.sort((l,d)=>function(f,v){let y=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return M()}};return y(f)-y(v)}(l.type,d.type)||this.ua(l.doc,d.doc)),this.Ta(r),i=i!=null&&i;let a=n&&!i?this.Ea():[],c=this.aa.size===0&&this.current&&!i?1:0,u=c!==this._a;return this._a=c,s.length!==0||u?{snapshot:new rs(this.query,e.ca,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Xd,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];let e=this.aa;this.aa=G(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});let n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new th(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new eh(r))}),n}Ra(e){this.oa=e.hs,this.aa=G();let n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return rs.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},l_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},d_=class{constructor(e){this.key=e,this.ma=!1}},h_=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new bn(a=>VC(a),Tc),this.pa=new Map,this.ya=new Set,this.wa=new ge(C.comparator),this.Sa=new Map,this.ba=new mc,this.Da={},this.Ca=new Map,this.va=es.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function qV(t,e){return _(this,null,function*(){let n=ny(t),r,i,o=n.ga.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{let s=yield ts(n.localStore,ut(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield X_(n,e,r,a==="current",s.resumeToken),n.isPrimaryClient&&ph(n.remoteStore,s)}return i})}function X_(t,e,n,r,i){return _(this,null,function*(){t.Ma=(d,h,f)=>function(y,m,E,R){return _(this,null,function*(){let D=m.view.ha(E);D.Xi&&(D=yield Hd(y.localStore,m.query,!1).then(({documents:de})=>m.view.ha(de,D)));let P=R&&R.targetChanges.get(m.targetId),j=R&&R.targetMismatches.get(m.targetId)!=null,H=m.view.applyChanges(D,y.isPrimaryClient,P,j);return f_(y,m.targetId,H.da),H.snapshot})}(t,d,h,f);let o=yield Hd(t.localStore,e,!0),s=new nh(e,o.hs),a=s.ha(o.documents),c=hc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,c);f_(t,n,u.da);let l=new l_(e,n,s);return t.ga.set(e,l),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),u.snapshot})}function HV(t,e){return _(this,null,function*(){let n=A(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(o=>!Tc(o,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ns(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),vc(n.remoteStore,r.targetId),is(n,r.targetId)}).catch(Mr))):(is(n,r.targetId),yield ns(n.localStore,r.targetId,!0))})}function zV(t,e,n){return _(this,null,function*(){let r=ry(t);try{let i=yield function(s,a){let c=A(s),u=xe.now(),l=a.reduce((f,v)=>f.add(v.key),G()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let v=mt(),y=G();return c.os.getEntries(f,l).next(m=>{v=m,v.forEach((E,R)=>{R.isValidDocument()||(y=y.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,v)).next(m=>{d=m;let E=[];for(let R of a){let D=cV(R,d.get(R.key).overlayedDocument);D!=null&&E.push(new Yt(R.key,D,MC(D.value.mapValue),De.exists(!0)))}return c.mutationQueue.addMutationBatch(f,u,E,a)}).next(m=>{h=m;let E=m.applyToLocalDocumentSet(d,y);return c.documentOverlayCache.saveOverlays(f,m.batchId,E)})}).then(()=>({batchId:h.batchId,changes:UC(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Da[s.currentUser.toKey()];u||(u=new ge(z)),u=u.insert(a,c),s.Da[s.currentUser.toKey()]=u}(r,i.batchId,n),yield Wn(r,i.changes),yield ds(r.remoteStore)}catch(i){let o=fs(i,"Failed to persist write");n.reject(o)}})}function OT(t,e){return _(this,null,function*(){let n=A(t);try{let r=yield TV(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Sa.get(o);s&&(k(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.ma=!0:i.modifiedDocuments.size>0?k(s.ma):i.removedDocuments.size>0&&(k(s.ma),s.ma=!1))}),yield Wn(n,r,e)}catch(r){yield Mr(r)}})}function cC(t,e,n){let r=A(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ga.forEach((o,s)=>{let a=s.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=A(s);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let h of d.Q_)h.U_(a)&&(u=!0)}),u&&Z_(c)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function GV(t,e,n){return _(this,null,function*(){let r=A(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Sa.get(e),o=i&&i.key;if(o){let s=new ge(C.comparator);s=s.insert(o,Fe.newNoDocument(o,V.min()));let a=G().add(o),c=new dc(V.min(),new Map,new ge(z),s,a);yield OT(r,c),r.wa=r.wa.remove(o),r.Sa.delete(e),ty(r)}else yield ns(r.localStore,e,!1).then(()=>is(r,e,n)).catch(Mr)})}function WV(t,e){return _(this,null,function*(){let n=A(t),r=e.batch.batchId;try{let i=yield CV(n.localStore,e);ey(n,r,null),J_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Wn(n,i)}catch(i){yield Mr(i)}})}function KV(t,e,n){return _(this,null,function*(){let r=A(t);try{let i=yield function(s,a){let c=A(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(d=>(k(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);ey(r,e,n),J_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Wn(r,i)}catch(i){yield Mr(i)}})}function QV(t,e){return _(this,null,function*(){let n=A(t);Pr(n.remoteStore)||w("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=A(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Ca.get(r)||[];i.push(e),n.Ca.set(r,i)}catch(r){let i=fs(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function J_(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function ey(t,e,n){let r=A(t),i=r.Da[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function is(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||kT(t,r)})}function kT(t,e){t.ya.delete(e.path.canonicalString());let n=t.wa.get(e);n!==null&&(vc(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),ty(t))}function f_(t,e,n){for(let r of n)r instanceof eh?(t.ba.addReference(r.key,e),YV(t,r)):r instanceof th?(w("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||kT(t,r.key)):M()}function YV(t,e){let n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(w("SyncEngine","New document in limbo: "+n),t.ya.add(r),ty(t))}function ty(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){let e=t.ya.values().next().value;t.ya.delete(e);let n=new C(ne.fromString(e)),r=t.va.next();t.Sa.set(r,new d_(n)),t.wa=t.wa.insert(n,r),ph(t.remoteStore,new Jo(ut(us(n.path)),r,"TargetPurposeLimboResolution",It._e))}}function Wn(t,e,n){return _(this,null,function*(){let r=A(t),i=[],o=[],s=[];r.ga.isEmpty()||(r.ga.forEach((a,c)=>{s.push(r.Ma(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=G0.Ki(c.targetId,u);o.push(l)}}))}),yield Promise.all(s),r.fa.u_(i),yield function(c,u){return _(this,null,function*(){let l=A(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>p.forEach(u,h=>p.forEach(h.qi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>p.forEach(h.Qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Rr(d))throw d;w("LocalStore","Failed to update sequence numbers: "+d)}for(let d of u){let h=d.targetId;if(!d.fromCache){let f=l.ns.get(h),v=f.snapshotVersion,y=f.withLastLimboFreeSnapshotVersion(v);l.ns=l.ns.insert(h,y)}}})}(r.localStore,o))})}function ZV(t,e){return _(this,null,function*(){let n=A(t);if(!n.currentUser.isEqual(e)){w("SyncEngine","User change. New user:",e.toKey());let r=yield wT(n.localStore,e);n.currentUser=e,function(o,s){o.Ca.forEach(a=>{a.forEach(c=>{c.reject(new x(g.CANCELLED,s))})}),o.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Wn(n,r.us)}})}function XV(t,e){let n=A(t),r=n.Sa.get(e);if(r&&r.ma)return G().add(r.key);{let i=G(),o=n.pa.get(e);if(!o)return i;for(let s of o){let a=n.ga.get(s);i=i.unionWith(a.view.la)}return i}}function JV(t,e){return _(this,null,function*(){let n=A(t),r=yield Hd(n.localStore,e.query,!0),i=e.view.Ra(r);return n.isPrimaryClient&&f_(n,e.targetId,i.da),i})}function eL(t,e){return _(this,null,function*(){let n=A(t);return DT(n.localStore,e).then(r=>Wn(n,r))})}function tL(t,e,n,r){return _(this,null,function*(){let i=A(t),o=yield function(a,c){let u=A(a),l=A(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>l.vn(d,c).next(h=>h?u.localDocuments.getDocuments(d,h):p.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield ds(i.remoteStore):n==="acknowledged"||n==="rejected"?(ey(i,e,r||null),J_(i,e),function(a,c){A(A(a).mutationQueue).Mn(c)}(i.localStore,e)):M(),yield Wn(i,o)):w("SyncEngine","Cannot apply mutation batch with id: "+e)})}function nL(t,e){return _(this,null,function*(){let n=A(t);if(ny(n),ry(n),e===!0&&n.Fa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield uC(n,r.toArray());n.Fa=!0,yield i_(n.remoteStore,!0);for(let o of i)ph(n.remoteStore,o)}else if(e===!1&&n.Fa!==!1){let r=[],i=Promise.resolve();n.pa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(is(n,s),ns(n.localStore,s,!0))),vc(n.remoteStore,s)}),yield i,yield uC(n,r),function(s){let a=A(s);a.Sa.forEach((c,u)=>{vc(a.remoteStore,u)}),a.ba.mr(),a.Sa=new Map,a.wa=new ge(C.comparator)}(n),n.Fa=!1,yield i_(n.remoteStore,!1)}})}function uC(t,e,n){return _(this,null,function*(){let r=A(t),i=[],o=[];for(let s of e){let a,c=r.pa.get(s);if(c&&c.length!==0){a=yield ts(r.localStore,ut(c[0]));for(let u of c){let l=r.ga.get(u),d=yield JV(r,l);d.snapshot&&o.push(d.snapshot)}}else{let u=yield IT(r.localStore,s);a=yield ts(r.localStore,u),yield X_(r,FT(u),s,!1,a.resumeToken)}i.push(a)}return r.fa.u_(o),i})}function FT(t){return FC(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function rL(t){return function(n){return A(A(n).persistence).Li()}(A(t).localStore)}function iL(t,e,n,r){return _(this,null,function*(){let i=A(t);if(i.Fa)return void w("SyncEngine","Ignoring unexpected query state notification.");let o=i.pa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield DT(i.localStore,LC(o[0])),a=dc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",qe.EMPTY_BYTE_STRING);yield Wn(i,s,a);break}case"rejected":yield ns(i.localStore,e,!0),is(i,e,r);break;default:M()}})}function oL(t,e,n){return _(this,null,function*(){let r=ny(t);if(r.Fa){for(let i of e){if(r.pa.has(i)){w("SyncEngine","Adding an already active target "+i);continue}let o=yield IT(r.localStore,i),s=yield ts(r.localStore,o);yield X_(r,FT(o),s.targetId,!1,s.resumeToken),ph(r.remoteStore,s)}for(let i of n)r.pa.has(i)&&(yield ns(r.localStore,i,!1).then(()=>{vc(r.remoteStore,i),is(r,i)}).catch(Mr))}})}function ny(t){let e=A(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=OT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GV.bind(null,e),e.fa.u_=UV.bind(null,e.eventManager),e.fa.xa=$V.bind(null,e.eventManager),e}function ry(t){let e=A(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KV.bind(null,e),e}function sL(t,e,n){let r=A(t);(function(o,s,a){return _(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(f,v){let y=A(f),m=Me(v.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",E=>y.$r.getBundleMetadata(E,v.id)).then(E=>!!E&&E.createTime.compareTo(m)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(NT(c));let u=new u_(c,o.localStore,s.serializer),l=yield s.Oa();for(;l;){let h=yield u.na(l);h&&a._updateProgress(h),l=yield s.Oa()}let d=yield u.complete();return yield Wn(o,d.sa,void 0),yield function(f,v){let y=A(f);return y.persistence.runTransaction("Save bundle","readwrite",m=>y.$r.saveBundleMetadata(m,v))}(o.localStore,c),a._completeWith(d.progress),Promise.resolve(d.ia)}catch(c){return Ft("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var wc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){this.serializer=Sc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return xT(this.persistence,new qd,e.initialUser,this.serializer)}createPersistence(e){return new Ud($d.Hr,this.serializer)}createSharedClientState(e){return new Wd}terminate(){return _(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var rh=class t extends wc{constructor(e,n,r){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){yield Ah(t.prototype,this,"initialize").call(this,e),yield this.Na.initialize(this,e),yield ry(this.Na.syncEngine),yield ds(this.Na.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return xT(this.persistence,new qd,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new R0(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new Qm(n,this.persistence);return new Km(e.asyncQueue,r)}createPersistence(e){let n=z_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new z0(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,TT(),gd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Wd}},p_=class t extends rh{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return _(this,null,function*(){yield Ah(t.prototype,this,"initialize").call(this,e);let n=this.Na.syncEngine;this.sharedClientState instanceof tc&&(this.sharedClientState.syncEngine={Zs:tL.bind(null,n),Xs:iL.bind(null,n),eo:oL.bind(null,n),Li:rL.bind(null,n),Ys:eL.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>_(this,null,function*(){yield nL(this.Na.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=TT();if(!tc.D(n))throw new x(g.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=z_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new tc(n,e.asyncQueue,r,e.clientId,e.initialUser)}},Ec=class{initialize(e,n){return _(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZV.bind(null,this.syncEngine),yield i_(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new a_}()}createDatastore(e){let n=Sc(e.databaseInfo.databaseId),r=function(o){return new X0(o)}(e.databaseInfo);return function(o,s,a,c){return new t_(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new r_(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>cC(this.syncEngine,n,0),function(){return Kd.D()?new Kd:new Y0}())}createSyncEngine(e,n){return function(i,o,s,a,c,u,l){let d=new h_(i,o,s,a,c,u);return l&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return _(this,null,function*(){var e;yield function(r){return _(this,null,function*(){let i=A(r);w("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield ls(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function lC(t,e=10240){let n=0;return{read(){return _(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return _(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var os=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Ae("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var g_=class{constructor(e,n){this.ka=e,this.serializer=n,this.metadata=new ke,this.buffer=new Uint8Array,this.qa=function(){return new TextDecoder("utf-8")}(),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.X_)}`))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}getMetadata(){return _(this,null,function*(){return this.metadata.promise})}Oa(){return _(this,null,function*(){return yield this.getMetadata(),this.Qa()})}Qa(){return _(this,null,function*(){let e=yield this.Ka();if(e===null)return null;let n=this.qa.decode(e),r=Number(n);isNaN(r)&&this.$a(`length string (${n}) is not valid number`);let i=yield this.Ua(r);return new c_(JSON.parse(i),e.length+r)})}Wa(){return this.buffer.findIndex(e=>e===123)}Ka(){return _(this,null,function*(){for(;this.Wa()<0&&!(yield this.Ga()););if(this.buffer.length===0)return null;let e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ua(e){return _(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ga())&&this.$a("Reached the end of bundle when more is expected.");let n=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){return _(this,null,function*(){let e=yield this.ka.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var m_=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return _(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new x(g.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return _(this,null,function*(){let s=A(i),a={documents:o.map(d=>fc(s.serializer,d))},c=yield s.vo("BatchGetDocuments",s.serializer.databaseId,ne.emptyPath(),a,o.length),u=new Map;c.forEach(d=>{let h=pV(s.serializer,d);u.set(h.key.toString(),h)});let l=[];return o.forEach(d=>{let h=u.get(d.toString());k(!!h),l.push(h)}),l})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ar(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return _(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=C.fromPath(r);this.mutations.push(new cc(i,this.precondition(i)))}),yield function(r,i){return _(this,null,function*(){let o=A(r),s={writes:i.map(a=>pc(o.serializer,a))};yield o.So("Commit",o.serializer.databaseId,ne.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw M();n=V.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new x(g.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(V.min())?De.exists(!1):De.updateTime(n):De.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(V.min()))throw new x(g.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return De.updateTime(n)}return De.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var __=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.za=r.maxAttempts,this.jo=new yc(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo(()=>_(this,null,function*(){let e=new m_(this.datastore),n=this.Ja(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Ya(i)}))}).catch(r=>{this.Ya(r)})}))}Ja(e){try{let n=this.updateFunction(e);return!Dc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!XC(n)}return!1}};var y_=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Oe.UNAUTHENTICATED,this.clientId=yd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>_(this,null,function*(){w("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(w("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new x(g.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ke;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=fs(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function md(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),w("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield wT(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function v_(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield iy(t);w("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>aC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>aC(e.remoteStore,i)),t._onlineComponents=e})}function VT(t){return t.name==="FirebaseError"?t.code===g.FAILED_PRECONDITION||t.code===g.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function iy(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){w("FirestoreClient","Using user provided OfflineComponentProvider");try{yield md(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!VT(n))throw n;Ft("Error using user provided cache. Falling back to memory cache: "+n),yield md(t,new wc)}}else w("FirestoreClient","Using default OfflineComponentProvider"),yield md(t,new wc);return t._offlineComponents})}function gh(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(w("FirestoreClient","Using user provided OnlineComponentProvider"),yield v_(t,t._uninitializedComponentsProvider._online)):(w("FirestoreClient","Using default OnlineComponentProvider"),yield v_(t,new Ec))),t._onlineComponents})}function LT(t){return iy(t).then(e=>e.persistence)}function oy(t){return iy(t).then(e=>e.localStore)}function jT(t){return gh(t).then(e=>e.remoteStore)}function sy(t){return gh(t).then(e=>e.syncEngine)}function aL(t){return gh(t).then(e=>e.datastore)}function ss(t){return _(this,null,function*(){let e=yield gh(t),n=e.eventManager;return n.onListen=qV.bind(null,e.syncEngine),n.onUnlisten=HV.bind(null,e.syncEngine),n})}function cL(t){return t.asyncQueue.enqueue(()=>_(this,null,function*(){let e=yield LT(t),n=yield jT(t);return e.setNetworkEnabled(!0),function(i){let o=A(i);return o.v_.delete(0),Mc(o)}(n)}))}function uL(t){return t.asyncQueue.enqueue(()=>_(this,null,function*(){let e=yield LT(t),n=yield jT(t);return e.setNetworkEnabled(!1),function(i){return _(this,null,function*(){let o=A(i);o.v_.add(0),yield ls(o),o.x_.set("Offline")})}(n)}))}function lL(t,e){let n=new ke;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(i,o,s){return _(this,null,function*(){try{let a=yield function(u,l){let d=A(u);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,l))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new x(g.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=fs(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield oy(t),e,n)})),n.promise}function BT(t,e,n={}){let r=new ke;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(o,s,a,c,u){let l=new os({next:h=>{s.enqueueAndForget(()=>Y_(o,d));let f=h.docs.has(a);!f&&h.fromCache?u.reject(new x(g.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?u.reject(new x(g.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new xc(us(a.path),l,{includeMetadataChanges:!0,Z_:!0});return Q_(o,d)}(yield ss(t),t.asyncQueue,e,n,r)})),r.promise}function dL(t,e){let n=new ke;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(i,o,s){return _(this,null,function*(){try{let a=yield Hd(i,o,!0),c=new nh(o,a.hs),u=c.ha(a.documents),l=c.applyChanges(u,!1);s.resolve(l.snapshot)}catch(a){let c=fs(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield oy(t),e,n)})),n.promise}function UT(t,e,n={}){let r=new ke;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(o,s,a,c,u){let l=new os({next:h=>{s.enqueueAndForget(()=>Y_(o,d)),h.fromCache&&c.source==="server"?u.reject(new x(g.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new xc(a,l,{includeMetadataChanges:!0,Z_:!0});return Q_(o,d)}(yield ss(t),t.asyncQueue,e,n,r)})),r.promise}function hL(t,e){let n=new os(e);return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(i,o){A(i).K_.add(o),o.next()}(yield ss(t),n)})),()=>{n.La(),t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(i,o){A(i).K_.delete(o)}(yield ss(t),n)}))}}function fL(t,e,n,r){let i=function(s,a){let c;return c=typeof s=="string"?eT().encode(s):s,function(l,d){return new g_(l,d)}(function(l,d){if(l instanceof Uint8Array)return lC(l,d);if(l instanceof ArrayBuffer)return lC(new Uint8Array(l),d);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,Sc(e));t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){sL(yield sy(t),i,r)}))}function pL(t,e){return t.asyncQueue.enqueue(()=>_(this,null,function*(){return function(r,i){let o=A(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield oy(t),e)}))}function $T(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var dC=new Map;function ay(t,e,n){if(!n)throw new x(g.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function cy(t,e,n,r){if(e===!0&&r===!0)throw new x(g.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hC(t){if(!C.isDocumentKey(t))throw new x(g.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fC(t){if(C.isDocumentKey(t))throw new x(g.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function mh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":M()}function re(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new x(g.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=mh(t);throw new x(g.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function qT(t,e){if(e<=0)throw new x(g.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var ih=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new x(g.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new x(g.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$T((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new x(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new x(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new x(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Di=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ih({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new x(g.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new x(g.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ih(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Lm;switch(r.type){case"firstParty":return new $m(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new x(g.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=dC.get(n);r&&(w("ComponentProvider","Removing Datastore"),dC.delete(n),r.terminate())}(this),Promise.resolve()}};function HT(t,e,n,r={}){var i;let o=(t=re(t,Di))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Ft("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Oe.MOCK_USER;else{a=ky(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new x(g.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Oe(u)}t._authCredentials=new jm(new _d(a,c))}}var Ke=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},he=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},xn=class t extends Ke{constructor(e,n,r){super(e,n,us(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new he(this.firestore,null,new C(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function uy(t,e,...n){if(t=ye(t),ay("collection","path",e),t instanceof Di){let r=ne.fromString(e,...n);return fC(r),new xn(t,null,r)}{if(!(t instanceof he||t instanceof xn))throw new x(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ne.fromString(e,...n));return fC(r),new xn(t.firestore,null,r)}}function zT(t,e){if(t=re(t,Di),ay("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new x(g.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ke(t,null,function(r){return new Qt(ne.emptyPath(),r)}(e))}function Rc(t,e,...n){if(t=ye(t),arguments.length===1&&(e=yd.newId()),ay("doc","path",e),t instanceof Di){let r=ne.fromString(e,...n);return hC(r),new he(t,null,new C(r))}{if(!(t instanceof he||t instanceof xn))throw new x(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ne.fromString(e,...n));return hC(r),new he(t.firestore,t instanceof xn?t.converter:null,new C(r))}}function ly(t,e){return t=ye(t),e=ye(e),(t instanceof he||t instanceof xn)&&(e instanceof he||e instanceof xn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function dy(t,e){return t=ye(t),e=ye(e),t instanceof Ke&&e instanceof Ke&&t.firestore===e.firestore&&Tc(t._query,e._query)&&t.converter===e.converter}var x_=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new yc(this,"async_queue_retry"),this._u=()=>{let n=gd();n&&w("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=gd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;let n=gd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});let n=new ke;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){return _(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!Rr(e))throw e;w("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(e){let n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ae("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);let i=o_.createAndSchedule(this,e,n,r,o=>this.lu(o));return this.nu.push(i),i}au(){this.ru&&M()}verifyOperationInProgress(){}hu(){return _(this,null,function*(){let e;do e=this.Xa,yield e;while(e!==this.Xa)})}Pu(e){for(let n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){let n=this.nu.indexOf(e);this.nu.splice(n,1)}};function w_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var E_=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new ke,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var GT=-1,_e=class extends Di{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new x_}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||WT(this),this._firestoreClient.terminate()}};function je(t){return t._firestoreClient||WT(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function WT(t){var e,n,r;let i=t._freezeSettings(),o=function(a,c,u,l){return new Ym(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,$T(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new y_(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function KT(t,e){r1(t=re(t,_e));let n=je(t);if(n._uninitializedComponentsProvider)throw new x(g.FAILED_PRECONDITION,"SDK cache is already specified.");Ft("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new Ec;return YT(n,i,new rh(i,r.cacheSizeBytes,e?.forceOwnership))}function QT(t){r1(t=re(t,_e));let e=je(t);if(e._uninitializedComponentsProvider)throw new x(g.FAILED_PRECONDITION,"SDK cache is already specified.");Ft("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new Ec;return YT(e,r,new p_(r,n.cacheSizeBytes))}function YT(t,e,n){let r=new ke;return t.asyncQueue.enqueue(()=>_(this,null,function*(){try{yield md(t,n),yield v_(t,e),r.resolve()}catch(i){let o=i;if(!VT(o))throw o;Ft("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function ZT(t){if(t._initialized&&!t._terminated)throw new x(g.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new ke;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{yield function(r){return _(this,null,function*(){if(!$n.D())return Promise.resolve();let i=r+"main";yield $n.delete(i)})}(z_(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function XT(t){return function(n){let r=new ke;return n.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return QV(yield sy(n),r)})),r.promise}(je(t=re(t,_e)))}function JT(t){return cL(je(t=re(t,_e)))}function e1(t){return uL(je(t=re(t,_e)))}function t1(t,e){let n=je(t=re(t,_e)),r=new E_;return fL(n,t._databaseId,e,r),r}function n1(t,e){return pL(je(t=re(t,_e)),e).then(n=>n?new Ke(t,null,n.query):null)}function r1(t){if(t._initialized||t._terminated)throw new x(g.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var In=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(qe.fromBase64String(e))}catch(n){throw new x(g.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Zt=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new x(g.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Se(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var zn=class{constructor(e){this._methodName=e}};var Ci=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new x(g.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new x(g.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return z(this._lat,e._lat)||z(this._long,e._long)}};var gL=/^__.*__$/,b_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yt(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tr(e,this.data,n,this.fieldTransforms)}},oh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Yt(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function i1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw M()}}var sh=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return ah(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(i1(this.du)&&gL.test(e))throw this.pu('Document fields cannot begin and end with "__"')}},I_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Sc(e)}Su(e,n,r,i=!1){return new sh({du:e,methodName:n,wu:r,path:Se.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Mi(t){let e=t._freezeSettings(),n=Sc(t._databaseId);return new I_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _h(t,e,n,r,i,o={}){let s=t.Su(o.merge||o.mergeFields?2:0,e,n,i);py("Data must be an object, but it was:",s,r);let a=a1(r,s),c,u;if(o.merge)c=new Dt(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let l=[];for(let d of o.mergeFields){let h=S_(e,d,n);if(!s.contains(h))throw new x(g.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);u1(l,h)||l.push(h)}c=new Dt(l),u=s.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=s.fieldTransforms;return new b_(new nt(a),c,u)}var bc=class t extends zn{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function o1(t,e,n){return new sh({du:3,wu:e.settings.wu,methodName:t._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var D_=class t extends zn{_toFieldTransform(e){return new Ei(e.path,new Dr)}isEqual(e){return e instanceof t}},C_=class t extends zn{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){let n=o1(this,e,!0),r=this.bu.map(o=>Ri(o,n)),i=new qn(r);return new Ei(e.path,i)}isEqual(e){return e instanceof t&&Rh(this.bu,e.bu)}},T_=class t extends zn{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){let n=o1(this,e,!0),r=this.bu.map(o=>Ri(o,n)),i=new Hn(r);return new Ei(e.path,i)}isEqual(e){return e instanceof t&&Rh(this.bu,e.bu)}},A_=class t extends zn{constructor(e,n){super(e),this.Du=n}_toFieldTransform(e){let n=new Cr(e.serializer,zC(e.serializer,this.Du));return new Ei(e.path,n)}isEqual(e){return e instanceof t&&this.Du===e.Du}};function hy(t,e,n,r){let i=t.Su(1,e,n);py("Data must be an object, but it was:",i,r);let o=[],s=nt.empty();Si(r,(c,u)=>{let l=gy(e,c,n);u=ye(u);let d=i.fu(l);if(u instanceof bc)o.push(l);else{let h=Ri(u,d);h!=null&&(o.push(l),s.set(l,h))}});let a=new Dt(o);return new oh(s,a,i.fieldTransforms)}function fy(t,e,n,r,i,o){let s=t.Su(1,e,n),a=[S_(e,r,n)],c=[i];if(o.length%2!=0)throw new x(g.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(S_(e,o[h])),c.push(o[h+1]);let u=[],l=nt.empty();for(let h=a.length-1;h>=0;--h)if(!u1(u,a[h])){let f=a[h],v=c[h];v=ye(v);let y=s.fu(f);if(v instanceof bc)u.push(f);else{let m=Ri(v,y);m!=null&&(u.push(f),l.set(f,m))}}let d=new Dt(u);return new oh(l,d,s.fieldTransforms)}function s1(t,e,n,r=!1){return Ri(n,t.Su(r?4:3,e))}function Ri(t,e){if(c1(t=ye(t)))return py("Unsupported field value:",e,t),a1(t,e);if(t instanceof zn)return function(r,i){if(!i1(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Ri(a,i.gu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=xe.fromDate(r);return{timestampValue:Xo(i.serializer,o)}}if(r instanceof xe){let o=new xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xo(i.serializer,o)}}if(r instanceof Ci)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof In)return{bytesValue:tT(i.serializer,r._byteString)};if(r instanceof he){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.pu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:$_(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${mh(r)}`)}(t,e)}function a1(t,e){let n={};return TC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Si(t,(r,i)=>{let o=Ri(i,e.Ru(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function c1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xe||t instanceof Ci||t instanceof In||t instanceof he||t instanceof zn)}function py(t,e,n){if(!c1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=mh(n);throw r==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function S_(t,e,n){if((e=ye(e))instanceof Zt)return e._internalPath;if(typeof e=="string")return gy(t,e);throw ah("Field path arguments must be of type string or ",t,!1,void 0,n)}var mL=new RegExp("[~\\*/\\[\\]]");function gy(t,e,n){if(e.search(mL)>=0)throw ah(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Zt(...e.split("."))._internalPath}catch{throw ah(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ah(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new x(g.INVALID_ARGUMENT,a+t+c)}function u1(t,e){return t.some(n=>n.isEqual(e))}var Ti=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new he(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new M_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(yh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},M_=class extends Ti{data(){return super.data()}};function yh(t,e){return typeof e=="string"?gy(t,e):e instanceof Zt?e._internalPath:e._delegate._internalPath}function l1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new x(g.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ic=class{},Ai=class extends Ic{};function Kn(t,e,...n){let r=[];e instanceof Ic&&r.push(e),r=r.concat(n),function(o){let s=o.filter(c=>c instanceof R_).length,a=o.filter(c=>c instanceof ch).length;if(s>1||s>0&&a>0)throw new x(g.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var ch=class t extends Ai{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return x1(e._query,n),new Ke(e.firestore,e.converter,u0(e._query,n))}_parse(e){let n=Mi(e.firestore);return function(o,s,a,c,u,l,d){let h;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new x(g.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){gC(d,l);let f=[];for(let v of d)f.push(pC(c,o,v));h={arrayValue:{values:f}}}else h=pC(c,o,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||gC(d,l),h=s1(a,s,d,l==="in"||l==="not-in");return X.create(u,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function d1(t,e,n){let r=e,i=yh("where",t);return ch._create(i,r,n)}var R_=class t extends Ic{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ce.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)x1(s,c),s=u0(s,c)}(e._query,n),new Ke(e.firestore,e.converter,u0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var P_=class t extends Ai{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new x(g.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new x(g.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xi(o,s)}(e._query,this._field,this._direction);return new Ke(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Qt(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function h1(t,e="asc"){let n=e,r=yh("orderBy",t);return P_._create(r,n)}var uh=class t extends Ai{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Ke(e.firestore,e.converter,Ad(e._query,this._limit,this._limitType))}};function f1(t){return qT("limit",t),uh._create("limit",t,"F")}function p1(t){return qT("limitToLast",t),uh._create("limitToLast",t,"L")}var lh=class t extends Ai{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=v1(e,this.type,this._docOrFields,this._inclusive);return new Ke(e.firestore,e.converter,function(i,o){return new Qt(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function g1(...t){return lh._create("startAt",t,!0)}function m1(...t){return lh._create("startAfter",t,!1)}var dh=class t extends Ai{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=v1(e,this.type,this._docOrFields,this._inclusive);return new Ke(e.firestore,e.converter,function(i,o){return new Qt(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function _1(...t){return dh._create("endBefore",t,!1)}function y1(...t){return dh._create("endAt",t,!0)}function v1(t,e,n,r){if(n[0]=ye(n[0]),n[0]instanceof Ti)return function(o,s,a,c,u){if(!c)throw new x(g.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let l=[];for(let d of Ho(o))if(d.field.isKeyField())l.push(vi(s,c.key));else{let h=c.data.field(d.field);if(fh(h))throw new x(g.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new x(g.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}l.push(h)}return new En(l,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=Mi(t.firestore);return function(s,a,c,u,l,d){let h=s.explicitOrderBy;if(l.length>h.length)throw new x(g.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let v=0;v<l.length;v++){let y=l[v];if(h[v].field.isKeyField()){if(typeof y!="string")throw new x(g.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof y}`);if(!B_(s)&&y.indexOf("/")!==-1)throw new x(g.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${y}' contains a slash.`);let m=s.path.child(ne.fromString(y));if(!C.isDocumentKey(m))throw new x(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${m}' is not because it contains an odd number of segments.`);let E=new C(m);f.push(vi(a,E))}else{let m=s1(c,u,y);f.push(m)}}return new En(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function pC(t,e,n){if(typeof(n=ye(n))=="string"){if(n==="")throw new x(g.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!B_(e)&&n.indexOf("/")!==-1)throw new x(g.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(ne.fromString(n));if(!C.isDocumentKey(r))throw new x(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vi(t,new C(r))}if(n instanceof he)return vi(t,n._key);throw new x(g.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mh(n)}.`)}function gC(t,e){if(!Array.isArray(t)||t.length===0)throw new x(g.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function x1(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new x(g.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new x(g.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var as=class{convertValue(e,n="none"){switch(yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ie(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Er(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw M()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Si(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new Ci(Ie(e.latitude),Ie(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=L_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(oc(e));default:return null}}convertTimestamp(e){let n=wr(e);return new xe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ne.fromString(e);k(hT(r));let i=new br(r.get(1),r.get(3)),o=new C(r.popFirst(5));return i.isEqual(n)||Ae(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function vh(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var N_=class extends as{constructor(e){super(),this.firestore=e}convertBytes(e){return new In(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new he(this.firestore,null,n)}};var Un=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Lt=class extends Ti{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new vr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(yh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},vr=class extends Lt{data(e={}){return super.data(e)}},Xt=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Un(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new vr(this._firestore,this._userDataWriter,r.key,r,new Un(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new x(g.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new vr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Un(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new vr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Un(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:_L(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function _L(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return M()}}function my(t,e){return t instanceof Lt&&e instanceof Lt?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Xt&&e instanceof Xt&&t._firestore===e._firestore&&dy(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function w1(t){t=re(t,he);let e=re(t.firestore,_e);return BT(je(e),t._key).then(n=>xy(e,t,n))}var Gn=class extends as{constructor(e){super(),this.firestore=e}convertBytes(e){return new In(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new he(this.firestore,null,n)}};function E1(t){t=re(t,he);let e=re(t.firestore,_e),n=je(e),r=new Gn(e);return lL(n,t._key).then(i=>new Lt(e,r,t._key,i,new Un(i!==null&&i.hasLocalMutations,!0),t.converter))}function b1(t){t=re(t,he);let e=re(t.firestore,_e);return BT(je(e),t._key,{source:"server"}).then(n=>xy(e,t,n))}function I1(t){t=re(t,Ke);let e=re(t.firestore,_e),n=je(e),r=new Gn(e);return l1(t._query),UT(n,t._query).then(i=>new Xt(e,r,t,i))}function D1(t){t=re(t,Ke);let e=re(t.firestore,_e),n=je(e),r=new Gn(e);return dL(n,t._query).then(i=>new Xt(e,r,t,i))}function C1(t){t=re(t,Ke);let e=re(t.firestore,_e),n=je(e),r=new Gn(e);return UT(n,t._query,{source:"server"}).then(i=>new Xt(e,r,t,i))}function _y(t,e,n){t=re(t,he);let r=re(t.firestore,_e),i=vh(t.converter,e,n);return ps(r,[_h(Mi(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,De.none())])}function yy(t,e,n,...r){t=re(t,he);let i=re(t.firestore,_e),o=Mi(i),s;return s=typeof(e=ye(e))=="string"||e instanceof Zt?fy(o,"updateDoc",t._key,e,n,r):hy(o,"updateDoc",t._key,e),ps(i,[s.toMutation(t._key,De.exists(!0))])}function T1(t){return ps(re(t.firestore,_e),[new Ar(t._key,De.none())])}function A1(t,e){let n=re(t.firestore,_e),r=Rc(t),i=vh(t.converter,e);return ps(n,[_h(Mi(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,De.exists(!1))]).then(()=>r)}function vy(t,...e){var n,r,i;t=ye(t);let o={includeMetadataChanges:!1},s=0;typeof e[s]!="object"||w_(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges};if(w_(e[s])){let d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,l;if(t instanceof he)u=re(t.firestore,_e),l=us(t._key.path),c={next:d=>{e[s]&&e[s](xy(u,t,d))},error:e[s+1],complete:e[s+2]};else{let d=re(t,Ke);u=re(d.firestore,_e),l=d._query;let h=new Gn(u);c={next:f=>{e[s]&&e[s](new Xt(u,h,d,f))},error:e[s+1],complete:e[s+2]},l1(t._query)}return function(h,f,v,y){let m=new os(y),E=new xc(f,m,v);return h.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return Q_(yield ss(h),E)})),()=>{m.La(),h.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return Y_(yield ss(h),E)}))}}(je(u),l,a,c)}function S1(t,e){return hL(je(t=re(t,_e)),w_(e)?e:{next:e})}function ps(t,e){return function(r,i){let o=new ke;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return zV(yield sy(r),i,o)})),o.promise}(je(t),e)}function xy(t,e,n){let r=n.docs.get(e._key),i=new Gn(t);return new Lt(t,i,e._key,r,new Un(n.hasPendingWrites,n.fromCache),e.converter)}var yL={maxAttempts:5};var hh=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Mi(e)}set(e,n,r){this._verifyNotCommitted();let i=_r(e,this._firestore),o=vh(i.converter,n,r),s=_h(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,De.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=_r(e,this._firestore),s;return s=typeof(n=ye(n))=="string"||n instanceof Zt?fy(this._dataReader,"WriteBatch.update",o._key,n,r,i):hy(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,De.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=_r(e,this._firestore);return this._mutations=this._mutations.concat(new Ar(n._key,De.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new x(g.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function _r(t,e){if((t=ye(t)).firestore!==e)throw new x(g.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var O_=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Mi(n)}get(n){let r=_r(n,this._firestore),i=new N_(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return M();let s=o[0];if(s.isFoundDocument())return new Ti(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Ti(this._firestore,i,r._key,null,r.converter);throw M()})}set(n,r,i){let o=_r(n,this._firestore),s=vh(o.converter,r,i),a=_h(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=_r(n,this._firestore),a;return a=typeof(r=ye(r))=="string"||r instanceof Zt?fy(this._dataReader,"Transaction.update",s._key,r,i,o):hy(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=_r(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=_r(e,this._firestore),r=new Gn(this._firestore);return super.get(e).then(i=>new Lt(this._firestore,r,n._key,i._document,new Un(!1,!1),n.converter))}};function M1(t,e,n){t=re(t,_e);let r=Object.assign(Object.assign({},yL),n);return function(o){if(o.maxAttempts<1)throw new x(g.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new ke;return o.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){let u=yield aL(o);new __(o.asyncQueue,u,a,s,c).ja()})),c.promise}(je(t),i=>e(new O_(t,i)),r)}function R1(){return new bc("deleteField")}function P1(){return new D_("serverTimestamp")}function N1(...t){return new C_("arrayUnion",t)}function O1(...t){return new T_("arrayRemove",t)}function k1(t){return new A_("increment",t)}(function(e,n=!0){(function(i){cs=i})(Ly),vs(new Nr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new _e(new Bm(r.getProvider("auth-internal")),new Hm(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new x(g.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new br(u.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Qn(_D,"4.4.2",e),Qn(_D,"4.4.2","esm2017")})();var vL="@firebase/firestore-compat",xL="0.3.25";function Cy(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new x("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function F1(){if(typeof Uint8Array>"u")throw new x("unimplemented","Uint8Arrays are not available in this environment.")}function V1(){if(!AC())throw new x("unimplemented","Blobs are unavailable in Firestore in this environment.")}var xh=class t{constructor(e){this._delegate=e}static fromBase64String(e){return V1(),new t(In.fromBase64String(e))}static fromUint8Array(e){return F1(),new t(In.fromUint8Array(e))}toBase64(){return V1(),this._delegate.toBase64()}toUint8Array(){return F1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function wy(t){return wL(t,["next","error","complete"])}function wL(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var Ey=class{enableIndexedDbPersistence(e,n){return KT(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return QT(e._delegate)}clearIndexedDbPersistence(e){return ZT(e._delegate)}},wh=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof br||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Ft("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){HT(this._delegate,e,n,r)}enableNetwork(){return JT(this._delegate)}disableNetwork(){return e1(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,cy("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return XT(this._delegate)}onSnapshotsInSync(e){return S1(this._delegate,e)}get app(){if(!this._appCompat)throw new x("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new _s(this,uy(this._delegate,e))}catch(n){throw lt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Dn(this,Rc(this._delegate,e))}catch(n){throw lt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ki(this,zT(this._delegate,e))}catch(n){throw lt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return M1(this._delegate,n=>e(new Eh(this,n)))}batch(){return je(this._delegate),new bh(new hh(this._delegate,e=>ps(this._delegate,e)))}loadBundle(e){return t1(this._delegate,e)}namedQuery(e){return n1(this._delegate,e).then(n=>n?new ki(this,n):null)}},gs=class extends as{constructor(e){super(),this.firestore=e}convertBytes(e){return new xh(new In(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Dn.forKey(n,this.firestore,null)}};function EL(t){mC(t)}var Eh=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new gs(e)}get(e){let n=Pi(e);return this._delegate.get(n).then(r=>new Ni(this._firestore,new Lt(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=Pi(e);return r?(Cy("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Pi(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Pi(e);return this._delegate.delete(n),this}},bh=class{constructor(e){this._delegate=e}set(e,n,r){let i=Pi(e);return r?(Cy("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Pi(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Pi(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},ms=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new vr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Oi(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new gs(e),n),i.set(n,o)),o}};ms.INSTANCES=new WeakMap;var Dn=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new gs(e)}static forPath(e,n,r){if(e.length%2!==0)throw new x("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new he(n._delegate,r,new C(e)))}static forKey(e,n,r){return new t(n,new he(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new _s(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new _s(this.firestore,uy(this._delegate,e))}catch(n){throw lt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ye(e),e instanceof he?ly(this._delegate,e):!1}set(e,n){n=Cy("DocumentReference.set",n);try{return n?_y(this._delegate,e,n):_y(this._delegate,e)}catch(r){throw lt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?yy(this._delegate,e):yy(this._delegate,e,n,...r)}catch(i){throw lt(i,"updateDoc()","DocumentReference.update()")}}delete(){return T1(this._delegate)}onSnapshot(...e){let n=L1(e),r=j1(e,i=>new Ni(this.firestore,new Lt(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return vy(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=E1(this._delegate):e?.source==="server"?n=b1(this._delegate):n=w1(this._delegate),n.then(r=>new Ni(this.firestore,new Lt(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(ms.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function lt(t,e,n){return t.message=t.message.replace(e,n),t}function L1(t){for(let e of t)if(typeof e=="object"&&!wy(e))return e;return{}}function j1(t,e){var n,r;let i;return wy(t[0])?i=t[0]:wy(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Ni=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Dn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return my(this._delegate,e._delegate)}},Oi=class extends Ni{data(e){let n=this._delegate.data(e);return this._delegate._converter||_C(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},ki=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new gs(e)}where(e,n,r){try{return new t(this.firestore,Kn(this._delegate,d1(e,n,r)))}catch(i){throw lt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,Kn(this._delegate,h1(e,n)))}catch(r){throw lt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,Kn(this._delegate,f1(e)))}catch(n){throw lt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,Kn(this._delegate,p1(e)))}catch(n){throw lt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,Kn(this._delegate,g1(...e)))}catch(n){throw lt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,Kn(this._delegate,m1(...e)))}catch(n){throw lt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,Kn(this._delegate,_1(...e)))}catch(n){throw lt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,Kn(this._delegate,y1(...e)))}catch(n){throw lt(n,"endAt()","Query.endAt()")}}isEqual(e){return dy(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=D1(this._delegate):e?.source==="server"?n=C1(this._delegate):n=I1(this._delegate),n.then(r=>new Pc(this.firestore,new Xt(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=L1(e),r=j1(e,i=>new Pc(this.firestore,new Xt(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return vy(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(ms.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},by=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Oi(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Pc=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new ki(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Oi(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new by(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Oi(this._firestore,r))})}isEqual(e){return my(this._delegate,e._delegate)}},_s=class t extends ki{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Dn(this.firestore,e):null}doc(e){try{return e===void 0?new Dn(this.firestore,Rc(this._delegate)):new Dn(this.firestore,Rc(this._delegate,e))}catch(n){throw lt(n,"doc()","CollectionReference.doc()")}}add(e){return A1(this._delegate,e).then(n=>new Dn(this.firestore,n))}isEqual(e){return ly(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(ms.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Pi(t){return re(t,he)}var Iy=class t{constructor(...e){this._delegate=new Zt(...e)}static documentId(){return new t(Se.keyField().canonicalString())}isEqual(e){return e=ye(e),e instanceof Zt?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Dy=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=P1();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=R1();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=N1(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=O1(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=k1(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var bL={Firestore:wh,GeoPoint:Ci,Timestamp:xe,Blob:xh,Transaction:Eh,WriteBatch:bh,DocumentReference:Dn,DocumentSnapshot:Ni,Query:ki,QueryDocumentSnapshot:Oi,QuerySnapshot:Pc,CollectionReference:_s,FieldPath:Iy,FieldValue:Dy,setLogLevel:EL,CACHE_SIZE_UNLIMITED:GT};function IL(t,e){t.INTERNAL.registerComponent(new Nr("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},bL)))}function DL(t){IL(t,(e,n)=>new wh(e,n,new Ey)),t.registerVersion(vL,xL)}DL(rt);function CL(t,e=bs){return new Z(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function B1(t,e){return CL(t,e)}function TL(t,e){return B1(t,e).pipe(Lr(void 0),Ds(),L(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function Sy(t,e){return B1(t,e).pipe(L(n=>({payload:n,type:"query"})))}var Ih=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=z1(r,n);return new Ch(i,o,this.afs)}snapshotChanges(){return TL(this.ref,this.afs.schedulers.outsideAngular).pipe(gt)}valueChanges(e={}){return this.snapshotChanges().pipe(L(({payload:n})=>e.idField?fe(N({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return ie(this.ref.get(e)).pipe(gt)}};function Dh(t,e){return Sy(t,e).pipe(Lr(void 0),Ds(),L(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let u=o.find(d=>d.doc.ref.isEqual(a.ref)),l=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&l&&JSON.stringify(l.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function U1(t,e,n){return Dh(t,n).pipe(Vr((r,i)=>AL(r,i.map(o=>o.payload),e),[]),Yh(),L(r=>r.map(i=>({type:i.type,payload:i}))))}function AL(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=SL(t,r))}),t}function Ty(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function SL(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return Ty(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return Ty(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ty(t,e.oldIndex,1);break}return t}function $1(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Ch=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Dh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(L(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Lr(void 0),Ds(),Le(([r,i])=>i.length>0||!r),L(([,r])=>r),gt)}auditTrail(e){return this.stateChanges(e).pipe(Vr((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=$1(e);return U1(this.query,n,this.afs.schedulers.outsideAngular).pipe(gt)}valueChanges(e={}){return Sy(this.query,this.afs.schedulers.outsideAngular).pipe(L(n=>n.payload.docs.map(r=>e.idField?fe(N({},r.data()),{[e.idField]:r.id}):r.data())),gt)}get(e){return ie(this.query.get(e)).pipe(gt)}add(e){return this.ref.add(e)}doc(e){return new Ih(this.ref.doc(e),this.afs)}},Ay=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Dh(this.query,this.afs.schedulers.outsideAngular).pipe(gt):Dh(this.query,this.afs.schedulers.outsideAngular).pipe(L(n=>n.filter(r=>e.indexOf(r.type)>-1)),Le(n=>n.length>0),gt)}auditTrail(e){return this.stateChanges(e).pipe(Vr((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=$1(e);return U1(this.query,n,this.afs.schedulers.outsideAngular).pipe(gt)}valueChanges(e={}){return Sy(this.query,this.afs.schedulers.outsideAngular).pipe(L(r=>r.payload.docs.map(i=>e.idField?N({[e.idField]:i.id},i.data()):i.data())),gt)}get(e){return ie(this.query.get(e)).pipe(gt)}},q1=new S("angularfire2.enableFirestorePersistence"),H1=new S("angularfire2.firestore.persistenceSettings"),ML=new S("angularfire2.firestore.settings"),RL=new S("angularfire2.firestore.use-emulator");function z1(t,e=n=>n){return{query:e(t),ref:t}}var PL=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,c,u,l,d,h,f,v,y,m,E,R){this.schedulers=c;let D=wa(n,a,r),P=l;d&&$g(D,a,h,v,y,m,f,E),[this.firestore,this.persistenceEnabled$]=Rl(`${D.name}.firestore`,"AngularFirestore",D.name,()=>{let j=a.runOutsideAngular(()=>D.firestore());if(o&&j.settings(o),P&&j.useEmulator(...P),i&&!Xr(s)){let H=()=>{try{return ie(j.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(de){return typeof console<"u"&&console.warn(de),F(!1)}};return[j,a.runOutsideAngular(H)]}else return[j,F(!1)]},[o,P,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=z1(i,r),a=this.schedulers.ngZone.run(()=>o);return new Ch(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new Ay(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new Ih(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(b(Do),b(Co,8),b(q1,8),b(ML,8),b(Ze),b(J),b(Al),b(H1,8),b(RL,8),b(qg,8),b(Fg,8),b(Vg,8),b(Lg,8),b(jg,8),b(Bg,8),b(Ug,8),b(ri,8))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),G1=(()=>{class t{constructor(){rt.registerVersion("angularfire",ii.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:q1,useValue:!0},{provide:H1,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ee({type:t});static \u0275inj=we({providers:[PL]})}return t})();var W1={production:!1,firebaseConfig:{apiKey:"AIzaSyBjK6Iepet70a0ApWMjYkEA6Wcx10MBy3Q",authDomain:"bk-burger.firebaseapp.com",databaseURL:"https://bk-burger-default-rtdb.firebaseio.com",projectId:"bk-burger",storageBucket:"bk-burger.appspot.com",messagingSenderId:"586729585880",appId:"1:586729585880:web:b16e71013809bec688ebad",measurementId:"G-S6TJCELC9P"}};var K1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ee({type:e,bootstrap:[Mb]}),e.\u0275inj=we({imports:[VE,Ab,Kb.initializeApp(W1.firebaseConfig),G1,Qb,AE,Pb]});let t=e;return t})();FE().bootstrapModule(K1).catch(t=>console.error(t));
