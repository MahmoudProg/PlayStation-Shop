import{a as N,b as fe,c as Uh,d as y,e as tw,f as Bu,g as nw,h as rw,i as iw,j as $h,k as ow,l as Is,m as qh,n as Uu,o as sw,p as aw,q as Hh,r as _e,s as Vr,t as tn,u as $u,v as Ds,w as uw,x as cw,y as Zn,z as st}from"./chunk-W354PV4M.js";var lw=null;var zh=1,dw=Symbol("SIGNAL");function _t(t){let e=lw;return lw=t,e}var hw={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function CM(t){if(!(Kh(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===zh)){if(!t.producerMustRecompute(t)&&!Gh(t)){t.dirty=!1,t.lastCleanEpoch=zh;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=zh}}function fw(t){return t&&(t.nextProducerIndex=0),_t(t)}function pw(t,e){if(_t(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Kh(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Wh(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Gh(t){qu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(CM(n),r!==n.version))return!0}return!1}function gw(t){if(qu(t),Kh(t))for(let e=0;e<t.producerNode.length;e++)Wh(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Wh(t,e){if(TM(t),qu(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Wh(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];qu(i),i.producerIndexOfThis[r]=e}}function Kh(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function qu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function TM(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function bM(){throw new Error}var AM=bM;function mw(t){AM=t}function $(t){return typeof t=="function"}function $i(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Hu=$i(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Lr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ae=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if($(r))try{r()}catch(o){e=o instanceof Hu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{yw(o)}catch(s){e=e??[],s instanceof Hu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Hu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)yw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Lr(n,e)}remove(e){let{_finalizers:n}=this;n&&Lr(n,e),e instanceof t&&e._removeParent(this)}};Ae.EMPTY=(()=>{let t=new Ae;return t.closed=!0,t})();var Qh=Ae.EMPTY;function zu(t){return t instanceof Ae||t&&"closed"in t&&$(t.remove)&&$(t.add)&&$(t.unsubscribe)}function yw(t){$(t)?t():t.unsubscribe()}var Bt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var qi={setTimeout(t,e,...n){let{delegate:r}=qi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=qi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Gu(t){qi.setTimeout(()=>{let{onUnhandledError:e}=Bt;if(e)e(t);else throw t})}function Cs(){}var vw=Yh("C",void 0,void 0);function _w(t){return Yh("E",void 0,t)}function ww(t){return Yh("N",t,void 0)}function Yh(t,e,n){return{kind:t,value:e,error:n}}var jr=null;function Hi(t){if(Bt.useDeprecatedSynchronousErrorHandling){let e=!jr;if(e&&(jr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=jr;if(jr=null,n)throw r}}else t()}function Ew(t){Bt.useDeprecatedSynchronousErrorHandling&&jr&&(jr.errorThrown=!0,jr.error=t)}var Br=class extends Ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,zu(e)&&e.add(this)):this.destination=xM}static create(e,n,r){return new Mn(e,n,r)}next(e){this.isStopped?Xh(ww(e),this):this._next(e)}error(e){this.isStopped?Xh(_w(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Xh(vw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},SM=Function.prototype.bind;function Zh(t,e){return SM.call(t,e)}var Jh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Wu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Wu(r)}else Wu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Wu(n)}}},Mn=class extends Br{constructor(e,n,r){super();let i;if($(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Bt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Zh(e.next,o),error:e.error&&Zh(e.error,o),complete:e.complete&&Zh(e.complete,o)}):i=e}this.destination=new Jh(i)}};function Wu(t){Bt.useDeprecatedSynchronousErrorHandling?Ew(t):Gu(t)}function MM(t){throw t}function Xh(t,e){let{onStoppedNotification:n}=Bt;n&&qi.setTimeout(()=>n(t,e))}var xM={closed:!0,next:Cs,error:MM,complete:Cs};var zi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function at(t){return t}function ef(...t){return tf(t)}function tf(t){return t.length===0?at:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Z=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=PM(n)?n:new Mn(n,r,i);return Hi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Iw(r),new r((i,o)=>{let s=new Mn({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[zi](){return this}pipe(...n){return tf(n)(this)}toPromise(n){return n=Iw(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Iw(t){var e;return(e=t??Bt.Promise)!==null&&e!==void 0?e:Promise}function RM(t){return t&&$(t.next)&&$(t.error)&&$(t.complete)}function PM(t){return t&&t instanceof Br||RM(t)&&zu(t)}function nf(t){return $(t?.lift)}function K(t){return e=>{if(nf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Q(t,e,n,r,i){return new rf(t,e,n,r,i)}var rf=class extends Br{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Gi(){return K((t,e)=>{let n=null;t._refCount++;let r=Q(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Wi=class extends Z{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,nf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ae;let n=this.getSubject();e.add(this.source.subscribe(Q(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ae.EMPTY)}return e}refCount(){return Gi()(this)}};var Dw=$i(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var je=(()=>{class t extends Z{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ku(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Dw}next(n){Hi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Hi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Hi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Qh:(this.currentObservers=null,o.push(n),new Ae(()=>{this.currentObservers=null,Lr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Z;return n.source=this,n}}return t.create=(e,n)=>new Ku(e,n),t})(),Ku=class extends je{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Qh}};var Ke=class extends je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ts={now(){return(Ts.delegate||Date).now()},delegate:void 0};var Qu=class extends je{constructor(e=1/0,n=1/0,r=Ts){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Yu=class extends Ae{constructor(e,n){super()}schedule(e,n=0){return this}};var bs={setInterval(t,e,...n){let{delegate:r}=bs;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=bs;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ki=class extends Yu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return bs.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&bs.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Lr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Qi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Qi.now=Ts.now;var Yi=class extends Qi{constructor(e,n=Qi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var As=new Yi(Ki);var Zu=class extends Ki{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Xu=class extends Yi{};var of=new Xu(Zu);var gt=new Z(t=>t.complete());function Cw(t){return t&&$(t.schedule)}function sf(t){return t[t.length-1]}function Tw(t){return $(sf(t))?t.pop():void 0}function nn(t){return Cw(sf(t))?t.pop():void 0}function bw(t,e){return typeof sf(t)=="number"?t.pop():e}var Ju=t=>t&&typeof t.length=="number"&&typeof t!="function";function ec(t){return $(t?.then)}function tc(t){return $(t[zi])}function nc(t){return Symbol.asyncIterator&&$(t?.[Symbol.asyncIterator])}function rc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function NM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ic=NM();function oc(t){return $(t?.[ic])}function sc(t){return nw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Bu(n.read());if(i)return yield Bu(void 0);yield yield Bu(r)}}finally{n.releaseLock()}})}function ac(t){return $(t?.getReader)}function we(t){if(t instanceof Z)return t;if(t!=null){if(tc(t))return OM(t);if(Ju(t))return kM(t);if(ec(t))return FM(t);if(nc(t))return Aw(t);if(oc(t))return VM(t);if(ac(t))return LM(t)}throw rc(t)}function OM(t){return new Z(e=>{let n=t[zi]();if($(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function kM(t){return new Z(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function FM(t){return new Z(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Gu)})}function VM(t){return new Z(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Aw(t){return new Z(e=>{jM(t,e).catch(n=>e.error(n))})}function LM(t){return Aw(sc(t))}function jM(t,e){var n,r,i,o;return tw(this,void 0,void 0,function*(){try{for(n=rw(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function mt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function St(t,e=0){return K((n,r)=>{n.subscribe(Q(r,i=>mt(r,t,()=>r.next(i),e),()=>mt(r,t,()=>r.complete(),e),i=>mt(r,t,()=>r.error(i),e)))})}function Ut(t,e=0){return K((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Sw(t,e){return we(t).pipe(Ut(e),St(e))}function Mw(t,e){return we(t).pipe(Ut(e),St(e))}function xw(t,e){return new Z(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Rw(t,e){return new Z(n=>{let r;return mt(n,e,()=>{r=t[ic](),mt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>$(r?.return)&&r.return()})}function uc(t,e){if(!t)throw new Error("Iterable cannot be null");return new Z(n=>{mt(n,e,()=>{let r=t[Symbol.asyncIterator]();mt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Pw(t,e){return uc(sc(t),e)}function Nw(t,e){if(t!=null){if(tc(t))return Sw(t,e);if(Ju(t))return xw(t,e);if(ec(t))return Mw(t,e);if(nc(t))return uc(t,e);if(oc(t))return Rw(t,e);if(ac(t))return Pw(t,e)}throw rc(t)}function ie(t,e){return e?Nw(t,e):we(t)}function F(...t){let e=nn(t);return ie(t,e)}function Zi(t,e){let n=$(t)?t:()=>t,r=i=>i.error(n());return new Z(e?i=>e.schedule(r,0,i):r)}function af(t){return!!t&&(t instanceof Z||$(t.lift)&&$(t.subscribe))}var xn=$i(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function j(t,e){return K((n,r)=>{let i=0;n.subscribe(Q(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:BM}=Array;function UM(t,e){return BM(e)?t(...e):t(e)}function Ow(t){return j(e=>UM(t,e))}var{isArray:$M}=Array,{getPrototypeOf:qM,prototype:HM,keys:zM}=Object;function kw(t){if(t.length===1){let e=t[0];if($M(e))return{args:e,keys:null};if(GM(e)){let n=zM(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function GM(t){return t&&typeof t=="object"&&qM(t)===HM}function Fw(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ss(...t){let e=nn(t),n=Tw(t),{args:r,keys:i}=kw(t);if(r.length===0)return ie([],e);let o=new Z(WM(r,e,i?s=>Fw(i,s):at));return n?o.pipe(Ow(n)):o}function WM(t,e,n=at){return r=>{Vw(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Vw(e,()=>{let c=ie(t[u],e),l=!1;c.subscribe(Q(r,d=>{o[u]=d,l||(l=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Vw(t,e,n){t?mt(n,t,e):e()}function Lw(t,e,n,r,i,o,s,a){let u=[],c=0,l=0,d=!1,h=()=>{d&&!u.length&&!c&&e.complete()},f=v=>c<r?_(v):u.push(v),_=v=>{o&&e.next(v),c++;let m=!1;we(n(v,l++)).subscribe(Q(e,I=>{i?.(I),o?f(I):e.next(I)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;u.length&&c<r;){let I=u.shift();s?mt(e,s,()=>_(I)):_(I)}h()}catch(I){e.error(I)}}))};return t.subscribe(Q(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Ne(t,e,n=1/0){return $(e)?Ne((r,i)=>j((o,s)=>e(r,o,i,s))(we(t(r,i))),n):(typeof e=="number"&&(n=e),K((r,i)=>Lw(r,i,t,n)))}function Xn(t=1/0){return Ne(at,t)}function jw(){return Xn(1)}function Xi(...t){return jw()(ie(t,nn(t)))}function cc(t){return new Z(e=>{we(t()).subscribe(e)})}function uf(...t){let e=nn(t),n=bw(t,1/0),r=t;return r.length?r.length===1?we(r[0]):Xn(n)(ie(r,e)):gt}function Be(t,e){return K((n,r)=>{let i=0;n.subscribe(Q(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Jn(t){return K((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Q(n,void 0,void 0,s=>{o=we(t(s,Jn(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Bw(t,e,n,r,i){return(o,s)=>{let a=n,u=e,c=0;o.subscribe(Q(s,l=>{let d=c++;u=a?t(u,l,d):(a=!0,l),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Rn(t,e){return $(e)?Ne(t,e,1):Ne(t,1)}function er(t){return K((e,n)=>{let r=!1;e.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Pn(t){return t<=0?()=>gt:K((e,n)=>{let r=0;e.subscribe(Q(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function cf(t){return j(()=>t)}function lf(t,e=at){return t=t??KM,K((n,r)=>{let i,o=!0;n.subscribe(Q(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function KM(t,e){return t===e}function lc(t=QM){return K((e,n)=>{let r=!1;e.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function QM(){return new xn}function tr(t){return K((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Mt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Be((i,o)=>t(i,o,r)):at,Pn(1),n?er(e):lc(()=>new xn))}function Ji(t){return t<=0?()=>gt:K((e,n)=>{let r=[];e.subscribe(Q(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function df(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Be((i,o)=>t(i,o,r)):at,Ji(1),n?er(e):lc(()=>new xn))}function Ms(){return K((t,e)=>{let n,r=!1;t.subscribe(Q(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function Ur(t,e){return K(Bw(t,e,arguments.length>=2,!0))}function Uw(t={}){let{connector:e=()=>new je,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,c=0,l=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=u=void 0,l=d=!1},_=()=>{let v=s;f(),v?.unsubscribe()};return K((v,m)=>{c++,!d&&!l&&h();let I=u=u??e();m.add(()=>{c--,c===0&&!d&&!l&&(a=hf(_,i))}),I.subscribe(m),!s&&c>0&&(s=new Mn({next:R=>I.next(R),error:R=>{d=!0,h(),a=hf(f,n,R),I.error(R)},complete:()=>{l=!0,h(),a=hf(f,r),I.complete()}}),we(v).subscribe(s))})(o)}}function hf(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Mn({next:()=>{r.unsubscribe(),t()}});return we(e(...n)).subscribe(r)}function dc(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,Uw({connector:()=>new Qu(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function $r(...t){let e=nn(t);return K((n,r)=>{(e?Xi(t,n,e):Xi(t,n)).subscribe(r)})}function ye(t,e){return K((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Q(r,u=>{i?.unsubscribe();let c=0,l=o++;we(t(u,l)).subscribe(i=Q(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function hc(t,e){return $(e)?ye(()=>t,e):ye(()=>t)}function ff(t){return K((e,n)=>{we(t).subscribe(Q(n,()=>n.complete(),Cs)),!n.closed&&e.subscribe(n)})}function Se(t,e,n){let r=$(t)||e||n?{next:t,error:e,complete:n}:t;return r?K((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Q(o,u=>{var c;(c=r.next)===null||c===void 0||c.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,u),o.error(u)},()=>{var u,c;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):at}var L=class extends Error{constructor(e,n){super(jc(e,n)),this.code=e}};function jc(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ce(t){for(let e in t)if(t[e]===ce)return e;throw Error("Could not find renamed property on target object.")}function wt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(wt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function $w(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var YM=ce({__forward_ref__:ce});function sp(t){return t.__forward_ref__=sp,t.toString=function(){return wt(this())},t}function Rt(t){return TE(t)?t():t}function TE(t){return typeof t=="function"&&t.hasOwnProperty(YM)&&t.__forward_ref__===sp}function bE(t){return t&&!!t.\u0275providers}var ZM=ce({\u0275cmp:ce}),XM=ce({\u0275dir:ce}),JM=ce({\u0275pipe:ce}),ex=ce({\u0275mod:ce}),wc=ce({\u0275fac:ce}),xs=ce({__NG_ELEMENT_ID__:ce}),qw=ce({__NG_ENV_ID__:ce});function AE(t){return typeof t=="string"?t:t==null?"":String(t)}function tx(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():AE(t)}function nx(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new L(-200,t)}function ap(t,e){throw new L(-201,!1)}function O(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ie(t){return{providers:t.providers||[],imports:t.imports||[]}}function Bc(t){return Hw(t,ME)||Hw(t,xE)}function SE(t){return Bc(t)!==null}function Hw(t,e){return t.hasOwnProperty(e)?t[e]:null}function rx(t){let e=t&&(t[ME]||t[xE]);return e||null}function zw(t){return t&&(t.hasOwnProperty(Gw)||t.hasOwnProperty(ix))?t[Gw]:null}var ME=ce({\u0275prov:ce}),Gw=ce({\u0275inj:ce}),xE=ce({ngInjectableDef:ce}),ix=ce({ngInjectorDef:ce}),Y=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Y||{}),Df;function RE(){return Df}function xt(t){let e=Df;return Df=t,e}function PE(t,e,n){let r=Bc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Y.Optional)return null;if(e!==void 0)return e;ap(t,"Injector")}var Et=globalThis;var M=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=O({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var ox={},Ps=ox,Cf="__NG_DI_FLAG__",Ec="ngTempTokenPath",sx="ngTokenPath",ax=/\n/gm,ux="\u0275",Ww="__source",io;function cx(){return io}function nr(t){let e=io;return io=t,e}function lx(t,e=Y.Default){if(io===void 0)throw new L(-203,!1);return io===null?PE(t,void 0,e):io.get(t,e&Y.Optional?null:void 0,e)}function D(t,e=Y.Default){return(RE()||lx)(Rt(t),e)}function C(t,e=Y.Default){return D(t,Uc(e))}function Uc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Tf(t){let e=[];for(let n=0;n<t.length;n++){let r=Rt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new L(900,!1);let i,o=Y.Default;for(let s=0;s<r.length;s++){let a=r[s],u=dx(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(D(i,o))}else e.push(D(r))}return e}function NE(t,e){return t[Cf]=e,t.prototype[Cf]=e,t}function dx(t){return t[Cf]}function hx(t,e,n,r){let i=t[Ec];throw e[Ww]&&i.unshift(e[Ww]),t.message=fx(`
`+t.message,i,n,r),t[sx]=i,t[Ec]=null,t}function fx(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==ux?t.slice(2):t;let i=wt(e);if(Array.isArray(e))i=e.map(wt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):wt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(ax,`
  `)}`}function Hs(t){return{toString:t}.toString()}var OE=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(OE||{}),an=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(an||{}),Ns={},rn=[],Nn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Nn||{});function kE(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function bf(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];gx(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function px(t){return t===3||t===4||t===6}function gx(t){return t.charCodeAt(0)===64}function up(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Kw(t,n,i,null,e[++r]):Kw(t,n,i,null,null))}}return t}function Kw(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var FE="ng-template";function mx(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&kE(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function VE(t){return t.type===4&&t.value!==FE}function yx(t,e,n){let r=t.type===4&&!n?FE:t.value;return e===r}function vx(t,e,n){let r=4,i=t.attrs||[],o=Ex(i),s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!$t(r)&&!$t(u))return!1;if(s&&$t(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!yx(t,u,n)||u===""&&e.length===1){if($t(r))return!1;s=!0}}else{let c=r&8?u:e[++a];if(r&8&&t.attrs!==null){if(!mx(t.attrs,c,n)){if($t(r))return!1;s=!0}continue}let l=r&8?"class":u,d=_x(l,i,VE(t),n);if(d===-1){if($t(r))return!1;s=!0;continue}if(c!==""){let h;d>o?h="":h=i[d+1].toLowerCase();let f=r&8?h:null;if(f&&kE(f,c,0)!==-1||r&2&&c!==h){if($t(r))return!1;s=!0}}}}return $t(r)||s}function $t(t){return(t&1)===0}function _x(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Ix(e,t)}function wx(t,e,n=!1){for(let r=0;r<e.length;r++)if(vx(t,e[r],n))return!0;return!1}function Ex(t){for(let e=0;e<t.length;e++){let n=t[e];if(px(n))return e}return t.length}function Ix(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Qw(t,e){return t?":not("+e.trim()+")":e}function Dx(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!$t(s)&&(e+=Qw(o,i),i=""),r=s,o=o||!$t(r);n++}return i!==""&&(e+=Qw(o,i)),e}function Cx(t){return t.map(Dx).join(",")}function Tx(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!$t(i))break;i=o}r++}return{attrs:e,classes:n}}function ur(t){return Hs(()=>{let e=$E(t),n=fe(N({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===OE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||an.Emulated,styles:t.styles||rn,_:null,schemas:t.schemas||null,tView:null,id:""});qE(n);let r=t.dependencies;return n.directiveDefs=Zw(r,!1),n.pipeDefs=Zw(r,!0),n.id=Sx(n),n})}function bx(t){return ir(t)||LE(t)}function Ax(t){return t!==null}function De(t){return Hs(()=>({type:t.type,bootstrap:t.bootstrap||rn,declarations:t.declarations||rn,imports:t.imports||rn,exports:t.exports||rn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Yw(t,e){if(t==null)return Ns;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Nn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Nn.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Yr(t){return Hs(()=>{let e=$E(t);return qE(e),e})}function ir(t){return t[ZM]||null}function LE(t){return t[XM]||null}function jE(t){return t[JM]||null}function BE(t){let e=ir(t)||LE(t)||jE(t);return e!==null?e.standalone:!1}function UE(t,e){let n=t[ex]||null;if(!n&&e===!0)throw new Error(`Type ${wt(t)} does not have '\u0275mod' property.`);return n}function $E(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ns,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||rn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Yw(t.inputs,e),outputs:Yw(t.outputs),debugInfo:null}}function qE(t){t.features?.forEach(e=>e(t))}function Zw(t,e){if(!t)return null;let n=e?jE:bx;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(Ax)}function Sx(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var Fn=0,ee=1,U=2,Je=3,qt=4,Ht=5,Ic=6,Os=7,On=8,so=9,or=10,ut=11,ks=12,Xw=13,zs=14,un=15,$c=16,eo=17,Fs=18,qc=19,HE=20,rr=21,pf=22,zr=23,sr=25,zE=1;var Gr=7,Dc=8,Cc=9,Pt=10,cp=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(cp||{});function qr(t){return Array.isArray(t)&&typeof t[zE]=="object"}function Vn(t){return Array.isArray(t)&&t[zE]===!0}function GE(t){return(t.flags&4)!==0}function Hc(t){return t.componentOffset>-1}function lp(t){return(t.flags&1)===1}function Gs(t){return!!t.template}function Mx(t){return(t[U]&512)!==0}function ao(t,e){let n=t.hasOwnProperty(wc);return n?t[wc]:null}var Af=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function WE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Ws(){return KE}function KE(t){return t.type.prototype.ngOnChanges&&(t.setInput=Rx),xx}Ws.ngInherit=!0;function xx(){let t=YE(this),e=t?.current;if(e){let n=t.previous;if(n===Ns)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Rx(t,e,n,r,i){let o=this.declaredInputs[r],s=YE(t)||Px(t,{previous:Ns,current:null}),a=s.current||(s.current={}),u=s.previous,c=u[o];a[o]=new Af(c&&c.currentValue,n,u===Ns),WE(t,e,i,n)}var QE="__ngSimpleChanges__";function YE(t){return t[QE]||null}function Px(t,e){return t[QE]=e}var Jw=null;var on=function(t,e,n){Jw?.(t,e,n)},ZE="svg",Nx="math",Ox=!1;function kx(){return Ox}function cn(t){for(;Array.isArray(t);)t=t[Fn];return t}function Fx(t,e){return cn(e[t])}function zt(t,e){return cn(e[t.index])}function XE(t,e){return t.data[e]}function cr(t,e){let n=e[t];return qr(n)?n:n[Fn]}function dp(t){return(t[U]&128)===128}function Vx(t){return Vn(t[Je])}function Tc(t,e){return e==null?null:t[e]}function JE(t){t[eo]=0}function Lx(t){t[U]&1024||(t[U]|=1024,dp(t)&&Vs(t))}function hp(t){return!!(t[U]&9216||t[zr]?.dirty)}function Sf(t){hp(t)?Vs(t):t[U]&64&&(kx()?(t[U]|=1024,Vs(t)):t[or].changeDetectionScheduler?.notify())}function Vs(t){t[or].changeDetectionScheduler?.notify();let e=Ls(t);for(;e!==null&&!(e[U]&8192||(e[U]|=8192,!dp(e)));)e=Ls(e)}function eI(t,e){if((t[U]&256)===256)throw new L(911,!1);t[rr]===null&&(t[rr]=[]),t[rr].push(e)}function jx(t,e){if(t[rr]===null)return;let n=t[rr].indexOf(e);n!==-1&&t[rr].splice(n,1)}function Ls(t){let e=t[Je];return Vn(e)?e[Je]:e}var oe={lFrame:uI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Bx(){return oe.lFrame.elementDepthCount}function Ux(){oe.lFrame.elementDepthCount++}function $x(){oe.lFrame.elementDepthCount--}function tI(){return oe.bindingsEnabled}function qx(){return oe.skipHydrationRootTNode!==null}function Hx(t){return oe.skipHydrationRootTNode===t}function zx(){oe.skipHydrationRootTNode=null}function $e(){return oe.lFrame.lView}function Zr(){return oe.lFrame.tView}function Gt(){let t=nI();for(;t!==null&&t.type===64;)t=t.parent;return t}function nI(){return oe.lFrame.currentTNode}function Gx(){let t=oe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ks(t,e){let n=oe.lFrame;n.currentTNode=t,n.isParent=e}function rI(){return oe.lFrame.isParent}function Wx(){oe.lFrame.isParent=!1}function Kx(t){return oe.lFrame.bindingIndex=t}function iI(){return oe.lFrame.bindingIndex++}function Qx(){return oe.lFrame.inI18n}function Yx(t,e){let n=oe.lFrame;n.bindingIndex=n.bindingRootIndex=t,Mf(e)}function Zx(){return oe.lFrame.currentDirectiveIndex}function Mf(t){oe.lFrame.currentDirectiveIndex=t}function oI(t){oe.lFrame.currentQueryIndex=t}function Xx(t){let e=t[ee];return e.type===2?e.declTNode:e.type===1?t[Ht]:null}function sI(t,e,n){if(n&Y.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&Y.Host);)if(i=Xx(o),i===null||(o=o[zs],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=oe.lFrame=aI();return r.currentTNode=e,r.lView=t,!0}function fp(t){let e=aI(),n=t[ee];oe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function aI(){let t=oe.lFrame,e=t===null?null:t.child;return e===null?uI(t):e}function uI(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function cI(){let t=oe.lFrame;return oe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var lI=cI;function pp(){let t=cI();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function gp(){return oe.lFrame.selectedIndex}function Wr(t){oe.lFrame.selectedIndex=t}function Jx(){let t=oe.lFrame;return XE(t.tView,t.selectedIndex)}function Qs(){oe.lFrame.currentNamespace=ZE}function zc(){eR()}function eR(){oe.lFrame.currentNamespace=null}function tR(){return oe.lFrame.currentNamespace}var dI=!0;function mp(){return dI}function yp(t){dI=t}function nR(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=KE(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function vp(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function gc(t,e,n){hI(t,e,3,n)}function mc(t,e,n,r){(t[U]&3)===n&&hI(t,e,n,r)}function gf(t,e){let n=t[U];(n&3)===e&&(n&=16383,n+=1,t[U]=n)}function hI(t,e,n,r){let i=r!==void 0?t[eo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[eo]+=65536),(a<o||o==-1)&&(rR(t,n,e,u),t[eo]=(t[eo]&4294901760)+u+2),u++}function eE(t,e){on(4,t,e);let n=_t(null);try{e.call(t)}finally{_t(n),on(5,t,e)}}function rR(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[U]>>14<t[eo]>>16&&(t[U]&3)===e&&(t[U]+=16384,eE(a,o)):eE(a,o)}var oo=-1,js=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function iR(t){return t instanceof js}function oR(t){return(t.flags&8)!==0}function sR(t){return(t.flags&16)!==0}function fI(t){return t!==oo}function bc(t){return t&32767}function aR(t){return t>>16}function Ac(t,e){let n=aR(t),r=e;for(;n>0;)r=r[zs],n--;return r}var xf=!0;function tE(t){let e=xf;return xf=t,e}var uR=256,pI=uR-1,gI=5,cR=0,sn={};function lR(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(xs)&&(r=n[xs]),r==null&&(r=n[xs]=cR++);let i=r&pI,o=1<<i;e.data[t+(i>>gI)]|=o}function mI(t,e){let n=yI(t,e);if(n!==-1)return n;let r=e[ee];r.firstCreatePass&&(t.injectorIndex=e.length,mf(r.data,t),mf(e,null),mf(r.blueprint,null));let i=_p(t,e),o=t.injectorIndex;if(fI(i)){let s=bc(i),a=Ac(i,e),u=a[ee].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|u[s+c]}return e[o+8]=i,o}function mf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function yI(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function _p(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=II(i),r===null)return oo;if(n++,i=i[zs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return oo}function dR(t,e,n){lR(t,e,n)}function vI(t,e,n){if(n&Y.Optional||t!==void 0)return t;ap(e,"NodeInjector")}function _I(t,e,n,r){if(n&Y.Optional&&r===void 0&&(r=null),!(n&(Y.Self|Y.Host))){let i=t[so],o=xt(void 0);try{return i?i.get(e,r,n&Y.Optional):PE(e,r,n&Y.Optional)}finally{xt(o)}}return vI(r,e,n)}function wI(t,e,n,r=Y.Default,i){if(t!==null){if(e[U]&2048&&!(r&Y.Self)){let s=mR(t,e,n,r,sn);if(s!==sn)return s}let o=EI(t,e,n,r,sn);if(o!==sn)return o}return _I(e,n,r,i)}function EI(t,e,n,r,i){let o=pR(n);if(typeof o=="function"){if(!sI(e,t,r))return r&Y.Host?vI(i,n,r):_I(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&Y.Optional))ap(n);else return s}finally{lI()}}else if(typeof o=="number"){let s=null,a=yI(t,e),u=oo,c=r&Y.Host?e[un][Ht]:null;for((a===-1||r&Y.SkipSelf)&&(u=a===-1?_p(t,e):e[a+8],u===oo||!rE(r,!1)?a=-1:(s=e[ee],a=bc(u),e=Ac(u,e)));a!==-1;){let l=e[ee];if(nE(o,a,l.data)){let d=hR(a,e,n,s,r,c);if(d!==sn)return d}u=e[a+8],u!==oo&&rE(r,e[ee].data[a+8]===c)&&nE(o,a,e)?(s=l,a=bc(u),e=Ac(u,e)):a=-1}}return i}function hR(t,e,n,r,i,o){let s=e[ee],a=s.data[t+8],u=r==null?Hc(a)&&xf:r!=s&&(a.type&3)!==0,c=i&Y.Host&&o===a,l=fR(a,s,n,u,c);return l!==null?Bs(e,s,l,a):sn}function fR(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,c=t.directiveEnd,l=o>>20,d=r?a:a+l,h=i?a+l:c;for(let f=d;f<h;f++){let _=s[f];if(f<u&&n===_||f>=u&&_.type===n)return f}if(i){let f=s[u];if(f&&Gs(f)&&f.type===n)return u}return null}function Bs(t,e,n,r){let i=t[n],o=e.data;if(iR(i)){let s=i;s.resolving&&nx(tx(o[n]));let a=tE(s.canSeeViewProviders);s.resolving=!0;let u,c=s.injectImpl?xt(s.injectImpl):null,l=sI(t,r,Y.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&nR(n,o[n],e)}finally{c!==null&&xt(c),tE(a),s.resolving=!1,lI()}}return i}function pR(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(xs)?t[xs]:void 0;return typeof e=="number"?e>=0?e&pI:gR:e}function nE(t,e,n){let r=1<<t;return!!(n[e+(t>>gI)]&r)}function rE(t,e){return!(t&Y.Self)&&!(t&Y.Host&&e)}var Hr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return wI(this._tNode,this._lView,e,Uc(r),n)}};function gR(){return new Hr(Gt(),$e())}function Gc(t){return Hs(()=>{let e=t.prototype.constructor,n=e[wc]||Rf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[wc]||Rf(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Rf(t){return TE(t)?()=>{let e=Rf(Rt(t));return e&&e()}:ao(t)}function mR(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[U]&2048&&!(s[U]&512);){let a=EI(o,s,n,r|Y.Self,sn);if(a!==sn)return a;let u=o.parent;if(!u){let c=s[HE];if(c){let l=c.get(n,sn,r);if(l!==sn)return l}u=II(s),s=s[zs]}o=u}return i}function II(t){let e=t[ee],n=e.type;return n===2?e.declTNode:n===1?t[Ht]:null}var fc="__parameters__";function yR(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function DI(t,e,n){return Hs(()=>{let r=yR(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,c,l){let d=u.hasOwnProperty(fc)?u[fc]:Object.defineProperty(u,fc,{value:[]})[fc];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function vR(t){let e=Et.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function _R(t){return typeof t=="function"}function wp(t,e){t.forEach(n=>Array.isArray(n)?wp(n,e):e(n))}function CI(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Sc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var lo=NE(DI("Optional"),8);var Ep=NE(DI("SkipSelf"),4);function wR(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(CR))}return o}return Mc.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(c=>{i.template=c}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let c=i.styles.length,l=i.styleUrls;i.styleUrls.forEach((d,h)=>{a.push(""),s.push(r(d).then(f=>{a[c+h]=f,l.splice(l.indexOf(d),1),l.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(c=>{a.push(c),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>TR(o));e.push(u)}),IR(),Promise.all(e).then(()=>{})}var Mc=new Map,ER=new Set;function IR(){let t=Mc;return Mc=new Map,t}function DR(){return Mc.size===0}function CR(t){return typeof t=="string"?t:t.text()}function TR(t){ER.delete(t)}var uo=new M(""),TI=new M("",-1),bI=new M(""),xc=class{get(e,n=Ps){if(n===Ps){let r=new Error(`NullInjectorError: No provider for ${wt(e)}!`);throw r.name="NullInjectorError",r}return n}};function Wc(t){return{\u0275providers:t}}function bR(...t){return{\u0275providers:AI(!0,t),\u0275fromNgModule:!0}}function AI(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return wp(e,s=>{let a=s;Pf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&SI(i,o),n}function SI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Ip(i,o=>{e(o,r)})}}function Pf(t,e,n,r){if(t=Rt(t),!t)return!1;let i=null,o=zw(t),s=!o&&ir(t);if(!o&&!s){let u=t.ngModule;if(o=zw(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of u)Pf(c,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{wp(o.imports,l=>{Pf(l,e,n,r)&&(c||=[],c.push(l))})}finally{}c!==void 0&&SI(c,e)}if(!a){let c=ao(i)||(()=>new i);e({provide:i,useFactory:c,deps:rn},i),e({provide:bI,useValue:i,multi:!0},i),e({provide:uo,useValue:()=>D(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let c=t;Ip(u,l=>{e(l,c)})}}else return!1;return i!==t&&t.providers!==void 0}function Ip(t,e){for(let n of t)bE(n)&&(n=n.\u0275providers),Array.isArray(n)?Ip(n,e):e(n)}var AR=ce({provide:String,useValue:ce});function MI(t){return t!==null&&typeof t=="object"&&AR in t}function SR(t){return!!(t&&t.useExisting)}function MR(t){return!!(t&&t.useFactory)}function Nf(t){return typeof t=="function"}var Kc=new M(""),yc={},xR={},yf;function Dp(){return yf===void 0&&(yf=new xc),yf}var ct=class{},Us=class extends ct{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,kf(e,s=>this.processProvider(s)),this.records.set(TI,to(void 0,this)),i.has("environment")&&this.records.set(ct,to(void 0,this));let o=this.records.get(Kc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(bI,rn,Y.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=nr(this),r=xt(void 0),i;try{return e()}finally{nr(n),xt(r)}}get(e,n=Ps,r=Y.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(qw))return e[qw](this);r=Uc(r);let i,o=nr(this),s=xt(void 0);try{if(!(r&Y.SkipSelf)){let u=this.records.get(e);if(u===void 0){let c=FR(e)&&Bc(e);c&&this.injectableDefInScope(c)?u=to(Of(e),yc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&Y.Self?Dp():this.parent;return n=r&Y.Optional&&n===Ps?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Ec]=a[Ec]||[]).unshift(wt(e)),o)throw a;return hx(a,e,"R3InjectorError",this.source)}else throw a}finally{xt(s),nr(o)}}resolveInjectorInitializers(){let e=nr(this),n=xt(void 0),r;try{let i=this.get(uo,rn,Y.Self);for(let o of i)o()}finally{nr(e),xt(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(wt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new L(205,!1)}processProvider(e){e=Rt(e);let n=Nf(e)?e:Rt(e&&e.provide),r=PR(e);if(!Nf(e)&&e.multi===!0){let i=this.records.get(n);i||(i=to(void 0,yc,!0),i.factory=()=>Tf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===yc&&(n.value=xR,n.value=n.factory()),typeof n.value=="object"&&n.value&&kR(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Rt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Of(t){let e=Bc(t),n=e!==null?e.factory:ao(t);if(n!==null)return n;if(t instanceof M)throw new L(204,!1);if(t instanceof Function)return RR(t);throw new L(204,!1)}function RR(t){if(t.length>0)throw new L(204,!1);let n=rx(t);return n!==null?()=>n.factory(t):()=>new t}function PR(t){if(MI(t))return to(void 0,t.useValue);{let e=NR(t);return to(e,yc)}}function NR(t,e,n){let r;if(Nf(t)){let i=Rt(t);return ao(i)||Of(i)}else if(MI(t))r=()=>Rt(t.useValue);else if(MR(t))r=()=>t.useFactory(...Tf(t.deps||[]));else if(SR(t))r=()=>D(Rt(t.useExisting));else{let i=Rt(t&&(t.useClass||t.provide));if(OR(t))r=()=>new i(...Tf(t.deps));else return ao(i)||Of(i)}return r}function to(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function OR(t){return!!t.deps}function kR(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function FR(t){return typeof t=="function"||typeof t=="object"&&t instanceof M}function kf(t,e){for(let n of t)Array.isArray(n)?kf(n,e):n&&bE(n)?kf(n.\u0275providers,e):e(n)}function dn(t,e){t instanceof Us&&t.assertNotDestroyed();let n,r=nr(t),i=xt(void 0);try{return e()}finally{nr(r),xt(i)}}function VR(t){if(!RE()&&!cx())throw new L(-203,!1)}function iE(t,e=null,n=null,r){let i=xI(t,e,n,r);return i.resolveInjectorInitializers(),i}function xI(t,e=null,n=null,r,i=new Set){let o=[n||rn,bR(t)];return r=r||(typeof t=="object"?void 0:wt(t)),new Us(o,e||Dp(),r||null,i)}var Wt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return iE({name:""},i,r,"");{let o=r.name??"";return iE({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=Ps,e.NULL=new xc,e.\u0275prov=O({token:e,providedIn:"any",factory:()=>D(TI)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var Ff;function RI(t){Ff=t}function LR(){if(Ff!==void 0)return Ff;if(typeof document<"u")return document;throw new L(210,!1)}var Qc=new M("",{providedIn:"root",factory:()=>jR}),jR="ng",Cp=new M(""),et=new M("",{providedIn:"platform",factory:()=>"unknown"});var Tp=new M("",{providedIn:"root",factory:()=>LR().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function PI(t){return t instanceof Function?t():t}function BR(t){return(t??C(Wt)).get(et)==="browser"}function NI(t){return(t.flags&128)===128}var Xr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Xr||{});var OI=new Map,UR=0;function $R(){return UR++}function qR(t){OI.set(t[qc],t)}function HR(t){OI.delete(t[qc])}var oE="__ngContext__";function Kr(t,e){qr(e)?(t[oE]=e[qc],qR(e)):t[oE]=e}var zR;function bp(t,e){return zR(t,e)}function no(t,e,n,r,i){if(r!=null){let o,s=!1;Vn(r)?o=r:qr(r)&&(s=!0,r=r[Fn]);let a=cn(r);t===0&&n!==null?i==null?jI(e,n,a):Rc(e,n,a,i||null,!0):t===1&&n!==null?Rc(e,n,a,i||null,!0):t===2?uP(e,a,s):t===3&&e.destroyNode(a),o!=null&&lP(e,t,o,n,i)}}function GR(t,e){return t.createText(e)}function WR(t,e,n){t.setValue(e,n)}function kI(t,e,n){return t.createElement(e,n)}function KR(t,e){FI(t,e),e[Fn]=null,e[Ht]=null}function QR(t,e,n,r,i,o){r[Fn]=i,r[Ht]=e,Yc(t,r,n,1,i,o)}function FI(t,e){Yc(t,e,e[ut],2,null,null)}function YR(t){let e=t[ks];if(!e)return vf(t[ee],t);for(;e;){let n=null;if(qr(e))n=e[ks];else{let r=e[Pt];r&&(n=r)}if(!n){for(;e&&!e[qt]&&e!==t;)qr(e)&&vf(e[ee],e),e=e[Je];e===null&&(e=t),qr(e)&&vf(e[ee],e),n=e&&e[qt]}e=n}}function ZR(t,e,n,r){let i=Pt+r,o=n.length;r>0&&(n[i-1][qt]=e),r<o-Pt?(e[qt]=n[i],CI(n,Pt+r,e)):(n.push(e),e[qt]=null),e[Je]=n;let s=e[$c];s!==null&&n!==s&&XR(s,e);let a=e[Fs];a!==null&&a.insertView(t),Sf(e),e[U]|=128}function XR(t,e){let n=t[Cc],i=e[Je][Je][un];e[un]!==i&&(t[U]|=cp.HasTransplantedViews),n===null?t[Cc]=[e]:n.push(e)}function VI(t,e){let n=t[Cc],r=n.indexOf(e);n.splice(r,1)}function Vf(t,e){if(t.length<=Pt)return;let n=Pt+e,r=t[n];if(r){let i=r[$c];i!==null&&i!==t&&VI(i,r),e>0&&(t[n-1][qt]=r[qt]);let o=Sc(t,Pt+e);KR(r[ee],r);let s=o[Fs];s!==null&&s.detachView(o[ee]),r[Je]=null,r[qt]=null,r[U]&=-129}return r}function LI(t,e){if(!(e[U]&256)){let n=e[ut];n.destroyNode&&Yc(t,e,n,3,null,null),YR(e)}}function vf(t,e){if(!(e[U]&256)){e[U]&=-129,e[U]|=256,e[zr]&&gw(e[zr]),eP(t,e),JR(t,e),e[ee].type===1&&e[ut].destroy();let n=e[$c];if(n!==null&&Vn(e[Je])){n!==e[Je]&&VI(n,e);let r=e[Fs];r!==null&&r.detachView(t)}HR(e)}}function JR(t,e){let n=t.cleanup,r=e[Os];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Os]=null);let i=e[rr];if(i!==null){e[rr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function eP(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof js)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];on(4,a,u);try{u.call(a)}finally{on(5,a,u)}}else{on(4,i,o);try{o.call(i)}finally{on(5,i,o)}}}}}function tP(t,e,n){return nP(t,e.parent,n)}function nP(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Fn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===an.None||o===an.Emulated)return null}return zt(r,n)}}function Rc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function jI(t,e,n){t.appendChild(e,n)}function sE(t,e,n,r,i){r!==null?Rc(t,e,n,r,i):jI(t,e,n)}function rP(t,e,n,r){t.removeChild(e,n,r)}function Ap(t,e){return t.parentNode(e)}function iP(t,e){return t.nextSibling(e)}function oP(t,e,n){return aP(t,e,n)}function sP(t,e,n){return t.type&40?zt(t,n):null}var aP=sP,aE;function Sp(t,e,n,r){let i=tP(t,r,e),o=e[ut],s=r.parent||e[Ht],a=oP(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)sE(o,i,n[u],a,!1);else sE(o,i,n,a,!1);aE!==void 0&&aE(o,r,e,n,i)}function vc(t,e){if(e!==null){let n=e.type;if(n&3)return zt(e,t);if(n&4)return Lf(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return vc(t,r);{let i=t[e.index];return Vn(i)?Lf(-1,i):cn(i)}}else{if(n&32)return bp(e,t)()||cn(t[e.index]);{let r=BI(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ls(t[un]);return vc(i,r)}else return vc(t,e.next)}}}return null}function BI(t,e){if(e!==null){let r=t[un][Ht],i=e.projection;return r.projection[i]}return null}function Lf(t,e){let n=Pt+t+1;if(n<e.length){let r=e[n],i=r[ee].firstChild;if(i!==null)return vc(r,i)}return e[Gr]}function uP(t,e,n){let r=Ap(t,e);r&&rP(t,r,e,n)}function Mp(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],u=n.type;if(s&&e===0&&(a&&Kr(cn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Mp(t,e,n.child,r,i,o,!1),no(e,t,i,a,o);else if(u&32){let c=bp(n,r),l;for(;l=c();)no(e,t,i,l,o);no(e,t,i,a,o)}else u&16?cP(t,e,r,n,i,o):no(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Yc(t,e,n,r,i,o){Mp(n,r,t.firstChild,e,i,o,!1)}function cP(t,e,n,r,i,o){let s=n[un],u=s[Ht].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++){let l=u[c];no(e,t,i,l,o)}else{let c=u,l=s[Je];NI(r)&&(c.flags|=128),Mp(t,e,c,l,i,o,!0)}}function lP(t,e,n,r,i){let o=n[Gr],s=cn(n);o!==s&&no(e,t,r,o,i);for(let a=Pt;a<n.length;a++){let u=n[a];Yc(u[ee],u,t,e,r,o)}}function dP(t,e,n){t.setAttribute(e,"style",n)}function UI(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function $I(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&bf(t,e,r),i!==null&&UI(t,e,i),o!==null&&dP(t,e,o)}var jf=class{};var hP="h",fP="b";var pP=()=>null;function xp(t,e,n=!1){return pP(t,e,n)}var Bf=class{},Pc=class{};function gP(t){let e=Error(`No component factory found for ${wt(t)}.`);return e[mP]=t,e}var mP="ngComponent";var Uf=class{resolveComponentFactory(e){throw gP(e)}},Zc=(()=>{let e=class e{};e.NULL=new Uf;let t=e;return t})();function yP(){return Xc(Gt(),$e())}function Xc(t,e){return new Jr(zt(t,e))}var Jr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=yP;let t=e;return t})();var $s=class{},ho=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>vP();let t=e;return t})();function vP(){let t=$e(),e=Gt(),n=cr(e.index,t);return(qr(n)?n:t)[ut]}var _P=(()=>{let e=class e{};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),_f={};function qI(t){return EP(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function wP(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function EP(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var $f=class{constructor(){}supports(e){return qI(e)}create(e){return new qf(e)}},IP=(t,e)=>e,qf=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||IP}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<uE(r,i,o)?n:r,a=uE(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let c=a-i,l=u-i;if(c!=l){for(let h=0;h<c;h++){let f=h<o.length?o[h]:o[h]=0,_=f+h;l<=_&&_<c&&(o[h]=f+1)}let d=s.previousIndex;o[d]=l-c}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!qI(e))throw new L(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,wP(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Hf(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Nc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Nc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Hf=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},zf=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Nc=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new zf,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function uE(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function cE(){return new Rp([new $f])}var Rp=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||cE()),deps:[[e,new Ep,new lo]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new L(901,!1)}};e.\u0275prov=O({token:e,providedIn:"root",factory:cE});let t=e;return t})();function Oc(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(cn(o)),Vn(o)&&DP(o,r);let s=n.type;if(s&8)Oc(t,e,n.child,r);else if(s&32){let a=bp(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=BI(e,n);if(Array.isArray(a))r.push(...a);else{let u=Ls(e[un]);Oc(u[ee],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function DP(t,e){for(let n=Pt;n<t.length;n++){let r=t[n],i=r[ee].firstChild;i!==null&&Oc(r[ee],r,i,e)}t[Gr]!==t[Fn]&&e.push(t[Gr])}var HI=[];function CP(t){return t[zr]??TP(t)}function TP(t){let e=HI.pop()??Object.create(AP);return e.lView=t,e}function bP(t){t.lView[zr]!==t&&(t.lView=null,HI.push(t))}var AP=fe(N({},hw),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Vs(t.lView)},consumerOnSignalRead(){this.lView[zr]=this}});function zI(t){return WI(t[ks])}function GI(t){return WI(t[qt])}function WI(t){for(;t!==null&&!Vn(t);)t=t[qt];return t}var SP="ngOriginalError";function wf(t){return t[SP]}var ln=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&wf(e);for(;n&&wf(n);)n=wf(n);return n||null}},KI=new M("",{providedIn:"root",factory:()=>C(ln).handleError.bind(void 0)});var QI=!1,MP=new M("",{providedIn:"root",factory:()=>QI});var Jc={};function fo(t=1){YI(Zr(),$e(),gp()+t,!1)}function YI(t,e,n,r){if(!r)if((e[U]&3)===3){let o=t.preOrderCheckHooks;o!==null&&gc(e,o,n)}else{let o=t.preOrderHooks;o!==null&&mc(e,o,0,n)}Wr(n)}function hn(t,e=Y.Default){let n=$e();if(n===null)return D(t,e);let r=Gt();return wI(r,n,Rt(t),e)}function ZI(){let t="invalid";throw new Error(t)}function XI(t,e,n,r,i,o){let s=_t(null);try{let a=null;i&Nn.SignalBased&&(a=e[r][dw]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Nn.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):WE(e,a,r,o)}finally{_t(s)}}function xP(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Wr(~i);else{let o=i,s=n[++r],a=n[++r];Yx(s,o);let u=e[o];a(2,u)}}}finally{Wr(-1)}}function el(t,e,n,r,i,o,s,a,u,c,l){let d=e.blueprint.slice();return d[Fn]=i,d[U]=r|4|128|8|64,(c!==null||t&&t[U]&2048)&&(d[U]|=2048),JE(d),d[Je]=d[zs]=t,d[On]=n,d[or]=s||t&&t[or],d[ut]=a||t&&t[ut],d[so]=u||t&&t[so]||null,d[Ht]=o,d[qc]=$R(),d[Ic]=l,d[HE]=c,d[un]=e.type==2?t[un]:d,d}function tl(t,e,n,r,i){let o=t.data[e];if(o===null)o=RP(t,e,n,r,i),Qx()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Gx();o.injectorIndex=s===null?-1:s.injectorIndex}return Ks(o,!0),o}function RP(t,e,n,r,i){let o=nI(),s=rI(),a=s?o:o&&o.parent,u=t.data[e]=FP(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function JI(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function eD(t,e,n,r,i){let o=gp(),s=r&2;try{Wr(-1),s&&e.length>sr&&YI(t,e,sr,!1),on(s?2:0,i),n(r,i)}finally{Wr(o),on(s?3:1,i)}}function tD(t,e,n){if(GE(e)){let r=_t(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{_t(r)}}}function nD(t,e,n){tI()&&(qP(t,e,n,zt(n,e)),(n.flags&64)===64&&aD(t,e,n))}function rD(t,e,n=zt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function iD(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Pp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Pp(t,e,n,r,i,o,s,a,u,c,l){let d=sr+r,h=d+i,f=PP(d,h),_=typeof c=="function"?c():c;return f[ee]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:_,incompleteFirstPass:!1,ssrId:l}}function PP(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Jc);return n}function NP(t,e,n,r){let o=r.get(MP,QI)||n===an.ShadowDom,s=t.selectRootElement(e,o);return OP(s),s}function OP(t){kP(t)}var kP=()=>null;function FP(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return qx()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function lE(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Nn.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let c=o;if(i!==null){if(!i.hasOwnProperty(o))continue;c=i[o]}t===0?dE(r,n,c,a,u):dE(r,n,c,a)}return r}function dE(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function VP(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],u=null,c=null;for(let l=r;l<i;l++){let d=o[l],h=n?n.get(d):null,f=h?h.inputs:null,_=h?h.outputs:null;u=lE(0,d.inputs,l,u,f),c=lE(1,d.outputs,l,c,_);let v=u!==null&&s!==null&&!VE(e)?XP(u,l,s):null;a.push(v)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}function LP(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function jP(t,e,n,r,i,o,s,a){let u=zt(e,n),c=e.inputs,l;!a&&c!=null&&(l=c[r])?(Np(t,n,l,r,i),Hc(e)&&BP(n,e.index)):e.type&3?(r=LP(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function BP(t,e){let n=cr(e,t);n[U]&16||(n[U]|=64)}function oD(t,e,n,r){if(tI()){let i=r===null?null:{"":-1},o=zP(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&sD(t,e,n,s,i,a),i&&GP(n,r,i)}n.mergedAttrs=up(n.mergedAttrs,n.attrs)}function sD(t,e,n,r,i,o){for(let c=0;c<r.length;c++)dR(mI(n,e),t,r[c].type);KP(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let l=r[c];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,u=JI(t,e,r.length,null);for(let c=0;c<r.length;c++){let l=r[c];n.mergedAttrs=up(n.mergedAttrs,l.hostAttrs),QP(t,n,e,u,l),WP(u,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}VP(t,n,o)}function UP(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;$P(s)!=a&&s.push(a),s.push(n,r,o)}}function $P(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function qP(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Hc(n)&&YP(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||mI(n,e),Kr(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let u=t.data[a],c=Bs(e,t,a,n);if(Kr(c,e),s!==null&&ZP(e,a-i,c,u,n,s),Gs(u)){let l=cr(n.index,e);l[On]=Bs(e,t,a,n)}}}function aD(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Zx();try{Wr(o);for(let a=r;a<i;a++){let u=t.data[a],c=e[a];Mf(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&HP(u,c)}}finally{Wr(-1),Mf(s)}}function HP(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function zP(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(wx(e,s.selectors,!1))if(r||(r=[]),Gs(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Gf(t,e,u)}else r.unshift(s),Gf(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Gf(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function GP(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new L(-301,!1);r.push(e[i],o)}}}function WP(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Gs(e)&&(n[""]=t)}}function KP(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function QP(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=ao(i.type,!0)),s=new js(o,Gs(i),hn);t.blueprint[r]=s,n[r]=s,UP(t,e,r,JI(t,n,i.hostVars,Jc),i)}function YP(t,e,n){let r=zt(e,t),i=iD(n),o=t[or].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=nl(t,el(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function ZP(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],c=s[a++],l=s[a++],d=s[a++];XI(r,n,u,c,l,d)}}function XP(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function uD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function cD(t,e){let n=t.contentQueries;if(n!==null){let r=_t(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];oI(o),a.contentQueries(2,e[s],s)}}}finally{_t(r)}}}function nl(t,e){return t[ks]?t[Xw][qt]=e:t[ks]=e,t[Xw]=e,e}function Wf(t,e,n){oI(0);let r=_t(null);try{e(t,n)}finally{_t(r)}}function JP(t){return t[Os]||(t[Os]=[])}function eN(t){return t.cleanup||(t.cleanup=[])}function lD(t,e){let n=t[so],r=n?n.get(ln,null):null;r&&r.handleError(e)}function Np(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],u=n[o++],c=e[s],l=t.data[s];XI(l,c,r,a,u,i)}}function tN(t,e,n){let r=Fx(e,t);WR(t[ut],r,n)}var dD=100;function hD(t,e=!0,n=0){let r=t[or],i=r.rendererFactory,o=!1;o||i.begin?.();try{nN(t,n)}catch(s){throw e&&lD(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function nN(t,e){Kf(t,e);let n=0;for(;hp(t);){if(n===dD)throw new L(103,!1);n++,Kf(t,1)}}function rN(t,e,n,r){let i=e[U];if((i&256)===256)return;let o=!1;!o&&e[or].inlineEffectRunner?.flush(),fp(e);let s=null,a=null;!o&&iN(t)&&(a=CP(e),s=fw(a));try{JE(e),Kx(t.bindingStartIndex),n!==null&&eD(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let d=t.preOrderCheckHooks;d!==null&&gc(e,d,null)}else{let d=t.preOrderHooks;d!==null&&mc(e,d,0,null),gf(e,0)}if(oN(e),fD(e,0),t.contentQueries!==null&&cD(t,e),!o)if(u){let d=t.contentCheckHooks;d!==null&&gc(e,d)}else{let d=t.contentHooks;d!==null&&mc(e,d,1),gf(e,1)}xP(t,e);let c=t.components;c!==null&&gD(e,c,0);let l=t.viewQuery;if(l!==null&&Wf(2,l,r),!o)if(u){let d=t.viewCheckHooks;d!==null&&gc(e,d)}else{let d=t.viewHooks;d!==null&&mc(e,d,2),gf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[pf]){for(let d of e[pf])d();e[pf]=null}o||(e[U]&=-73)}catch(u){throw Vs(e),u}finally{a!==null&&(pw(a,s),bP(a)),pp()}}function iN(t){return t.type!==2}function fD(t,e){for(let n=zI(t);n!==null;n=GI(n))for(let r=Pt;r<n.length;r++){let i=n[r];pD(i,e)}}function oN(t){for(let e=zI(t);e!==null;e=GI(e)){if(!(e[U]&cp.HasTransplantedViews))continue;let n=e[Cc];for(let r=0;r<n.length;r++){let i=n[r],o=i[Je];Lx(i)}}}function sN(t,e,n){let r=cr(e,t);pD(r,n)}function pD(t,e){dp(t)&&Kf(t,e)}function Kf(t,e){let r=t[ee],i=t[U],o=t[zr],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Gh(o)),o&&(o.dirty=!1),t[U]&=-9217,s)rN(r,t,r.template,t[On]);else if(i&8192){fD(t,1);let a=r.components;a!==null&&gD(t,a,1)}}function gD(t,e,n){for(let r=0;r<e.length;r++)sN(t,e[r],n)}function Op(t){for(t[or].changeDetectionScheduler?.notify();t;){t[U]|=64;let e=Ls(t);if(Mx(t)&&!e)return t;t=e}return null}var Qr=class{get rootNodes(){let e=this._lView,n=e[ee];return Oc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[On]}set context(e){this._lView[On]=e}get destroyed(){return(this._lView[U]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Je];if(Vn(e)){let n=e[Dc],r=n?n.indexOf(this):-1;r>-1&&(Vf(e,r),Sc(n,r))}this._attachedToViewContainer=!1}LI(this._lView[ee],this._lView)}onDestroy(e){eI(this._lView,e)}markForCheck(){Op(this._cdRefInjectingView||this._lView)}detach(){this._lView[U]&=-129}reattach(){Sf(this._lView),this._lView[U]|=128}detectChanges(){this._lView[U]|=1024,hD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new L(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,FI(this._lView[ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new L(902,!1);this._appRef=e,Sf(this._lView)}},Ys=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=aN;let t=e;return t})();function aN(t){return uN(Gt(),$e(),(t&16)===16)}function uN(t,e,n){if(Hc(t)&&!n){let r=cr(t.index,e);return new Qr(r,r)}else if(t.type&47){let r=e[un];return new Qr(r,e)}return null}var mD=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=cN,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Qf=class extends mD{constructor(e){super(),this._lView=e}onDestroy(e){return eI(this._lView,e),()=>jx(this._lView,e)}};function cN(){return new Qf($e())}var hE=new Set;function rl(t){hE.has(t)||(hE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Yf=class extends je{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=Ef(o),i&&(i=Ef(i)),s&&(s=Ef(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ae&&e.add(a),a}};function Ef(t){return e=>{setTimeout(t,void 0,e)}}var Xe=Yf;function fE(...t){}function lN(){let t=typeof Et.requestAnimationFrame=="function",e=Et[t?"requestAnimationFrame":"setTimeout"],n=Et[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var J=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xe(!1),this.onMicrotaskEmpty=new Xe(!1),this.onStable=new Xe(!1),this.onError=new Xe(!1),typeof Zone>"u")throw new L(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=lN().nativeRequestAnimationFrame,fN(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new L(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new L(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,dN,fE,fE);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},dN={};function kp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function hN(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Et,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Zf(t),t.isCheckStableRunning=!0,kp(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Zf(t))}function fN(t){let e=()=>{hN(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(pN(a))return n.invokeTask(i,o,s,a);try{return pE(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),gE(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return pE(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),gE(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Zf(t),kp(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Zf(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function pE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function gE(t){t._nesting--,kp(t)}var Xf=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe,this.onMicrotaskEmpty=new Xe,this.onStable=new Xe,this.onError=new Xe}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function pN(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function gN(t="zone.js",e){return t==="noop"?new Xf:t==="zone.js"?new J(e):t}var ro=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(ro||{}),mN={destroy(){}};function Fp(t,e){!e&&VR(Fp);let n=e?.injector??C(Wt);if(!BR(n))return mN;rl("NgAfterNextRender");let r=n.get(Vp),i=r.handler??=new ep,o=e?.phase??ro.MixedReadWrite,s=()=>{i.unregister(u),a()},a=n.get(mD).onDestroy(s),u=new Jf(n,o,()=>{s(),t()});return i.register(u),{destroy:s}}var Jf=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(J),this.errorHandler=e.get(ln,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},ep=class{constructor(){this.executingCallbacks=!1,this.buckets={[ro.EarlyRead]:new Set,[ro.Write]:new Set,[ro.MixedReadWrite]:new Set,[ro.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Vp=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i();this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function yN(t,e){let n=cr(e,t),r=n[ee];vN(r,n);let i=n[Fn];i!==null&&n[Ic]===null&&(n[Ic]=xp(i,n[so])),Lp(r,n,n[On])}function vN(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Lp(t,e,n){fp(e);try{let r=t.viewQuery;r!==null&&Wf(1,r,n);let i=t.template;i!==null&&eD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&cD(t,e),t.staticViewQueries&&Wf(2,t.viewQuery,n);let o=t.components;o!==null&&_N(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[U]&=-5,pp()}}function _N(t,e){for(let n=0;n<e.length;n++)yN(t,e[n])}function tp(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=$w(i,a);else if(o==2){let u=a,c=e[++s];r=$w(r,u+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var kc=class extends Zc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ir(e);return new co(n,this.ngModule)}};function mE(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function wN(t){let e=t.toLowerCase();return e==="svg"?ZE:e==="math"?Nx:null}var np=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Uc(r);let i=this.injector.get(e,_f,r);return i!==_f||n===_f?i:this.parentInjector.get(e,n,r)}},co=class extends Pc{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=mE(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return mE(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Cx(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let o=i instanceof ct?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new np(e,o):e,a=s.get($s,null);if(a===null)throw new L(407,!1);let u=s.get(_P,null),c=s.get(Vp,null),l=s.get(jf,null),d={rendererFactory:a,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:c,changeDetectionScheduler:l},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",_=r?NP(h,r,this.componentDef.encapsulation,s):kI(h,f,wN(f)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let m=null;_!==null&&(m=xp(_,s,!0));let I=Pp(0,null,null,1,0,null,null,null,null,null,null),R=el(null,I,null,v,null,null,d,h,s,null,m);fp(R);let T,P;try{let B=this.componentDef,H,de=null;B.findHostDirectiveDefs?(H=[],de=new Map,B.findHostDirectiveDefs(B,H,de),H.push(B)):H=[B];let At=EN(R,_),Bh=IN(At,_,B,H,R,d,h);P=XE(I,sr),_&&TN(h,B,_,r),n!==void 0&&bN(P,this.ngContentSelectors,n),T=CN(Bh,B,H,de,R,[AN]),Lp(I,R,null)}finally{pp()}return new rp(this.componentType,T,Xc(P,R),R,P)}},rp=class extends Bf{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Qr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Np(o[ee],o,i,e,n),this.previousInputValues.set(e,n);let s=cr(this._tNode.index,o);Op(s)}}get injector(){return new Hr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function EN(t,e){let n=t[ee],r=sr;return t[r]=e,tl(n,r,2,"#host",null)}function IN(t,e,n,r,i,o,s){let a=i[ee];DN(r,t,e,s);let u=null;e!==null&&(u=xp(e,i[so]));let c=o.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=el(i,iD(n),null,l,i[t.index],t,o,c,null,null,u);return a.firstCreatePass&&Gf(a,t,r.length-1),nl(i,d),i[t.index]=d}function DN(t,e,n,r){for(let i of t)e.mergedAttrs=up(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(tp(e,e.mergedAttrs,!0),n!==null&&$I(r,n,e))}function CN(t,e,n,r,i,o){let s=Gt(),a=i[ee],u=zt(s,i);sD(a,i,s,n,null,r);for(let l=0;l<n.length;l++){let d=s.directiveStart+l,h=Bs(i,a,d,s);Kr(h,i)}aD(a,i,s),u&&Kr(u,i);let c=Bs(i,a,s.directiveStart+s.componentOffset,s);if(t[On]=i[On]=c,o!==null)for(let l of o)l(c,e);return tD(a,s,t),c}function TN(t,e,n,r){if(r)bf(t,n,["ng-version","17.1.3"]);else{let{attrs:i,classes:o}=Tx(e.selectors[0]);i&&bf(t,n,i),o&&o.length>0&&UI(t,n,o.join(" "))}}function bN(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function AN(){let t=Gt();vp($e()[ee],t)}var c3=new RegExp(`^(\\d+)*(${fP}|${hP})*(.*)`);var SN=()=>null;function yE(t,e){return SN(t,e)}function MN(t,e,n,r){let i=e.tView,s=t[U]&4096?4096:16,a=el(t,i,n,s,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),u=t[e.index];a[$c]=u;let c=t[Fs];return c!==null&&(a[Fs]=c.createEmbeddedView(i)),Lp(i,a,n),a}function vE(t,e){return!e||e.firstChild===null||NI(t)}function xN(t,e,n,r=!0){let i=e[ee];if(ZR(i,e,t,n),r){let s=Lf(n,t),a=e[ut],u=Ap(a,t[Gr]);u!==null&&QR(i,t[Ht],a,e,u,s)}let o=e[Ic];o!==null&&o.firstChild!==null&&(o.firstChild=null)}var Zs=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=RN;let t=e;return t})();function RN(){let t=Gt();return NN(t,$e())}var PN=Zs,yD=class extends PN{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Xc(this._hostTNode,this._hostLView)}get injector(){return new Hr(this._hostTNode,this._hostLView)}get parentInjector(){let e=_p(this._hostTNode,this._hostLView);if(fI(e)){let n=Ac(e,this._hostLView),r=bc(e),i=n[ee].data[r+8];return new Hr(i,n)}else return new Hr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=_E(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Pt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=yE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,vE(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!_R(e),a;if(s)a=n;else{let _=n||{};a=_.index,r=_.injector,i=_.projectableNodes,o=_.environmentInjector||_.ngModuleRef}let u=s?e:new co(ir(e)),c=r||this.parentInjector;if(!o&&u.ngModule==null){let v=(s?c:this.parentInjector).get(ct,null);v&&(o=v)}let l=ir(u.componentType??{}),d=yE(this._lContainer,l?.id??null),h=d?.firstChild??null,f=u.create(c,i,h,o);return this.insertImpl(f.hostView,a,vE(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Vx(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Je],c=new yD(u,u[Ht],u[Je]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return xN(s,i,o,r),e.attachToViewContainerRef(),CI(If(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=_E(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Vf(this._lContainer,n);r&&(Sc(If(this._lContainer),n),LI(r[ee],r))}detach(e){let n=this._adjustIndex(e,-1),r=Vf(this._lContainer,n);return r&&Sc(If(this._lContainer),n)!=null?new Qr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function _E(t){return t[Dc]}function If(t){return t[Dc]||(t[Dc]=[])}function NN(t,e){let n,r=e[t.index];return Vn(r)?n=r:(n=uD(r,e,null,t),e[t.index]=n,nl(e,n)),kN(n,e,t,r),new yD(n,t,e)}function ON(t,e){let n=t[ut],r=n.createComment(""),i=zt(e,t),o=Ap(n,i);return Rc(n,o,r,iP(n,i),!1),r}var kN=LN,FN=()=>!1;function VN(t,e,n){return FN(t,e,n)}function LN(t,e,n,r){if(t[Gr])return;let i;n.type&8?i=cn(r):i=ON(e,n),t[Gr]=i}var ar=class{},qs=class{};var Fc=class extends ar{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kc(this);let i=UE(e);this._bootstrapComponents=PI(i.bootstrap),this._r3Injector=xI(e,n,[{provide:ar,useValue:this},{provide:Zc,useValue:this.componentFactoryResolver},...r],wt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Vc=class extends qs{constructor(e){super(),this.moduleType=e}create(e){return new Fc(this.moduleType,e,[])}};function jN(t,e,n){return new Fc(t,e,n)}var ip=class extends ar{constructor(e){super(),this.componentFactoryResolver=new kc(this),this.instance=null;let n=new Us([...e.providers,{provide:ar,useValue:this},{provide:Zc,useValue:this.componentFactoryResolver}],e.parent||Dp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function il(t,e,n=null){return new ip({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var ei=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ke(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vD(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function BN(t,e,n,r,i,o,s,a,u){let c=e.consts,l=tl(e,t,4,s||null,Tc(c,a));oD(e,n,l,Tc(c,u)),vp(e,l);let d=l.tView=Pp(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function jp(t,e,n,r,i,o,s,a){let u=$e(),c=Zr(),l=t+sr,d=c.firstCreatePass?BN(l,c,u,e,n,r,i,o,s):c.data[l];Ks(d,!1);let h=UN(c,u,d,t);mp()&&Sp(c,u,h,d),Kr(h,u);let f=uD(h,u,h,d);return u[l]=f,nl(u,f),VN(f,d,u),lp(d)&&nD(c,u,d),s!=null&&rD(u,d,a),jp}var UN=$N;function $N(t,e,n,r){return yp(!0),e[ut].createComment("")}function qN(t,e,n,r){return vD(t,iI(),n)?e+AE(n)+r:Jc}function po(t,e,n){let r=$e(),i=iI();if(vD(r,i,e)){let o=Zr(),s=Jx();jP(o,s,r,t,e,r[ut],n,!1)}return po}function wE(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";Np(t,n,o[s],s,r)}function HN(t,e,n,r,i,o){let s=e.consts,a=Tc(s,i),u=tl(e,t,2,r,a);return oD(e,n,u,Tc(s,o)),u.attrs!==null&&tp(u,u.attrs,!1),u.mergedAttrs!==null&&tp(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function pe(t,e,n,r){let i=$e(),o=Zr(),s=sr+t,a=i[ut],u=o.firstCreatePass?HN(s,o,i,e,n,r):o.data[s],c=zN(o,i,u,a,e,t);i[s]=c;let l=lp(u);return Ks(u,!0),$I(a,c,u),(u.flags&32)!==32&&mp()&&Sp(o,i,c,u),Bx()===0&&Kr(c,i),Ux(),l&&(nD(o,i,u),tD(o,u,i)),r!==null&&rD(i,u),pe}function Me(){let t=Gt();rI()?Wx():(t=t.parent,Ks(t,!1));let e=t;Hx(e)&&zx(),$x();let n=Zr();return n.firstCreatePass&&(vp(n,t),GE(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&oR(e)&&wE(n,e,$e(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&sR(e)&&wE(n,e,$e(),e.stylesWithoutHost,!1),Me}function It(t,e,n,r){return pe(t,e,n,r),Me(),It}var zN=(t,e,n,r,i,o)=>(yp(!0),kI(r,i,tR()));var Lc="en-US";var GN=Lc;function WN(t){typeof t=="string"&&(GN=t.toLowerCase().replace(/_/g,"-"))}function go(t){return!!t&&typeof t.then=="function"}function _D(t){return!!t&&typeof t.subscribe=="function"}function Xs(t,e,n,r){let i=$e(),o=Zr(),s=Gt();return QN(o,i,i[ut],s,t,e,r),Xs}function KN(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Os],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function QN(t,e,n,r,i,o,s){let a=lp(r),c=t.firstCreatePass&&eN(t),l=e[On],d=JP(e),h=!0;if(r.type&3||s){let v=zt(r,e),m=s?s(v):v,I=d.length,R=s?P=>s(cn(P[r.index])):r.index,T=null;if(!s&&a&&(T=KN(t,e,i,r.index)),T!==null){let P=T.__ngLastListenerFn__||T;P.__ngNextListenerFn__=o,T.__ngLastListenerFn__=o,h=!1}else{o=IE(r,e,l,o,!1);let P=n.listen(m,i,o);d.push(o,P),c&&c.push(i,R,I,I+1)}}else o=IE(r,e,l,o,!1);let f=r.outputs,_;if(h&&f!==null&&(_=f[i])){let v=_.length;if(v)for(let m=0;m<v;m+=2){let I=_[m],R=_[m+1],B=e[I][R].subscribe(o),H=d.length;d.push(o,B),c&&c.push(i,r.index,H,-(H+1))}}}function EE(t,e,n,r){try{return on(6,e,n),n(r)!==!1}catch(i){return lD(t,i),!1}finally{on(7,e,n)}}function IE(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?cr(t.index,e):e;Op(a);let u=EE(e,n,r,s),c=o.__ngNextListenerFn__;for(;c;)u=EE(e,n,c,s)&&u,c=c.__ngNextListenerFn__;return i&&u===!1&&s.preventDefault(),u}}var Bp=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=XN;let t=e;return t})(),YN=Bp,ZN=class extends YN{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=MN(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new Qr(i)}};function XN(){return JN(Gt(),$e())}function JN(t,e){return t.type&4?new ZN(e,t,Xc(t,e)):null}function fn(t,e=""){let n=$e(),r=Zr(),i=t+sr,o=r.firstCreatePass?tl(r,i,1,e,null):r.data[i],s=eO(r,n,o,e,t);n[i]=s,mp()&&Sp(r,n,s,o),Ks(o,!1)}var eO=(t,e,n,r,i)=>(yp(!0),GR(e[ut],r));function Up(t){return wD("",t,""),Up}function wD(t,e,n){let r=$e(),i=qN(r,t,e,n);return i!==Jc&&tN(r,gp(),i),wD}var tO=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=AI(!1,r.type),o=i.length>0?il([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=O({token:e,providedIn:"environment",factory:()=>new e(D(ct))});let t=e;return t})();function ED(t){rl("NgStandalone"),t.getStandaloneInjector=e=>e.get(tO).getOrCreateStandaloneInjector(t)}var pc=null;function nO(t){pc!==null&&(t.defaultEncapsulation!==pc.defaultEncapsulation||t.preserveWhitespaces!==pc.preserveWhitespaces)||(pc=t)}var kn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},ID=new kn("17.1.3"),ol=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),op=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},sl=(()=>{let e=class e{compileModuleSync(r){return new Vc(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=UE(r),s=PI(o.declarations).reduce((a,u)=>{let c=ir(u);return c&&a.push(new co(c)),a},[]);return new op(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),rO=new M("");var $p=new M(""),Js=new M(""),al=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,qp||(iO(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{J.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(D(J),D(ul),D(Js))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),ul=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return qp?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function iO(t){qp=t}var qp,cl=new M(""),DD=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=C(cl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(go(s))r.push(s);else if(_D(s)){let a=new Promise((u,c)=>{s.subscribe({complete:u,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ll=new M("");function oO(t,e,n){let r=new Vc(n);return Promise.resolve(r)}function sO(){mw(()=>{throw new L(600,!1)})}function aO(t){return t.isBoundToModule}function uO(t,e,n){try{let r=n();return go(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function CD(t,e){return Array.isArray(e)?e.reduce(CD,t):N(N({},t),e)}var ti=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=C(KI),this.afterRenderEffectManager=C(Vp),this.componentTypes=[],this.components=[],this.isStable=C(ei).hasPendingTasks.pipe(j(r=>!r)),this._injector=C(ct)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Pc;if(!this._injector.get(DD).done){let f=!o&&BE(r),_=!1;throw new L(405,_)}let a;o?a=r:a=this._injector.get(Zc).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=aO(a)?void 0:this._injector.get(ar),c=i||a.selector,l=a.create(Wt.NULL,[],c,u),d=l.location.nativeElement,h=l.injector.get($p,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),_c(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new L(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let r=0;do{if(r===dD)throw new L(103,!1);let i=r===0;for(let{_lView:o,notifyErrorHandler:s}of this._views)!i&&!CE(o)||this.detectChangesInView(o,s,i);this.afterRenderEffectManager.execute(),r++}while(this._views.some(({_lView:i})=>CE(i)))}detectChangesInView(r,i,o){let s;o?(s=0,r[U]|=1024):r[U]&64?s=0:s=1,hD(r,i,s)}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;_c(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(ll,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>_c(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new L(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _c(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function DE(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}function CE(t){return hp(t)}var cO=(()=>{let e=class e{constructor(){this.zone=C(J),this.applicationRef=C(ti)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function lO(t){return[{provide:J,useFactory:t},{provide:uo,multi:!0,useFactory:()=>{let e=C(cO,{optional:!0});return()=>e.initialize()}},{provide:uo,multi:!0,useFactory:()=>{let e=C(fO);return()=>{e.initialize()}}},{provide:KI,useFactory:dO}]}function dO(){let t=C(J),e=C(ln);return n=>t.runOutsideAngular(()=>e.handleError(n))}function hO(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var fO=(()=>{let e=class e{constructor(){this.subscription=new Ae,this.initialized=!1,this.zone=C(J),this.pendingTasks=C(ei)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{J.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{J.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function pO(){return typeof $localize<"u"&&$localize.locale||Lc}var Hp=new M("",{providedIn:"root",factory:()=>C(Hp,Y.Optional|Y.SkipSelf)||pO()});var TD=new M(""),bD=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=gN(i?.ngZone,hO({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{let s=jN(r.moduleType,this.injector,lO(()=>o)),a=s.injector.get(ln,null);return o.runOutsideAngular(()=>{let u=o.onError.subscribe({next:c=>{a.handleError(c)}});s.onDestroy(()=>{_c(this._modules,s),u.unsubscribe()})}),uO(a,o,()=>{let u=s.injector.get(DD);return u.runInitializers(),u.donePromise.then(()=>{let c=s.injector.get(Hp,Lc);return WN(c||Lc),this._moduleDoBootstrap(s),s})})})}bootstrapModule(r,i=[]){let o=CD({},i);return oO(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(r){let i=r.injector.get(ti);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new L(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new L(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(TD,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(D(Wt))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Rs=null,AD=new M("");function gO(t){if(Rs&&!Rs.get(AD,!1))throw new L(400,!1);sO(),Rs=t;let e=t.get(bD);return vO(t),e}function zp(t,e,n=[]){let r=`Platform: ${e}`,i=new M(r);return(o=[])=>{let s=SD();if(!s||s.injector.get(AD,!1)){let a=[...n,...o,{provide:i,useValue:!0}];t?t(a):gO(mO(a,r))}return yO(i)}}function mO(t=[],e){return Wt.create({name:e,providers:[{provide:Kc,useValue:"platform"},{provide:TD,useValue:new Set([()=>Rs=null])},...t]})}function yO(t){let e=SD();if(!e)throw new L(401,!1);return e}function SD(){return Rs?.get(bD)??null}function vO(t){t.get(Cp,null)?.forEach(n=>n())}function Gp(){return!1}var MD=zp(null,"core",[]),xD=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(D(ti))},e.\u0275mod=De({type:e}),e.\u0275inj=Ie({});let t=e;return t})();function RD(t){let e=ir(t);if(!e)return null;let n=new co(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var FD=null;function ni(){return FD}function VD(t){FD??=t}var dl=class{},tt=new M(""),Yp=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(IO),providedIn:"platform"});let t=e;return t})(),LD=new M(""),IO=(()=>{let e=class e extends Yp{constructor(){super(),this._doc=C(tt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ni().getBaseHref(this._doc)}onPopState(r){let i=ni().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=ni().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Zp(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function PD(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Ln(t){return t&&t[0]!=="?"?"?"+t:t}var ri=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(Xp),providedIn:"root"});let t=e;return t})(),jD=new M(""),Xp=(()=>{let e=class e extends ri{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??C(tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Zp(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Ln(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Ln(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Ln(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(D(Yp),D(jD,8))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),BD=(()=>{let e=class e extends ri{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Zp(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Ln(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Ln(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(D(Yp),D(jD,8))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),yo=(()=>{let e=class e{constructor(r){this._subject=new Xe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=TO(PD(ND(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Ln(i))}normalize(r){return e.stripTrailingSlash(CO(this._basePath,ND(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ln(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ln(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Ln,e.joinWithSlash=Zp,e.stripTrailingSlash=PD,e.\u0275fac=function(i){return new(i||e)(D(ri))},e.\u0275prov=O({token:e,factory:()=>DO(),providedIn:"root"});let t=e;return t})();function DO(){return new yo(D(ri))}function CO(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function ND(t){return t.replace(/\/index.html$/,"")}function TO(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function hl(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Wp=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},UD=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new Wp(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let u=i.get(s);i.move(u,a),OD(u,o)}});for(let o=0,s=i.length;o<s;o++){let u=i.get(o).context;u.index=o,u.count=s,u.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);OD(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(hn(Zs),hn(Bp),hn(Rp))},e.\u0275dir=Yr({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function OD(t,e){t.context.$implicit=e.item}var $D=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=De({type:e}),e.\u0275inj=Ie({});let t=e;return t})(),Jp="browser",bO="server";function AO(t){return t===Jp}function ii(t){return t===bO}var qD=(()=>{let e=class e{};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>AO(C(et))?new Kp(C(tt),window):new Qp});let t=e;return t})(),Kp=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=SO(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function SO(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Qp=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},mo=class{};var ta=class{},pl=class{},oi=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var tg=class{encodeKey(e){return zD(e)}encodeValue(e){return zD(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function RO(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=n.get(s)||[];u.push(a),n.set(s,u)}),n}var PO=/%(\d[a-f0-9])/gi,NO={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function zD(t){return encodeURIComponent(t).replace(PO,(e,n)=>NO[n]??e)}function fl(t){return`${t}`}var lr=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new tg,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=RO(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(fl):[fl(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(fl(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(fl(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var ng=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function OO(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function GD(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function WD(t){return typeof Blob<"u"&&t instanceof Blob}function KD(t){return typeof FormData<"u"&&t instanceof FormData}function kO(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var ea=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(OO(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new oi,this.context??=new ng,!this.params)this.params=new lr,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+s}}}serializeBody(){return this.body===null?null:GD(this.body)||WD(this.body)||KD(this.body)||kO(this.body)||typeof this.body=="string"?this.body:this.body instanceof lr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||KD(this.body)?null:WD(this.body)?this.body.type||null:GD(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof lr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.body!==void 0?e.body:this.body,s=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,a=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,u=e.headers||this.headers,c=e.params||this.params,l=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),u)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new t(n,r,o,{params:c,headers:u,context:l,reportProgress:a,responseType:i,withCredentials:s})}},vo=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(vo||{}),na=class{constructor(e,n=yl.Ok,r="OK"){this.headers=e.headers||new oi,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},rg=class t extends na{constructor(e={}){super(e),this.type=vo.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},gl=class t extends na{constructor(e={}){super(e),this.type=vo.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ml=class extends na{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},yl=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(yl||{});function eg(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var FO=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof ea)s=r;else{let c;o.headers instanceof oi?c=o.headers:c=new oi(o.headers);let l;o.params&&(o.params instanceof lr?l=o.params:l=new lr({fromObject:o.params})),s=new ea(r,i,o.body!==void 0?o.body:null,{headers:c,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=F(s).pipe(Rn(c=>this.handler.handle(c)));if(r instanceof ea||o.observe==="events")return a;let u=a.pipe(Be(c=>c instanceof gl));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return u.pipe(j(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return u.pipe(j(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return u.pipe(j(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return u.pipe(j(c=>c.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new lr().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,eg(o,i))}post(r,i,o={}){return this.request("POST",r,eg(o,i))}put(r,i,o={}){return this.request("PUT",r,eg(o,i))}};e.\u0275fac=function(i){return new(i||e)(D(ta))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function XD(t,e){return e(t)}function VO(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function LO(t,e,n){return(r,i)=>dn(n,()=>e(r,o=>t(o,i)))}var jO=new M(""),ig=new M(""),BO=new M(""),UO=new M("");function $O(){let t=null;return(e,n)=>{t===null&&(t=(C(jO,{optional:!0})??[]).reduceRight(VO,XD));let r=C(ei),i=r.add();return t(e,n).pipe(tr(()=>r.remove(i)))}}var QD=(()=>{let e=class e extends ta{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=C(ei);let o=C(UO,{optional:!0});this.backend=o??r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(ig),...this.injector.get(BO,[])]));this.chain=o.reduceRight((s,a)=>LO(s,a,this.injector),XD)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(tr(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(D(pl),D(ct))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();var qO=/^\)\]\}',?\n/;function HO(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var YD=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new L(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?ie(i.\u0275loadImpl()):F(null)).pipe(ye(()=>new Z(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((m,I)=>a.setRequestHeader(m,I.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let m=r.detectContentTypeHeader();m!==null&&a.setRequestHeader("Content-Type",m)}if(r.responseType){let m=r.responseType.toLowerCase();a.responseType=m!=="json"?m:"text"}let u=r.serializeBody(),c=null,l=()=>{if(c!==null)return c;let m=a.statusText||"OK",I=new oi(a.getAllResponseHeaders()),R=HO(a)||r.url;return c=new rg({headers:I,status:a.status,statusText:m,url:R}),c},d=()=>{let{headers:m,status:I,statusText:R,url:T}=l(),P=null;I!==yl.NoContent&&(P=typeof a.response>"u"?a.responseText:a.response),I===0&&(I=P?yl.Ok:0);let B=I>=200&&I<300;if(r.responseType==="json"&&typeof P=="string"){let H=P;P=P.replace(qO,"");try{P=P!==""?JSON.parse(P):null}catch(de){P=H,B&&(B=!1,P={error:de,text:P})}}B?(s.next(new gl({body:P,headers:m,status:I,statusText:R,url:T||void 0})),s.complete()):s.error(new ml({error:P,headers:m,status:I,statusText:R,url:T||void 0}))},h=m=>{let{url:I}=l(),R=new ml({error:m,status:a.status||0,statusText:a.statusText||"Unknown Error",url:I||void 0});s.error(R)},f=!1,_=m=>{f||(s.next(l()),f=!0);let I={type:vo.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(I.total=m.total),r.responseType==="text"&&a.responseText&&(I.partialText=a.responseText),s.next(I)},v=m=>{let I={type:vo.UploadProgress,loaded:m.loaded};m.lengthComputable&&(I.total=m.total),s.next(I)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),r.reportProgress&&(a.addEventListener("progress",_),u!==null&&a.upload&&a.upload.addEventListener("progress",v)),a.send(u),s.next({type:vo.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),r.reportProgress&&(a.removeEventListener("progress",_),u!==null&&a.upload&&a.upload.removeEventListener("progress",v)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(D(mo))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),JD=new M(""),zO="XSRF-TOKEN",GO=new M("",{providedIn:"root",factory:()=>zO}),WO="X-XSRF-TOKEN",KO=new M("",{providedIn:"root",factory:()=>WO}),vl=class{},QO=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=hl(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(D(tt),D(et),D(GO))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function YO(t,e){let n=t.url.toLowerCase();if(!C(JD)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=C(vl).getToken(),i=C(KO);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var e0=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(e0||{});function ZO(t,e){return{\u0275kind:t,\u0275providers:e}}function XO(...t){let e=[FO,YD,QD,{provide:ta,useExisting:QD},{provide:pl,useExisting:YD},{provide:ig,useValue:YO,multi:!0},{provide:JD,useValue:!0},{provide:vl,useClass:QO}];for(let n of t)e.push(...n.\u0275providers);return Wc(e)}var ZD=new M("");function JO(){return ZO(e0.LegacyInterceptors,[{provide:ZD,useFactory:$O},{provide:ig,useExisting:ZD,multi:!0}])}var t0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=De({type:e}),e.\u0275inj=Ie({providers:[XO(JO())]});let t=e;return t})();var ag=class extends dl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},ug=class t extends ag{static makeCurrent(){VD(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=e1();return n==null?null:t1(n)}resetBaseElement(){ra=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return hl(document.cookie,e)}},ra=null;function e1(){return ra=ra||document.querySelector("base"),ra?ra.getAttribute("href"):null}function t1(t){return new URL(t,document.baseURI).pathname}var cg=class{addToWindow(e){Et.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new L(5103,!1);return o},Et.getAllAngularTestabilities=()=>e.getAllTestabilities(),Et.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=Et.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Et.frameworkStabilizers||(Et.frameworkStabilizers=[]),Et.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?ni().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},n1=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),lg=new M(""),o0=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new L(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(D(lg),D(J))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),_l=class{constructor(e){this._doc=e}},og="ng-app-id",s0=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ii(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${og}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(og),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(og,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(D(tt),D(Qc),D(Tp,8),D(et))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),sg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},hg=/%COMP%/g,a0="%COMP%",r1=`_nghost-${a0}`,i1=`_ngcontent-${a0}`,o1=!0,s1=new M("",{providedIn:"root",factory:()=>o1});function a1(t){return i1.replace(hg,t)}function u1(t){return r1.replace(hg,t)}function u0(t,e){return e.map(n=>n.replace(hg,t))}var n0=(()=>{let e=class e{constructor(r,i,o,s,a,u,c,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=u,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=ii(u),this.defaultRenderer=new ia(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===an.ShadowDom&&(i=fe(N({},i),{encapsulation:an.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof wl?o.applyToHost(r):o instanceof oa&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,u=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case an.Emulated:s=new wl(c,l,i,this.appId,d,a,u,h);break;case an.ShadowDom:return new dg(c,l,r,i,a,u,this.nonce,h);default:s=new oa(c,l,i,d,a,u,h);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(D(o0),D(s0),D(Qc),D(s1),D(tt),D(et),D(J),D(Tp))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),ia=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(sg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(r0(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(r0(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new L(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=sg[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=sg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Xr.DashCase|Xr.Important)?e.style.setProperty(n,r,i&Xr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Xr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=ni().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function r0(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var dg=class extends ia{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=u0(i.id,i.styles);for(let l of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},oa=class extends ia{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?u0(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},wl=class extends oa{constructor(e,n,r,i,o,s,a,u){let c=i+"-"+r.id;super(e,n,r,o,s,a,u,c),this.contentAttr=a1(c),this.hostAttr=u1(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},c1=(()=>{let e=class e extends _l{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(D(tt))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),i0=["alt","control","meta","shift"],l1={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},d1={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},h1=(()=>{let e=class e extends _l{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ni().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),i0.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let o=l1[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),i0.forEach(a=>{if(a!==o){let u=d1[a];u(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(D(tt))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function f1(){ug.makeCurrent()}function p1(){return new ln}function g1(){return RI(document),document}var m1=[{provide:et,useValue:Jp},{provide:Cp,useValue:f1,multi:!0},{provide:tt,useFactory:g1,deps:[]}],c0=zp(MD,"browser",m1),y1=new M(""),v1=[{provide:Js,useClass:cg,deps:[]},{provide:$p,useClass:al,deps:[J,ul,Js]},{provide:al,useClass:al,deps:[J,ul,Js]}],_1=[{provide:Kc,useValue:"root"},{provide:ln,useFactory:p1,deps:[]},{provide:lg,useClass:c1,multi:!0,deps:[tt,J,et]},{provide:lg,useClass:h1,multi:!0,deps:[tt]},n0,s0,o0,{provide:$s,useExisting:n0},{provide:mo,useClass:n1,deps:[]},[]],l0=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:Qc,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(D(y1,12))},e.\u0275mod=De({type:e}),e.\u0275inj=Ie({providers:[..._1,...v1],imports:[$D,xD]});let t=e;return t})();var d0=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(D(tt))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var W="primary",wa=Symbol("RouteTitle"),yg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Do(t){return new yg(t)}function E1(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function I1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!pn(t[n],e[n]))return!1;return!0}function pn(t,e){let n=t?vg(t):void 0,r=e?vg(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!E0(t[i],e[i]))return!1;return!0}function vg(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function E0(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function I0(t){return t.length>0?t[t.length-1]:null}function pr(t){return af(t)?t:go(t)?ie(Promise.resolve(t)):F(t)}var D1={exact:C0,subset:T0},D0={exact:C1,subset:T1,ignored:()=>!0};function f0(t,e,n){return D1[n.paths](t.root,e.root,n.matrixParams)&&D0[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function C1(t,e){return pn(t,e)}function C0(t,e,n){if(!ai(t.segments,e.segments)||!Dl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!C0(t.children[r],e.children[r],n))return!1;return!0}function T1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>E0(t[n],e[n]))}function T0(t,e,n){return b0(t,e,e.segments,n)}function b0(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ai(i,n)||e.hasChildren()||!Dl(i,n,r))}else if(t.segments.length===n.length){if(!ai(t.segments,n)||!Dl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!T0(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ai(t.segments,i)||!Dl(t.segments,i,r)||!t.children[W]?!1:b0(t.children[W],e,o,r)}}function Dl(t,e,n){return e.every((r,i)=>D0[n](t[i].parameters,r.parameters))}var dr=class{constructor(e=new se([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Do(this.queryParams),this._queryParamMap}toString(){return S1.serialize(this)}},se=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Cl(this)}},si=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Do(this.parameters),this._parameterMap}toString(){return S0(this)}};function b1(t,e){return ai(t,e)&&t.every((n,r)=>pn(n.parameters,e[r].parameters))}function ai(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function A1(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===W&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==W&&(n=n.concat(e(i,r)))}),n}var Ea=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>new ha,providedIn:"root"});let t=e;return t})(),ha=class{parse(e){let n=new wg(e);return new dr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${sa(e.root,!0)}`,r=R1(e.queryParams),i=typeof e.fragment=="string"?`#${M1(e.fragment)}`:"";return`${n}${r}${i}`}},S1=new ha;function Cl(t){return t.segments.map(e=>S0(e)).join("/")}function sa(t,e){if(!t.hasChildren())return Cl(t);if(e){let n=t.children[W]?sa(t.children[W],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==W&&r.push(`${i}:${sa(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=A1(t,(r,i)=>i===W?[sa(t.children[W],!1)]:[`${i}:${sa(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[W]!=null?`${Cl(t)}/${n[0]}`:`${Cl(t)}/(${n.join("//")})`}}function A0(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function El(t){return A0(t).replace(/%3B/gi,";")}function M1(t){return encodeURI(t)}function _g(t){return A0(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tl(t){return decodeURIComponent(t)}function p0(t){return Tl(t.replace(/\+/g,"%20"))}function S0(t){return`${_g(t.path)}${x1(t.parameters)}`}function x1(t){return Object.entries(t).map(([e,n])=>`;${_g(e)}=${_g(n)}`).join("")}function R1(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${El(n)}=${El(i)}`).join("&"):`${El(n)}=${El(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var P1=/^[^\/()?;#]+/;function fg(t){let e=t.match(P1);return e?e[0]:""}var N1=/^[^\/()?;=#]+/;function O1(t){let e=t.match(N1);return e?e[0]:""}var k1=/^[^=?&#]+/;function F1(t){let e=t.match(k1);return e?e[0]:""}var V1=/^[^&#]+/;function L1(t){let e=t.match(V1);return e?e[0]:""}var wg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new se([],{}):new se([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[W]=new se(e,n)),r}parseSegment(){let e=fg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new L(4009,!1);return this.capture(e),new si(Tl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=O1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=fg(this.remaining);i&&(r=i,this.capture(r))}e[Tl(n)]=Tl(r)}parseQueryParam(e){let n=F1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=L1(this.remaining);s&&(r=s,this.capture(r))}let i=p0(n),o=p0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=fg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new L(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=W);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[W]:new se([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new L(4011,!1)}};function M0(t){return t.segments.length>0?new se([],{[W]:t}):t}function x0(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=x0(i);if(r===W&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new se(t.segments,e);return j1(n)}function j1(t){if(t.numberOfChildren===1&&t.children[W]){let e=t.children[W];return new se(t.segments.concat(e.segments),e.children)}return t}function Co(t){return t instanceof dr}function B1(t,e,n=null,r=null){let i=R0(t);return P0(i,e,n,r)}function R0(t){let e;function n(o){let s={};for(let u of o.children){let c=n(u);s[u.outlet]=c}let a=new se(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=M0(r);return e??i}function P0(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return pg(i,i,i,n,r);let o=U1(e);if(o.toRoot())return pg(i,i,new se([],{}),n,r);let s=$1(o,i,t),a=s.processChildren?ca(s.segmentGroup,s.index,o.commands):O0(s.segmentGroup,s.index,o.commands);return pg(i,s.segmentGroup,a,n,r)}function bl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function fa(t){return typeof t=="object"&&t!=null&&t.outlets}function pg(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,c])=>{o[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`});let s;t===e?s=n:s=N0(t,e,n);let a=M0(x0(s));return new dr(a,o,i)}function N0(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=N0(o,e,n)}),new se(t.segments,r)}var Al=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&bl(r[0]))throw new L(4003,!1);let i=r.find(fa);if(i&&i!==I0(r))throw new L(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function U1(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Al(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Al(n,e,r)}var Eo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function $1(t,e,n){if(t.isAbsolute)return new Eo(e,!0,0);if(!n)return new Eo(e,!1,NaN);if(n.parent===null)return new Eo(n,!0,0);let r=bl(t.commands[0])?0:1,i=n.segments.length-1+r;return q1(n,i,t.numberOfDoubleDots)}function q1(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new L(4005,!1);i=r.segments.length}return new Eo(r,!1,i-o)}function H1(t){return fa(t[0])?t[0].outlets:{[W]:t}}function O0(t,e,n){if(t??=new se([],{}),t.segments.length===0&&t.hasChildren())return ca(t,e,n);let r=z1(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new se(t.segments.slice(0,r.pathIndex),{});return o.children[W]=new se(t.segments.slice(r.pathIndex),t.children),ca(o,0,i)}else return r.match&&i.length===0?new se(t.segments,{}):r.match&&!t.hasChildren()?Eg(t,e,n):r.match?ca(t,0,i):Eg(t,e,n)}function ca(t,e,n){if(n.length===0)return new se(t.segments,{});{let r=H1(n),i={};if(Object.keys(r).some(o=>o!==W)&&t.children[W]&&t.numberOfChildren===1&&t.children[W].segments.length===0){let o=ca(t.children[W],e,n);return new se(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=O0(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new se(t.segments,i)}}function z1(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(fa(a))break;let u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!m0(u,c,s))return o;r+=2}else{if(!m0(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Eg(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(fa(o)){let u=G1(o.outlets);return new se(r,u)}if(i===0&&bl(n[0])){let u=t.segments[e];r.push(new si(u.path,g0(n[0]))),i++;continue}let s=fa(o)?o.outlets[W]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&bl(a)?(r.push(new si(s,g0(a))),i+=2):(r.push(new si(s,{})),i++)}return new se(r,{})}function G1(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Eg(new se([],{}),0,r))}),e}function g0(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function m0(t,e,n){return t==n.path&&pn(e,n.parameters)}var la="imperative",qe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(qe||{}),Ot=class{constructor(e,n){this.id=e,this.url=n}},To=class extends Ot{constructor(e,n,r="imperative",i=null){super(e,n),this.type=qe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},jn=class extends Ot{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=qe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Nt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Nt||{}),Sl=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Sl||{}),hr=class extends Ot{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=qe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},fr=class extends Ot{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=qe.NavigationSkipped}},pa=class extends Ot{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=qe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ml=class extends Ot{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ig=class extends Ot{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dg=class extends Ot{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=qe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Cg=class extends Ot{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tg=class extends Ot{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bg=class{constructor(e){this.route=e,this.type=qe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ag=class{constructor(e){this.route=e,this.type=qe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Sg=class{constructor(e){this.snapshot=e,this.type=qe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mg=class{constructor(e){this.snapshot=e,this.type=qe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xg=class{constructor(e){this.snapshot=e,this.type=qe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rg=class{constructor(e){this.snapshot=e,this.type=qe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xl=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=qe.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ga=class{},ma=class{constructor(e){this.url=e}};var Pg=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ia,this.attachRef=null}},Ia=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Pg,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Rl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Ng(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Ng(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Og(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Og(e,this._root).map(n=>n.value)}};function Ng(t,e){if(t===e.value)return e;for(let n of e.children){let r=Ng(t,n);if(r)return r}return null}function Og(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Og(t,n);if(r.length)return r.unshift(e),r}return[]}var Dt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function wo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Pl=class extends Rl{constructor(e,n){super(e),this.snapshot=n,Hg(this,e)}toString(){return this.snapshot.toString()}};function k0(t){let e=W1(t),n=new Ke([new si("",{})]),r=new Ke({}),i=new Ke({}),o=new Ke({}),s=new Ke(""),a=new bo(n,r,o,s,i,W,t,e.root);return a.snapshot=e.root,new Pl(new Dt(a,[]),e)}function W1(t){let e={},n={},r={},i="",o=new ya([],e,r,i,n,W,t,null,{});return new Nl("",new Dt(o,[]))}var bo=class{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(j(c=>c[wa]))??F(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(j(e=>Do(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(j(e=>Do(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function qg(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:N(N({},e.params),t.params),data:N(N({},e.data),t.data),resolve:N(N(N(N({},t.data),e.data),i?.data),t._resolvedData)}:r={params:N({},t.params),data:N({},t.data),resolve:N(N({},t.data),t._resolvedData??{})},i&&V0(i)&&(r.resolve[wa]=i.title),r}var ya=class{get title(){return this.data?.[wa]}constructor(e,n,r,i,o,s,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Do(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Do(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Nl=class extends Rl{constructor(e,n){super(n),this.url=e,Hg(this,n)}toString(){return F0(this._root)}};function Hg(t,e){e.value._routerState=t,e.children.forEach(n=>Hg(t,n))}function F0(t){let e=t.children.length>0?` { ${t.children.map(F0).join(", ")} } `:"";return`${t.value}${e}`}function gg(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,pn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),pn(e.params,n.params)||t.paramsSubject.next(n.params),I1(e.url,n.url)||t.urlSubject.next(n.url),pn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function kg(t,e){let n=pn(t.params,e.params)&&b1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||kg(t.parent,e.parent))}function V0(t){return typeof t.title=="string"||t.title===null}var K1=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=W,this.activateEvents=new Xe,this.deactivateEvents=new Xe,this.attachEvents=new Xe,this.detachEvents=new Xe,this.parentContexts=C(Ia),this.location=C(Zs),this.changeDetector=C(Ys),this.environmentInjector=C(ct),this.inputBinder=C(Ll,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new L(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new L(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new L(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new L(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new Fg(r,u,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Yr({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ws]});let t=e;return t})(),Fg=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===bo?this.route:e===Ia?this.childContexts:this.parent.get(e,n)}},Ll=new M(""),y0=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=Ss([i.queryParams,i.params,i.data]).pipe(ye(([s,a,u],c)=>(u=N(N(N({},s),a),u),c===0?F(u):Promise.resolve(u)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=RD(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,s[u])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function Q1(t,e,n){let r=va(t,e._root,n?n._root:void 0);return new Pl(r,e)}function va(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Y1(t,e,n);return new Dt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>va(t,a)),s}}let r=Z1(e.value),i=e.children.map(o=>va(t,o));return new Dt(r,i)}}function Y1(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return va(t,r,i);return va(t,r)})}function Z1(t){return new bo(new Ke(t.url),new Ke(t.params),new Ke(t.queryParams),new Ke(t.fragment),new Ke(t.data),t.outlet,t.component,t)}var L0="ngNavigationCancelingError";function j0(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Co(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=B0(!1,Nt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function B0(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[L0]=!0,n.cancellationCode=e,n}function X1(t){return U0(t)&&Co(t.url)}function U0(t){return!!t&&t[L0]}var J1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ur({type:e,selectors:[["ng-component"]],standalone:!0,features:[ED],decls:1,vars:0,template:function(i,o){i&1&&It(0,"router-outlet")},dependencies:[K1],encapsulation:2});let t=e;return t})();function ek(t,e){return t.providers&&!t._injector&&(t._injector=il(t.providers,e,`Route: ${t.path}`)),t._injector??e}function zg(t){let e=t.children&&t.children.map(zg),n=e?fe(N({},t),{children:e}):N({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==W&&(n.component=J1),n}function gn(t){return t.outlet||W}function tk(t,e){let n=t.filter(r=>gn(r)===e);return n.push(...t.filter(r=>gn(r)!==e)),n}function Da(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var nk=(t,e,n,r)=>j(i=>(new Vg(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Vg=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),gg(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=wo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=wo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=wo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=wo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Rg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Mg(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(gg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),gg(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Da(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},Ol=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Io=class{constructor(e,n){this.component=e,this.route=n}};function rk(t,e,n){let r=t._root,i=e?e._root:null;return aa(r,i,n,[r.value])}function ik(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function So(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!SE(t)?t:e.get(t):r}function aa(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=wo(e);return t.children.forEach(s=>{ok(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>da(a,n.getContext(s),i)),i}function ok(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=sk(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ol(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?aa(t,e,a?a.children:null,r,i):aa(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Io(a.outlet.component,s))}else s&&da(e,a,i),i.canActivateChecks.push(new Ol(r)),o.component?aa(t,null,a?a.children:null,r,i):aa(t,null,n,r,i);return i}function sk(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ai(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ai(t.url,e.url)||!pn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kg(t,e)||!pn(t.queryParams,e.queryParams);case"paramsChange":default:return!kg(t,e)}}function da(t,e,n){let r=wo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?da(s,e.children.getContext(o),n):da(s,null,n):da(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Io(e.outlet.component,i)):n.canDeactivateChecks.push(new Io(null,i)):n.canDeactivateChecks.push(new Io(null,i))}function Ca(t){return typeof t=="function"}function ak(t){return typeof t=="boolean"}function uk(t){return t&&Ca(t.canLoad)}function ck(t){return t&&Ca(t.canActivate)}function lk(t){return t&&Ca(t.canActivateChild)}function dk(t){return t&&Ca(t.canDeactivate)}function hk(t){return t&&Ca(t.canMatch)}function $0(t){return t instanceof xn||t?.name==="EmptyError"}var Il=Symbol("INITIAL_VALUE");function Ao(){return ye(t=>Ss(t.map(e=>e.pipe(Pn(1),$r(Il)))).pipe(j(e=>{for(let n of e)if(n!==!0){if(n===Il)return Il;if(n===!1||n instanceof dr)return n}return!0}),Be(e=>e!==Il),Pn(1)))}function fk(t,e){return Ne(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?F(fe(N({},n),{guardsResult:!0})):pk(s,r,i,t).pipe(Ne(a=>a&&ak(a)?gk(r,o,t,e):F(a)),j(a=>fe(N({},n),{guardsResult:a})))})}function pk(t,e,n,r){return ie(t).pipe(Ne(i=>wk(i.component,i.route,n,e,r)),Mt(i=>i!==!0,!0))}function gk(t,e,n,r){return ie(e).pipe(Rn(i=>Xi(yk(i.route.parent,r),mk(i.route,r),_k(t,i.path,n),vk(t,i.route,n))),Mt(i=>i!==!0,!0))}function mk(t,e){return t!==null&&e&&e(new xg(t)),F(!0)}function yk(t,e){return t!==null&&e&&e(new Sg(t)),F(!0)}function vk(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return F(!0);let i=r.map(o=>cc(()=>{let s=Da(e)??n,a=So(o,s),u=ck(a)?a.canActivate(e,t):dn(s,()=>a(e,t));return pr(u).pipe(Mt())}));return F(i).pipe(Ao())}function _k(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>ik(s)).filter(s=>s!==null).map(s=>cc(()=>{let a=s.guards.map(u=>{let c=Da(s.node)??n,l=So(u,c),d=lk(l)?l.canActivateChild(r,t):dn(c,()=>l(r,t));return pr(d).pipe(Mt())});return F(a).pipe(Ao())}));return F(o).pipe(Ao())}function wk(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return F(!0);let s=o.map(a=>{let u=Da(e)??i,c=So(a,u),l=dk(c)?c.canDeactivate(t,e,n,r):dn(u,()=>c(t,e,n,r));return pr(l).pipe(Mt())});return F(s).pipe(Ao())}function Ek(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return F(!0);let o=i.map(s=>{let a=So(s,t),u=uk(a)?a.canLoad(e,n):dn(t,()=>a(e,n));return pr(u)});return F(o).pipe(Ao(),q0(r))}function q0(t){return ef(Se(e=>{if(Co(e))throw j0(t,e)}),j(e=>e===!0))}function Ik(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return F(!0);let o=i.map(s=>{let a=So(s,t),u=hk(a)?a.canMatch(e,n):dn(t,()=>a(e,n));return pr(u)});return F(o).pipe(Ao(),q0(r))}var _a=class{constructor(e){this.segmentGroup=e||null}},kl=class extends Error{constructor(e){super(),this.urlTree=e}};function _o(t){return Zi(new _a(t))}function Dk(t){return Zi(new L(4e3,!1))}function Ck(t){return Zi(B0(!1,Nt.GuardRejected))}var Lg=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return F(r);if(i.numberOfChildren>1||!i.children[W])return Dk(e.redirectTo);i=i.children[W]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new kl(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new dr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new se(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new L(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},jg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Tk(t,e,n,r,i){let o=Gg(t,e,n);return o.matched?(r=ek(e,r),Ik(r,e,n,i).pipe(j(s=>s===!0?o:N({},jg)))):F(o)}function Gg(t,e,n){if(e.path==="**")return bk(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?N({},jg):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||E1)(n,t,e);if(!i)return N({},jg);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?N(N({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function bk(t){return{matched:!0,parameters:t.length>0?I0(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function v0(t,e,n,r){return n.length>0&&Mk(t,n,r)?{segmentGroup:new se(e,Sk(r,new se(n,t.children))),slicedSegments:[]}:n.length===0&&xk(t,n,r)?{segmentGroup:new se(t.segments,Ak(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new se(t.segments,t.children),slicedSegments:n}}function Ak(t,e,n,r){let i={};for(let o of n)if(jl(t,e,o)&&!r[gn(o)]){let s=new se([],{});i[gn(o)]=s}return N(N({},r),i)}function Sk(t,e){let n={};n[W]=e;for(let r of t)if(r.path===""&&gn(r)!==W){let i=new se([],{});n[gn(r)]=i}return n}function Mk(t,e,n){return n.some(r=>jl(t,e,r)&&gn(r)!==W)}function xk(t,e,n){return n.some(r=>jl(t,e,r))}function jl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Rk(t,e,n,r){return gn(t)!==r&&(r===W||!jl(e,n,t))?!1:Gg(e,t,n).matched}function Pk(t,e,n){return e.length===0&&!t.children[n]}var Bg=class{};function Nk(t,e,n,r,i,o,s="emptyOnly"){return new Ug(t,e,n,r,i,s,o).recognize()}var Ok=31,Ug=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Lg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new L(4002,`'${e.segmentGroup}'`)}recognize(){let e=v0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(j(n=>{let r=new ya([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,{},W,this.rootComponentType,null,{}),i=new Dt(r,n),o=new Nl("",i),s=B1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,W).pipe(Jn(r=>{if(r instanceof kl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof _a?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=qg(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(j(o=>o instanceof Dt?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return ie(i).pipe(Rn(o=>{let s=r.children[o],a=tk(n,o);return this.processSegmentGroup(e,a,s,o)}),Ur((o,s)=>(o.push(...s),o)),er(null),df(),Ne(o=>{if(o===null)return _o(r);let s=H0(o);return kk(s),F(s)}))}processSegment(e,n,r,i,o,s){return ie(n).pipe(Rn(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(Jn(u=>{if(u instanceof _a)return F(null);throw u}))),Mt(a=>!!a),Jn(a=>{if($0(a))return Pk(r,i,o)?F(new Bg):_o(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return Rk(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):_o(i):_o(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:u,positionalParamSegments:c,remainingSegments:l}=Gg(n,i,o);if(!a)return _o(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Ok&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,d).pipe(Ne(h=>this.processSegment(e,r,n,h.concat(l),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=Tk(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(ye(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ye(({routes:u})=>{let c=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new ya(l,h,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Vk(r),gn(r),r.component??r._loadedComponent??null,r,Lk(r)),{segmentGroup:_,slicedSegments:v}=v0(n,l,d,u);if(v.length===0&&_.hasChildren())return this.processChildren(c,u,_).pipe(j(I=>I===null?null:new Dt(f,I)));if(u.length===0&&v.length===0)return F(new Dt(f,[]));let m=gn(r)===o;return this.processSegment(c,u,_,v,m?W:o,!0).pipe(j(I=>new Dt(f,I instanceof Dt?[I]:[])))}))):_o(n)))}getChildConfig(e,n,r){return n.children?F({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?F({routes:n._loadedRoutes,injector:n._loadedInjector}):Ek(e,n,r,this.urlSerializer).pipe(Ne(i=>i?this.configLoader.loadChildren(e,n).pipe(Se(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):Ck(n))):F({routes:[],injector:e})}};function kk(t){t.sort((e,n)=>e.value.outlet===W?-1:n.value.outlet===W?1:e.value.outlet.localeCompare(n.value.outlet))}function Fk(t){let e=t.value.routeConfig;return e&&e.path===""}function H0(t){let e=[],n=new Set;for(let r of t){if(!Fk(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=H0(r.children);e.push(new Dt(r.value,i))}return e.filter(r=>!n.has(r))}function Vk(t){return t.data||{}}function Lk(t){return t.resolve||{}}function jk(t,e,n,r,i,o){return Ne(s=>Nk(t,e,n,r,s.extractedUrl,i,o).pipe(j(({state:a,tree:u})=>fe(N({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function Bk(t,e){return Ne(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return F(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let c of z0(u))s.add(c);let a=0;return ie(s).pipe(Rn(u=>o.has(u)?Uk(u,r,t,e):(u.data=qg(u,u.parent,t).resolve,F(void 0))),Se(()=>a++),Ji(1),Ne(u=>a===s.size?F(n):gt))})}function z0(t){let e=t.children.map(n=>z0(n)).flat();return[t,...e]}function Uk(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!V0(i)&&(o[wa]=i.title),$k(o,t,e,r).pipe(j(s=>(t._resolvedData=s,t.data=qg(t,t.parent,n).resolve,null)))}function $k(t,e,n,r){let i=vg(t);if(i.length===0)return F({});let o={};return ie(i).pipe(Ne(s=>qk(t[s],e,n,r).pipe(Mt(),Se(a=>{o[s]=a}))),Ji(1),cf(o),Jn(s=>$0(s)?gt:Zi(s)))}function qk(t,e,n,r){let i=Da(e)??r,o=So(t,i),s=o.resolve?o.resolve(e,n):dn(i,()=>o(e,n));return pr(s)}function mg(t){return ye(e=>{let n=t(e);return n?ie(n).pipe(j(()=>e)):F(e)})}var G0=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===W);return i}getResolvedTitleForRoute(r){return r.data[wa]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(Hk),providedIn:"root"});let t=e;return t})(),Hk=(()=>{let e=class e extends G0{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(D(d0))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ta=new M("",{providedIn:"root",factory:()=>({})}),Fl=new M(""),Wg=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=C(sl)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return F(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=pr(r.loadComponent()).pipe(j(W0),Se(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),tr(()=>{this.componentLoaders.delete(r)})),o=new Wi(i,()=>new je).pipe(Gi());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return F({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=zk(i,this.compiler,r,this.onLoadEndListener).pipe(tr(()=>{this.childrenLoaders.delete(i)})),a=new Wi(s,()=>new je).pipe(Gi());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function zk(t,e,n,r){return pr(t.loadChildren()).pipe(j(W0),Ne(i=>i instanceof qs||Array.isArray(i)?F(i):ie(e.compileModuleAsync(i))),j(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Fl,[],{optional:!0,self:!0}).flat()),{routes:s.map(zg),injector:o}}))}function Gk(t){return t&&typeof t=="object"&&"default"in t}function W0(t){return Gk(t)?t.default:t}var Kg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(Wk),providedIn:"root"});let t=e;return t})(),Wk=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),K0=new M(""),Q0=new M("");function Kk(t,e,n){let r=t.get(Q0),i=t.get(tt);return t.get(J).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(c=>{o=c}),a=i.startViewTransition(()=>(o(),Qk(t))),{onViewTransitionCreated:u}=r;return u&&dn(t,()=>u({transition:a,from:e,to:n})),s})}function Qk(t){return new Promise(e=>{Fp(e,{injector:t})})}var Qg=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new je,this.transitionAbortSubject=new je,this.configLoader=C(Wg),this.environmentInjector=C(ct),this.urlSerializer=C(Ea),this.rootContexts=C(Ia),this.location=C(yo),this.inputBindingEnabled=C(Ll,{optional:!0})!==null,this.titleStrategy=C(G0),this.options=C(Ta,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=C(Kg),this.createViewTransition=C(K0,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>F(void 0),this.rootComponentType=null;let r=o=>this.events.next(new bg(o)),i=o=>this.events.next(new Ag(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(fe(N(N({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Ke({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:la,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Be(s=>s.id!==0),j(s=>fe(N({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),ye(s=>{this.currentTransition=s;let a=!1,u=!1;return F(s).pipe(Se(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?fe(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ye(c=>{let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new fr(c.id,this.urlSerializer.serialize(c.rawUrl),h,Sl.IgnoredSameUrlNavigation)),c.resolve(null),gt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return F(c).pipe(ye(h=>{let f=this.transitions?.getValue();return this.events.next(new To(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?gt:Promise.resolve(h)}),jk(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Se(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=fe(N({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Ml(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:f,source:_,restoredState:v,extras:m}=c,I=new To(h,this.urlSerializer.serialize(f),_,v);this.events.next(I);let R=k0(this.rootComponentType).snapshot;return this.currentTransition=s=fe(N({},c),{targetSnapshot:R,urlAfterRedirects:f,extras:fe(N({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,F(s)}else{let h="";return this.events.next(new fr(c.id,this.urlSerializer.serialize(c.extractedUrl),h,Sl.IgnoredByUrlHandlingStrategy)),c.resolve(null),gt}}),Se(c=>{let l=new Ig(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),j(c=>(this.currentTransition=s=fe(N({},c),{guards:rk(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),fk(this.environmentInjector,c=>this.events.next(c)),Se(c=>{if(s.guardsResult=c.guardsResult,Co(c.guardsResult))throw j0(this.urlSerializer,c.guardsResult);let l=new Dg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Be(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Nt.GuardRejected),!1)),mg(c=>{if(c.guards.canActivateChecks.length)return F(c).pipe(Se(l=>{let d=new Cg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),ye(l=>{let d=!1;return F(l).pipe(Bk(this.paramsInheritanceStrategy,this.environmentInjector),Se({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Nt.NoDataFromResolver)}}))}),Se(l=>{let d=new Tg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),mg(c=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Se(f=>{d.component=f}),j(()=>{})));for(let f of d.children)h.push(...l(f));return h};return Ss(l(c.targetSnapshot.root)).pipe(er(null),Pn(1))}),mg(()=>this.afterPreactivation()),ye(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?ie(d).pipe(j(()=>s)):F(s)}),j(c=>{let l=Q1(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=fe(N({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Se(()=>{this.events.next(new ga)}),nk(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Pn(1),Se({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new jn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),ff(this.transitionAbortSubject.pipe(Se(c=>{throw c}))),tr(()=>{!a&&!u&&this.cancelNavigationTransition(s,"",Nt.SupersededByNewNavigation),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Jn(c=>{if(u=!0,U0(c))this.events.next(new hr(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),X1(c)?this.events.next(new ma(c.url)):s.resolve(!1);else{this.events.next(new pa(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(c))}catch(l){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(l)}}return gt}))}))}cancelNavigationTransition(r,i,o){let s=new hr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Yk(t){return t!==la}var Zk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(Xk),providedIn:"root"});let t=e;return t})(),$g=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Xk=(()=>{let e=class e extends $g{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Gc(e)))(o||e)}})(),e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Y0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(Jk),providedIn:"root"});let t=e;return t})(),Jk=(()=>{let e=class e extends Y0{constructor(){super(...arguments),this.location=C(yo),this.urlSerializer=C(Ea),this.options=C(Ta,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=C(Kg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new dr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=k0(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof To)this.stateMemento=this.createStateMemento();else if(r instanceof fr)this.rawUrlTree=i.initialUrl;else if(r instanceof Ml){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof ga?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof hr&&(r.code===Nt.GuardRejected||r.code===Nt.NoDataFromResolver)?this.restoreHistory(i):r instanceof pa?this.restoreHistory(i,!0):r instanceof jn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=N(N({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=N(N({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Gc(e)))(o||e)}})(),e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ua=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ua||{});function Z0(t,e){t.events.pipe(Be(n=>n instanceof jn||n instanceof hr||n instanceof pa||n instanceof fr),j(n=>n instanceof jn||n instanceof fr?ua.COMPLETE:(n instanceof hr?n.code===Nt.Redirect||n.code===Nt.SupersededByNewNavigation:!1)?ua.REDIRECTING:ua.FAILED),Be(n=>n!==ua.REDIRECTING),Pn(1)).subscribe(()=>{e()})}function eF(t){throw t}var tF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ui=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=C(ol),this.stateManager=C(Y0),this.options=C(Ta,{optional:!0})||{},this.pendingTasks=C(ei),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=C(Qg),this.urlSerializer=C(Ea),this.location=C(yo),this.urlHandlingStrategy=C(Kg),this._events=new je,this.errorHandler=this.options.errorHandler||eF,this.navigated=!1,this.routeReuseStrategy=C(Zk),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=C(Fl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!C(Ll,{optional:!0}),this.eventsSubscription=new Ae,this.isNgZoneEnabled=C(J)instanceof J&&J.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof hr&&i.code!==Nt.Redirect&&i.code!==Nt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof jn)this.navigated=!0;else if(i instanceof ma){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),u={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Yk(o.source)};this.scheduleNavigation(a,la,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}iF(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),la,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let c=N({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(zg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:a,d=null;switch(u){case"merge":d=N(N({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=R0(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return P0(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Co(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,la,null,i)}navigate(r,i={skipLocationChange:!1}){return rF(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=N({},tF):i===!1?o=N({},nF):o=i,Co(r))return f0(this.currentUrlTree,r,o);let s=this.parseUrl(r);return f0(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let u,c,l;a?(u=a.resolve,c=a.reject,l=a.promise):l=new Promise((h,f)=>{u=h,c=f});let d=this.pendingTasks.add();return Z0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function rF(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new L(4008,!1)}function iF(t){return!(t instanceof ga)&&!(t instanceof ma)}var Vl=class{};var oF=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Be(r=>r instanceof jn),Rn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=il(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,u=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(u,s.children??s._loadedRoutes))}return ie(o).pipe(Xn())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=F(null);let s=o.pipe(Ne(a=>a===null?F(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return ie([s,a]).pipe(Xn())}else return s})}};e.\u0275fac=function(i){return new(i||e)(D(ui),D(sl),D(ct),D(Vl),D(Wg))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),X0=new M(""),sF=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof To?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof jn?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof fr&&r.code===Sl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof xl&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new xl(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){ZI()},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function aF(t){return t.routerState.root}function ba(t,e){return{\u0275kind:t,\u0275providers:e}}function uF(){let t=C(Wt);return e=>{let n=t.get(ti);if(e!==n.components[0])return;let r=t.get(ui),i=t.get(J0);t.get(Yg)===1&&r.initialNavigation(),t.get(eC,null,Y.Optional)?.setUpPreloading(),t.get(X0,null,Y.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var J0=new M("",{factory:()=>new je}),Yg=new M("",{providedIn:"root",factory:()=>1});function cF(){return ba(2,[{provide:Yg,useValue:0},{provide:cl,multi:!0,deps:[Wt],useFactory:e=>{let n=e.get(LD,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(ui),o=e.get(J0);Z0(i,()=>{r(!0)}),e.get(Qg).afterPreactivation=()=>(r(!0),o.closed?F(void 0):o),i.initialNavigation()}))}}])}function lF(){return ba(3,[{provide:cl,multi:!0,useFactory:()=>{let e=C(ui);return()=>{e.setUpLocationChangeListener()}}},{provide:Yg,useValue:2}])}var eC=new M("");function dF(t){return ba(0,[{provide:eC,useExisting:oF},{provide:Vl,useExisting:t}])}function hF(){return ba(8,[y0,{provide:Ll,useExisting:y0}])}function fF(t){let e=[{provide:K0,useValue:Kk},{provide:Q0,useValue:N({skipNextTransition:!!t?.skipInitialTransition},t)}];return ba(9,e)}var _0=new M("ROUTER_FORROOT_GUARD"),pF=[yo,{provide:Ea,useClass:ha},ui,Ia,{provide:bo,useFactory:aF,deps:[ui]},Wg,[]],Zg=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[pF,[],{provide:Fl,multi:!0,useValue:r},{provide:_0,useFactory:vF,deps:[[ui,new lo,new Ep]]},{provide:Ta,useValue:i||{}},i?.useHash?mF():yF(),gF(),i?.preloadingStrategy?dF(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?_F(i):[],i?.bindToComponentInputs?hF().\u0275providers:[],i?.enableViewTransitions?fF().\u0275providers:[],wF()]}}static forChild(r){return{ngModule:e,providers:[{provide:Fl,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(D(_0,8))},e.\u0275mod=De({type:e}),e.\u0275inj=Ie({});let t=e;return t})();function gF(){return{provide:X0,useFactory:()=>{let t=C(qD),e=C(J),n=C(Ta),r=C(Qg),i=C(Ea);return n.scrollOffset&&t.setOffset(n.scrollOffset),new sF(i,r,t,e,n)}}}function mF(){return{provide:ri,useClass:BD}}function yF(){return{provide:ri,useClass:Xp}}function vF(t){return"guarded"}function _F(t){return[t.initialNavigation==="disabled"?lF().\u0275providers:[],t.initialNavigation==="enabledBlocking"?cF().\u0275providers:[]]}var w0=new M("");function wF(){return[{provide:w0,useFactory:uF},{provide:ll,multi:!0,useExisting:w0}]}var EF=[],tC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=De({type:e}),e.\u0275inj=Ie({imports:[Zg.forRoot(EF),Zg]});let t=e;return t})();var nC=(()=>{let e=class e{constructor(r,i){this.elementRef=r,this.renderer=i,this.Colors={Default:"#8c84f3",Green:"#0bb7af",Blue:"#4880d4",Purple:"#845ae7",Red:"#f64e60",Gold:"#ffad2e",Dark:"#473e69"},this.backgroundColor="Default",this.ButtonCornner=""}onMouseEnter(){this.renderer.setStyle(this.elementRef.nativeElement,"opacity","0.7")}onMouseLeave(){this.renderer.setStyle(this.elementRef.nativeElement,"opacity","1")}GetColor(){return this.Colors[this.backgroundColor]}GetRound(){return this.ButtonCornner=="Round"?"100px":"6px"}ngAfterViewInit(){let r=this.elementRef.nativeElement,i={outline:"none",background:this.GetColor(),color:"#fff",border:"none",padding:"7px 15px","border-radius":this.GetRound(),cursor:"pointer","white-space":"nowrap"};Object.keys(i).forEach(o=>{this.renderer.setStyle(r,o,i[o])})}};e.\u0275fac=function(i){return new(i||e)(hn(Jr),hn(ho))},e.\u0275dir=Yr({type:e,selectors:[["","ButtonStyle",""]],hostBindings:function(i,o){i&1&&Xs("mouseenter",function(){return o.onMouseEnter()})("mouseleave",function(){return o.onMouseLeave()})},inputs:{backgroundColor:"backgroundColor",ButtonCornner:"ButtonCornner"}});let t=e;return t})();function DF(t,e){if(t&1&&(pe(0,"span"),fn(1),Me()),t&2){let n=e.$implicit;fo(),Up(n)}}var rC=(()=>{let e=class e{constructor(){this.TextTitle="",this.Arr=[]}Get_Str_Char(){let r=this.TextTitle;for(let i=0;i<r.length;i++)this.Arr.push(r[i])}ngOnInit(){this.Get_Str_Char()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ur({type:e,selectors:[["app-wave-logo-animation"]],inputs:{TextTitle:"TextTitle"},decls:2,vars:1,consts:[[1,"spinner"],[4,"ngFor","ngForOf"]],template:function(i,o){i&1&&(pe(0,"div",0),jp(1,DF,2,1,"span",1),Me()),i&2&&(fo(),po("ngForOf",o.Arr))},dependencies:[UD],styles:[".spinner[_ngcontent-%COMP%]{height:50px;width:max-content;font-size:20px;font-weight:600;font-family:monospace;letter-spacing:6px;color:#f5f5f5;filter:drop-shadow(0 0 10px);display:flex;justify-content:center;align-items:center}.spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_loading6454 1.75s ease infinite}.spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:.25s}.spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){animation-delay:.5s}.spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){animation-delay:.75s}.spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){animation-delay:1s}.spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(6){animation-delay:1.25s}.spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(7){animation-delay:1.5s}@keyframes _ngcontent-%COMP%_loading6454{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}"]});let t=e;return t})();var iC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ur({type:e,selectors:[["app-mobile-nav-bar"]],decls:15,vars:0,consts:[[1,"button-container"],[1,"button"],["xmlns","http://www.w3.org/2000/svg","width","1em","height","1em","viewBox","0 0 1024 1024","stroke-width","0","fill","currentColor","stroke","currentColor",1,"icon"],["d","M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 0 0-44.4 0L77.5 505a63.9 63.9 0 0 0-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0 0 18.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"],["xmlns","http://www.w3.org/2000/svg","width","1em","height","1em","aria-hidden","true","viewBox","0 0 24 24","stroke-width","2","fill","none","stroke","currentColor",1,"icon"],["d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z","stroke-linejoin","round","stroke-linecap","round"],["xmlns","http://www.w3.org/2000/svg","width","1em","height","1em","viewBox","0 0 24 24","stroke-width","0","fill","currentColor","stroke","currentColor",1,"icon"],["d","M12 2.5a5.5 5.5 0 0 1 3.096 10.047 9.005 9.005 0 0 1 5.9 8.181.75.75 0 1 1-1.499.044 7.5 7.5 0 0 0-14.993 0 .75.75 0 0 1-1.5-.045 9.005 9.005 0 0 1 5.9-8.18A5.5 5.5 0 0 1 12 2.5ZM8 8a4 4 0 1 0 8 0 4 4 0 0 0-8 0Z"],["xmlns","http://www.w3.org/2000/svg","width","1em","height","1em","stroke-linejoin","round","stroke-linecap","round","viewBox","0 0 24 24","stroke-width","2","fill","none","stroke","currentColor",1,"icon"],["r","1","cy","21","cx","9"],["r","1","cy","21","cx","20"],["d","M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"]],template:function(i,o){i&1&&(pe(0,"div",0)(1,"button",1),Qs(),pe(2,"svg",2),It(3,"path",3),Me()(),zc(),pe(4,"button",1),Qs(),pe(5,"svg",4),It(6,"path",5),Me()(),zc(),pe(7,"button",1),Qs(),pe(8,"svg",6),It(9,"path",7),Me()(),zc(),pe(10,"button",1),Qs(),pe(11,"svg",8),It(12,"circle",9)(13,"circle",10)(14,"path",11),Me()()())},styles:[".button-container[_ngcontent-%COMP%]{display:flex;background-color:#362d5ae0;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);height:60px;align-items:center;justify-content:space-around;border-radius:10px;box-shadow:0 -8px 15px #17171759}.button[_ngcontent-%COMP%]{outline:0!important;border:0!important;width:40px;height:40px;border-radius:50%;background-color:transparent;display:flex;align-items:center;justify-content:center;color:#fff;transition:all ease-in-out .3s;cursor:pointer}.button[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.icon[_ngcontent-%COMP%]{font-size:20px}"]});let t=e;return t})();var oC=(()=>{let e=class e{constructor(){this.title="Front"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ur({type:e,selectors:[["app-root"]],decls:29,vars:2,consts:[[1,"container"],[1,"section","Shop"],[3,"TextTitle"],[1,"section","section-links"],[1,"link"],[1,"section"],["ButtonStyle","",3,"ButtonCornner"],[1,"group"],[1,"content"],[1,"Head-content"],[1,"Text-content"],[1,"img"],["src","../assets/img/Untitled.png","alt","",1,"Xbox-Controller-logo"],["src","https://pngimg.com/d/xbox_PNG17504.png","alt","",1,"Xbox-Controller-logo"]],template:function(i,o){i&1&&(pe(0,"div",0)(1,"nav")(2,"div",1),It(3,"app-wave-logo-animation",2),Me(),pe(4,"div",3)(5,"span",4),fn(6,"Home"),Me(),pe(7,"span",4),fn(8,"Contact"),Me()(),pe(9,"div",5)(10,"button",6),fn(11,"SIGN UP"),Me()()(),pe(12,"div",7)(13,"div",8)(14,"p",9),fn(15,"Welcome To BBA Shop"),Me(),pe(16,"p",10),fn(17,"Change your gaming exprerience to the next level"),Me()(),pe(18,"div",11),It(19,"img",12),Me()(),pe(20,"div",7)(21,"div",8)(22,"p",9),fn(23,"Welcome To Simpa Shop"),Me(),pe(24,"p",10),fn(25,"Change your gaming exprerience to the next level"),Me()(),pe(26,"div",11),It(27,"img",13),Me()()(),It(28,"app-mobile-nav-bar")),i&2&&(fo(3),po("TextTitle","BBA Shop"),fo(7),po("ButtonCornner","Round"))},dependencies:[nC,rC,iC],styles:['.container[_ngcontent-%COMP%]{padding-top:28px}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap;align-items:center}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{padding:8px 0;margin:auto}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section.Shop[_ngcontent-%COMP%]{font-size:20px;background:transparent;padding:8px 16px;border-radius:7px;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);position:relative}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section.Shop[_ngcontent-%COMP%]:before{position:absolute;content:"";top:50%;left:50%;box-shadow:0 0 100px 50px #605490;transform:translate(-50%,-50%)}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section.Shop[_ngcontent-%COMP%]   .Shop-Name[_ngcontent-%COMP%]{color:#8d88be;font-weight:700;margin-inline-end:6px}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{padding:8px;margin-inline-end:6px;cursor:pointer}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{opacity:.5}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{display:flex;align-items:center;margin:14px 0}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;text-align:center}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .Head-content[_ngcontent-%COMP%]{font-size:clamp(1.5rem,7vw,2.6rem);white-space:nowrap;color:#bab4eb}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .Text-content[_ngcontent-%COMP%]{color:#8d88be}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{display:flex;position:relative}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   .Xbox-Controller-logo[_ngcontent-%COMP%]{width:100%;filter:drop-shadow(0px 0px 90px #5f528b) opacity(.9)}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;font-size:clamp(4.8rem,20vw,5.6rem);font-weight:bolder;left:50%;top:70%;transform:translate(-50%,-50%);font-family:sans-serif;color:#ccbdff;z-index:0;text-shadow:0px 0px 20px #ccbdff}@media screen and (max-width: 768px){.container[_ngcontent-%COMP%]{padding-top:128px}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{flex-wrap:wrap-reverse}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:1;background-color:#433a65d7;background-color:transparent;width:100%;padding:6px 0;justify-content:space-between}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{margin:0 8px}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section-links[_ngcontent-%COMP%]{display:none}app-mobile-nav-bar[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%}}']});let t=e;return t})();var bF={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},iG=fe(N({},bF),{"[class.ng-submitted]":"isSubmitted"});var AF=new M("CallSetDisabledState",{providedIn:"root",factory:()=>sC}),sC="always";var SF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=De({type:e}),e.\u0275inj=Ie({});let t=e;return t})();var aC=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:AF,useValue:r.callSetDisabledState??sC}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=De({type:e}),e.\u0275inj=Ie({imports:[SF]});let t=e;return t})();var MF="firebase",xF="10.8.0";Zn(MF,xF,"app");var li=new kn("ANGULARFIRE2_VERSION");var RF=(t,e)=>{let n=e?[e]:cw(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ci=class{constructor(){return RF(PF)}},PF="app-check";function Xg(){}var Bl=class{zone;delegate;constructor(e,n=of){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},Jg=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xg,{},Xg,Xg)),n.pipe(Se({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ul=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Bl(Zone.current)),this.insideAngular=n.run(()=>new Bl(Zone.current,As)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(D(J))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function NF(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function yt(t){return OF(NF())(t)}function OF(t){return function(n){return n=n.lift(new Jg(t.ngZone)),n.pipe(Ut(t.outsideAngular),St(t.insideAngular))}}var VF=new Map,LF={activated:!1,tokenObservers:[]},jF={initialized:!1,enabled:!1};function Kt(t){return VF.get(t)||Object.assign({},LF)}function fC(){return jF}var BF="https://content-firebaseappcheck.googleapis.com/v1";var UF="exchangeDebugToken",cC={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},DG=24*60*60*1e3;var tm=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return y(this,null,function*(){this.stop();try{this.pending=new $h,this.pending.promise.catch(n=>{}),yield $F(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new $h,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function $F(t){return new Promise(e=>{setTimeout(e,t)})}var qF={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},gr=new aw("appCheck","AppCheck",qF);function pC(t){if(!Kt(t).activated)throw gr.create("use-before-activation",{appName:t.name})}function gC(r,i){return y(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let f=yield s.getHeartbeatsHeader();f&&(o["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(f){throw gr.create("fetch-network-error",{originalErrorMessage:f?.message})}if(u.status!==200)throw gr.create("fetch-status-error",{httpStatus:u.status});let c;try{c=yield u.json()}catch(f){throw gr.create("fetch-parse-error",{originalErrorMessage:f?.message})}let l=c.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw gr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let d=Number(l[1])*1e3,h=Date.now();return{token:c.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function mC(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${BF}/projects/${n}/apps/${r}:${UF}?key=${i}`,body:{debug_token:e}}}var HF="firebase-app-check-database",zF=1,nm="firebase-app-check-store";var $l=null;function GF(){return $l||($l=new Promise((t,e)=>{try{let n=indexedDB.open(HF,zF);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(gr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(nm,{keyPath:"compositeKey"})}}}catch(n){e(gr.create("storage-open",{originalErrorMessage:n?.message}))}}),$l)}function WF(t,e){return KF(QF(t),e)}function KF(t,e){return y(this,null,function*(){let r=(yield GF()).transaction(nm,"readwrite"),o=r.objectStore(nm).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var c;a(gr.create("storage-set",{originalErrorMessage:(c=u.target.error)===null||c===void 0?void 0:c.message}))}})})}function QF(t){return`${t.options.appId}-${t.name}`}var rm=new $u("@firebase/app-check");function em(t,e){return Uu()?WF(t,e).catch(n=>{rm.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function yC(){return fC().enabled}function vC(){return y(this,null,function*(){let t=fC();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var YF={error:"UNKNOWN_ERROR"};function ZF(t){return iw.encodeString(JSON.stringify(t),!1)}function im(t,e=!1){return y(this,null,function*(){let n=t.app;pC(n);let r=Kt(n),i=r.token,o;if(i&&!Aa(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Aa(u)?i=u:yield em(n,void 0))}if(!e&&i&&Aa(i))return{token:i.token};let s=!1;if(yC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=gC(mC(n,yield vC()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield em(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Kt(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?rm.warn(u.message):rm.error(u),o=u}let a;return i?o?Aa(i)?a={token:i.token,internalError:o}:a=dC(o):(a={token:i.token},r.token=i,yield em(n,i)):a=dC(o),s&&tV(n,a),a})}function XF(t){return y(this,null,function*(){let e=t.app;pC(e);let{provider:n}=Kt(e);if(yC()){let r=yield vC(),{token:i}=yield gC(mC(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function JF(t,e,n,r){let{app:i}=t,o=Kt(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Aa(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),lC(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>lC(t))}function _C(t,e){let n=Kt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function lC(t){let{app:e}=t,n=Kt(e),r=n.tokenRefresher;r||(r=eV(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function eV(t){let{app:e}=t;return new tm(()=>y(this,null,function*(){let n=Kt(e),r;if(n.token?r=yield im(t,!0):r=yield im(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Kt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},cC.RETRIAL_MIN_WAIT,cC.RETRIAL_MAX_WAIT)}function tV(t,e){let n=Kt(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Aa(t){return t.expireTimeMillis-Date.now()>0}function dC(t){return{token:ZF(YF),error:t}}var om=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Kt(this.app);for(let n of e)_C(this.app,n.next);return Promise.resolve()}};function nV(t,e){return new om(t,e)}function rV(t){return{getToken:e=>im(t,e),getLimitedUseToken:()=>XF(t),addTokenListener:e=>JF(t,"INTERNAL",e),removeTokenListener:e=>_C(t.app,e)}}var iV="@firebase/app-check",oV="0.8.2";var sV="app-check",hC="app-check-internal";function aV(){Ds(new Vr(sV,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return nV(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(hC).initialize()})),Ds(new Vr(hC,t=>{let e=t.getProvider("app-check").getImmediate();return rV(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Zn(iV,oV)}aV();var uV=["localhost","0.0.0.0","127.0.0.1"],kG=typeof window<"u"&&uV.includes(window.location.hostname);var cV="firebase",lV="10.8.0";st.registerVersion(cV,lV,"app-compat");var dV=["ngOnDestroy"],IC=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(dV.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(c=>n.run(()=>c)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,c)=>s.then(l=>{let d=l?.(...c);return r?.spy?.apply&&r.spy.apply(o,c,d),d})})})});var ql=class{constructor(e){return e}},Mo=new M("angularfire2.app.options"),xo=new M("angularfire2.app.name");function Sa(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=st.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>st.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;hV("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new ql(s)}var hV=(t,...e)=>{Gp()&&typeof console<"u"&&console[t](...e)},fV={provide:ql,useFactory:Sa,deps:[Mo,J,[new lo,xo]]},DC=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Mo,useValue:n},{provide:xo,useValue:r}]}}constructor(n){st.registerVersion("angularfire",li.full,"core"),st.registerVersion("angularfire",li.full,"app-compat"),st.registerVersion("angular",ID.full,n.toString())}static \u0275fac=function(r){return new(r||t)(D(et))};static \u0275mod=De({type:t});static \u0275inj=Ie({providers:[fV]})}return t})();function Hl(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return pV(i,s)||(EC("error",`${e} was already initialized on the ${n} Firebase App with different settings.${gV?" You may need to reload as Firebase is not HMR aware.":""}`),EC("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function pV(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var gV=typeof module<"u"&&!!module.hot,EC=(t,...e)=>{Gp()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var sm=new M("angularfire2.auth.use-emulator"),am=new M("angularfire2.auth.settings"),um=new M("angularfire2.auth.tenant-id"),cm=new M("angularfire2.auth.langugage-code"),lm=new M("angularfire2.auth.use-device-language"),dm=new M("angularfire.auth.persistence"),hm=(t,e,n,r,i,o,s,a)=>Hl(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[c,l]of Object.entries(s))u.settings[c]=l;return a&&u.setPersistence(a),u},[n,r,i,o,s,a]),fm=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,u,c,l,d,h,f){let _=new je,v=F(void 0).pipe(St(s.outsideAngular),ye(()=>o.runOutsideAngular(()=>import("./chunk-SFVC2T43.js"))),j(()=>Sa(n,o,r)),j(m=>hm(m,o,a,c,l,d,u,h)),dc({bufferSize:1,refCount:!1}));if(ii(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=F(null);else{v.pipe(Mt()).subscribe();let m=v.pipe(ye(T=>T.getRedirectResult().then(P=>P,()=>null)),yt,dc({bufferSize:1,refCount:!1})),I=v.pipe(ye(T=>new Z(P=>({unsubscribe:o.runOutsideAngular(()=>T.onAuthStateChanged(B=>P.next(B),B=>P.error(B),()=>P.complete()))})))),R=v.pipe(ye(T=>new Z(P=>({unsubscribe:o.runOutsideAngular(()=>T.onIdTokenChanged(B=>P.next(B),B=>P.error(B),()=>P.complete()))}))));this.authState=m.pipe(hc(I),Ut(s.outsideAngular),St(s.insideAngular)),this.user=m.pipe(hc(R),Ut(s.outsideAngular),St(s.insideAngular)),this.idToken=this.user.pipe(ye(T=>T?ie(T.getIdToken()):F(null))),this.idTokenResult=this.user.pipe(ye(T=>T?ie(T.getIdTokenResult()):F(null))),this.credential=uf(m,_,this.authState.pipe(Be(T=>!T))).pipe(j(T=>T?.user?T:null),Ut(s.outsideAngular),St(s.insideAngular))}return IC(this,v,o,{spy:{apply:(m,I,R)=>{(m.startsWith("signIn")||m.startsWith("createUser"))&&R.then(T=>_.next(T))}}})}static \u0275fac=function(r){return new(r||t)(D(Mo),D(xo,8),D(et),D(J),D(Ul),D(sm,8),D(am,8),D(um,8),D(cm,8),D(lm,8),D(dm,8),D(ci,8))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),CC=(()=>{class t{constructor(){st.registerVersion("angularfire",li.full,"auth-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=De({type:t});static \u0275inj=Ie({providers:[fm]})}return t})();var yV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yt={},A,km=km||{},q=yV||self;function id(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function $a(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function vV(t){return Object.prototype.hasOwnProperty.call(t,pm)&&t[pm]||(t[pm]=++_V)}var pm="closure_uid_"+(1e9*Math.random()>>>0),_V=0;function wV(t,e,n){return t.call.apply(t.bind,arguments)}function EV(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function nt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?nt=wV:nt=EV,nt.apply(null,arguments)}function zl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function ze(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function mr(){this.s=this.s,this.o=this.o}var IV=0;mr.prototype.s=!1;mr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),IV!=0)&&vV(this)};mr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var VC=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Fm(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function TC(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(id(r)){let i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function rt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var DV=function(){if(!q.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};q.addEventListener("test",n,e),q.removeEventListener("test",n,e)}catch{}return t}();function Oa(t){return/^[\s\xa0]*$/.test(t)}function od(){var t=q.navigator;return t&&(t=t.userAgent)?t:""}function mn(t){return od().indexOf(t)!=-1}function Vm(t){return Vm[" "](t),t}Vm[" "]=function(){};function CV(t,e){var n=hL;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var TV=mn("Opera"),Oo=mn("Trident")||mn("MSIE"),LC=mn("Edge"),_m=LC||Oo,jC=mn("Gecko")&&!(od().toLowerCase().indexOf("webkit")!=-1&&!mn("Edge"))&&!(mn("Trident")||mn("MSIE"))&&!mn("Edge"),bV=od().toLowerCase().indexOf("webkit")!=-1&&!mn("Edge");function BC(){var t=q.document;return t?t.documentMode:void 0}var wm;e:{if(Gl="",Wl=function(){var t=od();if(jC)return/rv:([^\);]+)(\)|;)/.exec(t);if(LC)return/Edge\/([\d\.]+)/.exec(t);if(Oo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(bV)return/WebKit\/(\S+)/.exec(t);if(TV)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Wl&&(Gl=Wl?Wl[1]:""),Oo&&(Kl=BC(),Kl!=null&&Kl>parseFloat(Gl))){wm=String(Kl);break e}wm=Gl}var Gl,Wl,Kl,Em;q.document&&Oo?(gm=BC(),Em=gm||parseInt(wm,10)||void 0):Em=void 0;var gm,AV=Em;function ka(t,e){if(rt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(jC){e:{try{Vm(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:SV[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ka.$.h.call(this)}}ze(ka,rt);var SV={2:"touch",3:"pen",4:"mouse"};ka.prototype.h=function(){ka.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var qa="closure_listenable_"+(1e6*Math.random()|0),MV=0;function xV(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++MV,this.fa=this.ia=!1}function sd(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Lm(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function RV(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function UC(t){let e={};for(let n in t)e[n]=t[n];return e}var bC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $C(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<bC.length;o++)n=bC[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ad(t){this.src=t,this.g={},this.h=0}ad.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=Dm(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new xV(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function Im(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=VC(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(sd(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Dm(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var jm="closure_lm_"+(1e6*Math.random()|0),mm={};function qC(t,e,n,r,i){if(r&&r.once)return zC(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)qC(t,e[o],n,r,i);return null}return n=$m(n),t&&t[qa]?t.O(e,n,$a(r)?!!r.capture:!!r,i):HC(t,e,n,!1,r,i)}function HC(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=$a(i)?!!i.capture:!!i,a=Um(t);if(a||(t[jm]=a=new ad(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=PV(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)DV||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(WC(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function PV(){function t(n){return e.call(t.src,t.listener,n)}let e=NV;return t}function zC(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)zC(t,e[o],n,r,i);return null}return n=$m(n),t&&t[qa]?t.P(e,n,$a(r)?!!r.capture:!!r,i):HC(t,e,n,!0,r,i)}function GC(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)GC(t,e[o],n,r,i);else r=$a(r)?!!r.capture:!!r,n=$m(n),t&&t[qa]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=Dm(o,n,r,i),-1<n&&(sd(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=Um(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Dm(e,n,r,i)),(n=-1<t?e[t]:null)&&Bm(n))}function Bm(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[qa])Im(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(WC(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Um(e))?(Im(n,t),n.h==0&&(n.src=null,e[jm]=null)):sd(t)}}}function WC(t){return t in mm?mm[t]:mm[t]="on"+t}function NV(t,e){if(t.fa)t=!0;else{e=new ka(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Bm(t),t=n.call(r,e)}return t}function Um(t){return t=t[jm],t instanceof ad?t:null}var ym="__closure_events_fn_"+(1e9*Math.random()>>>0);function $m(t){return typeof t=="function"?t:(t[ym]||(t[ym]=function(e){return t.handleEvent(e)}),t[ym])}function He(){mr.call(this),this.i=new ad(this),this.S=this,this.J=null}ze(He,mr);He.prototype[qa]=!0;He.prototype.removeEventListener=function(t,e,n,r){GC(this,t,e,n,r)};function Ye(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new rt(e,t);else if(e instanceof rt)e.target=e.target||t;else{var i=e;e=new rt(r,t),$C(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Ql(s,r,!0,e)&&i}if(s=e.g=t,i=Ql(s,r,!0,e)&&i,i=Ql(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=Ql(s,r,!1,e)&&i}He.prototype.N=function(){if(He.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)sd(n[r]);delete t.g[e],t.h--}}this.J=null};He.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};He.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Ql(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,u=s.la||s.src;s.ia&&Im(t.i,s),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var qm=q.JSON.stringify,Cm=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function OV(){var t=Hm;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Tm=class{constructor(){this.h=this.g=null}add(e,n){let r=KC.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},KC=new Cm(()=>new bm,t=>t.reset()),bm=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function kV(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function FV(t){q.setTimeout(()=>{throw t},0)}var Fa,Va=!1,Hm=new Tm,QC=()=>{let t=q.Promise.resolve(void 0);Fa=()=>{t.then(VV)}},VV=()=>{for(var t;t=OV();){try{t.h.call(t.g)}catch(n){FV(n)}var e=KC;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Va=!1};function ud(t,e){He.call(this),this.h=t||1,this.g=e||q,this.j=nt(this.qb,this),this.l=Date.now()}ze(ud,He);A=ud.prototype;A.ga=!1;A.T=null;A.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ye(this,"tick"),this.ga&&(zm(this),this.start()))}};A.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function zm(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}A.N=function(){ud.$.N.call(this),zm(this),delete this.g};function Gm(t,e,n){if(typeof t=="function")n&&(t=nt(t,n));else if(t&&typeof t.handleEvent=="function")t=nt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:q.setTimeout(t,e||0)}function YC(t){t.g=Gm(()=>{t.g=null,t.i&&(t.i=!1,YC(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var Am=class extends mr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:YC(this)}N(){super.N(),this.g&&(q.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function La(t){mr.call(this),this.h=t,this.g={}}ze(La,mr);var AC=[];function ZC(t,e,n,r){Array.isArray(n)||(n&&(AC[0]=n.toString()),n=AC);for(var i=0;i<n.length;i++){var o=qC(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function XC(t){Lm(t.g,function(e,n){this.g.hasOwnProperty(n)&&Bm(e)},t),t.g={}}La.prototype.N=function(){La.$.N.call(this),XC(this)};La.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function cd(){this.g=!0}cd.prototype.Ea=function(){this.g=!1};function LV(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");s=2<=d.length&&d[1]=="type"?s+(l+"="+c+"&"):s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function jV(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function Po(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+UV(t,n)+(r?" "+r:"")})}function BV(t,e){t.info(function(){return"TIMEOUT: "+e})}cd.prototype.info=function(){};function UV(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return qm(n)}catch{return e}}var pi={},SC=null;function ld(){return SC=SC||new He}pi.Ta="serverreachability";function JC(t){rt.call(this,pi.Ta,t)}ze(JC,rt);function ja(t){let e=ld();Ye(e,new JC(e))}pi.STAT_EVENT="statevent";function eT(t,e){rt.call(this,pi.STAT_EVENT,t),this.stat=e}ze(eT,rt);function dt(t){let e=ld();Ye(e,new eT(e,t))}pi.Ua="timingevent";function tT(t,e){rt.call(this,pi.Ua,t),this.size=e}ze(tT,rt);function Ha(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return q.setTimeout(function(){t()},e)}var dd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},nT={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Wm(){}Wm.prototype.h=null;function MC(t){return t.h||(t.h=t.i())}function rT(){}var za={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Km(){rt.call(this,"d")}ze(Km,rt);function Qm(){rt.call(this,"c")}ze(Qm,rt);var Sm;function hd(){}ze(hd,Wm);hd.prototype.g=function(){return new XMLHttpRequest};hd.prototype.i=function(){return{}};Sm=new hd;function Ga(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new La(this),this.P=$V,t=_m?125:void 0,this.V=new ud(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new iT}function iT(){this.i=null,this.g="",this.h=!1}var $V=45e3,oT={},Mm={};A=Ga.prototype;A.setTimeout=function(t){this.P=t};function xm(t,e,n){t.L=1,t.A=pd(Un(e)),t.u=n,t.S=!0,sT(t,null)}function sT(t,e){t.G=Date.now(),Wa(t),t.B=Un(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),pT(n.i,"t",r),t.o=0,n=t.l.J,t.h=new iT,t.g=kT(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Am(nt(t.Pa,t,t.g),t.O)),ZC(t.U,t.g,"readystatechange",t.nb),e=t.I?UC(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ja(),LV(t.j,t.v,t.B,t.m,t.W,t.u)}A.nb=function(t){t=t.target;let e=this.M;e&&yn(t)==3?e.l():this.Pa(t)};A.Pa=function(t){try{if(t==this.g)e:{let l=yn(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||_m||this.g&&(this.h.h||this.g.ja()||NC(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?ja(3):ja(2)),fd(this);var n=this.g.da();this.ca=n;t:if(aT(this)){var r=NC(this.g);t="";var i=r.length,o=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){di(this),Na(this);var s="";break t}this.h.i=new q.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,jV(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Oa(a)){var c=a;break t}}c=null}if(n=c)Po(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rm(this,n);else{this.i=!1,this.s=3,dt(12),di(this),Na(this);break e}}this.S?(uT(this,l,s),_m&&this.i&&l==3&&(ZC(this.U,this.V,"tick",this.mb),this.V.start())):(Po(this.j,this.m,s,null),Rm(this,s)),l==4&&di(this),this.i&&!this.J&&(l==4?RT(this.l,this):(this.i=!1,Wa(this)))}else cL(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),di(this),Na(this)}}}catch{}finally{}};function aT(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function uT(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=qV(t,n),i==Mm){e==4&&(t.s=4,dt(14),r=!1),Po(t.j,t.m,null,"[Incomplete Response]");break}else if(i==oT){t.s=4,dt(15),Po(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Po(t.j,t.m,i,null),Rm(t,i);aT(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,dt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ty(e),e.M=!0,dt(11))):(Po(t.j,t.m,n,"[Invalid Chunked Response]"),di(t),Na(t))}A.mb=function(){if(this.g){var t=yn(this.g),e=this.g.ja();this.o<e.length&&(fd(this),uT(this,t,e),this.i&&t!=4&&Wa(this))}};function qV(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Mm:(n=Number(e.substring(n,r)),isNaN(n)?oT:(r+=1,r+n>e.length?Mm:(e=e.slice(r,r+n),t.o=r+n,e)))}A.cancel=function(){this.J=!0,di(this)};function Wa(t){t.Y=Date.now()+t.P,cT(t,t.P)}function cT(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Ha(nt(t.lb,t),e)}function fd(t){t.C&&(q.clearTimeout(t.C),t.C=null)}A.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(BV(this.j,this.B),this.L!=2&&(ja(),dt(17)),di(this),this.s=2,Na(this)):cT(this,this.Y-t)};function Na(t){t.l.H==0||t.J||RT(t.l,t)}function di(t){fd(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,zm(t.V),XC(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Rm(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Pm(n.i,t))){if(!t.K&&Pm(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)ed(n),yd(n);else break e;ey(n),dt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ha(nt(n.ib,n),6e3));if(1>=yT(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else hi(n,11)}else if((t.K||n.g==t)&&ed(n),!Oa(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];let l=c[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=c[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=c[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let _=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var o=r.i;o.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(Ym(o,o.h),o.h=null))}if(r.F){let v=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,ge(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=OT(r,r.J?r.pa:null,r.Y),s.K){vT(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(fd(a),Wa(a)),r.g=s}else MT(r);0<n.j.length&&vd(n)}else c[0]!="stop"&&c[0]!="close"||hi(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?hi(n,7):Jm(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}ja(4)}catch{}}function HV(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(id(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function zV(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(id(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function lT(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(id(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=zV(t),r=HV(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var dT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GV(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function fi(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof fi){this.h=t.h,Xl(this,t.j),this.s=t.s,this.g=t.g,Jl(this,t.m),this.l=t.l;var e=t.i,n=new Ba;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),xC(this,n),this.o=t.o}else t&&(e=String(t).match(dT))?(this.h=!1,Xl(this,e[1]||"",!0),this.s=Ra(e[2]||""),this.g=Ra(e[3]||"",!0),Jl(this,e[4]),this.l=Ra(e[5]||"",!0),xC(this,e[6]||"",!0),this.o=Ra(e[7]||"")):(this.h=!1,this.i=new Ba(null,this.h))}fi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Pa(e,RC,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Pa(e,RC,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Pa(n,n.charAt(0)=="/"?QV:KV,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Pa(n,ZV)),t.join("")};function Un(t){return new fi(t)}function Xl(t,e,n){t.j=n?Ra(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Jl(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function xC(t,e,n){e instanceof Ba?(t.i=e,XV(t.i,t.h)):(n||(e=Pa(e,YV)),t.i=new Ba(e,t.h))}function ge(t,e,n){t.i.set(e,n)}function pd(t){return ge(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ra(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Pa(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,WV),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function WV(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var RC=/[#\/\?@]/g,KV=/[#\?:]/g,QV=/[#\?]/g,YV=/[#\?@]/g,ZV=/#/g;function Ba(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function yr(t){t.g||(t.g=new Map,t.h=0,t.i&&GV(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}A=Ba.prototype;A.add=function(t,e){yr(this),this.i=null,t=ko(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function hT(t,e){yr(t),e=ko(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function fT(t,e){return yr(t),e=ko(t,e),t.g.has(e)}A.forEach=function(t,e){yr(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};A.ta=function(){yr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};A.Z=function(t){yr(this);let e=[];if(typeof t=="string")fT(this,t)&&(e=e.concat(this.g.get(ko(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};A.set=function(t,e){return yr(this),this.i=null,t=ko(this,t),fT(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};A.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function pT(t,e,n){hT(t,e),0<n.length&&(t.i=null,t.g.set(ko(t,e),Fm(n)),t.h+=n.length)}A.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function ko(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function XV(t,e){e&&!t.j&&(yr(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(hT(this,r),pT(this,i,n))},t)),t.j=e}var JV=class{constructor(t,e){this.g=t,this.map=e}};function gT(t){this.l=t||eL,q.PerformanceNavigationTiming?(t=q.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(q.g&&q.g.Ka&&q.g.Ka()&&q.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var eL=10;function mT(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function yT(t){return t.h?1:t.g?t.g.size:0}function Pm(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Ym(t,e){t.g?t.g.add(e):t.h=e}function vT(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}gT.prototype.cancel=function(){if(this.i=_T(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function _T(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Fm(t.i)}var tL=class{stringify(t){return q.JSON.stringify(t,void 0)}parse(t){return q.JSON.parse(t,void 0)}};function nL(){this.g=new tL}function rL(t,e,n){let r=n||"";try{lT(t,function(i,o){let s=i;$a(i)&&(s=qm(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function iL(t,e){let n=new cd;if(q.Image){let r=new Image;r.onload=zl(Yl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=zl(Yl,n,r,"TestLoadImage: error",!1,e),r.onabort=zl(Yl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=zl(Yl,n,r,"TestLoadImage: timeout",!1,e),q.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Yl(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ka(t){this.l=t.ec||null,this.j=t.ob||!1}ze(Ka,Wm);Ka.prototype.g=function(){return new gd(this.l,this.j)};Ka.prototype.i=function(t){return function(){return t}}({});function gd(t,e){He.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Zm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ze(gd,He);var Zm=0;A=gd.prototype;A.open=function(t,e){if(this.readyState!=Zm)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ua(this)};A.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||q).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};A.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qa(this)),this.readyState=Zm};A.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ua(this)),this.g&&(this.readyState=3,Ua(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof q.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wT(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function wT(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}A.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Qa(this):Ua(this),this.readyState==3&&wT(this)}};A.Za=function(t){this.g&&(this.response=this.responseText=t,Qa(this))};A.Ya=function(t){this.g&&(this.response=t,Qa(this))};A.ka=function(){this.g&&Qa(this)};function Qa(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ua(t)}A.setRequestHeader=function(t,e){this.v.append(t,e)};A.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};A.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ua(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(gd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var oL=q.JSON.parse;function Ce(t){He.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ET,this.L=this.M=!1}ze(Ce,He);var ET="",sL=/^https?$/i,aL=["POST","PUT"];A=Ce.prototype;A.Oa=function(t){this.M=t};A.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Sm.g(),this.C=this.u?MC(this.u):MC(Sm),this.g.onreadystatechange=nt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){PC(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=q.FormData&&t instanceof q.FormData,!(0<=VC(aL,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{CT(this),0<this.B&&((this.L=uL(this.g))?(this.g.timeout=this.B,this.g.ontimeout=nt(this.ua,this)):this.A=Gm(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){PC(this,o)}};function uL(t){return Oo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}A.ua=function(){typeof km<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ye(this,"timeout"),this.abort(8))};function PC(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,IT(t),md(t)}function IT(t){t.F||(t.F=!0,Ye(t,"complete"),Ye(t,"error"))}A.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ye(this,"complete"),Ye(this,"abort"),md(this))};A.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),md(this,!0)),Ce.$.N.call(this)};A.La=function(){this.s||(this.G||this.v||this.l?DT(this):this.kb())};A.kb=function(){DT(this)};function DT(t){if(t.h&&typeof km<"u"&&(!t.C[1]||yn(t)!=4||t.da()!=2)){if(t.v&&yn(t)==4)Gm(t.La,0,t);else if(Ye(t,"readystatechange"),yn(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(dT)[1]||null;!i&&q.self&&q.self.location&&(i=q.self.location.protocol.slice(0,-1)),r=!sL.test(i?i.toLowerCase():"")}n=r}if(n)Ye(t,"complete"),Ye(t,"success");else{t.m=6;try{var o=2<yn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",IT(t)}}finally{md(t)}}}}function md(t,e){if(t.g){CT(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ye(t,"ready");try{n.onreadystatechange=r}catch{}}}function CT(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(q.clearTimeout(t.A),t.A=null)}A.isActive=function(){return!!this.g};function yn(t){return t.g?t.g.readyState:0}A.da=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}};A.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};A.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),oL(e)}};function NC(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case ET:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function cL(t){let e={};t=(t.g&&2<=yn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Oa(t[r]))continue;var n=kV(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[i]||[];e[i]=o,o.push(n)}RV(e,function(r){return r.join(", ")})}A.Ia=function(){return this.m};A.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function TT(t){let e="";return Lm(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Xm(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=TT(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ge(t,e,n))}function Ma(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function bT(t){this.Ga=0,this.j=[],this.l=new cd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ma("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ma("baseRetryDelayMs",5e3,t),this.hb=Ma("retryDelaySeedMs",1e4,t),this.eb=Ma("forwardChannelMaxRetries",2,t),this.xa=Ma("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new gT(t&&t.concurrentRequestLimit),this.Ja=new nL,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}A=bT.prototype;A.ra=8;A.H=1;function Jm(t){if(AT(t),t.H==3){var e=t.W++,n=Un(t.I);if(ge(n,"SID",t.K),ge(n,"RID",e),ge(n,"TYPE","terminate"),Ya(t,n),e=new Ga(t,t.l,e),e.L=2,e.A=pd(Un(n)),n=!1,q.navigator&&q.navigator.sendBeacon)try{n=q.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&q.Image&&(new Image().src=e.A,n=!0),n||(e.g=kT(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Wa(e)}NT(t)}function yd(t){t.g&&(ty(t),t.g.cancel(),t.g=null)}function AT(t){yd(t),t.u&&(q.clearTimeout(t.u),t.u=null),ed(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&q.clearTimeout(t.m),t.m=null)}function vd(t){if(!mT(t.i)&&!t.m){t.m=!0;var e=t.Na;Fa||QC(),Va||(Fa(),Va=!0),Hm.add(e,t),t.C=0}}function lL(t,e){return yT(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Ha(nt(t.Na,t,e),PT(t,t.C)),t.C++,!0)}A.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Ga(this,this.l,t),o=this.s;if(this.U&&(o?(o=UC(o),$C(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=ST(this,i,e),n=Un(this.I),ge(n,"RID",t),ge(n,"CVER",22),this.F&&ge(n,"X-HTTP-Session-Id",this.F),Ya(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(TT(o)))+"&"+e:this.o&&Xm(n,this.o,o)),Ym(this.i,i),this.bb&&ge(n,"TYPE","init"),this.P?(ge(n,"$req",e),ge(n,"SID","null"),i.aa=!0,xm(i,n,null)):xm(i,n,e),this.H=2}}else this.H==3&&(t?OC(this,t):this.j.length==0||mT(this.i)||OC(this))};function OC(t,e){var n;e?n=e.m:n=t.W++;let r=Un(t.I);ge(r,"SID",t.K),ge(r,"RID",n),ge(r,"AID",t.V),Ya(t,r),t.o&&t.s&&Xm(r,t.o,t.s),n=new Ga(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=ST(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Ym(t.i,n),xm(n,r,e)}function Ya(t,e){t.na&&Lm(t.na,function(n,r){ge(e,r,n)}),t.h&&lT({},function(n,r){ge(e,r,n)})}function ST(t,e,n){n=Math.min(t.j.length,n);var r=t.h?nt(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let u=0;u<n;u++){let c=i[u].g,l=i[u].map;if(c-=o,0>c)o=Math.max(0,i[u].g-100),a=!1;else try{rL(l,s,"req"+c+"_")}catch{r&&r(l)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function MT(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Fa||QC(),Va||(Fa(),Va=!0),Hm.add(e,t),t.A=0}}function ey(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Ha(nt(t.Ma,t),PT(t,t.A)),t.A++,!0)}A.Ma=function(){if(this.u=null,xT(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ha(nt(this.jb,this),t)}};A.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,dt(10),yd(this),xT(this))};function ty(t){t.B!=null&&(q.clearTimeout(t.B),t.B=null)}function xT(t){t.g=new Ga(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Un(t.wa);ge(e,"RID","rpc"),ge(e,"SID",t.K),ge(e,"AID",t.V),ge(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ge(e,"TO",t.qa),ge(e,"TYPE","xmlhttp"),Ya(t,e),t.o&&t.s&&Xm(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=pd(Un(e)),n.u=null,n.S=!0,sT(n,t)}A.ib=function(){this.v!=null&&(this.v=null,yd(this),ey(this),dt(19))};function ed(t){t.v!=null&&(q.clearTimeout(t.v),t.v=null)}function RT(t,e){var n=null;if(t.g==e){ed(t),ty(t),t.g=null;var r=2}else if(Pm(t.i,e))n=e.F,vT(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=ld(),Ye(r,new tT(r,n)),vd(t)}else MT(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&lL(t,e)||r==2&&ey(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:hi(t,5);break;case 4:hi(t,10);break;case 3:hi(t,6);break;default:hi(t,2)}}}function PT(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function hi(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=nt(t.pb,t);n||(n=new fi("//www.google.com/images/cleardot.gif"),q.location&&q.location.protocol=="http"||Xl(n,"https"),pd(n)),iL(n.toString(),r)}else dt(2);t.H=0,t.h&&t.h.za(e),NT(t),AT(t)}A.pb=function(t){t?(this.l.info("Successfully pinged google.com"),dt(2)):(this.l.info("Failed to ping google.com"),dt(1))};function NT(t){if(t.H=0,t.ma=[],t.h){let e=_T(t.i);(e.length!=0||t.j.length!=0)&&(TC(t.ma,e),TC(t.ma,t.j),t.i.i.length=0,Fm(t.j),t.j.length=0),t.h.ya()}}function OT(t,e,n){var r=n instanceof fi?Un(n):new fi(n);if(r.g!="")e&&(r.g=e+"."+r.g),Jl(r,r.m);else{var i=q.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new fi(null);r&&Xl(o,r),e&&(o.g=e),i&&Jl(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&ge(r,n,e),ge(r,"VER",t.ra),Ya(t,r),r}function kT(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Ce(new Ka({ob:n})):new Ce(t.va),e.Oa(t.J),e}A.isActive=function(){return!!this.h&&this.h.isActive(this)};function FT(){}A=FT.prototype;A.Ba=function(){};A.Aa=function(){};A.za=function(){};A.ya=function(){};A.isActive=function(){return!0};A.Va=function(){};function td(){if(Oo&&!(10<=Number(AV)))throw Error("Environmental error: no available transport.")}td.prototype.g=function(t,e){return new Ct(t,e)};function Ct(t,e){He.call(this),this.g=new bT(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Oa(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Oa(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Fo(this)}ze(Ct,He);Ct.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;dt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=OT(t,null,t.Y),vd(t)};Ct.prototype.close=function(){Jm(this.g)};Ct.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=qm(t),t=n);e.j.push(new JV(e.fb++,t)),e.H==3&&vd(e)};Ct.prototype.N=function(){this.g.h=null,delete this.j,Jm(this.g),delete this.g,Ct.$.N.call(this)};function VT(t){Km.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ze(VT,Km);function LT(){Qm.call(this),this.status=1}ze(LT,Qm);function Fo(t){this.g=t}ze(Fo,FT);Fo.prototype.Ba=function(){Ye(this.g,"a")};Fo.prototype.Aa=function(t){Ye(this.g,new VT(t))};Fo.prototype.za=function(t){Ye(this.g,new LT)};Fo.prototype.ya=function(){Ye(this.g,"b")};function dL(){this.blockSize=-1}function Qt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ze(Qt,dL);Qt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function vm(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}Qt.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)vm(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){vm(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){vm(this,r),i=0;break}}this.h=i,this.i+=e};Qt.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ae(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var hL={};function ny(t){return-128<=t&&128>t?CV(t,function(e){return new ae([e|0],0>e?-1:0)}):new ae([t|0],0>t?-1:0)}function vn(t){if(isNaN(t)||!isFinite(t))return No;if(0>t)return Qe(vn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Nm;return new ae(e,0)}function jT(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Qe(jT(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=vn(Math.pow(e,8)),r=No,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=vn(Math.pow(e,o)),r=r.R(o).add(vn(s))):(r=r.R(n),r=r.add(vn(s)))}return r}var Nm=4294967296,No=ny(0),Om=ny(1),kC=ny(16777216);A=ae.prototype;A.ea=function(){if(kt(this))return-Qe(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Nm+r)*e,e*=Nm}return t};A.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Bn(this))return"0";if(kt(this))return"-"+Qe(this).toString(t);for(var e=vn(Math.pow(t,6)),n=this,r="";;){var i=rd(n,e).g;n=nd(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Bn(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};A.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Bn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function kt(t){return t.h==-1}A.X=function(t){return t=nd(this,t),kt(t)?-1:Bn(t)?0:1};function Qe(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ae(n,~t.h).add(Om)}A.abs=function(){return kt(this)?Qe(this):this};A.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new ae(n,n[n.length-1]&-2147483648?-1:0)};function nd(t,e){return t.add(Qe(e))}A.R=function(t){if(Bn(this)||Bn(t))return No;if(kt(this))return kt(t)?Qe(this).R(Qe(t)):Qe(Qe(this).R(t));if(kt(t))return Qe(this.R(Qe(t)));if(0>this.X(kC)&&0>t.X(kC))return vn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,a=t.D(i)>>>16,u=t.D(i)&65535;n[2*r+2*i]+=s*u,Zl(n,2*r+2*i),n[2*r+2*i+1]+=o*u,Zl(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Zl(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Zl(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ae(n,0)};function Zl(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function xa(t,e){this.g=t,this.h=e}function rd(t,e){if(Bn(e))throw Error("division by zero");if(Bn(t))return new xa(No,No);if(kt(t))return e=rd(Qe(t),e),new xa(Qe(e.g),Qe(e.h));if(kt(e))return e=rd(t,Qe(e)),new xa(Qe(e.g),e.h);if(30<t.g.length){if(kt(t)||kt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Om,r=e;0>=r.X(t);)n=FC(n),r=FC(r);var i=Ro(n,1),o=Ro(r,1);for(r=Ro(r,2),n=Ro(n,2);!Bn(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=Ro(r,1),n=Ro(n,1)}return e=nd(t,i.R(e)),new xa(i,e)}for(i=No;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=vn(n),s=o.R(e);kt(s)||0<s.X(t);)n-=r,o=vn(n),s=o.R(e);Bn(o)&&(o=Om),i=i.add(o),t=nd(t,s)}return new xa(i,t)}A.gb=function(t){return rd(this,t).h};A.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ae(n,this.h&t.h)};A.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ae(n,this.h|t.h)};A.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ae(n,this.h^t.h)};function FC(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ae(n,t.h)}function Ro(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new ae(i,t.h)}td.prototype.createWebChannel=td.prototype.g;Ct.prototype.send=Ct.prototype.u;Ct.prototype.open=Ct.prototype.m;Ct.prototype.close=Ct.prototype.close;dd.NO_ERROR=0;dd.TIMEOUT=8;dd.HTTP_ERROR=6;nT.COMPLETE="complete";rT.EventType=za;za.OPEN="a";za.CLOSE="b";za.ERROR="c";za.MESSAGE="d";He.prototype.listen=He.prototype.O;Ce.prototype.listenOnce=Ce.prototype.P;Ce.prototype.getLastError=Ce.prototype.Sa;Ce.prototype.getLastErrorCode=Ce.prototype.Ia;Ce.prototype.getStatus=Ce.prototype.da;Ce.prototype.getResponseJson=Ce.prototype.Wa;Ce.prototype.getResponseText=Ce.prototype.ja;Ce.prototype.send=Ce.prototype.ha;Ce.prototype.setWithCredentials=Ce.prototype.Oa;Qt.prototype.digest=Qt.prototype.l;Qt.prototype.reset=Qt.prototype.reset;Qt.prototype.update=Qt.prototype.j;ae.prototype.add=ae.prototype.add;ae.prototype.multiply=ae.prototype.R;ae.prototype.modulo=ae.prototype.gb;ae.prototype.compare=ae.prototype.X;ae.prototype.toNumber=ae.prototype.ea;ae.prototype.toString=ae.prototype.toString;ae.prototype.getBits=ae.prototype.D;ae.fromNumber=vn;ae.fromString=jT;var BT=Yt.createWebChannelTransport=function(){return new td},UT=Yt.getStatEventTarget=function(){return ld()},_d=Yt.ErrorCode=dd,$T=Yt.EventType=nT,qT=Yt.Event=pi,ry=Yt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},s9=Yt.FetchXmlHttpFactory=Ka,Za=Yt.WebChannel=rT,HT=Yt.XhrIo=Ce,zT=Yt.Md5=Qt,gi=Yt.Integer=ae;var GT="@firebase/firestore";var Fe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Fe.UNAUTHENTICATED=new Fe(null),Fe.GOOGLE_CREDENTIALS=new Fe("google-credentials-uid"),Fe.FIRST_PARTY=new Fe("first-party-uid"),Fe.MOCK_USER=new Fe("mock-user");var hs="10.8.0";var Cr=new $u("@firebase/firestore");function Uo(){return Cr.logLevel}function zb(t){Cr.setLogLevel(t)}function E(t,...e){if(Cr.logLevel<=tn.DEBUG){let n=e.map(o_);Cr.debug(`Firestore (${hs}): ${t}`,...n)}}function xe(t,...e){if(Cr.logLevel<=tn.ERROR){let n=e.map(o_);Cr.error(`Firestore (${hs}): ${t}`,...n)}}function Vt(t,...e){if(Cr.logLevel<=tn.WARN){let n=e.map(o_);Cr.warn(`Firestore (${hs}): ${t}`,...n)}}function o_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function x(t="Unexpected state"){let e=`FIRESTORE (${hs}) INTERNAL ASSERTION FAILED: `+t;throw xe(e),new Error(e)}function k(t,e){t||x()}function Gb(t,e){t||x()}function S(t,e){return t}var g={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},w=class extends sw{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ve=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var xd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},uy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Fe.UNAUTHENTICATED))}shutdown(){}},cy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},ly=class{constructor(e){this.t=e,this.currentUser=Fe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Ve;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ve,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>y(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{E("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(E("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ve)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(E("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(k(typeof r.accessToken=="string"),new xd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return k(e===null||typeof e=="string"),new Fe(e)}},dy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Fe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},hy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new dy(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Fe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},fy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},py=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&E("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,E("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{E("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):E("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(k(typeof n.token=="string"),this.R=n.token,new fy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function fL(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Rd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=fL(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function z(t,e){return t<e?-1:t>e?1:0}function Yo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Wb(t){return t+"\0"}var Ee=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new w(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new w(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new w(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new w(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?z(this.nanoseconds,e.nanoseconds):z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var V=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ee(0,0))}static max(){return new t(new Ee(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Pd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&x(),r===void 0?r=e.length-n:r>e.length-n&&x(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ne=class t extends Pd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new w(g.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},pL=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Re=class t extends Pd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return pL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new w(g.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new w(g.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new w(g.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new w(g.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var b=class t{constructor(e){this.path=e}static fromPath(e){return new t(ne.fromString(e))}static fromName(e){return new t(ne.fromString(e).popFirst(5))}static empty(){return new t(ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ne(e.slice()))}};var Zo=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function gy(t){return t.fields.find(e=>e.kind===2)}function yi(t){return t.fields.filter(e=>e.kind!==2)}Zo.UNKNOWN_ID=-1;var Wo=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var cu=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Lt.min())}};function Kb(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=V.fromTimestamp(r===1e9?new Ee(n+1,0):new Ee(n,r));return new Lt(i,b.empty(),e)}function Qb(t){return new Lt(t.readTime,t.key,-1)}var Lt=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(V.min(),b.empty(),-1)}static max(){return new t(V.max(),b.empty(),-1)}};function s_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=b.comparator(t.documentKey,e.documentKey),n!==0?n:z(t.largestBatchId,e.largestBatchId))}var Yb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Nd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Or(t){return y(this,null,function*(){if(t.code!==g.FAILED_PRECONDITION||t.message!==Yb)throw t;E("LocalStore","Unexpectedly lost primary lease")})}var p=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&x(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let c=u;n(e[c]).next(l=>{s[c]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var Od=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Ve,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Di(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=a_(r.target.error);this.V.reject(new Di(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new Di(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(E("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new yy(n)}},Hn=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Is())===12.2&&xe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return E("SimpleDb","Removing database:",e),vi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Uu())return!1;if(t.C())return!0;let e=Is(),n=t.S(e),r=0<n&&n<10,i=t.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return y(this,null,function*(){return this.db||(E("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new Di(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new w(g.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new w(g.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Di(e,s))},i.onupgradeneeded=o=>{E("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{E("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return y(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(e);let a=Od.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),p.reject(c))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,c=u.name!=="FirebaseError"&&s<3;if(E("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}},my=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return vi(this.k.delete())}},Di=class extends w{constructor(e,n){super(g.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function kr(t){return t.name==="IndexedDbTransactionError"}var yy=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(E("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(E("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),vi(r)}add(e){return E("SimpleDb","ADD",this.store.name,e,e),vi(this.store.add(e))}get(e){return vi(this.store.get(e)).next(n=>(n===void 0&&(n=null),E("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return E("SimpleDb","DELETE",this.store.name,e),vi(this.store.delete(e))}count(){return E("SimpleDb","COUNT",this.store.name),vi(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new p((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.G(o,(a,u)=>{s.push(u)}).next(()=>s)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new p((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){E("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new p((r,i)=>{n.onerror=o=>{let s=a_(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){let r=[];return new p((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new my(a),c=n(a.primaryKey,a.value,u);if(c instanceof p){let l=c.catch(d=>(u.done(),p.reject(d)));r.push(l)}u.isDone?i():u.$===null?a.continue():a.continue(u.$)}}).next(()=>p.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function vi(t){return new p((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=a_(r.target.error);n(i)}})}var WT=!1;function a_(t){let e=Hn.S(Is());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new w("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return WT||(WT=!0,setTimeout(()=>{throw r},0)),r}}return t}var vy=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){E("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>y(this,null,function*(){this.task=null;try{E("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(n){kr(n)?E("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Or(n)}yield this.ee(6e4)}))}},_y=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return y(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let r=new Set,i=n,o=!0;return p.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return E("IndexBackfiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(E("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=Qb(o);s_(s,r)>0&&(r=s)}),new Lt(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var Tt=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Pu(t){return t==null}function lu(t){return t===0&&1/t==-1/0}function Zb(t){return typeof t=="number"&&Number.isInteger(t)&&!lu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function ht(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=KT(e)),e=gL(t.get(n),e);return KT(e)}function gL(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function KT(t){return t+""}function _n(t){let e=t.length;if(k(e>=2),e===2)return k(t.charAt(0)===""&&t.charAt(1)===""),ne.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&x(),t.charAt(s+1)){case"":let a=t.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:x()}o=s+2}return new ne(r)}var QT=["userId","batchId"];function Cd(t,e){return[t,ht(e)]}function Xb(t,e,n){return[t,ht(e),n]}var mL={},yL=["prefixPath","collectionGroup","readTime","documentId"],vL=["prefixPath","collectionGroup","documentId"],_L=["collectionGroup","readTime","prefixPath","documentId"],wL=["canonicalId","targetId"],EL=["targetId","path"],IL=["path","targetId"],DL=["collectionId","parent"],CL=["indexId","uid"],TL=["uid","sequenceNumber"],bL=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],AL=["indexId","uid","orderedDocumentKey"],SL=["userId","collectionPath","documentId"],ML=["userId","collectionPath","largestBatchId"],xL=["userId","collectionGroup","largestBatchId"],Jb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],RL=[...Jb,"documentOverlays"],eA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tA=eA,PL=[...tA,"indexConfiguration","indexState","indexEntries"];var du=class extends Nd{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function We(t,e){let n=S(t);return Hn.M(n.ae,e)}function YT(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ki(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var me=class t{constructor(e,n){this.comparator=e,this.root=n||En.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Go(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Go(this.root,e,this.comparator,!1)}getReverseIterator(){return new Go(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Go(this.root,e,this.comparator,!0)}},Go=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},En=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw x();let e=this.left.check();if(e!==this.right.check())throw x();return e+(this.isRed()?0:1)}};En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw x()}get value(){throw x()}get color(){throw x()}get left(){throw x()}get right(){throw x()}copy(e,n,r,i,o){return this}insert(e,n,r){return new En(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var le=class t{constructor(e){this.comparator=e,this.data=new me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kd(this.data.getIterator())}getIteratorFrom(e){return new kd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},kd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Vo(t){return t.hasNext()?t.getNext():void 0}var bt=class t{constructor(e){this.fields=e,e.sort(Re.comparator)}static empty(){return new t([])}unionWith(e){let n=new le(Re.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Fd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function rA(){return typeof atob<"u"}var Ge=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Fd("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ge.EMPTY_BYTE_STRING=new Ge("");var NL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tr(t){if(k(!!t),typeof t=="string"){let e=0,n=NL.exec(t);if(k(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Te(t.seconds),nanos:Te(t.nanos)}}function Te(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function br(t){return typeof t=="string"?Ge.fromBase64String(t):Ge.fromUint8Array(t)}function bh(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function u_(t){let e=t.mapValue.fields.__previous_value__;return bh(e)?u_(e):e}function hu(t){let e=Tr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ee(e.seconds,e.nanos)}var wy=class{constructor(e,n,r,i,o,s,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}},Ar=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Ir={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Td={nullValue:"NULL_VALUE"};function Ci(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bh(t)?4:iA(t)?9007199254740991:10:x()}function Cn(t,e){if(t===e)return!0;let n=Ci(t);if(n!==Ci(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hu(t).isEqual(hu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Tr(i.timestampValue),a=Tr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return br(i.bytesValue).isEqual(br(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Te(i.geoPointValue.latitude)===Te(o.geoPointValue.latitude)&&Te(i.geoPointValue.longitude)===Te(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Te(i.integerValue)===Te(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Te(i.doubleValue),a=Te(o.doubleValue);return s===a?lu(s)===lu(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Yo(t.arrayValue.values||[],e.arrayValue.values||[],Cn);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(YT(s)!==YT(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Cn(s[u],a[u])))return!1;return!0}(t,e);default:return x()}}function fu(t,e){return(t.values||[]).find(n=>Cn(n,e))!==void 0}function Sr(t,e){if(t===e)return 0;let n=Ci(t),r=Ci(e);if(n!==r)return z(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return z(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Te(o.integerValue||o.doubleValue),u=Te(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return ZT(t.timestampValue,e.timestampValue);case 4:return ZT(hu(t),hu(e));case 5:return z(t.stringValue,e.stringValue);case 6:return function(o,s){let a=br(o),u=br(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let c=0;c<a.length&&c<u.length;c++){let l=z(a[c],u[c]);if(l!==0)return l}return z(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=z(Te(o.latitude),Te(s.latitude));return a!==0?a:z(Te(o.longitude),Te(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],u=s.values||[];for(let c=0;c<a.length&&c<u.length;++c){let l=Sr(a[c],u[c]);if(l)return l}return z(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Ir.mapValue&&s===Ir.mapValue)return 0;if(o===Ir.mapValue)return 1;if(s===Ir.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),c=s.fields||{},l=Object.keys(c);u.sort(),l.sort();for(let d=0;d<u.length&&d<l.length;++d){let h=z(u[d],l[d]);if(h!==0)return h;let f=Sr(a[u[d]],c[l[d]]);if(f!==0)return f}return z(u.length,l.length)}(t.mapValue,e.mapValue);default:throw x()}}function ZT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return z(t,e);let n=Tr(t),r=Tr(e),i=z(n.seconds,r.seconds);return i!==0?i:z(n.nanos,r.nanos)}function Xo(t){return Ey(t)}function Ey(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Tr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return br(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return b.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Ey(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Ey(n.fields[s])}`;return i+"}"}(t.mapValue):x()}function Ti(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Iy(t){return!!t&&"integerValue"in t}function pu(t){return!!t&&"arrayValue"in t}function XT(t){return!!t&&"nullValue"in t}function JT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bd(t){return!!t&&"mapValue"in t}function iu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ki(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=iu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=iu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function iA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function OL(t){return"nullValue"in t?Td:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ti(Ar.empty(),b.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:x()}function kL(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ti(Ar.empty(),b.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ir:x()}function eb(t,e){let n=Sr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function tb(t,e){let n=Sr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var ot=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=iu(n)}setAll(e){let n=Re.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=iu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());bd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];bd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ki(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(iu(this.value))}};function oA(t){let e=[];return ki(t.fields,(n,r)=>{let i=new Re([n]);if(bd(r)){let o=oA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new bt(e)}var Le=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,V.min(),V.min(),V.min(),ot.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,V.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,V.min(),V.min(),ot.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,V.min(),V.min(),ot.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(V.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=V.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Tn=class{constructor(e,n){this.position=e,this.inclusive=n}};function nb(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=b.comparator(b.fromName(s.referenceValue),n.key):r=Sr(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function rb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cn(t.position[n],e.position[n]))return!1;return!0}var bi=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function FL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Vd=class{},X=class t extends Vd{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Ty(e,n,r):n==="array-contains"?new Sy(e,r):n==="in"?new Ld(e,r):n==="not-in"?new My(e,r):n==="array-contains-any"?new xy(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new by(e,r):new Ay(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Sr(n,this.value)):n!==null&&Ci(this.value)===Ci(n)&&this.matchesComparison(Sr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return x()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ue=class t extends Vd{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return Jo(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function Jo(t){return t.op==="and"}function Dy(t){return t.op==="or"}function c_(t){return sA(t)&&Jo(t)}function sA(t){for(let e of t.filters)if(e instanceof ue)return!1;return!0}function Cy(t){if(t instanceof X)return t.field.canonicalString()+t.op.toString()+Xo(t.value);if(c_(t))return t.filters.map(e=>Cy(e)).join(",");{let e=t.filters.map(n=>Cy(n)).join(",");return`${t.op}(${e})`}}function aA(t,e){return t instanceof X?function(r,i){return i instanceof X&&r.op===i.op&&r.field.isEqual(i.field)&&Cn(r.value,i.value)}(t,e):t instanceof ue?function(r,i){return i instanceof ue&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&aA(s,i.filters[a]),!0):!1}(t,e):void x()}function uA(t,e){let n=t.filters.concat(e);return ue.create(n,t.op)}function cA(t){return t instanceof X?function(n){return`${n.field.canonicalString()} ${n.op} ${Xo(n.value)}`}(t):t instanceof ue?function(n){return n.op.toString()+" {"+n.getFilters().map(cA).join(" ,")+"}"}(t):"Filter"}var Ty=class extends X{constructor(e,n,r){super(e,n,r),this.key=b.fromName(r.referenceValue)}matches(e){let n=b.comparator(e.key,this.key);return this.matchesComparison(n)}},by=class extends X{constructor(e,n){super(e,"in",n),this.keys=lA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Ay=class extends X{constructor(e,n){super(e,"not-in",n),this.keys=lA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function lA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>b.fromName(r.referenceValue))}var Sy=class extends X{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return pu(n)&&fu(n.arrayValue,this.value)}},Ld=class extends X{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&fu(this.value.arrayValue,n)}},My=class extends X{constructor(e,n){super(e,"not-in",n)}matches(e){if(fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!fu(this.value.arrayValue,n)}},xy=class extends X{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!pu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>fu(this.value.arrayValue,r))}};var Ry=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function Py(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Ry(t,e,n,r,i,o,s)}function Ai(t){let e=S(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Cy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Pu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Xo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Xo(r)).join(",")),e.ce=n}return e.ce}function Nu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!FL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!aA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rb(t.startAt,e.startAt)&&rb(t.endAt,e.endAt)}function jd(t){return b.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Bd(t,e){return t.filters.filter(n=>n instanceof X&&n.field.isEqual(e))}function ib(t,e,n){let r=Td,i=!0;for(let o of Bd(t,e)){let s=Td,a=!0;switch(o.op){case"<":case"<=":s=OL(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Td}eb({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];eb({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function ob(t,e,n){let r=Ir,i=!0;for(let o of Bd(t,e)){let s=Ir,a=!0;switch(o.op){case">=":case">":s=kL(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Ir}tb({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];tb({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var Zt=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function dA(t,e,n,r,i,o,s,a){return new Zt(t,e,n,r,i,o,s,a)}function fs(t){return new Zt(t)}function sb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function l_(t){return t.collectionGroup!==null}function Ko(t){let e=S(t);if(e.le===null){e.le=[];let n=new Set;for(let o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new le(Re.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new bi(o,r))}),n.has(Re.keyField().canonicalString())||e.le.push(new bi(Re.keyField(),r))}return e.le}function ft(t){let e=S(t);return e.he||(e.he=VL(e,Ko(t))),e.he}function VL(t,e){if(t.limitType==="F")return Py(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new bi(i.field,o)});let n=t.endAt?new Tn(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Tn(t.startAt.position,t.startAt.inclusive):null;return Py(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ny(t,e){let n=t.filters.concat([e]);return new Zt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ud(t,e,n){return new Zt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ou(t,e){return Nu(ft(t),ft(e))&&t.limitType===e.limitType}function hA(t){return`${Ai(ft(t))}|lt:${t.limitType}`}function $o(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>cA(i)).join(", ")}]`),Pu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Xo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Xo(i)).join(",")),`Target(${r})`}(ft(t))}; limitType=${t.limitType})`}function ku(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):b.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Ko(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let c=nb(s,a,u);return s.inclusive?c<=0:c<0}(r.startAt,Ko(r),i)||r.endAt&&!function(s,a,u){let c=nb(s,a,u);return s.inclusive?c>=0:c>0}(r.endAt,Ko(r),i))}(t,e)}function fA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pA(t){return(e,n)=>{let r=!1;for(let i of Ko(t)){let o=LL(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function LL(t,e,n){let r=t.field.isKeyField()?b.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),c=a.data.field(o);return u!==null&&c!==null?Sr(u,c):x()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return x()}}var bn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ki(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return nA(this.inner)}size(){return this.innerSize}};var jL=new me(b.comparator);function vt(){return jL}var gA=new me(b.comparator);function nu(...t){let e=gA;for(let n of t)e=e.insert(n.key,n);return e}function mA(t){let e=gA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function wn(){return ou()}function yA(){return ou()}function ou(){return new bn(t=>t.toString(),(t,e)=>t.isEqual(e))}var BL=new me(b.comparator),UL=new le(b.comparator);function G(...t){let e=UL;for(let n of t)e=e.add(n);return e}var $L=new le(z);function d_(){return $L}function vA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lu(e)?"-0":e}}function _A(t){return{integerValue:""+t}}function wA(t,e){return Zb(e)?_A(e):vA(t,e)}var es=class{constructor(){this._=void 0}};function qL(t,e,n){return t instanceof Mr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&bh(o)&&(o=u_(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof zn?IA(t,e):t instanceof Gn?DA(t,e):function(i,o){let s=EA(i,o),a=ab(s)+ab(i.Ie);return Iy(s)&&Iy(i.Ie)?_A(a):vA(i.serializer,a)}(t,e)}function HL(t,e,n){return t instanceof zn?IA(t,e):t instanceof Gn?DA(t,e):n}function EA(t,e){return t instanceof xr?function(r){return Iy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Mr=class extends es{},zn=class extends es{constructor(e){super(),this.elements=e}};function IA(t,e){let n=CA(e);for(let r of t.elements)n.some(i=>Cn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Gn=class extends es{constructor(e){super(),this.elements=e}};function DA(t,e){let n=CA(e);for(let r of t.elements)n=n.filter(i=>!Cn(i,r));return{arrayValue:{values:n}}}var xr=class extends es{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function ab(t){return Te(t.integerValue||t.doubleValue)}function CA(t){return pu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Si=class{constructor(e,n){this.field=e,this.transform=n}};function zL(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof zn&&i instanceof zn||r instanceof Gn&&i instanceof Gn?Yo(r.elements,i.elements,Cn):r instanceof xr&&i instanceof xr?Cn(r.Ie,i.Ie):r instanceof Mr&&i instanceof Mr}(t.transform,e.transform)}var Oy=class{constructor(e,n){this.version=e,this.transformResults=n}},be=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ad(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ts=class{};function TA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Pr(t.key,be.none()):new Rr(t.key,t.data,be.none());{let n=t.data,r=ot.empty(),i=new le(Re.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Xt(t.key,r,new bt(i.toArray()),be.none())}}function GL(t,e,n){t instanceof Rr?function(i,o,s){let a=i.value.clone(),u=cb(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Xt?function(i,o,s){if(!Ad(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=cb(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(bA(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function su(t,e,n,r){return t instanceof Rr?function(o,s,a,u){if(!Ad(o.precondition,s))return a;let c=o.value.clone(),l=lb(o.fieldTransforms,u,s);return c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xt?function(o,s,a,u){if(!Ad(o.precondition,s))return a;let c=lb(o.fieldTransforms,u,s),l=s.data;return l.setAll(bA(o)),l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,a){return Ad(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function WL(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=EA(r.transform,i||null);o!=null&&(n===null&&(n=ot.empty()),n.set(r.field,o))}return n||null}function ub(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Yo(r,i,(o,s)=>zL(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Rr=class extends ts{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Xt=class extends ts{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function bA(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function cb(t,e,n){let r=new Map;k(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,HL(s,a,n[i]))}return r}function lb(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,qL(o,s,e))}return r}var Pr=class extends ts{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},gu=class extends ts{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var mu=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&GL(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=su(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=su(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=yA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=TA(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(V.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),G())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,(n,r)=>ub(n,r))&&Yo(this.baseMutations,e.baseMutations,(n,r)=>ub(n,r))}},ky=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){k(e.mutations.length===r.length);let i=function(){return BL}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var yu=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Fy=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Oe,te;function AA(t){switch(t){default:return x();case g.CANCELLED:case g.UNKNOWN:case g.DEADLINE_EXCEEDED:case g.RESOURCE_EXHAUSTED:case g.INTERNAL:case g.UNAVAILABLE:case g.UNAUTHENTICATED:return!1;case g.INVALID_ARGUMENT:case g.NOT_FOUND:case g.ALREADY_EXISTS:case g.PERMISSION_DENIED:case g.FAILED_PRECONDITION:case g.ABORTED:case g.OUT_OF_RANGE:case g.UNIMPLEMENTED:case g.DATA_LOSS:return!0}}function SA(t){if(t===void 0)return xe("GRPC error has no .code"),g.UNKNOWN;switch(t){case Oe.OK:return g.OK;case Oe.CANCELLED:return g.CANCELLED;case Oe.UNKNOWN:return g.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return g.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return g.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return g.INTERNAL;case Oe.UNAVAILABLE:return g.UNAVAILABLE;case Oe.UNAUTHENTICATED:return g.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return g.INVALID_ARGUMENT;case Oe.NOT_FOUND:return g.NOT_FOUND;case Oe.ALREADY_EXISTS:return g.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return g.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return g.FAILED_PRECONDITION;case Oe.ABORTED:return g.ABORTED;case Oe.OUT_OF_RANGE:return g.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return g.UNIMPLEMENTED;case Oe.DATA_LOSS:return g.DATA_LOSS;default:return x()}}(te=Oe||(Oe={}))[te.OK=0]="OK",te[te.CANCELLED=1]="CANCELLED",te[te.UNKNOWN=2]="UNKNOWN",te[te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",te[te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",te[te.NOT_FOUND=5]="NOT_FOUND",te[te.ALREADY_EXISTS=6]="ALREADY_EXISTS",te[te.PERMISSION_DENIED=7]="PERMISSION_DENIED",te[te.UNAUTHENTICATED=16]="UNAUTHENTICATED",te[te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",te[te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",te[te.ABORTED=10]="ABORTED",te[te.OUT_OF_RANGE=11]="OUT_OF_RANGE",te[te.UNIMPLEMENTED=12]="UNIMPLEMENTED",te[te.INTERNAL=13]="INTERNAL",te[te.UNAVAILABLE=14]="UNAVAILABLE",te[te.DATA_LOSS=15]="DATA_LOSS";var db=null;function MA(){return new TextEncoder}var KL=new gi([4294967295,4294967295],0);function hb(t){let e=MA().encode(t),n=new zT;return n.update(e),new Uint8Array(n.digest())}function fb(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new gi([n,r],0),new gi([i,o],0)]}var Vy=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ii(`Invalid padding: ${n}`);if(r<0)throw new Ii(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ii(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ii(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=gi.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(gi.fromNumber(r)));return i.compare(KL)===1&&(i=new gi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=hb(e),[r,i]=fb(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let n=hb(e),[r,i]=fb(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Re(s)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Ii=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var vu=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,_u.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(V.min(),i,new me(z),vt(),G())}},_u=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,G(),G(),G())}};var Qo=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},$d=class{constructor(e,n){this.targetId=e,this.fe=n}},qd=class{constructor(e,n,r=Ge.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Hd=class{constructor(){this.ge=0,this.pe=gb(),this.ye=Ge.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=G(),n=G(),r=G();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:x()}}),new _u(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=gb()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,k(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},Ly=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=vt(),this.Qe=pb(),this.Ke=new me(z)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:x()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let o=i.target;if(jd(o))if(r===0){let s=new b(o.path);this.We(n,s,Le.newNoDocument(s,V.min()))}else k(r===1);else{let s=this.Ze(n);if(s!==r){let a=this.Xe(e),u=a?this.et(a,e,s):1;if(u!==0){this.He(n);let c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}db?.tt(function(l,d,h,f,_){var v,m,I,R,T,P;let B={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},H=d.unchangedNames;return H&&(B.bloomFilter={applied:_===0,hashCount:(v=H?.hashCount)!==null&&v!==void 0?v:0,bitmapLength:(R=(I=(m=H?.bits)===null||m===void 0?void 0:m.bitmap)===null||I===void 0?void 0:I.length)!==null&&R!==void 0?R:0,padding:(P=(T=H?.bits)===null||T===void 0?void 0:T.padding)!==null&&P!==void 0?P:0,mightContain:de=>{var At;return(At=f?.mightContain(de))!==null&&At!==void 0&&At}}),B}(s,e.fe,this.Le.nt(),a,u))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=br(r).toUint8Array()}catch(u){if(u instanceof Fd)return Vt("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Vy(s,i,o)}catch(u){return Vt(u instanceof Ii?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&jd(a.target)){let u=new b(a.target.path);this.qe.get(u)!==null||this.st(s,u)||this.We(s,u,Le.newNoDocument(u,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=G();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let c=this.Ye(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));let i=new vu(e,n,this.Ke,this.qe,r);return this.qe=vt(),this.Qe=pb(),this.Ke=new me(z),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Hd,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new le(z),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||E("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Hd),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function pb(){return new me(b.comparator)}function gb(){return new me(b.comparator)}var QL={asc:"ASCENDING",desc:"DESCENDING"},YL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZL={and:"AND",or:"OR"},jy=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function By(t,e){return t.useProto3Json||Pu(e)?e:{value:e}}function ns(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function XL(t,e){return ns(t,e.toTimestamp())}function Pe(t){return k(!!t),V.fromTimestamp(function(n){let r=Tr(n);return new Ee(r.seconds,r.nanos)}(t))}function h_(t,e){return Uy(t,e).canonicalString()}function Uy(t,e){let n=function(i){return new ne(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function RA(t){let e=ne.fromString(t);return k(UA(e)),e}function wu(t,e){return h_(t.databaseId,e.path)}function In(t,e){let n=RA(e);if(n.get(1)!==t.databaseId.projectId)throw new w(g.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new w(g.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new b(OA(n))}function PA(t,e){return h_(t.databaseId,e)}function NA(t){let e=RA(t);return e.length===4?ne.emptyPath():OA(e)}function $y(t){return new ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function OA(t){return k(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function mb(t,e,n){return{name:wu(t,e),fields:n.value.mapValue.fields}}function kA(t,e,n){let r=In(t,e.name),i=Pe(e.updateTime),o=e.createTime?Pe(e.createTime):V.min(),s=new ot({mapValue:{fields:e.fields}}),a=Le.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function JL(t,e){return"found"in e?function(r,i){k(!!i.found),i.found.name,i.found.updateTime;let o=In(r,i.found.name),s=Pe(i.found.updateTime),a=i.found.createTime?Pe(i.found.createTime):V.min(),u=new ot({mapValue:{fields:i.found.fields}});return Le.newFoundDocument(o,s,a,u)}(t,e):"missing"in e?function(r,i){k(!!i.missing),k(!!i.readTime);let o=In(r,i.missing),s=Pe(i.readTime);return Le.newNoDocument(o,s)}(t,e):x()}function e2(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:x()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,l){return c.useProto3Json?(k(l===void 0||typeof l=="string"),Ge.fromBase64String(l||"")):(k(l===void 0||l instanceof Uint8Array),Ge.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){let l=c.code===void 0?g.UNKNOWN:SA(c.code);return new w(l,c.message||"")}(s);n=new qd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=In(t,r.document.name),o=Pe(r.document.updateTime),s=r.document.createTime?Pe(r.document.createTime):V.min(),a=new ot({mapValue:{fields:r.document.fields}}),u=Le.newFoundDocument(i,o,s,a),c=r.targetIds||[],l=r.removedTargetIds||[];n=new Qo(c,l,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=In(t,r.document),o=r.readTime?Pe(r.readTime):V.min(),s=Le.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Qo([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=In(t,r.document),o=r.removedTargetIds||[];n=new Qo([],o,i,null)}else{if(!("filter"in e))return x();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Fy(i,o),a=r.targetId;n=new $d(a,s)}}return n}function Eu(t,e){let n;if(e instanceof Rr)n={update:mb(t,e.key,e.value)};else if(e instanceof Pr)n={delete:wu(t,e.key)};else if(e instanceof Xt)n={update:mb(t,e.key,e.data),updateMask:s2(e.fieldMask)};else{if(!(e instanceof gu))return x();n={verify:wu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Mr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zn)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof xr)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw x()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:XL(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:x()}(t,e.precondition)),n}function qy(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?be.updateTime(Pe(o.updateTime)):o.exists!==void 0?be.exists(o.exists):be.none()}(e.currentDocument):be.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)k(a.setToServerValue==="REQUEST_TIME"),u=new Mr;else if("appendMissingElements"in a){let l=a.appendMissingElements.values||[];u=new zn(l)}else if("removeAllFromArray"in a){let l=a.removeAllFromArray.values||[];u=new Gn(l)}else"increment"in a?u=new xr(s,a.increment):x();let c=Re.fromServerFormat(a.fieldPath);return new Si(c,u)}(t,i)):[];if(e.update){e.update.name;let i=In(t,e.update.name),o=new ot({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let c=u.fieldPaths||[];return new bt(c.map(l=>Re.fromServerFormat(l)))}(e.updateMask);return new Xt(i,o,s,n,r)}return new Rr(i,o,n,r)}if(e.delete){let i=In(t,e.delete);return new Pr(i,n)}if(e.verify){let i=In(t,e.verify);return new gu(i,n)}return x()}function t2(t,e){return t&&t.length>0?(k(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Pe(i.updateTime):Pe(o);return s.isEqual(V.min())&&(s=Pe(o)),new Oy(s,i.transformResults||[])}(n,e))):[]}function FA(t,e){return{documents:[PA(t,e.path)]}}function VA(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=PA(t,i);let o=function(c){if(c.length!==0)return BA(ue.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(c){if(c.length!==0)return c.map(l=>function(h){return{field:qo(h.field),direction:r2(h.dir)}}(l))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=By(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:i}}function LA(t){let e=NA(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){k(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];n.where&&(o=function(d){let h=jA(d);return h instanceof ue&&c_(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(_){return new bi(Ho(_.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Pu(h)?null:h}(n.limit));let u=null;n.startAt&&(u=function(d){let h=!!d.before,f=d.values||[];return new Tn(f,h)}(n.startAt));let c=null;return n.endAt&&(c=function(d){let h=!d.before,f=d.values||[];return new Tn(f,h)}(n.endAt)),dA(e,i,s,o,a,"F",u,c)}function n2(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return x()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ho(n.unaryFilter.field);return X.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ho(n.unaryFilter.field);return X.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ho(n.unaryFilter.field);return X.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ho(n.unaryFilter.field);return X.create(s,"!=",{nullValue:"NULL_VALUE"});default:return x()}}(t):t.fieldFilter!==void 0?function(n){return X.create(Ho(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return x()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ue.create(n.compositeFilter.filters.map(r=>jA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return x()}}(n.compositeFilter.op))}(t):x()}function r2(t){return QL[t]}function i2(t){return YL[t]}function o2(t){return ZL[t]}function qo(t){return{fieldPath:t.canonicalString()}}function Ho(t){return Re.fromServerFormat(t.fieldPath)}function BA(t){return t instanceof X?function(n){if(n.op==="=="){if(JT(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NAN"}};if(XT(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(JT(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NOT_NAN"}};if(XT(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qo(n.field),op:i2(n.op),value:n.value}}}(t):t instanceof ue?function(n){let r=n.getFilters().map(i=>BA(i));return r.length===1?r[0]:{compositeFilter:{op:o2(n.op),filters:r}}}(t):x()}function s2(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function UA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var rs=class t{constructor(e,n,r,i,o=V.min(),s=V.min(),a=Ge.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var zd=class{constructor(e){this.ct=e}};function a2(t,e){let n;if(e.document)n=kA(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=b.fromSegments(e.noDocument.path),i=xi(e.noDocument.readTime);n=Le.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return x();{let r=b.fromSegments(e.unknownDocument.path),i=xi(e.unknownDocument.version);n=Le.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new Ee(i[0],i[1]);return V.fromTimestamp(o)}(e.readTime)),n}function yb(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Gd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:wu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:ns(o,s.version.toTimestamp()),createTime:ns(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Mi(e.version)};else{if(!e.isUnknownDocument())return x();r.unknownDocument={path:n.path.toArray(),version:Mi(e.version)}}return r}function Gd(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Mi(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xi(t){let e=new Ee(t.seconds,t.nanoseconds);return V.fromTimestamp(e)}function _i(t,e){let n=(e.baseMutations||[]).map(o=>qy(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>qy(t.ct,o)),i=Ee.fromMillis(e.localWriteTimeMs);return new mu(e.batchId,i,n,r)}function ru(t){let e=xi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?xi(t.lastLimboFreeSnapshotVersion):V.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return k(o.documents.length===1),ft(fs(NA(o.documents[0])))}(t.query):function(o){return ft(LA(o))}(t.query),new rs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ge.fromBase64String(t.resumeToken))}function $A(t,e){let n=Mi(e.snapshotVersion),r=Mi(e.lastLimboFreeSnapshotVersion),i;i=jd(e.target)?FA(t.ct,e.target):VA(t.ct,e.target).ut;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ai(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function f_(t){let e=LA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ud(e,e.limit,"L"):e}function iy(t,e){return new yu(e.largestBatchId,qy(t.ct,e.overlayMutation))}function vb(t,e){let n=e.path.lastSegment();return[t,ht(e.path.popLast()),n]}function _b(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Mi(r.readTime),documentKey:ht(r.documentKey.path),largestBatchId:r.largestBatchId}}var Hy=class{getBundleMetadata(e,n){return wb(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:xi(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return wb(e).put(function(i){return{bundleId:i.id,createTime:Mi(Pe(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return Eb(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:f_(o.bundledQuery),readTime:xi(o.readTime)}}(r)})}saveNamedQuery(e,n){return Eb(e).put(function(i){return{name:i.name,readTime:Mi(Pe(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function wb(t){return We(t,"bundles")}function Eb(t){return We(t,"namedQueries")}var Wd=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Xa(e).get(vb(this.userId,n)).next(r=>r?iy(this.serializer,r):null)}getOverlays(e,n){let r=wn();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new yu(n,s);i.push(this.ht(e,a))}),p.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(ht(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Xa(e).H("collectionPathOverlayIndex",a))}),p.waitFor(o)}getOverlaysForCollection(e,n,r){let i=wn(),o=ht(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Xa(e).W("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let c=iy(this.serializer,u);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=wn(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Xa(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,c,l)=>{let d=iy(this.serializer,c);o.size()<i||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):l.done()}).next(()=>o)}ht(e,n){return Xa(e).put(function(i,o,s){let[a,u,c]=vb(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Eu(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function Xa(t){return We(t,"documentOverlays")}var $n=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Te(e.integerValue));else if("doubleValue"in e){let r=Te(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),lu(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(br(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?iA(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):x()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),b.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};$n.bt=new $n;function u2(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Ib(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=u2(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var zy=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Bt(e){let n=this.Lt(e),r=Ib(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Lt(e),r=Ib(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Gy=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}},Wy=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},wi=class{constructor(){this.Gt=new zy,this.zt=new Gy(this.Gt),this.jt=new Wy(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Ei=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function vr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Db(t.arrayValue,e.arrayValue),n!==0?n:(n=Db(t.directionalValue,e.directionalValue),n!==0?n:b.comparator(t.documentKey,e.documentKey)))}function Db(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var Kd=class{constructor(e){this.Yt=new le((n,r)=>Re.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(k(e.collectionGroup===this.collectionId),this.en)return!1;let n=gy(e);if(n!==void 0&&!this.nn(n))return!1;let r=yi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.rn(a,u)||!this.sn(this.Zt[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new le(Re.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Wo(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Wo(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Wo(r.field,r.dir==="asc"?0:1)));return new Zo(Zo.UNKNOWN_ID,this.collectionId,n,cu.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function qA(t){var e,n;if(k(t instanceof X||t instanceof ue),t instanceof X){if(t instanceof Ld){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>X.create(t.field,"==",o)))||[];return ue.create(i,"or")}return t}let r=t.filters.map(i=>qA(i));return ue.create(r,t.op)}function c2(t){if(t.getFilters().length===0)return[];let e=Yy(qA(t));return k(HA(e)),Ky(e)||Qy(e)?[e]:e.getFilters()}function Ky(t){return t instanceof X}function Qy(t){return t instanceof ue&&c_(t)}function HA(t){return Ky(t)||Qy(t)||function(n){if(n instanceof ue&&Dy(n)){for(let r of n.getFilters())if(!Ky(r)&&!Qy(r))return!1;return!0}return!1}(t)}function Yy(t){if(k(t instanceof X||t instanceof ue),t instanceof X)return t;if(t.filters.length===1)return Yy(t.filters[0]);let e=t.filters.map(r=>Yy(r)),n=ue.create(e,t.op);return n=Qd(n),HA(n)?n:(k(n instanceof ue),k(Jo(n)),k(n.filters.length>1),n.filters.reduce((r,i)=>p_(r,i)))}function p_(t,e){let n;return k(t instanceof X||t instanceof ue),k(e instanceof X||e instanceof ue),n=t instanceof X?e instanceof X?function(i,o){return ue.create([i,o],"and")}(t,e):Cb(t,e):e instanceof X?Cb(e,t):function(i,o){if(k(i.filters.length>0&&o.filters.length>0),Jo(i)&&Jo(o))return uA(i,o.getFilters());let s=Dy(i)?i:o,a=Dy(i)?o:i,u=s.filters.map(c=>p_(c,a));return ue.create(u,"or")}(t,e),Qd(n)}function Cb(t,e){if(Jo(e))return uA(e,t.getFilters());{let n=e.filters.map(r=>p_(t,r));return ue.create(n,"or")}}function Qd(t){if(k(t instanceof X||t instanceof ue),t instanceof X)return t;let e=t.getFilters();if(e.length===1)return Qd(e[0]);if(sA(t))return t;let n=e.map(i=>Qd(i)),r=[];return n.forEach(i=>{i instanceof X?r.push(i):i instanceof ue&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ue.create(r,t.op)}var Zy=class{constructor(){this._n=new Iu}addToCollectionParentIndex(e,n){return this._n.add(n),p.resolve()}getCollectionParents(e,n){return p.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return p.resolve()}deleteFieldIndex(e,n){return p.resolve()}deleteAllFieldIndexes(e){return p.resolve()}createTargetIndexes(e,n){return p.resolve()}getDocumentsMatchingTarget(e,n){return p.resolve(null)}getIndexType(e,n){return p.resolve(0)}getFieldIndexes(e,n){return p.resolve([])}getNextCollectionGroupToUpdate(e){return p.resolve(null)}getMinOffset(e,n){return p.resolve(Lt.min())}getMinOffsetFromCollectionGroup(e,n){return p.resolve(Lt.min())}updateCollectionGroup(e,n,r){return p.resolve()}updateIndexEntries(e,n){return p.resolve()}},Iu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new le(ne.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new le(ne.comparator)).toArray()}};var wd=new Uint8Array(0),Xy=class{constructor(e,n){this.databaseId=n,this.an=new Iu,this.un=new bn(r=>Ai(r),(r,i)=>Nu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:r,parent:ht(i)};return Tb(e).put(o)}return p.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[Wb(n),""],!1,!0);return Tb(e).W(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(_n(s.parent))}return r})}addFieldIndex(e,n){let r=Ja(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=jo(e);return o.next(a=>{s.put(_b(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=Ja(e),i=jo(e),o=Lo(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Ja(e),r=Lo(e),i=jo(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return p.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Kd(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=Lo(e),i=!0,o=new Map;return p.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=G(),a=[];return p.forEach(o,(u,c)=>{E("IndexedDbIndexManager",`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(P=>`${P.fieldPath}:${P.kind}`).join(",")}`}(u)} to execute ${Ai(n)}`);let l=function(T,P){let B=gy(P);if(B===void 0)return null;for(let H of Bd(T,B.fieldPath))switch(H.op){case"array-contains-any":return H.value.arrayValue.values||[];case"array-contains":return[H.value]}return null}(c,u),d=function(T,P){let B=new Map;for(let H of yi(P))for(let de of Bd(T,H.fieldPath))switch(de.op){case"==":case"in":B.set(H.fieldPath.canonicalString(),de.value);break;case"not-in":case"!=":return B.set(H.fieldPath.canonicalString(),de.value),Array.from(B.values())}return null}(c,u),h=function(T,P){let B=[],H=!0;for(let de of yi(P)){let At=de.kind===0?ib(T,de.fieldPath,T.startAt):ob(T,de.fieldPath,T.startAt);B.push(At.value),H&&(H=At.inclusive)}return new Tn(B,H)}(c,u),f=function(T,P){let B=[],H=!0;for(let de of yi(P)){let At=de.kind===0?ob(T,de.fieldPath,T.endAt):ib(T,de.fieldPath,T.endAt);B.push(At.value),H&&(H=At.inclusive)}return new Tn(B,H)}(c,u),_=this.hn(u,c,h),v=this.hn(u,c,f),m=this.Pn(u,c,d),I=this.In(u.indexId,l,_,h.inclusive,v,f.inclusive,m);return p.forEach(I,R=>r.j(R,n.limit).next(T=>{T.forEach(P=>{let B=b.fromSegments(P.documentKey);s.has(B)||(s=s.add(B),a.push(B))})}))}).next(()=>a)}return p.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=c2(ue.create(e.filters,"and")).map(r=>Py(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){let u=(n!=null?n.length:1)*Math.max(r.length,o.length),c=u/(n!=null?n.length:1),l=[];for(let d=0;d<u;++d){let h=n?this.Tn(n[d/c]):wd,f=this.En(e,h,r[d%c],i),_=this.dn(e,h,o[d%c],s),v=a.map(m=>this.En(e,h,m,!0));l.push(...this.createRange(f,_,v))}return l}En(e,n,r,i){let o=new Ei(e,b.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){let o=new Ei(e,b.empty(),n,r);return i?o.Jt():o}ln(e,n){let r=new Kd(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.cn(n);return p.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let c=new le(Re.comparator),l=!1;for(let d of u.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?l=!0:c=c.add(h.field));for(let d of u.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(l?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new wi;for(let i of yi(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Ht(i.kind);$n.bt.Pt(o,s)}return r.Wt()}Tn(e){let n=new wi;return $n.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new wi;return $n.bt.Pt(Ti(this.databaseId,n),r.Ht(function(o){let s=yi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new wi);let o=0;for(let s of yi(e)){let a=r[o++];for(let u of i)if(this.Vn(n,s.fieldPath)&&pu(a))i=this.mn(i,s,a);else{let c=u.Ht(s.kind);$n.bt.Pt(a,c)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new wi;u.seed(a.Wt()),$n.bt.Pt(s,u.Ht(n.kind)),o.push(u)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof X&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Ja(e),i=jo(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{let s=[];return p.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(l,d){let h=d?new cu(d.sequenceNumber,new Lt(xi(d.readTime),new b(_n(d.documentKey)),d.largestBatchId)):cu.empty(),f=l.fields.map(([_,v])=>new Wo(Re.fromServerFormat(_),v));return new Zo(l.indexId,l.collectionGroup,f,h)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:z(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Ja(e),o=jo(e);return this.gn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>p.forEach(a,u=>o.put(_b(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return p.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?p.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),p.forEach(a,u=>this.pn(e,i,u).next(c=>{let l=this.yn(o,u);return c.isEqual(l)?p.resolve():this.wn(e,o,u,c,l)}))))})}Sn(e,n,r,i){return Lo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Lo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=Lo(e),o=new le(vr);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new Ei(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new le(vr),i=this.An(n,e);if(i==null)return r;let o=gy(n);if(o!=null){let s=e.data.field(o.fieldPath);if(pu(s))for(let a of s.arrayValue.values||[])r=r.add(new Ei(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new Ei(n.indexId,e.key,wd,i));return r}wn(e,n,r,i,o){E("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(u,c,l,d,h){let f=u.getIterator(),_=c.getIterator(),v=Vo(f),m=Vo(_);for(;v||m;){let I=!1,R=!1;if(v&&m){let T=l(v,m);T<0?R=!0:T>0&&(I=!0)}else v!=null?R=!0:I=!0;I?(d(m),m=Vo(_)):R?(h(v),v=Vo(f)):(v=Vo(f),m=Vo(_))}}(i,o,vr,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),p.waitFor(s)}gn(e){let n=1;return jo(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>vr(s,a)).filter((s,a,u)=>!a||vr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=vr(s,e),u=vr(s,n);if(a===0)i[0]=e.Jt();else if(a>0&&u<0)i.push(s),i.push(s.Jt());else if(u>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,wd,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,wd,[]];o.push(IDBKeyRange.bound(a,u))}return o}Dn(e,n){return vr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(bb)}getMinOffset(e,n){return p.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||x())).next(bb)}};function Tb(t){return We(t,"collectionParents")}function Lo(t){return We(t,"indexEntries")}function Ja(t){return We(t,"indexConfiguration")}function jo(t){return We(t,"indexState")}function bb(t){k(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;s_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Lt(e.readTime,e.documentKey,n)}var Ab={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ft=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function zA(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Y({range:s},(l,d,h)=>(a++,h.delete()));o.push(u.next(()=>{k(a===1)}));let c=[];for(let l of n.mutations){let d=Xb(e,l.key.path,n.batchId);o.push(i.delete(d)),c.push(l.key)}return p.waitFor(o).next(()=>c)}function Yd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw x();e=t.noDocument}return JSON.stringify(e).length}Ft.DEFAULT_COLLECTION_PERCENTILE=10,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ft.DEFAULT=new Ft(41943040,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ft.DISABLED=new Ft(-1,0,0);var Zd=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){k(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _r(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=zo(e),s=_r(e);return s.add({}).next(a=>{k(typeof a=="number");let u=new mu(a,n,r,i),c=function(f,_,v){let m=v.baseMutations.map(R=>Eu(f.ct,R)),I=v.mutations.map(R=>Eu(f.ct,R));return{userId:_,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:m,mutations:I}}(this.serializer,this.userId,u),l=[],d=new le((h,f)=>z(h.canonicalString(),f.canonicalString()));for(let h of i){let f=Xb(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),l.push(s.put(c)),l.push(o.put(f,mL))}return d.forEach(h=>{l.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),p.waitFor(l).next(()=>u)})}lookupMutationBatch(e,n){return _r(e).get(n).next(r=>r?(k(r.userId===this.userId),_i(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?p.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return _r(e).Y({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(k(a.batchId>=r),o=_i(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return _r(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _r(e).W("userMutationsIndex",n).next(r=>r.map(i=>_i(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=Cd(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return zo(e).Y({range:i},(s,a,u)=>{let[c,l,d]=s,h=_n(l);if(c===this.userId&&n.path.isEqual(h))return _r(e).get(d).next(f=>{if(!f)throw x();k(f.userId===this.userId),o.push(_i(this.serializer,f))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new le(z),i=[];return n.forEach(o=>{let s=Cd(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=zo(e).Y({range:a},(c,l,d)=>{let[h,f,_]=c,v=_n(f);h===this.userId&&o.path.isEqual(v)?r=r.add(_):d.done()});i.push(u)}),p.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=Cd(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new le(z);return zo(e).Y({range:s},(u,c,l)=>{let[d,h,f]=u,_=_n(h);d===this.userId&&r.isPrefixOf(_)?_.length===i&&(a=a.add(f)):l.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(_r(e).get(o).next(s=>{if(s===null)throw x();k(s.userId===this.userId),r.push(_i(this.serializer,s))}))}),p.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return zA(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),p.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return p.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return zo(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=_n(o[1]);i.push(u)}else a.done()}).next(()=>{k(i.length===0)})})}containsKey(e,n){return GA(e,this.userId,n)}xn(e){return WA(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function GA(t,e,n){let r=Cd(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return zo(t).Y({range:o,J:!0},(a,u,c)=>{let[l,d,h]=a;l===e&&d===i&&(s=!0),c.done()}).next(()=>s)}function _r(t){return We(t,"mutations")}function zo(t){return We(t,"documentMutations")}function WA(t){return We(t,"mutationQueues")}var is=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Bn(){return new t(-1)}};var Jy=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{let r=new is(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>V.fromTimestamp(new Ee(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Bo(e).delete(n.targetId)).next(()=>this.Ln(e)).next(r=>(k(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return Bo(e).Y((s,a)=>{let u=ru(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>p.waitFor(o)).next(()=>i)}forEachTarget(e,n){return Bo(e).Y((r,i)=>{let o=ru(i);n(o)})}Ln(e){return Sb(e).get("targetGlobalKey").next(n=>(k(n!==null),n))}kn(e,n){return Sb(e).put("targetGlobalKey",n)}qn(e,n){return Bo(e).put($A(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Ai(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Bo(e).Y({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let c=ru(a);Nu(n,c.target)&&(o=c,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=wr(e);return n.forEach(s=>{let a=ht(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),p.waitFor(i)}removeMatchingKeys(e,n,r){let i=wr(e);return p.forEach(n,o=>{let s=ht(o.path);return p.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=wr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=wr(e),o=G();return i.Y({range:r,J:!0},(s,a,u)=>{let c=_n(s[1]),l=new b(c);o=o.add(l)}).next(()=>o)}containsKey(e,n){let r=ht(n.path),i=IDBKeyRange.bound([r],[Wb(r)],!1,!0),o=0;return wr(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],u,c)=>{s!==0&&(o++,c.done())}).next(()=>o>0)}_t(e,n){return Bo(e).get(n).next(r=>r?ru(r):null)}};function Bo(t){return We(t,"targets")}function Sb(t){return We(t,"targetGlobal")}function wr(t){return We(t,"targetDocuments")}function Mb([t,e],[n,r]){let i=z(t,n);return i===0?z(e,r):i}var ev=class{constructor(e){this.Kn=e,this.buffer=new le(Mb),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();Mb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},tv=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){E("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>y(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){kr(n)?E("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Or(n)}yield this.zn(3e5)}))}},nv=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return p.resolve(Tt._e);let r=new ev(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(E("LruGarbageCollector","Garbage collection skipped; disabled"),p.resolve(Ab)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(E("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ab):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,u,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(E("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(o=d,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),Uo()<=tn.DEBUG&&E("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-l}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${d} documents in `+(c-u)+`ms
Total Duration: ${c-l}ms`),p.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})))}};function l2(t,e){return new nv(t,e)}var rv=class{constructor(e,n){this.db=e,this.garbageCollector=l2(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return Ed(e,r)}removeReference(e,n,r){return Ed(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Ed(e,n)}er(e,n){return function(i,o){let s=!1;return WA(i).Z(a=>GA(i,a,o).next(u=>(u&&(s=!0),p.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Xn(e,(s,a)=>{if(a<=n){let u=this.er(e,s).next(c=>{if(!c)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,V.min()),wr(e).delete(function(d){return[0,ht(d.path)]}(s))))});i.push(u)}}).next(()=>p.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Ed(e,n)}Xn(e,n){let r=wr(e),i,o=Tt._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:c})=>{s===0?(o!==Tt._e&&n(new b(_n(i)),o),o=c,i=u):o=Tt._e}).next(()=>{o!==Tt._e&&n(new b(_n(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Ed(t,e){return wr(t).put(function(r,i){return{targetId:0,path:ht(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var Xd=class{constructor(){this.changes=new bn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Le.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?p.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var iv=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return mi(e).put(r)}removeEntry(e,n,r){return mi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Gd(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Le.newInvalidDocument(n);return mi(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(eu(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:Le.newInvalidDocument(n)};return mi(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(eu(n))},(i,o)=>{r={document:this.nr(n,o),size:Yd(o)}}).next(()=>r)}getEntries(e,n){let r=vt();return this.ir(e,n,(i,o)=>{let s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=vt(),i=new me(b.comparator);return this.ir(e,n,(o,s)=>{let a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,Yd(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return p.resolve();let i=new le(Pb);n.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(eu(i.first()),eu(i.last())),s=i.getIterator(),a=s.getNext();return mi(e).Y({index:"documentKeyIndex",range:o},(u,c,l)=>{let d=b.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&Pb(a,d)<0;)r(a,null),a=s.getNext();a&&a.isEqual(d)&&(r(a,c),a=s.hasNext()?s.getNext():null),a?l.U(eu(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Gd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mi(e).W(IDBKeyRange.bound(a,u,!0)).next(c=>{o?.incrementDocumentReadCount(c.length);let l=vt();for(let d of c){let h=this.nr(b.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(ku(n,h)||i.has(h.key))&&(l=l.insert(h.key,h))}return l})}getAllFromCollectionGroup(e,n,r,i){let o=vt(),s=Rb(n,r),a=Rb(n,Lt.max());return mi(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,c,l)=>{let d=this.nr(b.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);o=o.insert(d.key,d),o.size===i&&l.done()}).next(()=>o)}newChangeBuffer(e){return new ov(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return xb(e).get("remoteDocumentGlobalKey").next(n=>(k(!!n),n))}tr(e,n){return xb(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=a2(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(V.min())))return r}return Le.newInvalidDocument(e)}};function KA(t){return new iv(t)}var ov=class extends Xd{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new bn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new le((o,s)=>z(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=yb(this.ar.serializer,s);i=i.add(o.path.popLast());let c=Yd(u);r+=c-a.size,n.push(this.ar.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=yb(this.ar.serializer,s.convertToNoDocument(V.min()));n.push(this.ar.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),p.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function xb(t){return We(t,"remoteDocumentGlobal")}function mi(t){return We(t,"remoteDocumentsV14")}function eu(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Rb(t,e){let n=e.documentKey.path.toArray();return[t,Gd(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Pb(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=z(n[o],r[o]),i)return i;return i=z(n.length,r.length),i||(i=z(n[n.length-2],r[r.length-2]),i||z(n[n.length-1],r[r.length-1]))}var sv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Jd=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&su(r.mutation,i,bt.empty(),Ee.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,G()).next(()=>r))}getLocalViewOfDocuments(e,n,r=G()){let i=wn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=nu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=wn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,G()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=vt(),s=ou(),a=function(){return ou()}();return n.forEach((u,c)=>{let l=r.get(c.key);i.has(c.key)&&(l===void 0||l.mutation instanceof Xt)?o=o.insert(c.key,c):l!==void 0?(s.set(c.key,l.mutation.getFieldMask()),su(l.mutation,c,l.mutation.getFieldMask(),Ee.now())):s.set(c.key,bt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,l)=>s.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new sv(l,(d=s.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=ou(),i=new me((s,a)=>s-a),o=G();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let c=n.get(u);if(c===null)return;let l=r.get(u)||bt.empty();l=a.applyToLocalView(c,l),r.set(u,l);let d=(i.get(a.batchId)||G()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),c=u.key,l=u.value,d=yA();l.forEach(h=>{if(!o.has(h)){let f=TA(n.get(h),r.get(h));f!==null&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,d))}return p.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return b.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):l_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):p.resolve(wn()),a=-1,u=o;return s.next(c=>p.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(l)?p.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,G())).next(l=>({batchId:a,changes:mA(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new b(n)).next(r=>{let i=nu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=nu();return this.indexManager.getCollectionParents(e,o).next(a=>p.forEach(a,u=>{let c=function(d,h){return new Zt(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(l=>{l.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,c)=>{let l=c.getKey();s.get(l)===null&&(s=s.insert(l,Le.newInvalidDocument(l)))});let a=nu();return s.forEach((u,c)=>{let l=o.get(u);l!==void 0&&su(l.mutation,c,bt.empty(),Ee.now()),ku(n,c)&&(a=a.insert(u,c))}),a})}};var av=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return p.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Pe(i.createTime)}}(n)),p.resolve()}getNamedQuery(e,n){return p.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:f_(i.bundledQuery),readTime:Pe(i.readTime)}}(n)),p.resolve()}};var uv=class{constructor(){this.overlays=new me(b.comparator),this.hr=new Map}getOverlay(e,n){return p.resolve(this.overlays.get(n))}getOverlays(e,n){let r=wn();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),p.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),p.resolve()}getOverlaysForCollection(e,n,r){let i=wn(),o=n.length+1,s=new b(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return p.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new me((c,l)=>c-l),s=this.overlays.getIterator();for(;s.hasNext();){let c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=o.get(c.largestBatchId);l===null&&(l=wn(),o=o.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}let a=wn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return p.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new yu(n,r));let o=this.hr.get(n);o===void 0&&(o=G(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}};var Du=class{constructor(){this.Pr=new le(ke.Ir),this.Tr=new le(ke.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new ke(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new ke(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new b(new ne([])),r=new ke(n,e),i=new ke(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new b(new ne([])),r=new ke(n,e),i=new ke(n,e+1),o=G();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new ke(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},ke=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return b.comparator(e.key,n.key)||z(e.pr,n.pr)}static Er(e,n){return z(e.pr,n.pr)||b.comparator(e.key,n.key)}};var cv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new le(ke.Ir)}checkEmpty(e){return p.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new mu(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new ke(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return p.resolve(s)}lookupMutationBatch(e,n){return p.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),o=i<0?0:i;return p.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return p.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return p.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new ke(n,0),i=new ke(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),p.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new le(z);return n.forEach(i=>{let o=new ke(i,0),s=new ke(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),p.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;b.isDocumentKey(o)||(o=o.child(""));let s=new ke(new b(o),0),a=new le(z);return this.wr.forEachWhile(u=>{let c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.pr)),!0)},s),p.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){k(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return p.forEach(n.mutations,i=>{let o=new ke(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new ke(n,0),i=this.wr.firstAfterOrEqual(r);return p.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,p.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var lv=class{constructor(e){this.vr=e,this.docs=function(){return new me(b.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return p.resolve(r?r.document.mutableCopy():Le.newInvalidDocument(n))}getEntries(e,n){let r=vt();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Le.newInvalidDocument(i))}),p.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=vt(),s=n.path,a=new b(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:c,value:{document:l}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||s_(Qb(l),r)<=0||(i.has(l.key)||ku(n,l))&&(o=o.insert(l.key,l.mutableCopy()))}return p.resolve(o)}getAllFromCollectionGroup(e,n,r,i){x()}Fr(e,n){return p.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new dv(this)}getSize(e){return p.resolve(this.size)}},dv=class extends Xd{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),p.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var hv=class{constructor(e){this.persistence=e,this.Mr=new bn(n=>Ai(n),Nu),this.lastRemoteSnapshotVersion=V.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Du,this.targetCount=0,this.Br=is.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),p.resolve()}getLastRemoteSnapshotVersion(e){return p.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return p.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),p.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),p.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new is(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,p.resolve()}updateTargetData(e,n){return this.qn(n),p.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,p.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),p.waitFor(o).next(()=>i)}getTargetCount(e){return p.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return p.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),p.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),p.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),p.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return p.resolve(r)}containsKey(e,n){return p.resolve(this.Nr.containsKey(n))}};var eh=class{constructor(e,n){this.Lr={},this.overlays={},this.kr=new Tt(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new hv(this),this.indexManager=new Zy,this.remoteDocumentCache=function(i){return new lv(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new zd(n),this.$r=new av(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new cv(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){E("MemoryPersistence","Starting transaction:",e);let i=new fv(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return p.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},fv=class extends Nd{constructor(e){super(),this.currentSequenceNumber=e}},th=class t{constructor(e){this.persistence=e,this.zr=new Du,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw x()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),p.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),p.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),p.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return p.forEach(this.Jr,r=>{let i=b.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,V.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return p.or([()=>p.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var pv=class{constructor(e){this.serializer=e}N(e,n,r,i){let o=new Od("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",QT,{unique:!0}),u.createObjectStore("documentMutations")}(e),Nb(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=p.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),Nb(e)),s=s.next(()=>function(u){let c=u.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:V.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",l)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,c){return c.store("mutations").W().next(l=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",QT,{unique:!0});let d=c.store("mutations"),h=l.map(f=>d.put(f));return p.waitFor(h)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let c=u.createObjectStore("documentOverlays",{keyPath:SL});c.createIndex("collectionPathOverlayIndex",ML,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",xL,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let c=u.createObjectStore("remoteDocumentsV14",{keyPath:yL});c.createIndex("documentKeyIndex",vL),c.createIndex("collectionGroupIndex",_L)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:CL}).createIndex("sequenceNumberIndex",TL,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:bL}).createIndex("documentKeyIndex",AL,{unique:!1})}(e))),s}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=Yd(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>p.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>p.forEach(a,u=>{k(u.userId===o.userId);let c=_i(this.serializer,u);return zA(e,o.userId,c).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.Y((s,a)=>{let u=new ne(s),c=function(d){return[0,ht(d)]}(u);o.push(n.get(c).next(l=>l?p.resolve():(d=>n.put({targetId:0,path:ht(d),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>p.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:DL});let r=n.store("collectionParents"),i=new Iu,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:ht(u)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{let u=new ne(s);return o(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,u],c)=>{let l=_n(a);return o(l.popLast())}))}ri(e){let n=e.store("targets");return n.Y((r,i)=>{let o=ru(i),s=$A(this.serializer,o);return n.put(s)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{let a=n.store("remoteDocumentsV14"),u=function(d){return d.document?new b(ne.fromString(d.document.name).popFirst(5)):d.noDocument?b.fromSegments(d.noDocument.path):d.unknownDocument?b.fromSegments(d.unknownDocument.path):x()}(s).path.toArray(),c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(c))}).next(()=>p.waitFor(i))}si(e,n){let r=n.store("mutations"),i=KA(this.serializer),o=new eh(th.Hr,this.serializer.ct);return r.W().next(s=>{let a=new Map;return s.forEach(u=>{var c;let l=(c=a.get(u.userId))!==null&&c!==void 0?c:G();_i(this.serializer,u).keys().forEach(d=>l=l.add(d)),a.set(u.userId,l)}),p.forEach(a,(u,c)=>{let l=new Fe(c),d=Wd.lt(this.serializer,l),h=o.getIndexManager(l),f=Zd.lt(l,this.serializer,h,o.referenceDelegate);return new Jd(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new du(n,Tt._e),u).next()})})}};function Nb(t){t.createObjectStore("targetDocuments",{keyPath:EL}).createIndex("documentTargetsIndex",IL,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wL,{unique:!0}),t.createObjectStore("targetGlobal")}var oy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",gv=class t{constructor(e,n,r,i,o,s,a,u,c,l,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=c,this.ai=l,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!t.D())throw new w(g.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rv(this,i),this.Ti=n+"main",this.serializer=new zd(u),this.Ei=new Hn(this.Ti,this.ui,new pv(this.serializer)),this.Qr=new Jy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=KA(this.serializer),this.$r=new Hy,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,l===!1&&xe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new w(g.FAILED_PRECONDITION,oy);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Tt(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>y(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>y(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>y(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Id(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(kr(e))return E("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return E("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return tu(e).get("owner").next(n=>p.resolve(this.Si(n)))}bi(e){return Id(e).delete(this.clientId)}Di(){return y(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=We(n,"clientMetadata");return r.W().next(i=>{let o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return p.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?p.resolve(!0):tu(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new w(g.FAILED_PRECONDITION,oy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Id(e).W().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&E("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return y(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new du(e,Tt._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Bi()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>Id(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Zd.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Xy(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Wd.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){E("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(u){return u===15?PL:u===14?tA:u===13?eA:u===12?RL:u===11?Jb:void x()}(this.ui),s;return this.Ei.runTransaction(e,i,o,a=>(s=new du(a,this.kr?this.kr.next():Tt._e),n==="readwrite-primary"?this.gi(s).next(u=>!!u||this.pi(s)).next(u=>{if(!u)throw xe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new w(g.FAILED_PRECONDITION,Yb);return r(s)}).next(u=>this.wi(s).next(()=>u)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return tu(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new w(g.FAILED_PRECONDITION,oy)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tu(e).put("owner",n)}static D(){return Hn.D()}yi(e){let n=tu(e);return n.get("owner").next(r=>this.Si(r)?(E("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):p.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(xe(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;qh()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return E("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return xe("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){xe("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function tu(t){return We(t,"owner")}function Id(t){return We(t,"clientMetadata")}function g_(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var mv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=G(),i=G();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var yv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var nh=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return qh()?8:Hn.v(Is())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new yv;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Uo()<=tn.DEBUG&&E("QueryEngine","SDK will not create cache indexes for query:",$o(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),p.resolve()):(Uo()<=tn.DEBUG&&E("QueryEngine","Query:",$o(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Uo()<=tn.DEBUG&&E("QueryEngine","The SDK decides to create cache indexes for query:",$o(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ft(n))):p.resolve())}ji(e,n){if(sb(n))return p.resolve(null);let r=ft(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ud(n,null,"F"),r=ft(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=G(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let c=this.Zi(n,a);return this.Xi(n,c,s,u.readTime)?this.ji(e,Ud(n,null,"F")):this.es(e,c,n,u)}))})))}Hi(e,n,r,i){return sb(n)||i.isEqual(V.min())?p.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,r,i)?p.resolve(null):(Uo()<=tn.DEBUG&&E("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$o(n)),this.es(e,s,n,Kb(i,-1)).next(a=>a))})}Zi(e,n){let r=new le(pA(e));return n.forEach((i,o)=>{ku(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return Uo()<=tn.DEBUG&&E("QueryEngine","Using full collection scan to execute query:",$o(n)),this.zi.getDocumentsMatchingQuery(e,n,Lt.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var vv=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new me(z),this.rs=new bn(o=>Ai(o),Nu),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Jd(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function QA(t,e,n,r){return new vv(t,e,n,r)}function YA(t,e){return y(this,null,function*(){let n=S(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=G();for(let c of i){s.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}for(let c of o){a.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({us:c,removedBatchIds:s,addedBatchIds:a}))})})})}function d2(t,e){let n=S(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,c,l){let d=c.batch,h=d.keys(),f=p.resolve();return h.forEach(_=>{f=f.next(()=>l.getEntry(u,_)).next(v=>{let m=c.docVersions.get(_);k(m!==null),v.version.compareTo(m)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),l.addEntry(v)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=G();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function ZA(t){let e=S(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function h2(t,e){let n=S(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(o,l.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(o,l.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Ge.EMPTY_BYTE_STRING,V.min()).withLastLimboFreeSnapshotVersion(V.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(v,m,I){return v.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(h,f,l)&&a.push(n.Qr.updateTargetData(o,f))});let u=vt(),c=G();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(XA(o,s,e.documentUpdates).next(l=>{u=l.cs,c=l.ls})),!r.isEqual(V.min())){let l=n.Qr.getLastRemoteSnapshotVersion(o).next(d=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return p.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(n.ns=i,o))}function XA(t,e,n){let r=G(),i=G();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=vt();return n.forEach((a,u)=>{let c=o.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(V.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):E("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{cs:s,ls:i}})}function f2(t,e){let n=S(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function os(t,e){let n=S(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,p.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new rs(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function ss(t,e,n){return y(this,null,function*(){let r=S(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!kr(s))throw s;E("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function rh(t,e,n){let r=S(t),i=V.min(),o=G();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,c,l){let d=S(u),h=d.rs.get(l);return h!==void 0?p.resolve(d.ns.get(h)):d.Qr.getTargetData(c,l)}(r,s,ft(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:V.min(),n?o:G())).next(a=>(tS(r,fA(e),a),{documents:a,hs:o})))}function JA(t,e){let n=S(t),r=S(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function eS(t,e){let n=S(t),r=n.ss.get(e)||V.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,Kb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(tS(n,e,i),i))}function tS(t,e,n){let r=t.ss.get(e)||V.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}function p2(t,e,n,r){return y(this,null,function*(){let i=S(t),o=G(),s=vt();for(let c of n){let l=e.Ps(c.metadata.name);c.document&&(o=o.add(l));let d=e.Is(c);d.setReadTime(e.Ts(c.metadata.readTime)),s=s.insert(l,d)}let a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield os(i,function(l){return ft(fs(ne.fromString(`__bundle__/docs/${l}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>XA(c,a,s).next(l=>(a.apply(c),l)).next(l=>i.Qr.removeMatchingKeysForTargetId(c,u.targetId).next(()=>i.Qr.addMatchingKeys(c,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,l.cs,l.ls)).next(()=>l.cs)))})}function g2(r,i){return y(this,arguments,function*(t,e,n=G()){let o=yield os(t,ft(f_(e.bundledQuery))),s=S(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Pe(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.$r.saveNamedQuery(a,e);let c=o.withResumeToken(Ge.EMPTY_BYTE_STRING,u);return s.ns=s.ns.insert(c.targetId,c),s.Qr.updateTargetData(a,c).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function Ob(t,e){return`firestore_clients_${t}_${e}`}function kb(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function sy(t,e){return`firestore_targets_${t}_${e}`}var ih=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new w(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(xe("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},au=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new w(r.error.code,r.error.message))),o?new t(e,r.state,i):(xe("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},oh=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=d_();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=Zb(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(xe("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},_v=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(xe("SharedClientState",`Failed to parse online state: ${e}`),null)}},Cu=class{constructor(){this.activeTargetIds=d_()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},uu=class{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new me(z),this.started=!1,this.ys=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=Ob(this.persistenceKey,this.Vs),this.Ss=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Cu),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return y(this,null,function*(){let e=yield this.syncEngine.Li();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(Ob(this.persistenceKey,r));if(i){let o=oh.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,r){this.Bs(e,n,r),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(sy(this.persistenceKey,e));if(r){let i=au.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sy(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return E("SharedClientState","READ",e,n),n}setItem(e,n){E("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){E("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(E("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void xe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>y(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(o){let s=Tt._e;if(o!=null)try{let a=JSON.parse(o);k(typeof a=="number"),s=a}catch(a){xe("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==Tt._e&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,r){let i=new ih(this.currentUser,e,n,r),o=kb(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Ls(e){let n=kb(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=sy(this.persistenceKey,e),o=new au(e,n,r);this.setItem(i,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return oh.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return ih.Es(new Fe(o),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return au.Es(i,n)}xs(e){return _v.Es(e)}Js(e){return JSON.parse(e)}zs(e){return y(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);E("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=d_();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},sh=class{constructor(){this.no=new Cu,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Cu,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var wv=class{io(e){}shutdown(){}};var ah=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){E("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){E("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Dd=null;function ay(){return Dd===null?Dd=function(){return 268435456+Math.round(2147483648*Math.random())}():Dd++,"0x"+Dd.toString(16)}var m2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Ev=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var it="WebChannelConnection",Iv=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(n,r,i,o,s){let a=ay(),u=this.bo(n,r.toUriEncodedString());E("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,o,s),this.Co(n,u,c,i).then(l=>(E("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw Vt("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",u,"request:",i),l})}vo(n,r,i,o,s,a){return this.So(n,r,i,o,s)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}bo(n,r){let i=m2[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let o=ay();return new Promise((s,a)=>{let u=new HT;u.setWithCredentials(!0),u.listenOnce($T.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case _d.NO_ERROR:let l=u.getResponseJson();E(it,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),s(l);break;case _d.TIMEOUT:E(it,`RPC '${e}' ${o} timed out`),a(new w(g.DEADLINE_EXCEEDED,"Request time out"));break;case _d.HTTP_ERROR:let d=u.getStatus();if(E(it,`RPC '${e}' ${o} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let _=function(m){let I=m.toLowerCase().replace(/_/g,"-");return Object.values(g).indexOf(I)>=0?I:g.UNKNOWN}(f.status);a(new w(_,f.message))}else a(new w(g.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new w(g.UNAVAILABLE,"Connection failed."));break;default:x()}}finally{E(it,`RPC '${e}' ${o} completed.`)}});let c=JSON.stringify(i);E(it,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)})}Fo(e,n,r){let i=ay(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=BT(),a=UT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let l=o.join("");E(it,`Creating RPC '${e}' stream ${i}: ${l}`,u);let d=s.createWebChannel(l,u),h=!1,f=!1,_=new Ev({lo:m=>{f?E(it,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(h||(E(it,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),E(it,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},ho:()=>d.close()}),v=(m,I,R)=>{m.listen(I,T=>{try{R(T)}catch(P){setTimeout(()=>{throw P},0)}})};return v(d,Za.EventType.OPEN,()=>{f||E(it,`RPC '${e}' stream ${i} transport opened.`)}),v(d,Za.EventType.CLOSE,()=>{f||(f=!0,E(it,`RPC '${e}' stream ${i} transport closed`),_.Vo())}),v(d,Za.EventType.ERROR,m=>{f||(f=!0,Vt(it,`RPC '${e}' stream ${i} transport errored:`,m),_.Vo(new w(g.UNAVAILABLE,"The operation could not be completed")))}),v(d,Za.EventType.MESSAGE,m=>{var I;if(!f){let R=m.data[0];k(!!R);let T=R,P=T.error||((I=T[0])===null||I===void 0?void 0:I.error);if(P){E(it,`RPC '${e}' stream ${i} received error:`,P);let B=P.status,H=function(Bh){let ew=Oe[Bh];if(ew!==void 0)return SA(ew)}(B),de=P.message;H===void 0&&(H=g.INTERNAL,de="Unknown error status: "+B+" with message "+P.message),f=!0,_.Vo(new w(H,de)),d.close()}else E(it,`RPC '${e}' stream ${i} received:`,R),_.mo(R)}}),v(a,qT.STAT_EVENT,m=>{m.stat===ry.PROXY?E(it,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===ry.NOPROXY&&E(it,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.Ro()},0),_}};function nS(){return typeof window<"u"?window:null}function Sd(){return typeof document<"u"?document:null}function Fu(t){return new jy(t,!0)}var Tu=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&E("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var uh=class{constructor(e,n,r,i,o,s,a,u){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Tu(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return y(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return y(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return y(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===g.RESOURCE_EXHAUSTED?(xe(n.toString()),xe("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===g.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new w(g.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>y(this,null,function*(){this.state=0,this.start()}))}__(e){return E("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(E("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Dv=class extends uh{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=e2(this.serializer,e),r=function(o){if(!("targetChange"in o))return V.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?V.min():s.readTime?Pe(s.readTime):V.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=$y(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=jd(u)?{documents:FA(o,u)}:{query:VA(o,u).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=xA(o,s.resumeToken);let c=By(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(V.min())>0){a.readTime=ns(o,s.snapshotVersion.toTimestamp());let c=By(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);let r=n2(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=$y(this.serializer),n.removeTarget=e,this.t_(n)}},Cv=class extends uh{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(k(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=t2(e.writeResults,e.commitTime),r=Pe(e.commitTime);return this.listener.T_(r,n)}return k(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=$y(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Eu(this.serializer,r))};this.t_(n)}};var Tv=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new w(g.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,Uy(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new w(g.UNKNOWN,o.toString())})}vo(e,n,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,Uy(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new w(g.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var bv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(xe(n),this.g_=!1):E("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var Av=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{r.enqueueAndForget(()=>y(this,null,function*(){Fr(this)&&(E("RemoteStore","Restarting streams for network reachability change."),yield function(u){return y(this,null,function*(){let c=S(u);c.v_.add(4),yield ps(c),c.x_.set("Unknown"),c.v_.delete(4),yield Vu(c)})}(this))}))}),this.x_=new bv(r,i)}};function Vu(t){return y(this,null,function*(){if(Fr(t))for(let e of t.F_)yield e(!0)})}function ps(t){return y(this,null,function*(){for(let e of t.F_)yield e(!1)})}function Ah(t,e){let n=S(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),v_(n)?y_(n):ms(n).Jo()&&m_(n,e))}function bu(t,e){let n=S(t),r=ms(n);n.C_.delete(e),r.Jo()&&rS(n,e),n.C_.size===0&&(r.Jo()?r.Xo():Fr(n)&&n.x_.set("Unknown"))}function m_(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(V.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ms(t).c_(e)}function rS(t,e){t.O_.Oe(e),ms(t).l_(e)}function y_(t){t.O_=new Ly({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ms(t).start(),t.x_.p_()}function v_(t){return Fr(t)&&!ms(t).Ho()&&t.C_.size>0}function Fr(t){return S(t).v_.size===0}function iS(t){t.O_=void 0}function y2(t){return y(this,null,function*(){t.C_.forEach((e,n)=>{m_(t,e)})})}function v2(t,e){return y(this,null,function*(){iS(t),v_(t)?(t.x_.S_(e),y_(t)):t.x_.set("Unknown")})}function _2(t,e,n){return y(this,null,function*(){if(t.x_.set("Online"),e instanceof qd&&e.state===2&&e.cause)try{yield function(i,o){return y(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){E("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ch(t,r)}else if(e instanceof Qo?t.O_.$e(e):e instanceof $d?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(V.min()))try{let r=yield ZA(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.O_.it(s);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){let l=o.C_.get(c);l&&o.C_.set(c,l.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,c)=>{let l=o.C_.get(u);if(!l)return;o.C_.set(u,l.withResumeToken(Ge.EMPTY_BYTE_STRING,l.snapshotVersion)),rS(o,u);let d=new rs(l.target,u,c,l.sequenceNumber);m_(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){E("RemoteStore","Failed to raise snapshot:",r),yield ch(t,r)}})}function ch(t,e,n){return y(this,null,function*(){if(!kr(e))throw e;t.v_.add(1),yield ps(t),t.x_.set("Offline"),n||(n=()=>ZA(t.localStore)),t.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){E("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Vu(t)}))})}function oS(t,e){return e().catch(n=>ch(t,n,e))}function gs(t){return y(this,null,function*(){let e=S(t),n=Nr(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;w2(e);)try{let i=yield f2(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,E2(e,i)}catch(i){yield ch(e,i)}sS(e)&&aS(e)})}function w2(t){return Fr(t)&&t.D_.length<10}function E2(t,e){t.D_.push(e);let n=Nr(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function sS(t){return Fr(t)&&!Nr(t).Ho()&&t.D_.length>0}function aS(t){Nr(t).start()}function I2(t){return y(this,null,function*(){Nr(t).d_()})}function D2(t){return y(this,null,function*(){let e=Nr(t);for(let n of t.D_)e.I_(n.mutations)})}function C2(t,e,n){return y(this,null,function*(){let r=t.D_.shift(),i=ky.from(r,e,n);yield oS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield gs(t)})}function T2(t,e){return y(this,null,function*(){e&&Nr(t).P_&&(yield function(r,i){return y(this,null,function*(){if(function(s){return AA(s)&&s!==g.ABORTED}(i.code)){let o=r.D_.shift();Nr(r).Zo(),yield oS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield gs(r)}})}(t,e)),sS(t)&&aS(t)})}function Fb(t,e){return y(this,null,function*(){let n=S(t);n.asyncQueue.verifyOperationInProgress(),E("RemoteStore","RemoteStore received new credentials");let r=Fr(n);n.v_.add(3),yield ps(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Vu(n)})}function Sv(t,e){return y(this,null,function*(){let n=S(t);e?(n.v_.delete(2),yield Vu(n)):e||(n.v_.add(2),yield ps(n),n.x_.set("Unknown"))})}function ms(t){return t.N_||(t.N_=function(n,r,i){let o=S(n);return o.R_(),new Dv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:y2.bind(null,t),To:v2.bind(null,t),u_:_2.bind(null,t)}),t.F_.push(e=>y(this,null,function*(){e?(t.N_.Zo(),v_(t)?y_(t):t.x_.set("Unknown")):(yield t.N_.stop(),iS(t))}))),t.N_}function Nr(t){return t.B_||(t.B_=function(n,r,i){let o=S(n);return o.R_(),new Cv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:I2.bind(null,t),To:T2.bind(null,t),E_:D2.bind(null,t),T_:C2.bind(null,t)}),t.F_.push(e=>y(this,null,function*(){e?(t.B_.Zo(),yield gs(t)):(yield t.B_.stop(),t.D_.length>0&&(E("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}var Mv=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ve,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new w(g.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ys(t,e){if(xe("AsyncQueue",`${e}: ${t}`),kr(t))return new w(g.UNAVAILABLE,`${e}: ${t}`);throw t}var lh=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||b.comparator(n.key,r.key):(n,r)=>b.comparator(n.key,r.key),this.keyedMap=nu(),this.sortedSet=new me(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var dh=class{constructor(){this.L_=new me(b.comparator)}track(e){let n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):x():this.L_=this.L_.insert(n,e)}k_(){let e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}},as=class t{constructor(e,n,r,i,o,s,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,lh.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ou(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var xv=class{constructor(){this.q_=void 0,this.Q_=[]}},Rv=class{constructor(){this.queries=new bn(e=>hA(e),Ou),this.onlineState="Unknown",this.K_=new Set}};function __(t,e){return y(this,null,function*(){let n=S(t),r=e.query,i=!1,o=n.queries.get(r);if(o||(i=!0,o=new xv),i)try{o.q_=yield n.onListen(r)}catch(s){let a=ys(s,`Initialization of query '${$o(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.Q_.push(e),e.U_(n.onlineState),o.q_&&e.W_(o.q_)&&E_(n)})}function w_(t,e){return y(this,null,function*(){let n=S(t),r=e.query,i=!1,o=n.queries.get(r);if(o){let s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),i=o.Q_.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function b2(t,e){let n=S(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Q_)a.W_(i)&&(r=!0);s.q_=i}}r&&E_(n)}function A2(t,e,n){let r=S(t),i=r.queries.get(e);if(i)for(let o of i.Q_)o.onError(n);r.queries.delete(e)}function E_(t){t.K_.forEach(e=>{e.next()})}var Au=class{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new as(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;let n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=as.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}};var Pv=class{constructor(e,n){this.X_=e,this.byteLength=n}ea(){return"metadata"in this.X_}};var hh=class{constructor(e){this.serializer=e}Ps(e){return In(this.serializer,e)}Is(e){return e.metadata.exists?kA(this.serializer,e.document,!1):Le.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Pe(e)}},Nv=class{constructor(e,n,r){this.ta=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=uS(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++n;let r=ne.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ra(e){let n=new Map,r=new hh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ps(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||G()).add(o);n.set(s,a)}}return n}complete(){return y(this,null,function*(){let e=yield p2(this.localStore,new hh(this.serializer),this.documents,this.ta.id),n=this.ra(this.documents);for(let r of this.queries)yield g2(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}})}};function uS(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var fh=class{constructor(e){this.key=e}},ph=class{constructor(e){this.key=e}},gh=class{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=G(),this.mutatedKeys=G(),this.ua=pA(e),this.ca=new lh(this.ua)}get la(){return this.oa}ha(e,n){let r=n?n.Pa:new dh,i=n?n.ca:this.ca,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=ku(this.query,d)?d:null,_=!!h&&this.mutatedKeys.has(h.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),m=!1;h&&f?h.data.isEqual(f.data)?_!==v&&(r.track({type:3,doc:f}),m=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),m=!0,(u&&this.ua(f,u)>0||c&&this.ua(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(u||c)&&(a=!0)),m&&(f?(s=s.add(f),o=v?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let l=this.query.limitType==="F"?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ca:s,Pa:r,Xi:a,mutatedKeys:o}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;let s=e.Pa.k_();s.sort((l,d)=>function(f,_){let v=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return x()}};return v(f)-v(_)}(l.type,d.type)||this.ua(l.doc,d.doc)),this.Ta(r),i=i!=null&&i;let a=n&&!i?this.Ea():[],u=this.aa.size===0&&this.current&&!i?1:0,c=u!==this._a;return this._a=u,s.length!==0||c?{snapshot:new as(this.query,e.ca,o,s,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new dh,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];let e=this.aa;this.aa=G(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});let n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new ph(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new fh(r))}),n}Ra(e){this.oa=e.hs,this.aa=G();let n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return as.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},Ov=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},kv=class{constructor(e){this.key=e,this.ma=!1}},Fv=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new bn(a=>hA(a),Ou),this.pa=new Map,this.ya=new Set,this.wa=new me(b.comparator),this.Sa=new Map,this.ba=new Du,this.Da={},this.Ca=new Map,this.va=is.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function S2(t,e){return y(this,null,function*(){let n=b_(t),r,i,o=n.ga.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{let s=yield os(n.localStore,ft(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield I_(n,e,r,a==="current",s.resumeToken),n.isPrimaryClient&&Ah(n.remoteStore,s)}return i})}function I_(t,e,n,r,i){return y(this,null,function*(){t.Ma=(d,h,f)=>function(v,m,I,R){return y(this,null,function*(){let T=m.view.ha(I);T.Xi&&(T=yield rh(v.localStore,m.query,!1).then(({documents:de})=>m.view.ha(de,T)));let P=R&&R.targetChanges.get(m.targetId),B=R&&R.targetMismatches.get(m.targetId)!=null,H=m.view.applyChanges(T,v.isPrimaryClient,P,B);return Vv(v,m.targetId,H.da),H.snapshot})}(t,d,h,f);let o=yield rh(t.localStore,e,!0),s=new gh(e,o.hs),a=s.ha(o.documents),u=_u.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,u);Vv(t,n,c.da);let l=new Ov(e,n,s);return t.ga.set(e,l),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),c.snapshot})}function M2(t,e){return y(this,null,function*(){let n=S(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(o=>!Ou(o,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ss(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),bu(n.remoteStore,r.targetId),us(n,r.targetId)}).catch(Or))):(us(n,r.targetId),yield ss(n.localStore,r.targetId,!0))})}function x2(t,e,n){return y(this,null,function*(){let r=A_(t);try{let i=yield function(s,a){let u=S(s),c=Ee.now(),l=a.reduce((f,_)=>f.add(_.key),G()),d,h;return u.persistence.runTransaction("Locally write mutations","readwrite",f=>{let _=vt(),v=G();return u.os.getEntries(f,l).next(m=>{_=m,_.forEach((I,R)=>{R.isValidDocument()||(v=v.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(f,_)).next(m=>{d=m;let I=[];for(let R of a){let T=WL(R,d.get(R.key).overlayedDocument);T!=null&&I.push(new Xt(R.key,T,oA(T.value.mapValue),be.exists(!0)))}return u.mutationQueue.addMutationBatch(f,c,I,a)}).next(m=>{h=m;let I=m.applyToLocalDocumentSet(d,v);return u.documentOverlayCache.saveOverlays(f,m.batchId,I)})}).then(()=>({batchId:h.batchId,changes:mA(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let c=s.Da[s.currentUser.toKey()];c||(c=new me(z)),c=c.insert(a,u),s.Da[s.currentUser.toKey()]=c}(r,i.batchId,n),yield Qn(r,i.changes),yield gs(r.remoteStore)}catch(i){let o=ys(i,"Failed to persist write");n.reject(o)}})}function cS(t,e){return y(this,null,function*(){let n=S(t);try{let r=yield h2(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Sa.get(o);s&&(k(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.ma=!0:i.modifiedDocuments.size>0?k(s.ma):i.removedDocuments.size>0&&(k(s.ma),s.ma=!1))}),yield Qn(n,r,e)}catch(r){yield Or(r)}})}function Vb(t,e,n){let r=S(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ga.forEach((o,s)=>{let a=s.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=S(s);u.onlineState=a;let c=!1;u.queries.forEach((l,d)=>{for(let h of d.Q_)h.U_(a)&&(c=!0)}),c&&E_(u)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function R2(t,e,n){return y(this,null,function*(){let r=S(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Sa.get(e),o=i&&i.key;if(o){let s=new me(b.comparator);s=s.insert(o,Le.newNoDocument(o,V.min()));let a=G().add(o),u=new vu(V.min(),new Map,new me(z),s,a);yield cS(r,u),r.wa=r.wa.remove(o),r.Sa.delete(e),T_(r)}else yield ss(r.localStore,e,!1).then(()=>us(r,e,n)).catch(Or)})}function P2(t,e){return y(this,null,function*(){let n=S(t),r=e.batch.batchId;try{let i=yield d2(n.localStore,e);C_(n,r,null),D_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Qn(n,i)}catch(i){yield Or(i)}})}function N2(t,e,n){return y(this,null,function*(){let r=S(t);try{let i=yield function(s,a){let u=S(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return u.mutationQueue.lookupMutationBatch(c,a).next(d=>(k(d!==null),l=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,l,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>u.localDocuments.getDocuments(c,l))})}(r.localStore,e);C_(r,e,n),D_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Qn(r,i)}catch(i){yield Or(i)}})}function O2(t,e){return y(this,null,function*(){let n=S(t);Fr(n.remoteStore)||E("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=S(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Ca.get(r)||[];i.push(e),n.Ca.set(r,i)}catch(r){let i=ys(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function D_(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function C_(t,e,n){let r=S(t),i=r.Da[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function us(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||lS(t,r)})}function lS(t,e){t.ya.delete(e.path.canonicalString());let n=t.wa.get(e);n!==null&&(bu(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),T_(t))}function Vv(t,e,n){for(let r of n)r instanceof fh?(t.ba.addReference(r.key,e),k2(t,r)):r instanceof ph?(E("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||lS(t,r.key)):x()}function k2(t,e){let n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(E("SyncEngine","New document in limbo: "+n),t.ya.add(r),T_(t))}function T_(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){let e=t.ya.values().next().value;t.ya.delete(e);let n=new b(ne.fromString(e)),r=t.va.next();t.Sa.set(r,new kv(n)),t.wa=t.wa.insert(n,r),Ah(t.remoteStore,new rs(ft(fs(n.path)),r,"TargetPurposeLimboResolution",Tt._e))}}function Qn(t,e,n){return y(this,null,function*(){let r=S(t),i=[],o=[],s=[];r.ga.isEmpty()||(r.ga.forEach((a,u)=>{s.push(r.Ma(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);let l=mv.Ki(u.targetId,c);o.push(l)}}))}),yield Promise.all(s),r.fa.u_(i),yield function(u,c){return y(this,null,function*(){let l=S(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>p.forEach(c,h=>p.forEach(h.qi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>p.forEach(h.Qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!kr(d))throw d;E("LocalStore","Failed to update sequence numbers: "+d)}for(let d of c){let h=d.targetId;if(!d.fromCache){let f=l.ns.get(h),_=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(_);l.ns=l.ns.insert(h,v)}}})}(r.localStore,o))})}function F2(t,e){return y(this,null,function*(){let n=S(t);if(!n.currentUser.isEqual(e)){E("SyncEngine","User change. New user:",e.toKey());let r=yield YA(n.localStore,e);n.currentUser=e,function(o,s){o.Ca.forEach(a=>{a.forEach(u=>{u.reject(new w(g.CANCELLED,s))})}),o.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qn(n,r.us)}})}function V2(t,e){let n=S(t),r=n.Sa.get(e);if(r&&r.ma)return G().add(r.key);{let i=G(),o=n.pa.get(e);if(!o)return i;for(let s of o){let a=n.ga.get(s);i=i.unionWith(a.view.la)}return i}}function L2(t,e){return y(this,null,function*(){let n=S(t),r=yield rh(n.localStore,e.query,!0),i=e.view.Ra(r);return n.isPrimaryClient&&Vv(n,e.targetId,i.da),i})}function j2(t,e){return y(this,null,function*(){let n=S(t);return eS(n.localStore,e).then(r=>Qn(n,r))})}function B2(t,e,n,r){return y(this,null,function*(){let i=S(t),o=yield function(a,u){let c=S(a),l=S(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>l.vn(d,u).next(h=>h?c.localDocuments.getDocuments(d,h):p.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield gs(i.remoteStore):n==="acknowledged"||n==="rejected"?(C_(i,e,r||null),D_(i,e),function(a,u){S(S(a).mutationQueue).Mn(u)}(i.localStore,e)):x(),yield Qn(i,o)):E("SyncEngine","Cannot apply mutation batch with id: "+e)})}function U2(t,e){return y(this,null,function*(){let n=S(t);if(b_(n),A_(n),e===!0&&n.Fa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield Lb(n,r.toArray());n.Fa=!0,yield Sv(n.remoteStore,!0);for(let o of i)Ah(n.remoteStore,o)}else if(e===!1&&n.Fa!==!1){let r=[],i=Promise.resolve();n.pa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(us(n,s),ss(n.localStore,s,!0))),bu(n.remoteStore,s)}),yield i,yield Lb(n,r),function(s){let a=S(s);a.Sa.forEach((u,c)=>{bu(a.remoteStore,c)}),a.ba.mr(),a.Sa=new Map,a.wa=new me(b.comparator)}(n),n.Fa=!1,yield Sv(n.remoteStore,!1)}})}function Lb(t,e,n){return y(this,null,function*(){let r=S(t),i=[],o=[];for(let s of e){let a,u=r.pa.get(s);if(u&&u.length!==0){a=yield os(r.localStore,ft(u[0]));for(let c of u){let l=r.ga.get(c),d=yield L2(r,l);d.snapshot&&o.push(d.snapshot)}}else{let c=yield JA(r.localStore,s);a=yield os(r.localStore,c),yield I_(r,dS(c),s,!1,a.resumeToken)}i.push(a)}return r.fa.u_(o),i})}function dS(t){return dA(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function $2(t){return function(n){return S(S(n).persistence).Li()}(S(t).localStore)}function q2(t,e,n,r){return y(this,null,function*(){let i=S(t);if(i.Fa)return void E("SyncEngine","Ignoring unexpected query state notification.");let o=i.pa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield eS(i.localStore,fA(o[0])),a=vu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Ge.EMPTY_BYTE_STRING);yield Qn(i,s,a);break}case"rejected":yield ss(i.localStore,e,!0),us(i,e,r);break;default:x()}})}function H2(t,e,n){return y(this,null,function*(){let r=b_(t);if(r.Fa){for(let i of e){if(r.pa.has(i)){E("SyncEngine","Adding an already active target "+i);continue}let o=yield JA(r.localStore,i),s=yield os(r.localStore,o);yield I_(r,dS(o),s.targetId,!1,s.resumeToken),Ah(r.remoteStore,s)}for(let i of n)r.pa.has(i)&&(yield ss(r.localStore,i,!1).then(()=>{bu(r.remoteStore,i),us(r,i)}).catch(Or))}})}function b_(t){let e=S(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R2.bind(null,e),e.fa.u_=b2.bind(null,e.eventManager),e.fa.xa=A2.bind(null,e.eventManager),e}function A_(t){let e=S(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N2.bind(null,e),e}function z2(t,e,n){let r=S(t);(function(o,s,a){return y(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(f,_){let v=S(f),m=Pe(_.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",I=>v.$r.getBundleMetadata(I,_.id)).then(I=>!!I&&I.createTime.compareTo(m)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(uS(u));let c=new Nv(u,o.localStore,s.serializer),l=yield s.Oa();for(;l;){let h=yield c.na(l);h&&a._updateProgress(h),l=yield s.Oa()}let d=yield c.complete();return yield Qn(o,d.sa,void 0),yield function(f,_){let v=S(f);return v.persistence.runTransaction("Save bundle","readwrite",m=>v.$r.saveBundleMetadata(m,_))}(o.localStore,u),a._completeWith(d.progress),Promise.resolve(d.ia)}catch(u){return Vt("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Su=class{constructor(){this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){this.serializer=Fu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return QA(this.persistence,new nh,e.initialUser,this.serializer)}createPersistence(e){return new eh(th.Hr,this.serializer)}createSharedClientState(e){return new sh}terminate(){return y(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var mh=class t extends Su{constructor(e,n,r){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){yield Uh(t.prototype,this,"initialize").call(this,e),yield this.Na.initialize(this,e),yield A_(this.Na.syncEngine),yield gs(this.Na.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return QA(this.persistence,new nh,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new tv(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new _y(n,this.persistence);return new vy(e.asyncQueue,r)}createPersistence(e){let n=g_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ft.withCacheSize(this.cacheSizeBytes):Ft.DEFAULT;return new gv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,nS(),Sd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new sh}},Lv=class t extends mh{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return y(this,null,function*(){yield Uh(t.prototype,this,"initialize").call(this,e);let n=this.Na.syncEngine;this.sharedClientState instanceof uu&&(this.sharedClientState.syncEngine={Zs:B2.bind(null,n),Xs:q2.bind(null,n),eo:H2.bind(null,n),Li:$2.bind(null,n),Ys:j2.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>y(this,null,function*(){yield U2(this.Na.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=nS();if(!uu.D(n))throw new w(g.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=g_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new uu(n,e.asyncQueue,r,e.clientId,e.initialUser)}},Mu=class{initialize(e,n){return y(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Vb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=F2.bind(null,this.syncEngine),yield Sv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Rv}()}createDatastore(e){let n=Fu(e.databaseInfo.databaseId),r=function(o){return new Iv(o)}(e.databaseInfo);return function(o,s,a,u){return new Tv(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new Av(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Vb(this.syncEngine,n,0),function(){return ah.D()?new ah:new wv}())}createSyncEngine(e,n){return function(i,o,s,a,u,c,l){let d=new Fv(i,o,s,a,u,c);return l&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return y(this,null,function*(){var e;yield function(r){return y(this,null,function*(){let i=S(r);E("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield ps(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function jb(t,e=10240){let n=0;return{read(){return y(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return y(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var cs=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):xe("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var jv=class{constructor(e,n){this.ka=e,this.serializer=n,this.metadata=new Ve,this.buffer=new Uint8Array,this.qa=function(){return new TextDecoder("utf-8")}(),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.X_)}`))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}getMetadata(){return y(this,null,function*(){return this.metadata.promise})}Oa(){return y(this,null,function*(){return yield this.getMetadata(),this.Qa()})}Qa(){return y(this,null,function*(){let e=yield this.Ka();if(e===null)return null;let n=this.qa.decode(e),r=Number(n);isNaN(r)&&this.$a(`length string (${n}) is not valid number`);let i=yield this.Ua(r);return new Pv(JSON.parse(i),e.length+r)})}Wa(){return this.buffer.findIndex(e=>e===123)}Ka(){return y(this,null,function*(){for(;this.Wa()<0&&!(yield this.Ga()););if(this.buffer.length===0)return null;let e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ua(e){return y(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ga())&&this.$a("Reached the end of bundle when more is expected.");let n=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){return y(this,null,function*(){let e=yield this.ka.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var Bv=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new w(g.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return y(this,null,function*(){let s=S(i),a={documents:o.map(d=>wu(s.serializer,d))},u=yield s.vo("BatchGetDocuments",s.serializer.databaseId,ne.emptyPath(),a,o.length),c=new Map;u.forEach(d=>{let h=JL(s.serializer,d);c.set(h.key.toString(),h)});let l=[];return o.forEach(d=>{let h=c.get(d.toString());k(!!h),l.push(h)}),l})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Pr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=b.fromPath(r);this.mutations.push(new gu(i,this.precondition(i)))}),yield function(r,i){return y(this,null,function*(){let o=S(r),s={writes:i.map(a=>Eu(o.serializer,a))};yield o.So("Commit",o.serializer.databaseId,ne.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw x();n=V.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new w(g.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(V.min())?be.exists(!1):be.updateTime(n):be.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(V.min()))throw new w(g.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return be.updateTime(n)}return be.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Uv=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.za=r.maxAttempts,this.jo=new Tu(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo(()=>y(this,null,function*(){let e=new Bv(this.datastore),n=this.Ja(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Ya(i)}))}).catch(r=>{this.Ya(r)})}))}Ja(e){try{let n=this.updateFunction(e);return!Pu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!AA(n)}return!1}};var $v=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Fe.UNAUTHENTICATED,this.clientId=Rd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>y(this,null,function*(){E("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(E("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new w(g.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ve;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=ys(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Md(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),E("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield YA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function qv(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield S_(t);E("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Fb(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Fb(e.remoteStore,i)),t._onlineComponents=e})}function hS(t){return t.name==="FirebaseError"?t.code===g.FAILED_PRECONDITION||t.code===g.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function S_(t){return y(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){E("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Md(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!hS(n))throw n;Vt("Error using user provided cache. Falling back to memory cache: "+n),yield Md(t,new Su)}}else E("FirestoreClient","Using default OfflineComponentProvider"),yield Md(t,new Su);return t._offlineComponents})}function Sh(t){return y(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(E("FirestoreClient","Using user provided OnlineComponentProvider"),yield qv(t,t._uninitializedComponentsProvider._online)):(E("FirestoreClient","Using default OnlineComponentProvider"),yield qv(t,new Mu))),t._onlineComponents})}function fS(t){return S_(t).then(e=>e.persistence)}function M_(t){return S_(t).then(e=>e.localStore)}function pS(t){return Sh(t).then(e=>e.remoteStore)}function x_(t){return Sh(t).then(e=>e.syncEngine)}function G2(t){return Sh(t).then(e=>e.datastore)}function ls(t){return y(this,null,function*(){let e=yield Sh(t),n=e.eventManager;return n.onListen=S2.bind(null,e.syncEngine),n.onUnlisten=M2.bind(null,e.syncEngine),n})}function W2(t){return t.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield fS(t),n=yield pS(t);return e.setNetworkEnabled(!0),function(i){let o=S(i);return o.v_.delete(0),Vu(o)}(n)}))}function K2(t){return t.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield fS(t),n=yield pS(t);return e.setNetworkEnabled(!1),function(i){return y(this,null,function*(){let o=S(i);o.v_.add(0),yield ps(o),o.x_.set("Offline")})}(n)}))}function Q2(t,e){let n=new Ve;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o,s){return y(this,null,function*(){try{let a=yield function(c,l){let d=S(c);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,l))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new w(g.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=ys(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield M_(t),e,n)})),n.promise}function gS(t,e,n={}){let r=new Ve;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(o,s,a,u,c){let l=new cs({next:h=>{s.enqueueAndForget(()=>w_(o,d));let f=h.docs.has(a);!f&&h.fromCache?c.reject(new w(g.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&u&&u.source==="server"?c.reject(new w(g.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new Au(fs(a.path),l,{includeMetadataChanges:!0,Z_:!0});return __(o,d)}(yield ls(t),t.asyncQueue,e,n,r)})),r.promise}function Y2(t,e){let n=new Ve;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o,s){return y(this,null,function*(){try{let a=yield rh(i,o,!0),u=new gh(o,a.hs),c=u.ha(a.documents),l=u.applyChanges(c,!1);s.resolve(l.snapshot)}catch(a){let u=ys(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield M_(t),e,n)})),n.promise}function mS(t,e,n={}){let r=new Ve;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(o,s,a,u,c){let l=new cs({next:h=>{s.enqueueAndForget(()=>w_(o,d)),h.fromCache&&u.source==="server"?c.reject(new w(g.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new Au(a,l,{includeMetadataChanges:!0,Z_:!0});return __(o,d)}(yield ls(t),t.asyncQueue,e,n,r)})),r.promise}function Z2(t,e){let n=new cs(e);return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o){S(i).K_.add(o),o.next()}(yield ls(t),n)})),()=>{n.La(),t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o){S(i).K_.delete(o)}(yield ls(t),n)}))}}function X2(t,e,n,r){let i=function(s,a){let u;return u=typeof s=="string"?MA().encode(s):s,function(l,d){return new jv(l,d)}(function(l,d){if(l instanceof Uint8Array)return jb(l,d);if(l instanceof ArrayBuffer)return jb(new Uint8Array(l),d);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(n,Fu(e));t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){z2(yield x_(t),i,r)}))}function J2(t,e){return t.asyncQueue.enqueue(()=>y(this,null,function*(){return function(r,i){let o=S(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield M_(t),e)}))}function yS(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var Bb=new Map;function R_(t,e,n){if(!n)throw new w(g.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function P_(t,e,n,r){if(e===!0&&r===!0)throw new w(g.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ub(t){if(!b.isDocumentKey(t))throw new w(g.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $b(t){if(b.isDocumentKey(t))throw new w(g.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Mh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":x()}function re(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new w(g.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Mh(t);throw new w(g.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function vS(t,e){if(e<=0)throw new w(g.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var yh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new w(g.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new w(g.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}P_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ri=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new w(g.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new w(g.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uy;switch(r.type){case"firstParty":return new hy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new w(g.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=Bb.get(n);r&&(E("ComponentProvider","Removing Datastore"),Bb.delete(n),r.terminate())}(this),Promise.resolve()}};function _S(t,e,n,r={}){var i;let o=(t=re(t,Ri))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Vt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Fe.MOCK_USER;else{a=ow(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new w(g.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Fe(c)}t._authCredentials=new cy(new xd(a,u))}}var Ze=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},he=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Dn=class t extends Ze{constructor(e,n,r){super(e,n,fs(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new he(this.firestore,null,new b(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function N_(t,e,...n){if(t=_e(t),R_("collection","path",e),t instanceof Ri){let r=ne.fromString(e,...n);return $b(r),new Dn(t,null,r)}{if(!(t instanceof he||t instanceof Dn))throw new w(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ne.fromString(e,...n));return $b(r),new Dn(t.firestore,null,r)}}function wS(t,e){if(t=re(t,Ri),R_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new w(g.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ze(t,null,function(r){return new Zt(ne.emptyPath(),r)}(e))}function Lu(t,e,...n){if(t=_e(t),arguments.length===1&&(e=Rd.newId()),R_("doc","path",e),t instanceof Ri){let r=ne.fromString(e,...n);return Ub(r),new he(t,null,new b(r))}{if(!(t instanceof he||t instanceof Dn))throw new w(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ne.fromString(e,...n));return Ub(r),new he(t.firestore,t instanceof Dn?t.converter:null,new b(r))}}function O_(t,e){return t=_e(t),e=_e(e),(t instanceof he||t instanceof Dn)&&(e instanceof he||e instanceof Dn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function k_(t,e){return t=_e(t),e=_e(e),t instanceof Ze&&e instanceof Ze&&t.firestore===e.firestore&&Ou(t._query,e._query)&&t.converter===e.converter}var Hv=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Tu(this,"async_queue_retry"),this._u=()=>{let n=Sd();n&&E("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=Sd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;let n=Sd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});let n=new Ve;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){return y(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!kr(e))throw e;E("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(e){let n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw xe("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);let i=Mv.createAndSchedule(this,e,n,r,o=>this.lu(o));return this.nu.push(i),i}au(){this.ru&&x()}verifyOperationInProgress(){}hu(){return y(this,null,function*(){let e;do e=this.Xa,yield e;while(e!==this.Xa)})}Pu(e){for(let n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){let n=this.nu.indexOf(e);this.nu.splice(n,1)}};function zv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var Gv=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ve,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var ES=-1,ve=class extends Ri{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Hv}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||IS(this),this._firestoreClient.terminate()}};function Ue(t){return t._firestoreClient||IS(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function IS(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,c,l){return new wy(a,u,c,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,yS(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new $v(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function DS(t,e){PS(t=re(t,ve));let n=Ue(t);if(n._uninitializedComponentsProvider)throw new w(g.FAILED_PRECONDITION,"SDK cache is already specified.");Vt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new Mu;return TS(n,i,new mh(i,r.cacheSizeBytes,e?.forceOwnership))}function CS(t){PS(t=re(t,ve));let e=Ue(t);if(e._uninitializedComponentsProvider)throw new w(g.FAILED_PRECONDITION,"SDK cache is already specified.");Vt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new Mu;return TS(e,r,new Lv(r,n.cacheSizeBytes))}function TS(t,e,n){let r=new Ve;return t.asyncQueue.enqueue(()=>y(this,null,function*(){try{yield Md(t,n),yield qv(t,e),r.resolve()}catch(i){let o=i;if(!hS(o))throw o;Vt("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function bS(t){if(t._initialized&&!t._terminated)throw new w(g.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Ve;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{yield function(r){return y(this,null,function*(){if(!Hn.D())return Promise.resolve();let i=r+"main";yield Hn.delete(i)})}(g_(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function AS(t){return function(n){let r=new Ve;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return O2(yield x_(n),r)})),r.promise}(Ue(t=re(t,ve)))}function SS(t){return W2(Ue(t=re(t,ve)))}function MS(t){return K2(Ue(t=re(t,ve)))}function xS(t,e){let n=Ue(t=re(t,ve)),r=new Gv;return X2(n,t._databaseId,e,r),r}function RS(t,e){return J2(Ue(t=re(t,ve)),e).then(n=>n?new Ze(t,null,n.query):null)}function PS(t){if(t._initialized||t._terminated)throw new w(g.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var An=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ge.fromBase64String(e))}catch(n){throw new w(g.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ge.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Jt=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new w(g.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Re(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Wn=class{constructor(e){this._methodName=e}};var Pi=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new w(g.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new w(g.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return z(this._lat,e._lat)||z(this._long,e._long)}};var ej=/^__.*__$/,Wv=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xt(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rr(e,this.data,n,this.fieldTransforms)}},vh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xt(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function NS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw x()}}var _h=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return wh(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(NS(this.du)&&ej.test(e))throw this.pu('Document fields cannot begin and end with "__"')}},Kv=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fu(e)}Su(e,n,r,i=!1){return new _h({du:e,methodName:n,wu:r,path:Re.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Fi(t){let e=t._freezeSettings(),n=Fu(t._databaseId);return new Kv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xh(t,e,n,r,i,o={}){let s=t.Su(o.merge||o.mergeFields?2:0,e,n,i);L_("Data must be an object, but it was:",s,r);let a=FS(r,s),u,c;if(o.merge)u=new bt(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){let l=[];for(let d of o.mergeFields){let h=Jv(e,d,n);if(!s.contains(h))throw new w(g.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);LS(l,h)||l.push(h)}u=new bt(l),c=s.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=s.fieldTransforms;return new Wv(new ot(a),u,c)}var xu=class t extends Wn{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function OS(t,e,n){return new _h({du:3,wu:e.settings.wu,methodName:t._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Qv=class t extends Wn{_toFieldTransform(e){return new Si(e.path,new Mr)}isEqual(e){return e instanceof t}},Yv=class t extends Wn{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){let n=OS(this,e,!0),r=this.bu.map(o=>Vi(o,n)),i=new zn(r);return new Si(e.path,i)}isEqual(e){return e instanceof t&&Hh(this.bu,e.bu)}},Zv=class t extends Wn{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){let n=OS(this,e,!0),r=this.bu.map(o=>Vi(o,n)),i=new Gn(r);return new Si(e.path,i)}isEqual(e){return e instanceof t&&Hh(this.bu,e.bu)}},Xv=class t extends Wn{constructor(e,n){super(e),this.Du=n}_toFieldTransform(e){let n=new xr(e.serializer,wA(e.serializer,this.Du));return new Si(e.path,n)}isEqual(e){return e instanceof t&&this.Du===e.Du}};function F_(t,e,n,r){let i=t.Su(1,e,n);L_("Data must be an object, but it was:",i,r);let o=[],s=ot.empty();ki(r,(u,c)=>{let l=j_(e,u,n);c=_e(c);let d=i.fu(l);if(c instanceof xu)o.push(l);else{let h=Vi(c,d);h!=null&&(o.push(l),s.set(l,h))}});let a=new bt(o);return new vh(s,a,i.fieldTransforms)}function V_(t,e,n,r,i,o){let s=t.Su(1,e,n),a=[Jv(e,r,n)],u=[i];if(o.length%2!=0)throw new w(g.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(Jv(e,o[h])),u.push(o[h+1]);let c=[],l=ot.empty();for(let h=a.length-1;h>=0;--h)if(!LS(c,a[h])){let f=a[h],_=u[h];_=_e(_);let v=s.fu(f);if(_ instanceof xu)c.push(f);else{let m=Vi(_,v);m!=null&&(c.push(f),l.set(f,m))}}let d=new bt(c);return new vh(l,d,s.fieldTransforms)}function kS(t,e,n,r=!1){return Vi(n,t.Su(r?4:3,e))}function Vi(t,e){if(VS(t=_e(t)))return L_("Unsupported field value:",e,t),FS(t,e);if(t instanceof Wn)return function(r,i){if(!NS(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Vi(a,i.gu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=_e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ee.fromDate(r);return{timestampValue:ns(i.serializer,o)}}if(r instanceof Ee){let o=new Ee(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ns(i.serializer,o)}}if(r instanceof Pi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof An)return{bytesValue:xA(i.serializer,r._byteString)};if(r instanceof he){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.pu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:h_(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${Mh(r)}`)}(t,e)}function FS(t,e){let n={};return nA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ki(t,(r,i)=>{let o=Vi(i,e.Ru(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function VS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ee||t instanceof Pi||t instanceof An||t instanceof he||t instanceof Wn)}function L_(t,e,n){if(!VS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Mh(n);throw r==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function Jv(t,e,n){if((e=_e(e))instanceof Jt)return e._internalPath;if(typeof e=="string")return j_(t,e);throw wh("Field path arguments must be of type string or ",t,!1,void 0,n)}var tj=new RegExp("[~\\*/\\[\\]]");function j_(t,e,n){if(e.search(tj)>=0)throw wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jt(...e.split("."))._internalPath}catch{throw wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wh(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new w(g.INVALID_ARGUMENT,a+t+u)}function LS(t,e){return t.some(n=>n.isEqual(e))}var Ni=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new he(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new e_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Rh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},e_=class extends Ni{data(){return super.data()}};function Rh(t,e){return typeof e=="string"?j_(t,e):e instanceof Jt?e._internalPath:e._delegate._internalPath}function jS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new w(g.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ru=class{},Oi=class extends Ru{};function Yn(t,e,...n){let r=[];e instanceof Ru&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof t_).length,a=o.filter(u=>u instanceof Eh).length;if(s>1||s>0&&a>0)throw new w(g.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Eh=class t extends Oi{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return QS(e._query,n),new Ze(e.firestore,e.converter,Ny(e._query,n))}_parse(e){let n=Fi(e.firestore);return function(o,s,a,u,c,l,d){let h;if(c.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new w(g.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){Hb(d,l);let f=[];for(let _ of d)f.push(qb(u,o,_));h={arrayValue:{values:f}}}else h=qb(u,o,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||Hb(d,l),h=kS(a,s,d,l==="in"||l==="not-in");return X.create(c,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function BS(t,e,n){let r=e,i=Rh("where",t);return Eh._create(i,r,n)}var t_=class t extends Ru{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ue.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)QS(s,u),s=Ny(s,u)}(e._query,n),new Ze(e.firestore,e.converter,Ny(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var n_=class t extends Oi{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new w(g.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new w(g.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bi(o,s)}(e._query,this._field,this._direction);return new Ze(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Zt(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function US(t,e="asc"){let n=e,r=Rh("orderBy",t);return n_._create(r,n)}var Ih=class t extends Oi{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Ze(e.firestore,e.converter,Ud(e._query,this._limit,this._limitType))}};function $S(t){return vS("limit",t),Ih._create("limit",t,"F")}function qS(t){return vS("limitToLast",t),Ih._create("limitToLast",t,"L")}var Dh=class t extends Oi{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=KS(e,this.type,this._docOrFields,this._inclusive);return new Ze(e.firestore,e.converter,function(i,o){return new Zt(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function HS(...t){return Dh._create("startAt",t,!0)}function zS(...t){return Dh._create("startAfter",t,!1)}var Ch=class t extends Oi{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=KS(e,this.type,this._docOrFields,this._inclusive);return new Ze(e.firestore,e.converter,function(i,o){return new Zt(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function GS(...t){return Ch._create("endBefore",t,!1)}function WS(...t){return Ch._create("endAt",t,!0)}function KS(t,e,n,r){if(n[0]=_e(n[0]),n[0]instanceof Ni)return function(o,s,a,u,c){if(!u)throw new w(g.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let l=[];for(let d of Ko(o))if(d.field.isKeyField())l.push(Ti(s,u.key));else{let h=u.data.field(d.field);if(bh(h))throw new w(g.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new w(g.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}l.push(h)}return new Tn(l,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=Fi(t.firestore);return function(s,a,u,c,l,d){let h=s.explicitOrderBy;if(l.length>h.length)throw new w(g.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let _=0;_<l.length;_++){let v=l[_];if(h[_].field.isKeyField()){if(typeof v!="string")throw new w(g.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof v}`);if(!l_(s)&&v.indexOf("/")!==-1)throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${v}' contains a slash.`);let m=s.path.child(ne.fromString(v));if(!b.isDocumentKey(m))throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${m}' is not because it contains an odd number of segments.`);let I=new b(m);f.push(Ti(a,I))}else{let m=kS(u,c,v);f.push(m)}}return new Tn(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function qb(t,e,n){if(typeof(n=_e(n))=="string"){if(n==="")throw new w(g.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!l_(e)&&n.indexOf("/")!==-1)throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(ne.fromString(n));if(!b.isDocumentKey(r))throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ti(t,new b(r))}if(n instanceof he)return Ti(t,n._key);throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mh(n)}.`)}function Hb(t,e){if(!Array.isArray(t)||t.length===0)throw new w(g.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QS(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new w(g.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new w(g.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var ds=class{convertValue(e,n="none"){switch(Ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Te(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw x()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ki(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new Pi(Te(e.latitude),Te(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=u_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hu(e));default:return null}}convertTimestamp(e){let n=Tr(e);return new Ee(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ne.fromString(e);k(UA(r));let i=new Ar(r.get(1),r.get(3)),o=new b(r.popFirst(5));return i.isEqual(n)||xe(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Ph(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var r_=class extends ds{constructor(e){super(),this.firestore=e}convertBytes(e){return new An(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new he(this.firestore,null,n)}};var qn=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},jt=class extends Ni{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Dr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Rh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Dr=class extends jt{data(e={}){return super.data(e)}},en=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new qn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Dr(this._firestore,this._userDataWriter,r.key,r,new qn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new w(g.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Dr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Dr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),c=-1,l=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:nj(a.type),doc:u,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function nj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return x()}}function B_(t,e){return t instanceof jt&&e instanceof jt?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof en&&e instanceof en&&t._firestore===e._firestore&&k_(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function YS(t){t=re(t,he);let e=re(t.firestore,ve);return gS(Ue(e),t._key).then(n=>H_(e,t,n))}var Kn=class extends ds{constructor(e){super(),this.firestore=e}convertBytes(e){return new An(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new he(this.firestore,null,n)}};function ZS(t){t=re(t,he);let e=re(t.firestore,ve),n=Ue(e),r=new Kn(e);return Q2(n,t._key).then(i=>new jt(e,r,t._key,i,new qn(i!==null&&i.hasLocalMutations,!0),t.converter))}function XS(t){t=re(t,he);let e=re(t.firestore,ve);return gS(Ue(e),t._key,{source:"server"}).then(n=>H_(e,t,n))}function JS(t){t=re(t,Ze);let e=re(t.firestore,ve),n=Ue(e),r=new Kn(e);return jS(t._query),mS(n,t._query).then(i=>new en(e,r,t,i))}function eM(t){t=re(t,Ze);let e=re(t.firestore,ve),n=Ue(e),r=new Kn(e);return Y2(n,t._query).then(i=>new en(e,r,t,i))}function tM(t){t=re(t,Ze);let e=re(t.firestore,ve),n=Ue(e),r=new Kn(e);return mS(n,t._query,{source:"server"}).then(i=>new en(e,r,t,i))}function U_(t,e,n){t=re(t,he);let r=re(t.firestore,ve),i=Ph(t.converter,e,n);return vs(r,[xh(Fi(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,be.none())])}function $_(t,e,n,...r){t=re(t,he);let i=re(t.firestore,ve),o=Fi(i),s;return s=typeof(e=_e(e))=="string"||e instanceof Jt?V_(o,"updateDoc",t._key,e,n,r):F_(o,"updateDoc",t._key,e),vs(i,[s.toMutation(t._key,be.exists(!0))])}function nM(t){return vs(re(t.firestore,ve),[new Pr(t._key,be.none())])}function rM(t,e){let n=re(t.firestore,ve),r=Lu(t),i=Ph(t.converter,e);return vs(n,[xh(Fi(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,be.exists(!1))]).then(()=>r)}function q_(t,...e){var n,r,i;t=_e(t);let o={includeMetadataChanges:!1},s=0;typeof e[s]!="object"||zv(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges};if(zv(e[s])){let d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let u,c,l;if(t instanceof he)c=re(t.firestore,ve),l=fs(t._key.path),u={next:d=>{e[s]&&e[s](H_(c,t,d))},error:e[s+1],complete:e[s+2]};else{let d=re(t,Ze);c=re(d.firestore,ve),l=d._query;let h=new Kn(c);u={next:f=>{e[s]&&e[s](new en(c,h,d,f))},error:e[s+1],complete:e[s+2]},jS(t._query)}return function(h,f,_,v){let m=new cs(v),I=new Au(f,m,_);return h.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return __(yield ls(h),I)})),()=>{m.La(),h.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return w_(yield ls(h),I)}))}}(Ue(c),l,a,u)}function iM(t,e){return Z2(Ue(t=re(t,ve)),zv(e)?e:{next:e})}function vs(t,e){return function(r,i){let o=new Ve;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return x2(yield x_(r),i,o)})),o.promise}(Ue(t),e)}function H_(t,e,n){let r=n.docs.get(e._key),i=new Kn(t);return new jt(t,i,e._key,r,new qn(n.hasPendingWrites,n.fromCache),e.converter)}var rj={maxAttempts:5};var Th=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Fi(e)}set(e,n,r){this._verifyNotCommitted();let i=Er(e,this._firestore),o=Ph(i.converter,n,r),s=xh(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,be.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=Er(e,this._firestore),s;return s=typeof(n=_e(n))=="string"||n instanceof Jt?V_(this._dataReader,"WriteBatch.update",o._key,n,r,i):F_(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,be.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Er(e,this._firestore);return this._mutations=this._mutations.concat(new Pr(n._key,be.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new w(g.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Er(t,e){if((t=_e(t)).firestore!==e)throw new w(g.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var i_=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Fi(n)}get(n){let r=Er(n,this._firestore),i=new r_(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return x();let s=o[0];if(s.isFoundDocument())return new Ni(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Ni(this._firestore,i,r._key,null,r.converter);throw x()})}set(n,r,i){let o=Er(n,this._firestore),s=Ph(o.converter,r,i),a=xh(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=Er(n,this._firestore),a;return a=typeof(r=_e(r))=="string"||r instanceof Jt?V_(this._dataReader,"Transaction.update",s._key,r,i,o):F_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=Er(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Er(e,this._firestore),r=new Kn(this._firestore);return super.get(e).then(i=>new jt(this._firestore,r,n._key,i._document,new qn(!1,!1),n.converter))}};function oM(t,e,n){t=re(t,ve);let r=Object.assign(Object.assign({},rj),n);return function(o){if(o.maxAttempts<1)throw new w(g.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new Ve;return o.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){let c=yield G2(o);new Uv(o.asyncQueue,c,a,s,u).ja()})),u.promise}(Ue(t),i=>e(new i_(t,i)),r)}function sM(){return new xu("deleteField")}function aM(){return new Qv("serverTimestamp")}function uM(...t){return new Yv("arrayUnion",t)}function cM(...t){return new Zv("arrayRemove",t)}function lM(t){return new Xv("increment",t)}(function(e,n=!0){(function(i){hs=i})(uw),Ds(new Vr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ve(new ly(r.getProvider("auth-internal")),new py(r.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new w(g.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ar(c.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Zn(GT,"4.4.2",e),Zn(GT,"4.4.2","esm2017")})();var ij="@firebase/firestore-compat",oj="0.3.25";function Y_(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new w("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function dM(){if(typeof Uint8Array>"u")throw new w("unimplemented","Uint8Arrays are not available in this environment.")}function hM(){if(!rA())throw new w("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Nh=class t{constructor(e){this._delegate=e}static fromBase64String(e){return hM(),new t(An.fromBase64String(e))}static fromUint8Array(e){return dM(),new t(An.fromUint8Array(e))}toBase64(){return hM(),this._delegate.toBase64()}toUint8Array(){return dM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function z_(t){return sj(t,["next","error","complete"])}function sj(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var G_=class{enableIndexedDbPersistence(e,n){return DS(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return CS(e._delegate)}clearIndexedDbPersistence(e){return bS(e._delegate)}},Oh=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ar||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Vt("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){_S(this._delegate,e,n,r)}enableNetwork(){return SS(this._delegate)}disableNetwork(){return MS(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,P_("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return AS(this._delegate)}onSnapshotsInSync(e){return iM(this._delegate,e)}get app(){if(!this._appCompat)throw new w("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Es(this,N_(this._delegate,e))}catch(n){throw pt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Sn(this,Lu(this._delegate,e))}catch(n){throw pt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ui(this,wS(this._delegate,e))}catch(n){throw pt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return oM(this._delegate,n=>e(new kh(this,n)))}batch(){return Ue(this._delegate),new Fh(new Th(this._delegate,e=>vs(this._delegate,e)))}loadBundle(e){return xS(this._delegate,e)}namedQuery(e){return RS(this._delegate,e).then(n=>n?new Ui(this,n):null)}},_s=class extends ds{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nh(new An(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Sn.forKey(n,this.firestore,null)}};function aj(t){zb(t)}var kh=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new _s(e)}get(e){let n=Li(e);return this._delegate.get(n).then(r=>new ji(this._firestore,new jt(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=Li(e);return r?(Y_("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Li(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Li(e);return this._delegate.delete(n),this}},Fh=class{constructor(e){this._delegate=e}set(e,n,r){let i=Li(e);return r?(Y_("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Li(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Li(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},ws=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Dr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Bi(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new _s(e),n),i.set(n,o)),o}};ws.INSTANCES=new WeakMap;var Sn=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new _s(e)}static forPath(e,n,r){if(e.length%2!==0)throw new w("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new he(n._delegate,r,new b(e)))}static forKey(e,n,r){return new t(n,new he(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Es(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Es(this.firestore,N_(this._delegate,e))}catch(n){throw pt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=_e(e),e instanceof he?O_(this._delegate,e):!1}set(e,n){n=Y_("DocumentReference.set",n);try{return n?U_(this._delegate,e,n):U_(this._delegate,e)}catch(r){throw pt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?$_(this._delegate,e):$_(this._delegate,e,n,...r)}catch(i){throw pt(i,"updateDoc()","DocumentReference.update()")}}delete(){return nM(this._delegate)}onSnapshot(...e){let n=fM(e),r=pM(e,i=>new ji(this.firestore,new jt(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return q_(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=ZS(this._delegate):e?.source==="server"?n=XS(this._delegate):n=YS(this._delegate),n.then(r=>new ji(this.firestore,new jt(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(ws.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function pt(t,e,n){return t.message=t.message.replace(e,n),t}function fM(t){for(let e of t)if(typeof e=="object"&&!z_(e))return e;return{}}function pM(t,e){var n,r;let i;return z_(t[0])?i=t[0]:z_(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var ji=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Sn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return B_(this._delegate,e._delegate)}},Bi=class extends ji{data(e){let n=this._delegate.data(e);return this._delegate._converter||Gb(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Ui=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new _s(e)}where(e,n,r){try{return new t(this.firestore,Yn(this._delegate,BS(e,n,r)))}catch(i){throw pt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,Yn(this._delegate,US(e,n)))}catch(r){throw pt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,Yn(this._delegate,$S(e)))}catch(n){throw pt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,Yn(this._delegate,qS(e)))}catch(n){throw pt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,Yn(this._delegate,HS(...e)))}catch(n){throw pt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,Yn(this._delegate,zS(...e)))}catch(n){throw pt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,Yn(this._delegate,GS(...e)))}catch(n){throw pt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,Yn(this._delegate,WS(...e)))}catch(n){throw pt(n,"endAt()","Query.endAt()")}}isEqual(e){return k_(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=eM(this._delegate):e?.source==="server"?n=tM(this._delegate):n=JS(this._delegate),n.then(r=>new ju(this.firestore,new en(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=fM(e),r=pM(e,i=>new ju(this.firestore,new en(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return q_(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(ws.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},W_=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Bi(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},ju=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ui(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Bi(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new W_(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Bi(this._firestore,r))})}isEqual(e){return B_(this._delegate,e._delegate)}},Es=class t extends Ui{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Sn(this.firestore,e):null}doc(e){try{return e===void 0?new Sn(this.firestore,Lu(this._delegate)):new Sn(this.firestore,Lu(this._delegate,e))}catch(n){throw pt(n,"doc()","CollectionReference.doc()")}}add(e){return rM(this._delegate,e).then(n=>new Sn(this.firestore,n))}isEqual(e){return O_(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(ws.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Li(t){return re(t,he)}var K_=class t{constructor(...e){this._delegate=new Jt(...e)}static documentId(){return new t(Re.keyField().canonicalString())}isEqual(e){return e=_e(e),e instanceof Jt?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Q_=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=aM();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=sM();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=uM(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=cM(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=lM(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var uj={Firestore:Oh,GeoPoint:Pi,Timestamp:Ee,Blob:Nh,Transaction:kh,WriteBatch:Fh,DocumentReference:Sn,DocumentSnapshot:ji,Query:Ui,QueryDocumentSnapshot:Bi,QuerySnapshot:ju,CollectionReference:Es,FieldPath:K_,FieldValue:Q_,setLogLevel:aj,CACHE_SIZE_UNLIMITED:ES};function cj(t,e){t.INTERNAL.registerComponent(new Vr("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},uj)))}function lj(t){cj(t,(e,n)=>new Oh(e,n,new G_)),t.registerVersion(ij,oj)}lj(st);function dj(t,e=As){return new Z(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function gM(t,e){return dj(t,e)}function hj(t,e){return gM(t,e).pipe($r(void 0),Ms(),j(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function J_(t,e){return gM(t,e).pipe(j(n=>({payload:n,type:"query"})))}var Vh=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=wM(r,n);return new jh(i,o,this.afs)}snapshotChanges(){return hj(this.ref,this.afs.schedulers.outsideAngular).pipe(yt)}valueChanges(e={}){return this.snapshotChanges().pipe(j(({payload:n})=>e.idField?fe(N({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return ie(this.ref.get(e)).pipe(yt)}};function Lh(t,e){return J_(t,e).pipe($r(void 0),Ms(),j(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let c=o.find(d=>d.doc.ref.isEqual(a.ref)),l=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&l&&JSON.stringify(l.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function mM(t,e,n){return Lh(t,n).pipe(Ur((r,i)=>fj(r,i.map(o=>o.payload),e),[]),lf(),j(r=>r.map(i=>({type:i.type,payload:i}))))}function fj(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=pj(t,r))}),t}function Z_(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function pj(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return Z_(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return Z_(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Z_(t,e.oldIndex,1);break}return t}function yM(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var jh=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Lh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(j(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe($r(void 0),Ms(),Be(([r,i])=>i.length>0||!r),j(([,r])=>r),yt)}auditTrail(e){return this.stateChanges(e).pipe(Ur((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=yM(e);return mM(this.query,n,this.afs.schedulers.outsideAngular).pipe(yt)}valueChanges(e={}){return J_(this.query,this.afs.schedulers.outsideAngular).pipe(j(n=>n.payload.docs.map(r=>e.idField?fe(N({},r.data()),{[e.idField]:r.id}):r.data())),yt)}get(e){return ie(this.query.get(e)).pipe(yt)}add(e){return this.ref.add(e)}doc(e){return new Vh(this.ref.doc(e),this.afs)}},X_=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Lh(this.query,this.afs.schedulers.outsideAngular).pipe(yt):Lh(this.query,this.afs.schedulers.outsideAngular).pipe(j(n=>n.filter(r=>e.indexOf(r.type)>-1)),Be(n=>n.length>0),yt)}auditTrail(e){return this.stateChanges(e).pipe(Ur((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=yM(e);return mM(this.query,n,this.afs.schedulers.outsideAngular).pipe(yt)}valueChanges(e={}){return J_(this.query,this.afs.schedulers.outsideAngular).pipe(j(r=>r.payload.docs.map(i=>e.idField?N({[e.idField]:i.id},i.data()):i.data())),yt)}get(e){return ie(this.query.get(e)).pipe(yt)}},vM=new M("angularfire2.enableFirestorePersistence"),_M=new M("angularfire2.firestore.persistenceSettings"),gj=new M("angularfire2.firestore.settings"),mj=new M("angularfire2.firestore.use-emulator");function wM(t,e=n=>n){return{query:e(t),ref:t}}var yj=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,u,c,l,d,h,f,_,v,m,I,R){this.schedulers=u;let T=Sa(n,a,r),P=l;d&&hm(T,a,h,_,v,m,f,I),[this.firestore,this.persistenceEnabled$]=Hl(`${T.name}.firestore`,"AngularFirestore",T.name,()=>{let B=a.runOutsideAngular(()=>T.firestore());if(o&&B.settings(o),P&&B.useEmulator(...P),i&&!ii(s)){let H=()=>{try{return ie(B.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(de){return typeof console<"u"&&console.warn(de),F(!1)}};return[B,a.runOutsideAngular(H)]}else return[B,F(!1)]},[o,P,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=wM(i,r),a=this.schedulers.ngZone.run(()=>o);return new jh(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new X_(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new Vh(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(D(Mo),D(xo,8),D(vM,8),D(gj,8),D(et),D(J),D(Ul),D(_M,8),D(mj,8),D(fm,8),D(sm,8),D(am,8),D(um,8),D(cm,8),D(lm,8),D(dm,8),D(ci,8))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),EM=(()=>{class t{constructor(){st.registerVersion("angularfire",li.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:vM,useValue:!0},{provide:_M,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=De({type:t});static \u0275inj=Ie({providers:[yj]})}return t})();var IM={production:!1,firebaseConfig:{apiKey:"AIzaSyBjK6Iepet70a0ApWMjYkEA6Wcx10MBy3Q",authDomain:"bk-burger.firebaseapp.com",databaseURL:"https://bk-burger-default-rtdb.firebaseio.com",projectId:"bk-burger",storageBucket:"bk-burger.appspot.com",messagingSenderId:"586729585880",appId:"1:586729585880:web:b16e71013809bec688ebad",measurementId:"G-S6TJCELC9P"}};var DM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=De({type:e,bootstrap:[oC]}),e.\u0275inj=Ie({imports:[l0,tC,DC.initializeApp(IM.firebaseConfig),EM,CC,t0,aC]});let t=e;return t})();c0().bootstrapModule(DM).catch(t=>console.error(t));
