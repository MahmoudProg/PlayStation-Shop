import{a as N,b as me,c as Yh,d as y,e as Ew,f as Gc,g as Iw,h as Dw,i as Cw,j as Zh,k as Tw,l as Is,m as Xh,n as Wc,o as bw,p as Aw,q as Jh,r as Ee,s as jr,t as on,u as Kc,v as Ds,w as Sw,x as Mw,y as tr,z as lt}from"./chunk-W354PV4M.js";var xw=null;var ef=1,Rw=Symbol("SIGNAL");function dt(t){let e=xw;return xw=t,e}var Pw={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function JM(t){if(!(rf(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===ef)){if(!t.producerMustRecompute(t)&&!tf(t)){t.dirty=!1,t.lastCleanEpoch=ef;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=ef}}function Nw(t){return t&&(t.nextProducerIndex=0),dt(t)}function Ow(t,e){if(dt(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(rf(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)nf(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function tf(t){Qc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(JM(n),r!==n.version))return!0}return!1}function kw(t){if(Qc(t),rf(t))for(let e=0;e<t.producerNode.length;e++)nf(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function nf(t,e){if(ex(t),Qc(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)nf(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Qc(i),i.producerIndexOfThis[r]=e}}function rf(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Qc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function ex(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function tx(){throw new Error}var nx=tx;function Fw(t){nx=t}function q(t){return typeof t=="function"}function Hi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Yc=Hi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Br(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var xe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(q(r))try{r()}catch(o){e=o instanceof Yc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Vw(o)}catch(s){e=e??[],s instanceof Yc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Yc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Vw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Br(n,e)}remove(e){let{_finalizers:n}=this;n&&Br(n,e),e instanceof t&&e._removeParent(this)}};xe.EMPTY=(()=>{let t=new xe;return t.closed=!0,t})();var of=xe.EMPTY;function Zc(t){return t instanceof xe||t&&"closed"in t&&q(t.remove)&&q(t.add)&&q(t.unsubscribe)}function Vw(t){q(t)?t():t.unsubscribe()}var $t={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var zi={setTimeout(t,e,...n){let{delegate:r}=zi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=zi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Xc(t){zi.setTimeout(()=>{let{onUnhandledError:e}=$t;if(e)e(t);else throw t})}function Cs(){}var Lw=sf("C",void 0,void 0);function jw(t){return sf("E",void 0,t)}function Bw(t){return sf("N",t,void 0)}function sf(t,e,n){return{kind:t,value:e,error:n}}var Ur=null;function Gi(t){if($t.useDeprecatedSynchronousErrorHandling){let e=!Ur;if(e&&(Ur={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Ur;if(Ur=null,n)throw r}}else t()}function Uw(t){$t.useDeprecatedSynchronousErrorHandling&&Ur&&(Ur.errorThrown=!0,Ur.error=t)}var $r=class extends xe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Zc(e)&&e.add(this)):this.destination=ox}static create(e,n,r){return new Pn(e,n,r)}next(e){this.isStopped?cf(Bw(e),this):this._next(e)}error(e){this.isStopped?cf(jw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?cf(Lw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},rx=Function.prototype.bind;function af(t,e){return rx.call(t,e)}var uf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Jc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Jc(r)}else Jc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Jc(n)}}},Pn=class extends $r{constructor(e,n,r){super();let i;if(q(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&$t.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&af(e.next,o),error:e.error&&af(e.error,o),complete:e.complete&&af(e.complete,o)}):i=e}this.destination=new uf(i)}};function Jc(t){$t.useDeprecatedSynchronousErrorHandling?Uw(t):Xc(t)}function ix(t){throw t}function cf(t,e){let{onStoppedNotification:n}=$t;n&&zi.setTimeout(()=>n(t,e))}var ox={closed:!0,next:Cs,error:ix,complete:Cs};var Wi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ht(t){return t}function lf(...t){return df(t)}function df(t){return t.length===0?ht:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var X=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=ax(n)?n:new Pn(n,r,i);return Gi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=$w(r),new r((i,o)=>{let s=new Pn({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Wi](){return this}pipe(...n){return df(n)(this)}toPromise(n){return n=$w(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function $w(t){var e;return(e=t??$t.Promise)!==null&&e!==void 0?e:Promise}function sx(t){return t&&q(t.next)&&q(t.error)&&q(t.complete)}function ax(t){return t&&t instanceof $r||sx(t)&&Zc(t)}function hf(t){return q(t?.lift)}function Q(t){return e=>{if(hf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Y(t,e,n,r,i){return new ff(t,e,n,r,i)}var ff=class extends $r{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ki(){return Q((t,e)=>{let n=null;t._refCount++;let r=Y(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Qi=class extends X{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,hf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xe;let n=this.getSubject();e.add(this.source.subscribe(Y(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xe.EMPTY)}return e}refCount(){return Ki()(this)}};var qw=Hi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=(()=>{class t extends X{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new eu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new qw}next(n){Gi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Gi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Gi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?of:(this.currentObservers=null,o.push(n),new xe(()=>{this.currentObservers=null,Br(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new X;return n.source=this,n}}return t.create=(e,n)=>new eu(e,n),t})(),eu=class extends Ue{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:of}};var Qe=class extends Ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ts={now(){return(Ts.delegate||Date).now()},delegate:void 0};var tu=class extends Ue{constructor(e=1/0,n=1/0,r=Ts){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var nu=class extends xe{constructor(e,n){super()}schedule(e,n=0){return this}};var bs={setInterval(t,e,...n){let{delegate:r}=bs;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=bs;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Yi=class extends nu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return bs.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&bs.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Br(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Zi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Zi.now=Ts.now;var Xi=class extends Zi{constructor(e,n=Zi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var As=new Xi(Yi);var ru=class extends Yi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var iu=class extends Xi{};var pf=new iu(ru);var _t=new X(t=>t.complete());function Hw(t){return t&&q(t.schedule)}function gf(t){return t[t.length-1]}function zw(t){return q(gf(t))?t.pop():void 0}function sn(t){return Hw(gf(t))?t.pop():void 0}function Gw(t,e){return typeof gf(t)=="number"?t.pop():e}var ou=t=>t&&typeof t.length=="number"&&typeof t!="function";function su(t){return q(t?.then)}function au(t){return q(t[Wi])}function cu(t){return Symbol.asyncIterator&&q(t?.[Symbol.asyncIterator])}function uu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function cx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var lu=cx();function du(t){return q(t?.[lu])}function hu(t){return Iw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Gc(n.read());if(i)return yield Gc(void 0);yield yield Gc(r)}}finally{n.releaseLock()}})}function fu(t){return q(t?.getReader)}function Ie(t){if(t instanceof X)return t;if(t!=null){if(au(t))return ux(t);if(ou(t))return lx(t);if(su(t))return dx(t);if(cu(t))return Ww(t);if(du(t))return hx(t);if(fu(t))return fx(t)}throw uu(t)}function ux(t){return new X(e=>{let n=t[Wi]();if(q(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function lx(t){return new X(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function dx(t){return new X(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Xc)})}function hx(t){return new X(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Ww(t){return new X(e=>{px(t,e).catch(n=>e.error(n))})}function fx(t){return Ww(hu(t))}function px(t,e){var n,r,i,o;return Ew(this,void 0,void 0,function*(){try{for(n=Dw(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function wt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Rt(t,e=0){return Q((n,r)=>{n.subscribe(Y(r,i=>wt(r,t,()=>r.next(i),e),()=>wt(r,t,()=>r.complete(),e),i=>wt(r,t,()=>r.error(i),e)))})}function qt(t,e=0){return Q((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Kw(t,e){return Ie(t).pipe(qt(e),Rt(e))}function Qw(t,e){return Ie(t).pipe(qt(e),Rt(e))}function Yw(t,e){return new X(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Zw(t,e){return new X(n=>{let r;return wt(n,e,()=>{r=t[lu](),wt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>q(r?.return)&&r.return()})}function pu(t,e){if(!t)throw new Error("Iterable cannot be null");return new X(n=>{wt(n,e,()=>{let r=t[Symbol.asyncIterator]();wt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Xw(t,e){return pu(hu(t),e)}function Jw(t,e){if(t!=null){if(au(t))return Kw(t,e);if(ou(t))return Yw(t,e);if(su(t))return Qw(t,e);if(cu(t))return pu(t,e);if(du(t))return Zw(t,e);if(fu(t))return Xw(t,e)}throw uu(t)}function se(t,e){return e?Jw(t,e):Ie(t)}function F(...t){let e=sn(t);return se(t,e)}function Ji(t,e){let n=q(t)?t:()=>t,r=i=>i.error(n());return new X(e?i=>e.schedule(r,0,i):r)}function mf(t){return!!t&&(t instanceof X||q(t.lift)&&q(t.subscribe))}var Nn=Hi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function j(t,e){return Q((n,r)=>{let i=0;n.subscribe(Y(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:gx}=Array;function mx(t,e){return gx(e)?t(...e):t(e)}function eE(t){return j(e=>mx(t,e))}var{isArray:yx}=Array,{getPrototypeOf:vx,prototype:_x,keys:wx}=Object;function tE(t){if(t.length===1){let e=t[0];if(yx(e))return{args:e,keys:null};if(Ex(e)){let n=wx(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function Ex(t){return t&&typeof t=="object"&&vx(t)===_x}function nE(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ss(...t){let e=sn(t),n=zw(t),{args:r,keys:i}=tE(t);if(r.length===0)return se([],e);let o=new X(Ix(r,e,i?s=>nE(i,s):ht));return n?o.pipe(eE(n)):o}function Ix(t,e,n=ht){return r=>{rE(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)rE(e,()=>{let u=se(t[c],e),l=!1;u.subscribe(Y(r,d=>{o[c]=d,l||(l=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function rE(t,e,n){t?wt(n,t,e):e()}function iE(t,e,n,r,i,o,s,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},f=_=>u<r?v(_):c.push(_),v=_=>{o&&e.next(_),u++;let m=!1;Ie(n(_,l++)).subscribe(Y(e,E=>{i?.(E),o?f(E):e.next(E)},()=>{m=!0},void 0,()=>{if(m)try{for(u--;c.length&&u<r;){let E=c.shift();s?wt(e,s,()=>v(E)):v(E)}h()}catch(E){e.error(E)}}))};return t.subscribe(Y(e,f,()=>{d=!0,h()})),()=>{a?.()}}function ke(t,e,n=1/0){return q(e)?ke((r,i)=>j((o,s)=>e(r,o,i,s))(Ie(t(r,i))),n):(typeof e=="number"&&(n=e),Q((r,i)=>iE(r,i,t,n)))}function nr(t=1/0){return ke(ht,t)}function oE(){return nr(1)}function eo(...t){return oE()(se(t,sn(t)))}function gu(t){return new X(e=>{Ie(t()).subscribe(e)})}function yf(...t){let e=sn(t),n=Gw(t,1/0),r=t;return r.length?r.length===1?Ie(r[0]):nr(n)(se(r,e)):_t}function $e(t,e){return Q((n,r)=>{let i=0;n.subscribe(Y(r,o=>t.call(e,o,i++)&&r.next(o)))})}function rr(t){return Q((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Y(n,void 0,void 0,s=>{o=Ie(t(s,rr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function sE(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(Y(s,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function On(t,e){return q(e)?ke(t,e,1):ke(t,1)}function ir(t){return Q((e,n)=>{let r=!1;e.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function kn(t){return t<=0?()=>_t:Q((e,n)=>{let r=0;e.subscribe(Y(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function vf(t){return j(()=>t)}function _f(t,e=ht){return t=t??Dx,Q((n,r)=>{let i,o=!0;n.subscribe(Y(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function Dx(t,e){return t===e}function mu(t=Cx){return Q((e,n)=>{let r=!1;e.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Cx(){return new Nn}function or(t){return Q((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Pt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?$e((i,o)=>t(i,o,r)):ht,kn(1),n?ir(e):mu(()=>new Nn))}function to(t){return t<=0?()=>_t:Q((e,n)=>{let r=[];e.subscribe(Y(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function wf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?$e((i,o)=>t(i,o,r)):ht,to(1),n?ir(e):mu(()=>new Nn))}function Ms(){return Q((t,e)=>{let n,r=!1;t.subscribe(Y(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function qr(t,e){return Q(sE(t,e,arguments.length>=2,!0))}function aE(t={}){let{connector:e=()=>new Ue,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,u=0,l=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=c=void 0,l=d=!1},v=()=>{let _=s;f(),_?.unsubscribe()};return Q((_,m)=>{u++,!d&&!l&&h();let E=c=c??e();m.add(()=>{u--,u===0&&!d&&!l&&(a=Ef(v,i))}),E.subscribe(m),!s&&u>0&&(s=new Pn({next:R=>E.next(R),error:R=>{d=!0,h(),a=Ef(f,n,R),E.error(R)},complete:()=>{l=!0,h(),a=Ef(f,r),E.complete()}}),Ie(_).subscribe(s))})(o)}}function Ef(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Pn({next:()=>{r.unsubscribe(),t()}});return Ie(e(...n)).subscribe(r)}function yu(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,aE({connector:()=>new tu(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Hr(...t){let e=sn(t);return Q((n,r)=>{(e?eo(t,n,e):eo(t,n)).subscribe(r)})}function _e(t,e){return Q((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Y(r,c=>{i?.unsubscribe();let u=0,l=o++;Ie(t(c,l)).subscribe(i=Y(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function vu(t,e){return q(e)?_e(()=>t,e):_e(()=>t)}function If(t){return Q((e,n)=>{Ie(t).subscribe(Y(n,()=>n.complete(),Cs)),!n.closed&&e.subscribe(n)})}function Re(t,e,n){let r=q(t)||e||n?{next:t,error:e,complete:n}:t;return r?Q((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Y(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):ht}var WE="https://g.co/ng/security#xss",L=class extends Error{constructor(e,n){super(Ku(e,n)),this.code=e}};function Ku(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function he(t){for(let e in t)if(t[e]===he)return e;throw Error("Could not find renamed property on target object.")}function Dt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Dt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function cE(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var Tx=he({__forward_ref__:he});function wp(t){return t.__forward_ref__=wp,t.toString=function(){return Dt(this())},t}function Ot(t){return KE(t)?t():t}function KE(t){return typeof t=="function"&&t.hasOwnProperty(Tx)&&t.__forward_ref__===wp}function QE(t){return t&&!!t.\u0275providers}var bx=he({\u0275cmp:he}),Ax=he({\u0275dir:he}),Sx=he({\u0275pipe:he}),Mx=he({\u0275mod:he}),bu=he({\u0275fac:he}),xs=he({__NG_ELEMENT_ID__:he}),uE=he({__NG_ENV_ID__:he});function Ep(t){return typeof t=="string"?t:t==null?"":String(t)}function xx(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Ep(t)}function Rx(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new L(-200,t)}function Ip(t,e){throw new L(-201,!1)}function O(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Te(t){return{providers:t.providers||[],imports:t.imports||[]}}function Qu(t){return lE(t,ZE)||lE(t,XE)}function YE(t){return Qu(t)!==null}function lE(t,e){return t.hasOwnProperty(e)?t[e]:null}function Px(t){let e=t&&(t[ZE]||t[XE]);return e||null}function dE(t){return t&&(t.hasOwnProperty(hE)||t.hasOwnProperty(Nx))?t[hE]:null}var ZE=he({\u0275prov:he}),hE=he({\u0275inj:he}),XE=he({ngInjectableDef:he}),Nx=he({ngInjectorDef:he}),Z=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Z||{}),Nf;function JE(){return Nf}function Nt(t){let e=Nf;return Nf=t,e}function eI(t,e,n){let r=Qu(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Z.Optional)return null;if(e!==void 0)return e;Ip(t,"Injector")}var Ct=globalThis;var M=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=O({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var Ox={},Ps=Ox,Of="__NG_DI_FLAG__",Au="ngTempTokenPath",kx="ngTokenPath",Fx=/\n/gm,Vx="\u0275",fE="__source",so;function Lx(){return so}function sr(t){let e=so;return so=t,e}function jx(t,e=Z.Default){if(so===void 0)throw new L(-203,!1);return so===null?eI(t,void 0,e):so.get(t,e&Z.Optional?null:void 0,e)}function D(t,e=Z.Default){return(JE()||jx)(Ot(t),e)}function C(t,e=Z.Default){return D(t,Yu(e))}function Yu(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function kf(t){let e=[];for(let n=0;n<t.length;n++){let r=Ot(t[n]);if(Array.isArray(r)){if(r.length===0)throw new L(900,!1);let i,o=Z.Default;for(let s=0;s<r.length;s++){let a=r[s],c=Bx(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(D(i,o))}else e.push(D(r))}return e}function tI(t,e){return t[Of]=e,t.prototype[Of]=e,t}function Bx(t){return t[Of]}function Ux(t,e,n,r){let i=t[Au];throw e[fE]&&i.unshift(e[fE]),t.message=$x(`
`+t.message,i,n,r),t[kx]=i,t[Au]=null,t}function $x(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Vx?t.slice(2):t;let i=Dt(e);if(Array.isArray(e))i=e.map(Dt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Dt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Fx,`
  `)}`}function Ws(t){return{toString:t}.toString()}var nI=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(nI||{}),ln=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ln||{}),Ns={},an=[],Fn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Fn||{});function rI(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Ff(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];Hx(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function qx(t){return t===3||t===4||t===6}function Hx(t){return t.charCodeAt(0)===64}function Dp(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?pE(t,n,i,null,e[++r]):pE(t,n,i,null,null))}}return t}function pE(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var iI="ng-template";function zx(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&rI(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function oI(t){return t.type===4&&t.value!==iI}function Gx(t,e,n){let r=t.type===4&&!n?iI:t.value;return e===r}function Wx(t,e,n){let r=4,i=t.attrs||[],o=Yx(i),s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Ht(r)&&!Ht(c))return!1;if(s&&Ht(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!Gx(t,c,n)||c===""&&e.length===1){if(Ht(r))return!1;s=!0}}else{let u=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!zx(t.attrs,u,n)){if(Ht(r))return!1;s=!0}continue}let l=r&8?"class":c,d=Kx(l,i,oI(t),n);if(d===-1){if(Ht(r))return!1;s=!0;continue}if(u!==""){let h;d>o?h="":h=i[d+1].toLowerCase();let f=r&8?h:null;if(f&&rI(f,u,0)!==-1||r&2&&u!==h){if(Ht(r))return!1;s=!0}}}}return Ht(r)||s}function Ht(t){return(t&1)===0}function Kx(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Zx(e,t)}function Qx(t,e,n=!1){for(let r=0;r<e.length;r++)if(Wx(t,e[r],n))return!0;return!1}function Yx(t){for(let e=0;e<t.length;e++){let n=t[e];if(qx(n))return e}return t.length}function Zx(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function gE(t,e){return t?":not("+e.trim()+")":e}function Xx(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Ht(s)&&(e+=gE(o,i),i=""),r=s,o=o||!Ht(r);n++}return i!==""&&(e+=gE(o,i)),e}function Jx(t){return t.map(Xx).join(",")}function eR(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Ht(i))break;i=o}r++}return{attrs:e,classes:n}}function fn(t){return Ws(()=>{let e=lI(t),n=me(N({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===nI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ln.Emulated,styles:t.styles||an,_:null,schemas:t.schemas||null,tView:null,id:""});dI(n);let r=t.dependencies;return n.directiveDefs=yE(r,!1),n.pipeDefs=yE(r,!0),n.id=rR(n),n})}function tR(t){return cr(t)||sI(t)}function nR(t){return t!==null}function be(t){return Ws(()=>({type:t.type,bootstrap:t.bootstrap||an,declarations:t.declarations||an,imports:t.imports||an,exports:t.exports||an,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function mE(t,e){if(t==null)return Ns;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Fn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Fn.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Xr(t){return Ws(()=>{let e=lI(t);return dI(e),e})}function cr(t){return t[bx]||null}function sI(t){return t[Ax]||null}function aI(t){return t[Sx]||null}function cI(t){let e=cr(t)||sI(t)||aI(t);return e!==null?e.standalone:!1}function uI(t,e){let n=t[Mx]||null;if(!n&&e===!0)throw new Error(`Type ${Dt(t)} does not have '\u0275mod' property.`);return n}function lI(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ns,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||an,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:mE(t.inputs,e),outputs:mE(t.outputs),debugInfo:null}}function dI(t){t.features?.forEach(e=>e(t))}function yE(t,e){if(!t)return null;let n=e?aI:tR;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(nR)}function rR(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var Bn=0,J=1,U=2,tt=3,zt=4,Wt=5,Os=6,ks=7,Tt=8,co=9,Vn=10,nt=11,Fs=12,vE=13,Ks=14,Gt=15,Zu=16,no=17,Vs=18,Xu=19,hI=20,ar=21,Df=22,Wr=23,Ln=25,fI=1;var Kr=7,Su=8,Mu=9,ft=10,Cp=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Cp||{});function zr(t){return Array.isArray(t)&&typeof t[fI]=="object"}function Un(t){return Array.isArray(t)&&t[fI]===!0}function pI(t){return(t.flags&4)!==0}function Ju(t){return t.componentOffset>-1}function Tp(t){return(t.flags&1)===1}function Qs(t){return!!t.template}function iR(t){return(t[U]&512)!==0}function uo(t,e){let n=t.hasOwnProperty(bu);return n?t[bu]:null}var Vf=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function gI(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Ys(){return mI}function mI(t){return t.type.prototype.ngOnChanges&&(t.setInput=sR),oR}Ys.ngInherit=!0;function oR(){let t=vI(this),e=t?.current;if(e){let n=t.previous;if(n===Ns)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function sR(t,e,n,r,i){let o=this.declaredInputs[r],s=vI(t)||aR(t,{previous:Ns,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Vf(u&&u.currentValue,n,c===Ns),gI(t,e,i,n)}var yI="__ngSimpleChanges__";function vI(t){return t[yI]||null}function aR(t,e){return t[yI]=e}var _E=null;var cn=function(t,e,n){_E?.(t,e,n)},_I="svg",cR="math",uR=!1;function lR(){return uR}function dn(t){for(;Array.isArray(t);)t=t[Bn];return t}function dR(t,e){return dn(e[t])}function Kt(t,e){return dn(e[t.index])}function bp(t,e){return t.data[e]}function lr(t,e){let n=e[t];return zr(n)?n:n[Bn]}function Ap(t){return(t[U]&128)===128}function hR(t){return Un(t[tt])}function xu(t,e){return e==null?null:t[e]}function wI(t){t[no]=0}function fR(t){t[U]&1024||(t[U]|=1024,Ap(t)&&Ls(t))}function Sp(t){return!!(t[U]&9216||t[Wr]?.dirty)}function Lf(t){Sp(t)?Ls(t):t[U]&64&&(lR()?(t[U]|=1024,Ls(t)):t[Vn].changeDetectionScheduler?.notify())}function Ls(t){t[Vn].changeDetectionScheduler?.notify();let e=js(t);for(;e!==null&&!(e[U]&8192||(e[U]|=8192,!Ap(e)));)e=js(e)}function EI(t,e){if((t[U]&256)===256)throw new L(911,!1);t[ar]===null&&(t[ar]=[]),t[ar].push(e)}function pR(t,e){if(t[ar]===null)return;let n=t[ar].indexOf(e);n!==-1&&t[ar].splice(n,1)}function js(t){let e=t[tt];return Un(e)?e[tt]:e}var ae={lFrame:SI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function gR(){return ae.lFrame.elementDepthCount}function mR(){ae.lFrame.elementDepthCount++}function yR(){ae.lFrame.elementDepthCount--}function II(){return ae.bindingsEnabled}function vR(){return ae.skipHydrationRootTNode!==null}function _R(t){return ae.skipHydrationRootTNode===t}function wR(){ae.skipHydrationRootTNode=null}function Ce(){return ae.lFrame.lView}function dr(){return ae.lFrame.tView}function Qt(){let t=DI();for(;t!==null&&t.type===64;)t=t.parent;return t}function DI(){return ae.lFrame.currentTNode}function ER(){let t=ae.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Zs(t,e){let n=ae.lFrame;n.currentTNode=t,n.isParent=e}function CI(){return ae.lFrame.isParent}function IR(){ae.lFrame.isParent=!1}function DR(t){return ae.lFrame.bindingIndex=t}function Mp(){return ae.lFrame.bindingIndex++}function CR(){return ae.lFrame.inI18n}function TR(t,e){let n=ae.lFrame;n.bindingIndex=n.bindingRootIndex=t,jf(e)}function bR(){return ae.lFrame.currentDirectiveIndex}function jf(t){ae.lFrame.currentDirectiveIndex=t}function TI(t){ae.lFrame.currentQueryIndex=t}function AR(t){let e=t[J];return e.type===2?e.declTNode:e.type===1?t[Wt]:null}function bI(t,e,n){if(n&Z.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&Z.Host);)if(i=AR(o),i===null||(o=o[Ks],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ae.lFrame=AI();return r.currentTNode=e,r.lView=t,!0}function xp(t){let e=AI(),n=t[J];ae.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function AI(){let t=ae.lFrame,e=t===null?null:t.child;return e===null?SI(t):e}function SI(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function MI(){let t=ae.lFrame;return ae.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var xI=MI;function Rp(){let t=MI();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function el(){return ae.lFrame.selectedIndex}function Qr(t){ae.lFrame.selectedIndex=t}function RI(){let t=ae.lFrame;return bp(t.tView,t.selectedIndex)}function Xs(){ae.lFrame.currentNamespace=_I}function tl(){SR()}function SR(){ae.lFrame.currentNamespace=null}function MR(){return ae.lFrame.currentNamespace}var PI=!0;function Pp(){return PI}function Np(t){PI=t}function xR(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=mI(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Op(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function Eu(t,e,n){NI(t,e,3,n)}function Iu(t,e,n,r){(t[U]&3)===n&&NI(t,e,n,r)}function Cf(t,e){let n=t[U];(n&3)===e&&(n&=16383,n+=1,t[U]=n)}function NI(t,e,n,r){let i=r!==void 0?t[no]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[no]+=65536),(a<o||o==-1)&&(RR(t,n,e,c),t[no]=(t[no]&4294901760)+c+2),c++}function wE(t,e){cn(4,t,e);let n=dt(null);try{e.call(t)}finally{dt(n),cn(5,t,e)}}function RR(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[U]>>14<t[no]>>16&&(t[U]&3)===e&&(t[U]+=16384,wE(a,o)):wE(a,o)}var ao=-1,Bs=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function PR(t){return t instanceof Bs}function NR(t){return(t.flags&8)!==0}function OR(t){return(t.flags&16)!==0}function OI(t){return t!==ao}function Ru(t){return t&32767}function kR(t){return t>>16}function Pu(t,e){let n=kR(t),r=e;for(;n>0;)r=r[Ks],n--;return r}var Bf=!0;function EE(t){let e=Bf;return Bf=t,e}var FR=256,kI=FR-1,FI=5,VR=0,un={};function LR(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(xs)&&(r=n[xs]),r==null&&(r=n[xs]=VR++);let i=r&kI,o=1<<i;e.data[t+(i>>FI)]|=o}function VI(t,e){let n=LI(t,e);if(n!==-1)return n;let r=e[J];r.firstCreatePass&&(t.injectorIndex=e.length,Tf(r.data,t),Tf(e,null),Tf(r.blueprint,null));let i=kp(t,e),o=t.injectorIndex;if(OI(i)){let s=Ru(i),a=Pu(i,e),c=a[J].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Tf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function LI(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function kp(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=qI(i),r===null)return ao;if(n++,i=i[Ks],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ao}function jR(t,e,n){LR(t,e,n)}function jI(t,e,n){if(n&Z.Optional||t!==void 0)return t;Ip(e,"NodeInjector")}function BI(t,e,n,r){if(n&Z.Optional&&r===void 0&&(r=null),!(n&(Z.Self|Z.Host))){let i=t[co],o=Nt(void 0);try{return i?i.get(e,r,n&Z.Optional):eI(e,r,n&Z.Optional)}finally{Nt(o)}}return jI(r,e,n)}function UI(t,e,n,r=Z.Default,i){if(t!==null){if(e[U]&2048&&!(r&Z.Self)){let s=HR(t,e,n,r,un);if(s!==un)return s}let o=$I(t,e,n,r,un);if(o!==un)return o}return BI(e,n,r,i)}function $I(t,e,n,r,i){let o=$R(n);if(typeof o=="function"){if(!bI(e,t,r))return r&Z.Host?jI(i,n,r):BI(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&Z.Optional))Ip(n);else return s}finally{xI()}}else if(typeof o=="number"){let s=null,a=LI(t,e),c=ao,u=r&Z.Host?e[Gt][Wt]:null;for((a===-1||r&Z.SkipSelf)&&(c=a===-1?kp(t,e):e[a+8],c===ao||!DE(r,!1)?a=-1:(s=e[J],a=Ru(c),e=Pu(c,e)));a!==-1;){let l=e[J];if(IE(o,a,l.data)){let d=BR(a,e,n,s,r,u);if(d!==un)return d}c=e[a+8],c!==ao&&DE(r,e[J].data[a+8]===u)&&IE(o,a,e)?(s=l,a=Ru(c),e=Pu(c,e)):a=-1}}return i}function BR(t,e,n,r,i,o){let s=e[J],a=s.data[t+8],c=r==null?Ju(a)&&Bf:r!=s&&(a.type&3)!==0,u=i&Z.Host&&o===a,l=UR(a,s,n,c,u);return l!==null?Us(e,s,l,a):un}function UR(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,u=t.directiveEnd,l=o>>20,d=r?a:a+l,h=i?a+l:u;for(let f=d;f<h;f++){let v=s[f];if(f<c&&n===v||f>=c&&v.type===n)return f}if(i){let f=s[c];if(f&&Qs(f)&&f.type===n)return c}return null}function Us(t,e,n,r){let i=t[n],o=e.data;if(PR(i)){let s=i;s.resolving&&Rx(xx(o[n]));let a=EE(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?Nt(s.injectImpl):null,l=bI(t,r,Z.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&xR(n,o[n],e)}finally{u!==null&&Nt(u),EE(a),s.resolving=!1,xI()}}return i}function $R(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(xs)?t[xs]:void 0;return typeof e=="number"?e>=0?e&kI:qR:e}function IE(t,e,n){let r=1<<t;return!!(n[e+(t>>FI)]&r)}function DE(t,e){return!(t&Z.Self)&&!(t&Z.Host&&e)}var Gr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return UI(this._tNode,this._lView,e,Yu(r),n)}};function qR(){return new Gr(Qt(),Ce())}function nl(t){return Ws(()=>{let e=t.prototype.constructor,n=e[bu]||Uf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[bu]||Uf(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Uf(t){return KE(t)?()=>{let e=Uf(Ot(t));return e&&e()}:uo(t)}function HR(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[U]&2048&&!(s[U]&512);){let a=$I(o,s,n,r|Z.Self,un);if(a!==un)return a;let c=o.parent;if(!c){let u=s[hI];if(u){let l=u.get(n,un,r);if(l!==un)return l}c=qI(s),s=s[Ks]}o=c}return i}function qI(t){let e=t[J],n=e.type;return n===2?e.declTNode:n===1?t[Wt]:null}var _u="__parameters__";function zR(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function HI(t,e,n){return Ws(()=>{let r=zR(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,l){let d=c.hasOwnProperty(_u)?c[_u]:Object.defineProperty(c,_u,{value:[]})[_u];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function GR(t){let e=Ct.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function WR(t){return typeof t=="function"}function Fp(t,e){t.forEach(n=>Array.isArray(n)?Fp(n,e):e(n))}function zI(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Nu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var fo=tI(HI("Optional"),8);var Vp=tI(HI("SkipSelf"),4);function KR(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(XR))}return o}return Ou.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(u=>{i.template=u}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let u=i.styles.length,l=i.styleUrls;i.styleUrls.forEach((d,h)=>{a.push(""),s.push(r(d).then(f=>{a[u+h]=f,l.splice(l.indexOf(d),1),l.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(u=>{a.push(u),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>JR(o));e.push(c)}),YR(),Promise.all(e).then(()=>{})}var Ou=new Map,QR=new Set;function YR(){let t=Ou;return Ou=new Map,t}function ZR(){return Ou.size===0}function XR(t){return typeof t=="string"?t:t.text()}function JR(t){QR.delete(t)}var lo=new M(""),GI=new M("",-1),WI=new M(""),ku=class{get(e,n=Ps){if(n===Ps){let r=new Error(`NullInjectorError: No provider for ${Dt(e)}!`);throw r.name="NullInjectorError",r}return n}};function rl(t){return{\u0275providers:t}}function eP(...t){return{\u0275providers:KI(!0,t),\u0275fromNgModule:!0}}function KI(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Fp(e,s=>{let a=s;$f(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&QI(i,o),n}function QI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Lp(i,o=>{e(o,r)})}}function $f(t,e,n,r){if(t=Ot(t),!t)return!1;let i=null,o=dE(t),s=!o&&cr(t);if(!o&&!s){let c=t.ngModule;if(o=dE(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)$f(u,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Fp(o.imports,l=>{$f(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&QI(u,e)}if(!a){let u=uo(i)||(()=>new i);e({provide:i,useFactory:u,deps:an},i),e({provide:WI,useValue:i,multi:!0},i),e({provide:lo,useValue:()=>D(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=t;Lp(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function Lp(t,e){for(let n of t)QE(n)&&(n=n.\u0275providers),Array.isArray(n)?Lp(n,e):e(n)}var tP=he({provide:String,useValue:he});function YI(t){return t!==null&&typeof t=="object"&&tP in t}function nP(t){return!!(t&&t.useExisting)}function rP(t){return!!(t&&t.useFactory)}function qf(t){return typeof t=="function"}var il=new M(""),Du={},iP={},bf;function jp(){return bf===void 0&&(bf=new ku),bf}var pt=class{},$s=class extends pt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zf(e,s=>this.processProvider(s)),this.records.set(GI,ro(void 0,this)),i.has("environment")&&this.records.set(pt,ro(void 0,this));let o=this.records.get(il);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(WI,an,Z.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=sr(this),r=Nt(void 0),i;try{return e()}finally{sr(n),Nt(r)}}get(e,n=Ps,r=Z.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(uE))return e[uE](this);r=Yu(r);let i,o=sr(this),s=Nt(void 0);try{if(!(r&Z.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=lP(e)&&Qu(e);u&&this.injectableDefInScope(u)?c=ro(Hf(e),Du):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Z.Self?jp():this.parent;return n=r&Z.Optional&&n===Ps?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Au]=a[Au]||[]).unshift(Dt(e)),o)throw a;return Ux(a,e,"R3InjectorError",this.source)}else throw a}finally{Nt(s),sr(o)}}resolveInjectorInitializers(){let e=sr(this),n=Nt(void 0),r;try{let i=this.get(lo,an,Z.Self);for(let o of i)o()}finally{sr(e),Nt(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Dt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new L(205,!1)}processProvider(e){e=Ot(e);let n=qf(e)?e:Ot(e&&e.provide),r=sP(e);if(!qf(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ro(void 0,Du,!0),i.factory=()=>kf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Du&&(n.value=iP,n.value=n.factory()),typeof n.value=="object"&&n.value&&uP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ot(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Hf(t){let e=Qu(t),n=e!==null?e.factory:uo(t);if(n!==null)return n;if(t instanceof M)throw new L(204,!1);if(t instanceof Function)return oP(t);throw new L(204,!1)}function oP(t){if(t.length>0)throw new L(204,!1);let n=Px(t);return n!==null?()=>n.factory(t):()=>new t}function sP(t){if(YI(t))return ro(void 0,t.useValue);{let e=aP(t);return ro(e,Du)}}function aP(t,e,n){let r;if(qf(t)){let i=Ot(t);return uo(i)||Hf(i)}else if(YI(t))r=()=>Ot(t.useValue);else if(rP(t))r=()=>t.useFactory(...kf(t.deps||[]));else if(nP(t))r=()=>D(Ot(t.useExisting));else{let i=Ot(t&&(t.useClass||t.provide));if(cP(t))r=()=>new i(...kf(t.deps));else return uo(i)||Hf(i)}return r}function ro(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function cP(t){return!!t.deps}function uP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function lP(t){return typeof t=="function"||typeof t=="object"&&t instanceof M}function zf(t,e){for(let n of t)Array.isArray(n)?zf(n,e):n&&QE(n)?zf(n.\u0275providers,e):e(n)}function pn(t,e){t instanceof $s&&t.assertNotDestroyed();let n,r=sr(t),i=Nt(void 0);try{return e()}finally{sr(r),Nt(i)}}function dP(t){if(!JE()&&!Lx())throw new L(-203,!1)}function CE(t,e=null,n=null,r){let i=ZI(t,e,n,r);return i.resolveInjectorInitializers(),i}function ZI(t,e=null,n=null,r,i=new Set){let o=[n||an,eP(t)];return r=r||(typeof t=="object"?void 0:Dt(t)),new $s(o,e||jp(),r||null,i)}var Yt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return CE({name:""},i,r,"");{let o=r.name??"";return CE({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=Ps,e.NULL=new ku,e.\u0275prov=O({token:e,providedIn:"any",factory:()=>D(GI)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var Gf;function XI(t){Gf=t}function hP(){if(Gf!==void 0)return Gf;if(typeof document<"u")return document;throw new L(210,!1)}var ol=new M("",{providedIn:"root",factory:()=>fP}),fP="ng",Bp=new M(""),rt=new M("",{providedIn:"platform",factory:()=>"unknown"});var Up=new M("",{providedIn:"root",factory:()=>hP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function JI(t){return t instanceof Function?t():t}function pP(t){return(t??C(Yt)).get(rt)==="browser"}function eD(t){return(t.flags&128)===128}var Jr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Jr||{});var tD=new Map,gP=0;function mP(){return gP++}function yP(t){tD.set(t[Xu],t)}function vP(t){tD.delete(t[Xu])}var TE="__ngContext__";function Yr(t,e){zr(e)?(t[TE]=e[Xu],yP(e)):t[TE]=e}var _P;function $p(t,e){return _P(t,e)}function io(t,e,n,r,i){if(r!=null){let o,s=!1;Un(r)?o=r:zr(r)&&(s=!0,r=r[Bn]);let a=dn(r);t===0&&n!==null?i==null?oD(e,n,a):Fu(e,n,a,i||null,!0):t===1&&n!==null?Fu(e,n,a,i||null,!0):t===2?FP(e,a,s):t===3&&e.destroyNode(a),o!=null&&LP(e,t,o,n,i)}}function wP(t,e){return t.createText(e)}function EP(t,e,n){t.setValue(e,n)}function nD(t,e,n){return t.createElement(e,n)}function IP(t,e){rD(t,e),e[Bn]=null,e[Wt]=null}function DP(t,e,n,r,i,o){r[Bn]=i,r[Wt]=e,al(t,r,n,1,i,o)}function rD(t,e){al(t,e,e[nt],2,null,null)}function CP(t){let e=t[Fs];if(!e)return Af(t[J],t);for(;e;){let n=null;if(zr(e))n=e[Fs];else{let r=e[ft];r&&(n=r)}if(!n){for(;e&&!e[zt]&&e!==t;)zr(e)&&Af(e[J],e),e=e[tt];e===null&&(e=t),zr(e)&&Af(e[J],e),n=e&&e[zt]}e=n}}function TP(t,e,n,r){let i=ft+r,o=n.length;r>0&&(n[i-1][zt]=e),r<o-ft?(e[zt]=n[i],zI(n,ft+r,e)):(n.push(e),e[zt]=null),e[tt]=n;let s=e[Zu];s!==null&&n!==s&&bP(s,e);let a=e[Vs];a!==null&&a.insertView(t),Lf(e),e[U]|=128}function bP(t,e){let n=t[Mu],i=e[tt][tt][Gt];e[Gt]!==i&&(t[U]|=Cp.HasTransplantedViews),n===null?t[Mu]=[e]:n.push(e)}function iD(t,e){let n=t[Mu],r=n.indexOf(e);n.splice(r,1)}function qs(t,e){if(t.length<=ft)return;let n=ft+e,r=t[n];if(r){let i=r[Zu];i!==null&&i!==t&&iD(i,r),e>0&&(t[n-1][zt]=r[zt]);let o=Nu(t,ft+e);IP(r[J],r);let s=o[Vs];s!==null&&s.detachView(o[J]),r[tt]=null,r[zt]=null,r[U]&=-129}return r}function sl(t,e){if(!(e[U]&256)){let n=e[nt];n.destroyNode&&al(t,e,n,3,null,null),CP(e)}}function Af(t,e){if(!(e[U]&256)){e[U]&=-129,e[U]|=256,e[Wr]&&kw(e[Wr]),SP(t,e),AP(t,e),e[J].type===1&&e[nt].destroy();let n=e[Zu];if(n!==null&&Un(e[tt])){n!==e[tt]&&iD(n,e);let r=e[Vs];r!==null&&r.detachView(t)}vP(e)}}function AP(t,e){let n=t.cleanup,r=e[ks];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[ks]=null);let i=e[ar];if(i!==null){e[ar]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function SP(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Bs)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];cn(4,a,c);try{c.call(a)}finally{cn(5,a,c)}}else{cn(4,i,o);try{o.call(i)}finally{cn(5,i,o)}}}}}function MP(t,e,n){return xP(t,e.parent,n)}function xP(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Bn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===ln.None||o===ln.Emulated)return null}return Kt(r,n)}}function Fu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function oD(t,e,n){t.appendChild(e,n)}function bE(t,e,n,r,i){r!==null?Fu(t,e,n,r,i):oD(t,e,n)}function RP(t,e,n,r){t.removeChild(e,n,r)}function qp(t,e){return t.parentNode(e)}function PP(t,e){return t.nextSibling(e)}function NP(t,e,n){return kP(t,e,n)}function OP(t,e,n){return t.type&40?Kt(t,n):null}var kP=OP,AE;function Hp(t,e,n,r){let i=MP(t,r,e),o=e[nt],s=r.parent||e[Wt],a=NP(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)bE(o,i,n[c],a,!1);else bE(o,i,n,a,!1);AE!==void 0&&AE(o,r,e,n,i)}function Cu(t,e){if(e!==null){let n=e.type;if(n&3)return Kt(e,t);if(n&4)return Wf(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Cu(t,r);{let i=t[e.index];return Un(i)?Wf(-1,i):dn(i)}}else{if(n&32)return $p(e,t)()||dn(t[e.index]);{let r=sD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=js(t[Gt]);return Cu(i,r)}else return Cu(t,e.next)}}}return null}function sD(t,e){if(e!==null){let r=t[Gt][Wt],i=e.projection;return r.projection[i]}return null}function Wf(t,e){let n=ft+t+1;if(n<e.length){let r=e[n],i=r[J].firstChild;if(i!==null)return Cu(r,i)}return e[Kr]}function FP(t,e,n){let r=qp(t,e);r&&RP(t,r,e,n)}function zp(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Yr(dn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)zp(t,e,n.child,r,i,o,!1),io(e,t,i,a,o);else if(c&32){let u=$p(n,r),l;for(;l=u();)io(e,t,i,l,o);io(e,t,i,a,o)}else c&16?VP(t,e,r,n,i,o):io(e,t,i,a,o);n=s?n.projectionNext:n.next}}function al(t,e,n,r,i,o){zp(n,r,t.firstChild,e,i,o,!1)}function VP(t,e,n,r,i,o){let s=n[Gt],c=s[Wt].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];io(e,t,i,l,o)}else{let u=c,l=s[tt];eD(r)&&(u.flags|=128),zp(t,e,u,l,i,o,!0)}}function LP(t,e,n,r,i){let o=n[Kr],s=dn(n);o!==s&&io(e,t,r,o,i);for(let a=ft;a<n.length;a++){let c=n[a];al(c[J],c,t,e,r,o)}}function jP(t,e,n){t.setAttribute(e,"style",n)}function aD(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function cD(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Ff(t,e,r),i!==null&&aD(t,e,i),o!==null&&jP(t,e,o)}var Vu=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${WE})`}};function Gp(t){return t instanceof Vu?t.changingThisBreaksApplicationSecurity:t}function uD(t,e){let n=BP(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${WE})`)}return n===e}function BP(t){return t instanceof Vu&&t.getTypeName()||null}var UP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function lD(t){return t=String(t),t.match(UP)?t:"unsafe:"+t}var Wp=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Wp||{});function dD(t){let e=$P();return e?e.sanitize(Wp.URL,t)||"":uD(t,"URL")?Gp(t):lD(Ep(t))}function $P(){let t=Ce();return t&&t[Vn].sanitizer}var Kf=class{};var qP="h",HP="b";var zP=()=>null;function Kp(t,e,n=!1){return zP(t,e,n)}var Qf=class{},Lu=class{};function GP(t){let e=Error(`No component factory found for ${Dt(t)}.`);return e[WP]=t,e}var WP="ngComponent";var Yf=class{resolveComponentFactory(e){throw GP(e)}},cl=(()=>{let e=class e{};e.NULL=new Yf;let t=e;return t})();function KP(){return ul(Qt(),Ce())}function ul(t,e){return new ei(Kt(t,e))}var ei=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=KP;let t=e;return t})();var Hs=class{},po=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>QP();let t=e;return t})();function QP(){let t=Ce(),e=Qt(),n=lr(e.index,t);return(zr(n)?n:t)[nt]}var YP=(()=>{let e=class e{};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Sf={};function hD(t){return XP(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function ZP(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function XP(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var Zf=class{constructor(){}supports(e){return hD(e)}create(e){return new Xf(e)}},JP=(t,e)=>e,Xf=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||JP}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<SE(r,i,o)?n:r,a=SE(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){let f=h<o.length?o[h]:o[h]=0,v=f+h;l<=v&&v<u&&(o[h]=f+1)}let d=s.previousIndex;o[d]=l-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!hD(e))throw new L(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,ZP(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Jf(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new ju),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ju),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Jf=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},ep=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},ju=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new ep,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function SE(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function ME(){return new Qp([new Zf])}var Qp=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||ME()),deps:[[e,new Vp,new fo]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new L(901,!1)}};e.\u0275prov=O({token:e,providedIn:"root",factory:ME});let t=e;return t})();function Bu(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(dn(o)),Un(o)&&eN(o,r);let s=n.type;if(s&8)Bu(t,e,n.child,r);else if(s&32){let a=$p(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=sD(e,n);if(Array.isArray(a))r.push(...a);else{let c=js(e[Gt]);Bu(c[J],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function eN(t,e){for(let n=ft;n<t.length;n++){let r=t[n],i=r[J].firstChild;i!==null&&Bu(r[J],r,i,e)}t[Kr]!==t[Bn]&&e.push(t[Kr])}var fD=[];function tN(t){return t[Wr]??nN(t)}function nN(t){let e=fD.pop()??Object.create(iN);return e.lView=t,e}function rN(t){t.lView[Wr]!==t&&(t.lView=null,fD.push(t))}var iN=me(N({},Pw),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ls(t.lView)},consumerOnSignalRead(){this.lView[Wr]=this}});function pD(t){return mD(t[Fs])}function gD(t){return mD(t[zt])}function mD(t){for(;t!==null&&!Un(t);)t=t[zt];return t}var oN="ngOriginalError";function Mf(t){return t[oN]}var hn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Mf(e);for(;n&&Mf(n);)n=Mf(n);return n||null}},yD=new M("",{providedIn:"root",factory:()=>C(hn).handleError.bind(void 0)});var vD=!1,sN=new M("",{providedIn:"root",factory:()=>vD});var Js={};function gn(t=1){_D(dr(),Ce(),el()+t,!1)}function _D(t,e,n,r){if(!r)if((e[U]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Eu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Iu(e,o,0,n)}Qr(n)}function mn(t,e=Z.Default){let n=Ce();if(n===null)return D(t,e);let r=Qt();return UI(r,n,Ot(t),e)}function wD(){let t="invalid";throw new Error(t)}function ED(t,e,n,r,i,o){let s=dt(null);try{let a=null;i&Fn.SignalBased&&(a=e[r][Rw]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Fn.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):gI(e,a,r,o)}finally{dt(s)}}function aN(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Qr(~i);else{let o=i,s=n[++r],a=n[++r];TR(s,o);let c=e[o];a(2,c)}}}finally{Qr(-1)}}function ll(t,e,n,r,i,o,s,a,c,u,l){let d=e.blueprint.slice();return d[Bn]=i,d[U]=r|4|128|8|64,(u!==null||t&&t[U]&2048)&&(d[U]|=2048),wI(d),d[tt]=d[Ks]=t,d[Tt]=n,d[Vn]=s||t&&t[Vn],d[nt]=a||t&&t[nt],d[co]=c||t&&t[co]||null,d[Wt]=o,d[Xu]=mP(),d[Os]=l,d[hI]=u,d[Gt]=e.type==2?t[Gt]:d,d}function dl(t,e,n,r,i){let o=t.data[e];if(o===null)o=cN(t,e,n,r,i),CR()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=ER();o.injectorIndex=s===null?-1:s.injectorIndex}return Zs(o,!0),o}function cN(t,e,n,r,i){let o=DI(),s=CI(),a=s?o:o&&o.parent,c=t.data[e]=fN(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function ID(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function DD(t,e,n,r,i){let o=el(),s=r&2;try{Qr(-1),s&&e.length>Ln&&_D(t,e,Ln,!1),cn(s?2:0,i),n(r,i)}finally{Qr(o),cn(s?3:1,i)}}function CD(t,e,n){if(pI(e)){let r=dt(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{dt(r)}}}function TD(t,e,n){II()&&(_N(t,e,n,Kt(n,e)),(n.flags&64)===64&&RD(t,e,n))}function bD(t,e,n=Kt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function AD(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Yp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Yp(t,e,n,r,i,o,s,a,c,u,l){let d=Ln+r,h=d+i,f=uN(d,h),v=typeof u=="function"?u():u;return f[J]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:v,incompleteFirstPass:!1,ssrId:l}}function uN(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Js);return n}function lN(t,e,n,r){let o=r.get(sN,vD)||n===ln.ShadowDom,s=t.selectRootElement(e,o);return dN(s),s}function dN(t){hN(t)}var hN=()=>null;function fN(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return vR()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function xE(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Fn.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}t===0?RE(r,n,u,a,c):RE(r,n,u,a)}return r}function RE(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function pN(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=o[l],h=n?n.get(d):null,f=h?h.inputs:null,v=h?h.outputs:null;c=xE(0,d.inputs,l,c,f),u=xE(1,d.outputs,l,u,v);let _=c!==null&&s!==null&&!oI(e)?SN(c,l,s):null;a.push(_)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function gN(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function SD(t,e,n,r,i,o,s,a){let c=Kt(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(Zp(t,n,l,r,i),Ju(e)&&mN(n,e.index)):e.type&3?(r=gN(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function mN(t,e){let n=lr(e,t);n[U]&16||(n[U]|=64)}function MD(t,e,n,r){if(II()){let i=r===null?null:{"":-1},o=EN(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&xD(t,e,n,s,i,a),i&&IN(n,r,i)}n.mergedAttrs=Dp(n.mergedAttrs,n.attrs)}function xD(t,e,n,r,i,o){for(let u=0;u<r.length;u++)jR(VI(n,e),t,r[u].type);CN(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=ID(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=Dp(n.mergedAttrs,l.hostAttrs),TN(t,n,e,c,l),DN(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}pN(t,n,o)}function yN(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;vN(s)!=a&&s.push(a),s.push(n,r,o)}}function vN(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function _N(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Ju(n)&&bN(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||VI(n,e),Yr(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],u=Us(e,t,a,n);if(Yr(u,e),s!==null&&AN(e,a-i,u,c,n,s),Qs(c)){let l=lr(n.index,e);l[Tt]=Us(e,t,a,n)}}}function RD(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=bR();try{Qr(o);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];jf(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&wN(c,u)}}finally{Qr(-1),jf(s)}}function wN(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function EN(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(Qx(e,s.selectors,!1))if(r||(r=[]),Qs(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;tp(t,e,c)}else r.unshift(s),tp(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function tp(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function IN(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new L(-301,!1);r.push(e[i],o)}}}function DN(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Qs(e)&&(n[""]=t)}}function CN(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function TN(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=uo(i.type,!0)),s=new Bs(o,Qs(i),mn);t.blueprint[r]=s,n[r]=s,yN(t,e,r,ID(t,n,i.hostVars,Js),i)}function bN(t,e,n){let r=Kt(e,t),i=AD(n),o=t[Vn].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=hl(t,ll(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function AN(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],l=s[a++],d=s[a++];ED(r,n,c,u,l,d)}}function SN(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function PD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function ND(t,e){let n=t.contentQueries;if(n!==null){let r=dt(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];TI(o),a.contentQueries(2,e[s],s)}}}finally{dt(r)}}}function hl(t,e){return t[Fs]?t[vE][zt]=e:t[Fs]=e,t[vE]=e,e}function np(t,e,n){TI(0);let r=dt(null);try{e(t,n)}finally{dt(r)}}function MN(t){return t[ks]||(t[ks]=[])}function xN(t){return t.cleanup||(t.cleanup=[])}function OD(t,e){let n=t[co],r=n?n.get(hn,null):null;r&&r.handleError(e)}function Zp(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],u=e[s],l=t.data[s];ED(l,u,r,a,c,i)}}function RN(t,e,n){let r=dR(e,t);EP(t[nt],r,n)}var kD=100;function FD(t,e=!0,n=0){let r=t[Vn],i=r.rendererFactory,o=!1;o||i.begin?.();try{PN(t,n)}catch(s){throw e&&OD(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function PN(t,e){rp(t,e);let n=0;for(;Sp(t);){if(n===kD)throw new L(103,!1);n++,rp(t,1)}}function NN(t,e,n,r){let i=e[U];if((i&256)===256)return;let o=!1;!o&&e[Vn].inlineEffectRunner?.flush(),xp(e);let s=null,a=null;!o&&ON(t)&&(a=tN(e),s=Nw(a));try{wI(e),DR(t.bindingStartIndex),n!==null&&DD(t,e,n,2,r);let c=(i&3)===3;if(!o)if(c){let d=t.preOrderCheckHooks;d!==null&&Eu(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Iu(e,d,0,null),Cf(e,0)}if(kN(e),VD(e,0),t.contentQueries!==null&&ND(t,e),!o)if(c){let d=t.contentCheckHooks;d!==null&&Eu(e,d)}else{let d=t.contentHooks;d!==null&&Iu(e,d,1),Cf(e,1)}aN(t,e);let u=t.components;u!==null&&jD(e,u,0);let l=t.viewQuery;if(l!==null&&np(2,l,r),!o)if(c){let d=t.viewCheckHooks;d!==null&&Eu(e,d)}else{let d=t.viewHooks;d!==null&&Iu(e,d,2),Cf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Df]){for(let d of e[Df])d();e[Df]=null}o||(e[U]&=-73)}catch(c){throw Ls(e),c}finally{a!==null&&(Ow(a,s),rN(a)),Rp()}}function ON(t){return t.type!==2}function VD(t,e){for(let n=pD(t);n!==null;n=gD(n))for(let r=ft;r<n.length;r++){let i=n[r];LD(i,e)}}function kN(t){for(let e=pD(t);e!==null;e=gD(e)){if(!(e[U]&Cp.HasTransplantedViews))continue;let n=e[Mu];for(let r=0;r<n.length;r++){let i=n[r],o=i[tt];fR(i)}}}function FN(t,e,n){let r=lr(e,t);LD(r,n)}function LD(t,e){Ap(t)&&rp(t,e)}function rp(t,e){let r=t[J],i=t[U],o=t[Wr],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&tf(o)),o&&(o.dirty=!1),t[U]&=-9217,s)NN(r,t,r.template,t[Tt]);else if(i&8192){VD(t,1);let a=r.components;a!==null&&jD(t,a,1)}}function jD(t,e,n){for(let r=0;r<e.length;r++)FN(t,e[r],n)}function Xp(t){for(t[Vn].changeDetectionScheduler?.notify();t;){t[U]|=64;let e=js(t);if(iR(t)&&!e)return t;t=e}return null}var Zr=class{get rootNodes(){let e=this._lView,n=e[J];return Bu(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Tt]}set context(e){this._lView[Tt]=e}get destroyed(){return(this._lView[U]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[tt];if(Un(e)){let n=e[Su],r=n?n.indexOf(this):-1;r>-1&&(qs(e,r),Nu(n,r))}this._attachedToViewContainer=!1}sl(this._lView[J],this._lView)}onDestroy(e){EI(this._lView,e)}markForCheck(){Xp(this._cdRefInjectingView||this._lView)}detach(){this._lView[U]&=-129}reattach(){Lf(this._lView),this._lView[U]|=128}detectChanges(){this._lView[U]|=1024,FD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new L(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,rD(this._lView[J],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new L(902,!1);this._appRef=e,Lf(this._lView)}},ea=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=VN;let t=e;return t})();function VN(t){return LN(Qt(),Ce(),(t&16)===16)}function LN(t,e,n){if(Ju(t)&&!n){let r=lr(t.index,e);return new Zr(r,r)}else if(t.type&47){let r=e[Gt];return new Zr(r,e)}return null}var BD=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=jN,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),ip=class extends BD{constructor(e){super(),this._lView=e}onDestroy(e){return EI(this._lView,e),()=>pR(this._lView,e)}};function jN(){return new ip(Ce())}var PE=new Set;function ta(t){PE.has(t)||(PE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var op=class extends Ue{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=xf(o),i&&(i=xf(i)),s&&(s=xf(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof xe&&e.add(a),a}};function xf(t){return e=>{setTimeout(t,void 0,e)}}var et=op;function NE(...t){}function BN(){let t=typeof Ct.requestAnimationFrame=="function",e=Ct[t?"requestAnimationFrame":"setTimeout"],n=Ct[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ne=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new et(!1),this.onMicrotaskEmpty=new et(!1),this.onStable=new et(!1),this.onError=new et(!1),typeof Zone>"u")throw new L(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=BN().nativeRequestAnimationFrame,qN(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new L(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new L(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,UN,NE,NE);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},UN={};function Jp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function $N(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ct,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,sp(t),t.isCheckStableRunning=!0,Jp(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),sp(t))}function qN(t){let e=()=>{$N(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(HN(a))return n.invokeTask(i,o,s,a);try{return OE(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),kE(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return OE(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),kE(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,sp(t),Jp(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function sp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function OE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function kE(t){t._nesting--,Jp(t)}var ap=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new et,this.onMicrotaskEmpty=new et,this.onStable=new et,this.onError=new et}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function HN(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function zN(t="zone.js",e){return t==="noop"?new ap:t==="zone.js"?new ne(e):t}var oo=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(oo||{}),GN={destroy(){}};function eg(t,e){!e&&dP(eg);let n=e?.injector??C(Yt);if(!pP(n))return GN;ta("NgAfterNextRender");let r=n.get(tg),i=r.handler??=new up,o=e?.phase??oo.MixedReadWrite,s=()=>{i.unregister(c),a()},a=n.get(BD).onDestroy(s),c=new cp(n,o,()=>{s(),t()});return i.register(c),{destroy:s}}var cp=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(ne),this.errorHandler=e.get(hn,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},up=class{constructor(){this.executingCallbacks=!1,this.buckets={[oo.EarlyRead]:new Set,[oo.Write]:new Set,[oo.MixedReadWrite]:new Set,[oo.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},tg=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i();this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function WN(t,e){let n=lr(e,t),r=n[J];KN(r,n);let i=n[Bn];i!==null&&n[Os]===null&&(n[Os]=Kp(i,n[co])),ng(r,n,n[Tt])}function KN(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function ng(t,e,n){xp(e);try{let r=t.viewQuery;r!==null&&np(1,r,n);let i=t.template;i!==null&&DD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ND(t,e),t.staticViewQueries&&np(2,t.viewQuery,n);let o=t.components;o!==null&&QN(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[U]&=-5,Rp()}}function QN(t,e){for(let n=0;n<e.length;n++)WN(t,e[n])}function lp(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=cE(i,a);else if(o==2){let c=a,u=e[++s];r=cE(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Uu=class extends cl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=cr(e);return new ho(n,this.ngModule)}};function FE(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function YN(t){let e=t.toLowerCase();return e==="svg"?_I:e==="math"?cR:null}var dp=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Yu(r);let i=this.injector.get(e,Sf,r);return i!==Sf||n===Sf?i:this.parentInjector.get(e,n,r)}},ho=class extends Lu{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=FE(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return FE(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Jx(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let o=i instanceof pt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new dp(e,o):e,a=s.get(Hs,null);if(a===null)throw new L(407,!1);let c=s.get(YP,null),u=s.get(tg,null),l=s.get(Kf,null),d={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:l},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",v=r?lN(h,r,this.componentDef.encapsulation,s):nD(h,f,YN(f)),_=512;this.componentDef.signals?_|=4096:this.componentDef.onPush||(_|=16);let m=null;v!==null&&(m=Kp(v,s,!0));let E=Yp(0,null,null,1,0,null,null,null,null,null,null),R=ll(null,E,null,_,null,null,d,h,s,null,m);xp(R);let T,P;try{let B=this.componentDef,z,pe=null;B.findHostDirectiveDefs?(z=[],pe=new Map,B.findHostDirectiveDefs(B,z,pe),z.push(B)):z=[B];let xt=ZN(R,v),Qh=XN(xt,v,B,z,R,d,h);P=bp(E,Ln),v&&t1(h,B,v,r),n!==void 0&&n1(P,this.ngContentSelectors,n),T=e1(Qh,B,z,pe,R,[r1]),ng(E,R,null)}finally{Rp()}return new hp(this.componentType,T,ul(P,R),R,P)}},hp=class extends Qf{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Zr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Zp(o[J],o,i,e,n),this.previousInputValues.set(e,n);let s=lr(this._tNode.index,o);Xp(s)}}get injector(){return new Gr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ZN(t,e){let n=t[J],r=Ln;return t[r]=e,dl(n,r,2,"#host",null)}function XN(t,e,n,r,i,o,s){let a=i[J];JN(r,t,e,s);let c=null;e!==null&&(c=Kp(e,i[co]));let u=o.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=ll(i,AD(n),null,l,i[t.index],t,o,u,null,null,c);return a.firstCreatePass&&tp(a,t,r.length-1),hl(i,d),i[t.index]=d}function JN(t,e,n,r){for(let i of t)e.mergedAttrs=Dp(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(lp(e,e.mergedAttrs,!0),n!==null&&cD(r,n,e))}function e1(t,e,n,r,i,o){let s=Qt(),a=i[J],c=Kt(s,i);xD(a,i,s,n,null,r);for(let l=0;l<n.length;l++){let d=s.directiveStart+l,h=Us(i,a,d,s);Yr(h,i)}RD(a,i,s),c&&Yr(c,i);let u=Us(i,a,s.directiveStart+s.componentOffset,s);if(t[Tt]=i[Tt]=u,o!==null)for(let l of o)l(u,e);return CD(a,s,t),u}function t1(t,e,n,r){if(r)Ff(t,n,["ng-version","17.1.3"]);else{let{attrs:i,classes:o}=eR(e.selectors[0]);i&&Ff(t,n,i),o&&o.length>0&&aD(t,n,o.join(" "))}}function n1(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function r1(){let t=Qt();Op(Ce()[J],t)}var $H=new RegExp(`^(\\d+)*(${HP}|${qP})*(.*)`);var i1=()=>null;function $u(t,e){return i1(t,e)}function rg(t,e,n,r){let i=e.tView,s=t[U]&4096?4096:16,a=ll(t,i,n,s,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),c=t[e.index];a[Zu]=c;let u=t[Vs];return u!==null&&(a[Vs]=u.createEmbeddedView(i)),ng(i,a,n),a}function o1(t,e){let n=ft+e;if(n<t.length)return t[n]}function qu(t,e){return!e||e.firstChild===null||eD(t)}function ig(t,e,n,r=!0){let i=e[J];if(TP(i,e,t,n),r){let s=Wf(n,t),a=e[nt],c=qp(a,t[Kr]);c!==null&&DP(i,t[Wt],a,e,c,s)}let o=e[Os];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function s1(t,e){let n=qs(t,e);return n!==void 0&&sl(n[J],n),n}var na=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=a1;let t=e;return t})();function a1(){let t=Qt();return u1(t,Ce())}var c1=na,UD=class extends c1{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ul(this._hostTNode,this._hostLView)}get injector(){return new Gr(this._hostTNode,this._hostLView)}get parentInjector(){let e=kp(this._hostTNode,this._hostLView);if(OI(e)){let n=Pu(e,this._hostLView),r=Ru(e),i=n[J].data[r+8];return new Gr(i,n)}else return new Gr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=VE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ft}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=$u(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,qu(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!WR(e),a;if(s)a=n;else{let v=n||{};a=v.index,r=v.injector,i=v.projectableNodes,o=v.environmentInjector||v.ngModuleRef}let c=s?e:new ho(cr(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let _=(s?u:this.parentInjector).get(pt,null);_&&(o=_)}let l=cr(c.componentType??{}),d=$u(this._lContainer,l?.id??null),h=d?.firstChild??null,f=c.create(u,i,h,o);return this.insertImpl(f.hostView,a,qu(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(hR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[tt],u=new UD(c,c[Wt],c[tt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return ig(s,i,o,r),e.attachToViewContainerRef(),zI(Rf(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=VE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=qs(this._lContainer,n);r&&(Nu(Rf(this._lContainer),n),sl(r[J],r))}detach(e){let n=this._adjustIndex(e,-1),r=qs(this._lContainer,n);return r&&Nu(Rf(this._lContainer),n)!=null?new Zr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function VE(t){return t[Su]}function Rf(t){return t[Su]||(t[Su]=[])}function u1(t,e){let n,r=e[t.index];return Un(r)?n=r:(n=PD(r,e,null,t),e[t.index]=n,hl(e,n)),d1(n,e,t,r),new UD(n,t,e)}function l1(t,e){let n=t[nt],r=n.createComment(""),i=Kt(e,t),o=qp(n,i);return Fu(n,o,r,PP(n,i),!1),r}var d1=p1,h1=()=>!1;function f1(t,e,n){return h1(t,e,n)}function p1(t,e,n,r){if(t[Kr])return;let i;n.type&8?i=dn(r):i=l1(e,n),t[Kr]=i}var ur=class{},zs=class{};var Hu=class extends ur{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Uu(this);let i=uI(e);this._bootstrapComponents=JI(i.bootstrap),this._r3Injector=ZI(e,n,[{provide:ur,useValue:this},{provide:cl,useValue:this.componentFactoryResolver},...r],Dt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},zu=class extends zs{constructor(e){super(),this.moduleType=e}create(e){return new Hu(this.moduleType,e,[])}};function g1(t,e,n){return new Hu(t,e,n)}var fp=class extends ur{constructor(e){super(),this.componentFactoryResolver=new Uu(this),this.instance=null;let n=new $s([...e.providers,{provide:ur,useValue:this},{provide:cl,useValue:this.componentFactoryResolver}],e.parent||jp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function fl(t,e,n=null){return new fp({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var ti=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Qe(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function og(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function m1(t,e,n,r,i,o,s,a,c){let u=e.consts,l=dl(e,t,4,s||null,xu(u,a));MD(e,n,l,xu(u,c)),Op(e,l);let d=l.tView=Yp(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function Gs(t,e,n,r,i,o,s,a){let c=Ce(),u=dr(),l=t+Ln,d=u.firstCreatePass?m1(l,u,c,e,n,r,i,o,s):u.data[l];Zs(d,!1);let h=y1(u,c,d,t);Pp()&&Hp(u,c,h,d),Yr(h,c);let f=PD(h,c,h,d);return c[l]=f,hl(c,f),f1(f,d,c),Tp(d)&&TD(u,c,d),s!=null&&bD(c,d,a),Gs}var y1=v1;function v1(t,e,n,r){return Np(!0),e[nt].createComment("")}function $D(t,e,n,r){return og(t,Mp(),n)?e+Ep(n)+r:Js}function ni(t,e,n){let r=Ce(),i=Mp();if(og(r,i,e)){let o=dr(),s=RI();SD(o,s,r,t,e,r[nt],n,!1)}return ni}function LE(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";Zp(t,n,o[s],s,r)}var pp=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Pf(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function _1(t,e,n){let r,i,o=0,s=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;o<=s&&o<=a;){let c=t.at(o),u=e[o],l=Pf(o,c,o,u,n);if(l!==0){l<0&&t.updateValue(o,u),o++;continue}let d=t.at(s),h=e[a],f=Pf(s,d,a,h,n);if(f!==0){f<0&&t.updateValue(s,h),s--,a--;continue}let v=n(o,c),_=n(s,d),m=n(o,u);if(Object.is(m,_)){let E=n(a,h);Object.is(E,v)?(t.swap(o,s),t.updateValue(s,h),a--,s--):t.move(s,o),t.updateValue(o,u),o++;continue}if(r??=new Gu,i??=BE(t,o,s,n),gp(t,r,o,m))t.updateValue(o,u),o++,s++;else if(i.has(m))r.set(v,t.detach(o)),s--;else{let E=t.create(o,e[o]);t.attach(o,E),o++,s++}}for(;o<=a;)jE(t,r,n,o,e[o]),o++}else if(e!=null){let a=e[Symbol.iterator](),c=a.next();for(;!c.done&&o<=s;){let u=t.at(o),l=c.value,d=Pf(o,u,o,l,n);if(d!==0)d<0&&t.updateValue(o,l),o++,c=a.next();else{r??=new Gu,i??=BE(t,o,s,n);let h=n(o,l);if(gp(t,r,o,h))t.updateValue(o,l),o++,s++,c=a.next();else if(!i.has(h))t.attach(o,t.create(o,l)),o++,s++,c=a.next();else{let f=n(o,u);r.set(f,t.detach(o)),s--}}}for(;!c.done;)jE(t,r,n,t.length,c.value),c=a.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(a=>{t.destroy(a)})}function gp(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function jE(t,e,n,r,i){if(gp(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function BE(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Gu=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};var mp=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-ft}};function qD(t){return t}var yp=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function HD(t,e,n,r,i,o,s,a,c,u,l,d,h){ta("NgControlFlow");let f=c!==void 0,v=Ce(),_=a?s.bind(v[Gt][Tt]):s,m=new yp(f,_);v[Ln+t]=m,Gs(t+1,e,n,r,i,o),f&&Gs(t+2,c,u,l,d,h)}var vp=class extends pp{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-ft}at(e){return this.getLView(e)[Tt].$implicit}attach(e,n){let r=n[Os];this.needsIndexUpdate||=e!==this.length,ig(this.lContainer,n,e,qu(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,w1(this.lContainer,e)}create(e,n){let r=$u(this.lContainer,this.templateTNode.tView.ssrId);return rg(this.hostLView,this.templateTNode,new mp(this.lContainer,n,e),{dehydratedView:r})}destroy(e){sl(e[J],e)}updateValue(e,n){this.getLView(e)[Tt].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Tt].$index=e}getLView(e){return E1(this.lContainer,e)}};function zD(t){let e=dt(null),n=el();try{let r=Ce(),i=r[J],o=r[n];if(o.liveCollection===void 0){let a=n+1,c=UE(r,a),u=$E(i,a);o.liveCollection=new vp(c,r,u)}else o.liveCollection.reset();let s=o.liveCollection;if(_1(s,t,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){let a=Mp(),c=s.length===0;if(og(r,a,c)){let u=n+2,l=UE(r,u);if(c){let d=$E(i,u),h=$u(l,d.tView.ssrId),f=rg(r,d,void 0,{dehydratedView:h});ig(l,f,0,qu(d,h))}else s1(l,0)}}}finally{dt(e)}}function UE(t,e){return t[e]}function w1(t,e){return qs(t,e)}function E1(t,e){return o1(t,e)}function $E(t,e){return bp(t,e)}function I1(t,e,n,r,i,o){let s=e.consts,a=xu(s,i),c=dl(e,t,2,r,a);return MD(e,n,c,xu(s,o)),c.attrs!==null&&lp(c,c.attrs,!1),c.mergedAttrs!==null&&lp(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function $(t,e,n,r){let i=Ce(),o=dr(),s=Ln+t,a=i[nt],c=o.firstCreatePass?I1(s,o,i,e,n,r):o.data[s],u=D1(o,i,c,a,e,t);i[s]=u;let l=Tp(c);return Zs(c,!0),cD(a,u,c),(c.flags&32)!==32&&Pp()&&Hp(o,i,u,c),gR()===0&&Yr(u,i),mR(),l&&(TD(o,i,c),CD(o,c,i)),r!==null&&bD(i,c),$}function ee(){let t=Qt();CI()?IR():(t=t.parent,Zs(t,!1));let e=t;_R(e)&&wR(),yR();let n=dr();return n.firstCreatePass&&(Op(n,t),pI(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&NR(e)&&LE(n,e,Ce(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&OR(e)&&LE(n,e,Ce(),e.stylesWithoutHost,!1),ee}function de(t,e,n,r){return $(t,e,n,r),ee(),de}var D1=(t,e,n,r,i,o)=>(Np(!0),nD(r,i,MR()));var Wu="en-US";var C1=Wu;function T1(t){typeof t=="string"&&(C1=t.toLowerCase().replace(/_/g,"-"))}function go(t){return!!t&&typeof t.then=="function"}function GD(t){return!!t&&typeof t.subscribe=="function"}function ra(t,e,n,r){let i=Ce(),o=dr(),s=Qt();return A1(o,i,i[nt],s,t,e,r),ra}function b1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[ks],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function A1(t,e,n,r,i,o,s){let a=Tp(r),u=t.firstCreatePass&&xN(t),l=e[Tt],d=MN(e),h=!0;if(r.type&3||s){let _=Kt(r,e),m=s?s(_):_,E=d.length,R=s?P=>s(dn(P[r.index])):r.index,T=null;if(!s&&a&&(T=b1(t,e,i,r.index)),T!==null){let P=T.__ngLastListenerFn__||T;P.__ngNextListenerFn__=o,T.__ngLastListenerFn__=o,h=!1}else{o=HE(r,e,l,o,!1);let P=n.listen(m,i,o);d.push(o,P),u&&u.push(i,R,E,E+1)}}else o=HE(r,e,l,o,!1);let f=r.outputs,v;if(h&&f!==null&&(v=f[i])){let _=v.length;if(_)for(let m=0;m<_;m+=2){let E=v[m],R=v[m+1],B=e[E][R].subscribe(o),z=d.length;d.push(o,B),u&&u.push(i,r.index,z,-(z+1))}}}function qE(t,e,n,r){try{return cn(6,e,n),n(r)!==!1}catch(i){return OD(t,i),!1}finally{cn(7,e,n)}}function HE(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?lr(t.index,e):e;Xp(a);let c=qE(e,n,r,s),u=o.__ngNextListenerFn__;for(;u;)c=qE(e,n,u,s)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function sg(t,e,n){return WD(t,"",e,"",n),sg}function WD(t,e,n,r,i){let o=Ce(),s=$D(o,e,n,r);if(s!==Js){let a=dr(),c=RI();SD(a,c,o,t,s,o[nt],i,!1)}return WD}var ag=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=x1;let t=e;return t})(),S1=ag,M1=class extends S1{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=rg(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new Zr(i)}};function x1(){return R1(Qt(),Ce())}function R1(t,e){return t.type&4?new M1(e,t,ul(t,e)):null}function Ye(t,e=""){let n=Ce(),r=dr(),i=t+Ln,o=r.firstCreatePass?dl(r,i,1,e,null):r.data[i],s=P1(r,n,o,e,t);n[i]=s,Pp()&&Hp(r,n,s,o),Zs(o,!1)}var P1=(t,e,n,r,i)=>(Np(!0),wP(e[nt],r));function ia(t){return KD("",t,""),ia}function KD(t,e,n){let r=Ce(),i=$D(r,t,e,n);return i!==Js&&RN(r,el(),i),KD}var N1=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=KI(!1,r.type),o=i.length>0?fl([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=O({token:e,providedIn:"environment",factory:()=>new e(D(pt))});let t=e;return t})();function QD(t){ta("NgStandalone"),t.getStandaloneInjector=e=>e.get(N1).getOrCreateStandaloneInjector(t)}var wu=null;function O1(t){wu!==null&&(t.defaultEncapsulation!==wu.defaultEncapsulation||t.preserveWhitespaces!==wu.preserveWhitespaces)||(wu=t)}var jn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},YD=new jn("17.1.3"),pl=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),_p=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},gl=(()=>{let e=class e{compileModuleSync(r){return new zu(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=uI(r),s=JI(o.declarations).reduce((a,c)=>{let u=cr(c);return u&&a.push(new ho(u)),a},[]);return new _p(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),k1=new M("");var cg=new M(""),oa=new M(""),ml=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,ug||(F1(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ne.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(D(ne),D(yl),D(oa))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),yl=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return ug?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function F1(t){ug=t}var ug,vl=new M(""),ZD=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=C(vl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(go(s))r.push(s);else if(GD(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_l=new M("");function V1(t,e,n){let r=new zu(n);return Promise.resolve(r)}function L1(){Fw(()=>{throw new L(600,!1)})}function j1(t){return t.isBoundToModule}function B1(t,e,n){try{let r=n();return go(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function XD(t,e){return Array.isArray(e)?e.reduce(XD,t):N(N({},t),e)}var ri=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=C(yD),this.afterRenderEffectManager=C(tg),this.componentTypes=[],this.components=[],this.isStable=C(ti).hasPendingTasks.pipe(j(r=>!r)),this._injector=C(pt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Lu;if(!this._injector.get(ZD).done){let f=!o&&cI(r),v=!1;throw new L(405,v)}let a;o?a=r:a=this._injector.get(cl).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=j1(a)?void 0:this._injector.get(ur),u=i||a.selector,l=a.create(Yt.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(cg,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Tu(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new L(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let r=0;do{if(r===kD)throw new L(103,!1);let i=r===0;for(let{_lView:o,notifyErrorHandler:s}of this._views)!i&&!GE(o)||this.detectChangesInView(o,s,i);this.afterRenderEffectManager.execute(),r++}while(this._views.some(({_lView:i})=>GE(i)))}detectChangesInView(r,i,o){let s;o?(s=0,r[U]|=1024):r[U]&64?s=0:s=1,FD(r,i,s)}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Tu(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(_l,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Tu(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new L(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Tu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function zE(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}function GE(t){return Sp(t)}var U1=(()=>{let e=class e{constructor(){this.zone=C(ne),this.applicationRef=C(ri)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function $1(t){return[{provide:ne,useFactory:t},{provide:lo,multi:!0,useFactory:()=>{let e=C(U1,{optional:!0});return()=>e.initialize()}},{provide:lo,multi:!0,useFactory:()=>{let e=C(z1);return()=>{e.initialize()}}},{provide:yD,useFactory:q1}]}function q1(){let t=C(ne),e=C(hn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function H1(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var z1=(()=>{let e=class e{constructor(){this.subscription=new xe,this.initialized=!1,this.zone=C(ne),this.pendingTasks=C(ti)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ne.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ne.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function G1(){return typeof $localize<"u"&&$localize.locale||Wu}var lg=new M("",{providedIn:"root",factory:()=>C(lg,Z.Optional|Z.SkipSelf)||G1()});var JD=new M(""),e0=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=zN(i?.ngZone,H1({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{let s=g1(r.moduleType,this.injector,$1(()=>o)),a=s.injector.get(hn,null);return o.runOutsideAngular(()=>{let c=o.onError.subscribe({next:u=>{a.handleError(u)}});s.onDestroy(()=>{Tu(this._modules,s),c.unsubscribe()})}),B1(a,o,()=>{let c=s.injector.get(ZD);return c.runInitializers(),c.donePromise.then(()=>{let u=s.injector.get(lg,Wu);return T1(u||Wu),this._moduleDoBootstrap(s),s})})})}bootstrapModule(r,i=[]){let o=XD({},i);return V1(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(r){let i=r.injector.get(ri);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new L(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new L(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(JD,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(D(Yt))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Rs=null,t0=new M("");function W1(t){if(Rs&&!Rs.get(t0,!1))throw new L(400,!1);L1(),Rs=t;let e=t.get(e0);return Y1(t),e}function dg(t,e,n=[]){let r=`Platform: ${e}`,i=new M(r);return(o=[])=>{let s=n0();if(!s||s.injector.get(t0,!1)){let a=[...n,...o,{provide:i,useValue:!0}];t?t(a):W1(K1(a,r))}return Q1(i)}}function K1(t=[],e){return Yt.create({name:e,providers:[{provide:il,useValue:"platform"},{provide:JD,useValue:new Set([()=>Rs=null])},...t]})}function Q1(t){let e=n0();if(!e)throw new L(401,!1);return e}function n0(){return Rs?.get(e0)??null}function Y1(t){t.get(Bp,null)?.forEach(n=>n())}function hg(){return!1}var r0=dg(null,"core",[]),i0=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(D(ri))},e.\u0275mod=be({type:e}),e.\u0275inj=Te({});let t=e;return t})();function o0(t){let e=cr(t);if(!e)return null;let n=new ho(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var l0=null;function ii(){return l0}function d0(t){l0??=t}var wl=class{},ot=new M(""),mg=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(J1),providedIn:"platform"});let t=e;return t})(),h0=new M(""),J1=(()=>{let e=class e extends mg{constructor(){super(),this._doc=C(ot),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ii().getBaseHref(this._doc)}onPopState(r){let i=ii().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=ii().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function yg(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function s0(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function $n(t){return t&&t[0]!=="?"?"?"+t:t}var oi=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(vg),providedIn:"root"});let t=e;return t})(),f0=new M(""),vg=(()=>{let e=class e extends oi{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??C(ot).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return yg(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+$n(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+$n(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+$n(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(D(mg),D(f0,8))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),p0=(()=>{let e=class e extends oi{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=yg(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+$n(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+$n(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(D(mg),D(f0,8))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),yo=(()=>{let e=class e{constructor(r){this._subject=new et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=nO(s0(a0(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+$n(i))}normalize(r){return e.stripTrailingSlash(tO(this._basePath,a0(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+$n(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+$n(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=$n,e.joinWithSlash=yg,e.stripTrailingSlash=s0,e.\u0275fac=function(i){return new(i||e)(D(oi))},e.\u0275prov=O({token:e,factory:()=>eO(),providedIn:"root"});let t=e;return t})();function eO(){return new yo(D(oi))}function tO(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function a0(t){return t.replace(/\/index.html$/,"")}function nO(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function El(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var fg=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},g0=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new fg(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let c=i.get(s);i.move(c,a),c0(c,o)}});for(let o=0,s=i.length;o<s;o++){let c=i.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);c0(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(mn(na),mn(ag),mn(Qp))},e.\u0275dir=Xr({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function c0(t,e){t.context.$implicit=e.item}var m0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=be({type:e}),e.\u0275inj=Te({});let t=e;return t})(),_g="browser",rO="server";function iO(t){return t===_g}function si(t){return t===rO}var y0=(()=>{let e=class e{};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>iO(C(rt))?new pg(C(ot),window):new gg});let t=e;return t})(),pg=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=oO(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function oO(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var gg=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},mo=class{};var aa=class{},Dl=class{},ai=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Eg=class{encodeKey(e){return _0(e)}encodeValue(e){return _0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function cO(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var uO=/%(\d[a-f0-9])/gi,lO={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function _0(t){return encodeURIComponent(t).replace(uO,(e,n)=>lO[n]??e)}function Il(t){return`${t}`}var hr=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Eg,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=cO(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Il):[Il(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Il(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Il(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Ig=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function dO(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function w0(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function E0(t){return typeof Blob<"u"&&t instanceof Blob}function I0(t){return typeof FormData<"u"&&t instanceof FormData}function hO(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var sa=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(dO(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new ai,this.context??=new Ig,!this.params)this.params=new hr,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:w0(this.body)||E0(this.body)||I0(this.body)||hO(this.body)||typeof this.body=="string"?this.body:this.body instanceof hr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||I0(this.body)?null:E0(this.body)?this.body.type||null:w0(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof hr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.body!==void 0?e.body:this.body,s=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,a=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,c=e.headers||this.headers,u=e.params||this.params,l=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),u)),new t(n,r,o,{params:u,headers:c,context:l,reportProgress:a,responseType:i,withCredentials:s})}},vo=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(vo||{}),ca=class{constructor(e,n=bl.Ok,r="OK"){this.headers=e.headers||new ai,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Dg=class t extends ca{constructor(e={}){super(e),this.type=vo.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Cl=class t extends ca{constructor(e={}){super(e),this.type=vo.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Tl=class extends ca{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},bl=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(bl||{});function wg(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var fO=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof sa)s=r;else{let u;o.headers instanceof ai?u=o.headers:u=new ai(o.headers);let l;o.params&&(o.params instanceof hr?l=o.params:l=new hr({fromObject:o.params})),s=new sa(r,i,o.body!==void 0?o.body:null,{headers:u,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=F(s).pipe(On(u=>this.handler.handle(u)));if(r instanceof sa||o.observe==="events")return a;let c=a.pipe($e(u=>u instanceof Cl));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(j(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(j(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(j(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(j(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new hr().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,wg(o,i))}post(r,i,o={}){return this.request("POST",r,wg(o,i))}put(r,i,o={}){return this.request("PUT",r,wg(o,i))}};e.\u0275fac=function(i){return new(i||e)(D(aa))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function b0(t,e){return e(t)}function pO(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function gO(t,e,n){return(r,i)=>pn(n,()=>e(r,o=>t(o,i)))}var mO=new M(""),Cg=new M(""),yO=new M(""),vO=new M("");function _O(){let t=null;return(e,n)=>{t===null&&(t=(C(mO,{optional:!0})??[]).reduceRight(pO,b0));let r=C(ti),i=r.add();return t(e,n).pipe(or(()=>r.remove(i)))}}var D0=(()=>{let e=class e extends aa{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=C(ti);let o=C(vO,{optional:!0});this.backend=o??r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(Cg),...this.injector.get(yO,[])]));this.chain=o.reduceRight((s,a)=>gO(s,a,this.injector),b0)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(or(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(D(Dl),D(pt))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();var wO=/^\)\]\}',?\n/;function EO(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var C0=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new L(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?se(i.\u0275loadImpl()):F(null)).pipe(_e(()=>new X(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((m,E)=>a.setRequestHeader(m,E.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let m=r.detectContentTypeHeader();m!==null&&a.setRequestHeader("Content-Type",m)}if(r.responseType){let m=r.responseType.toLowerCase();a.responseType=m!=="json"?m:"text"}let c=r.serializeBody(),u=null,l=()=>{if(u!==null)return u;let m=a.statusText||"OK",E=new ai(a.getAllResponseHeaders()),R=EO(a)||r.url;return u=new Dg({headers:E,status:a.status,statusText:m,url:R}),u},d=()=>{let{headers:m,status:E,statusText:R,url:T}=l(),P=null;E!==bl.NoContent&&(P=typeof a.response>"u"?a.responseText:a.response),E===0&&(E=P?bl.Ok:0);let B=E>=200&&E<300;if(r.responseType==="json"&&typeof P=="string"){let z=P;P=P.replace(wO,"");try{P=P!==""?JSON.parse(P):null}catch(pe){P=z,B&&(B=!1,P={error:pe,text:P})}}B?(s.next(new Cl({body:P,headers:m,status:E,statusText:R,url:T||void 0})),s.complete()):s.error(new Tl({error:P,headers:m,status:E,statusText:R,url:T||void 0}))},h=m=>{let{url:E}=l(),R=new Tl({error:m,status:a.status||0,statusText:a.statusText||"Unknown Error",url:E||void 0});s.error(R)},f=!1,v=m=>{f||(s.next(l()),f=!0);let E={type:vo.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(E.total=m.total),r.responseType==="text"&&a.responseText&&(E.partialText=a.responseText),s.next(E)},_=m=>{let E={type:vo.UploadProgress,loaded:m.loaded};m.lengthComputable&&(E.total=m.total),s.next(E)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),r.reportProgress&&(a.addEventListener("progress",v),c!==null&&a.upload&&a.upload.addEventListener("progress",_)),a.send(c),s.next({type:vo.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),r.reportProgress&&(a.removeEventListener("progress",v),c!==null&&a.upload&&a.upload.removeEventListener("progress",_)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(D(mo))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),A0=new M(""),IO="XSRF-TOKEN",DO=new M("",{providedIn:"root",factory:()=>IO}),CO="X-XSRF-TOKEN",TO=new M("",{providedIn:"root",factory:()=>CO}),Al=class{},bO=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=El(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(D(ot),D(rt),D(DO))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function AO(t,e){let n=t.url.toLowerCase();if(!C(A0)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=C(Al).getToken(),i=C(TO);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var S0=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(S0||{});function SO(t,e){return{\u0275kind:t,\u0275providers:e}}function MO(...t){let e=[fO,C0,D0,{provide:aa,useExisting:D0},{provide:Dl,useExisting:C0},{provide:Cg,useValue:AO,multi:!0},{provide:A0,useValue:!0},{provide:Al,useClass:bO}];for(let n of t)e.push(...n.\u0275providers);return rl(e)}var T0=new M("");function xO(){return SO(S0.LegacyInterceptors,[{provide:T0,useFactory:_O},{provide:Cg,useExisting:T0,multi:!0}])}var M0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=be({type:e}),e.\u0275inj=Te({providers:[MO(xO())]});let t=e;return t})();var Ag=class extends wl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Sg=class t extends Ag{static makeCurrent(){d0(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=RO();return n==null?null:PO(n)}resetBaseElement(){ua=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return El(document.cookie,e)}},ua=null;function RO(){return ua=ua||document.querySelector("base"),ua?ua.getAttribute("href"):null}function PO(t){return new URL(t,document.baseURI).pathname}var Mg=class{addToWindow(e){Ct.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new L(5103,!1);return o},Ct.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ct.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=Ct.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Ct.frameworkStabilizers||(Ct.frameworkStabilizers=[]),Ct.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?ii().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},NO=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),xg=new M(""),N0=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new L(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(D(xg),D(ne))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),Sl=class{constructor(e){this._doc=e}},Tg="ng-app-id",O0=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=si(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Tg}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Tg),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Tg,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(D(ot),D(ol),D(Up,8),D(rt))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),bg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Pg=/%COMP%/g,k0="%COMP%",OO=`_nghost-${k0}`,kO=`_ngcontent-${k0}`,FO=!0,VO=new M("",{providedIn:"root",factory:()=>FO});function LO(t){return kO.replace(Pg,t)}function jO(t){return OO.replace(Pg,t)}function F0(t,e){return e.map(n=>n.replace(Pg,t))}var x0=(()=>{let e=class e{constructor(r,i,o,s,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=si(c),this.defaultRenderer=new la(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ln.ShadowDom&&(i=me(N({},i),{encapsulation:ln.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof Ml?o.applyToHost(r):o instanceof da&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case ln.Emulated:s=new Ml(u,l,i,this.appId,d,a,c,h);break;case ln.ShadowDom:return new Rg(u,l,r,i,a,c,this.nonce,h);default:s=new da(u,l,i,d,a,c,h);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(D(N0),D(O0),D(ol),D(VO),D(ot),D(rt),D(ne),D(Up))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),la=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(bg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(R0(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(R0(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new L(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=bg[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=bg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Jr.DashCase|Jr.Important)?e.style.setProperty(n,r,i&Jr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Jr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=ii().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function R0(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Rg=class extends la{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=F0(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},da=class extends la{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?F0(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ml=class extends da{constructor(e,n,r,i,o,s,a,c){let u=i+"-"+r.id;super(e,n,r,o,s,a,c,u),this.contentAttr=LO(u),this.hostAttr=jO(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},BO=(()=>{let e=class e extends Sl{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(D(ot))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),P0=["alt","control","meta","shift"],UO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$O={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},qO=(()=>{let e=class e extends Sl{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ii().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),P0.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=s,i.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let o=UO[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),P0.forEach(a=>{if(a!==o){let c=$O[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(D(ot))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function HO(){Sg.makeCurrent()}function zO(){return new hn}function GO(){return XI(document),document}var WO=[{provide:rt,useValue:_g},{provide:Bp,useValue:HO,multi:!0},{provide:ot,useFactory:GO,deps:[]}],V0=dg(r0,"browser",WO),KO=new M(""),QO=[{provide:oa,useClass:Mg,deps:[]},{provide:cg,useClass:ml,deps:[ne,yl,oa]},{provide:ml,useClass:ml,deps:[ne,yl,oa]}],YO=[{provide:il,useValue:"root"},{provide:hn,useFactory:zO,deps:[]},{provide:xg,useClass:BO,multi:!0,deps:[ot,ne,rt]},{provide:xg,useClass:qO,multi:!0,deps:[ot]},x0,O0,N0,{provide:Hs,useExisting:x0},{provide:mo,useClass:NO,deps:[]},[]],L0=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:ol,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(D(KO,12))},e.\u0275mod=be({type:e}),e.\u0275inj=Te({providers:[...YO,...QO],imports:[m0,i0]});let t=e;return t})();var j0=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(D(ot))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var K="primary",ba=Symbol("RouteTitle"),Vg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Do(t){return new Vg(t)}function XO(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function JO(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!yn(t[n],e[n]))return!1;return!0}function yn(t,e){let n=t?Lg(t):void 0,r=e?Lg(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Q0(t[i],e[i]))return!1;return!0}function Lg(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Q0(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function Y0(t){return t.length>0?t[t.length-1]:null}function mr(t){return mf(t)?t:go(t)?se(Promise.resolve(t)):F(t)}var ek={exact:X0,subset:J0},Z0={exact:tk,subset:nk,ignored:()=>!0};function U0(t,e,n){return ek[n.paths](t.root,e.root,n.matrixParams)&&Z0[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function tk(t,e){return yn(t,e)}function X0(t,e,n){if(!ui(t.segments,e.segments)||!Pl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!X0(t.children[r],e.children[r],n))return!1;return!0}function nk(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Q0(t[n],e[n]))}function J0(t,e,n){return eC(t,e,e.segments,n)}function eC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ui(i,n)||e.hasChildren()||!Pl(i,n,r))}else if(t.segments.length===n.length){if(!ui(t.segments,n)||!Pl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!J0(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ui(t.segments,i)||!Pl(t.segments,i,r)||!t.children[K]?!1:eC(t.children[K],e,o,r)}}function Pl(t,e,n){return e.every((r,i)=>Z0[n](t[i].parameters,r.parameters))}var fr=class{constructor(e=new ce([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Do(this.queryParams),this._queryParamMap}toString(){return ok.serialize(this)}},ce=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nl(this)}},ci=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Do(this.parameters),this._parameterMap}toString(){return nC(this)}};function rk(t,e){return ui(t,e)&&t.every((n,r)=>yn(n.parameters,e[r].parameters))}function ui(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function ik(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===K&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==K&&(n=n.concat(e(i,r)))}),n}var Aa=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>new va,providedIn:"root"});let t=e;return t})(),va=class{parse(e){let n=new Bg(e);return new fr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ha(e.root,!0)}`,r=ck(e.queryParams),i=typeof e.fragment=="string"?`#${sk(e.fragment)}`:"";return`${n}${r}${i}`}},ok=new va;function Nl(t){return t.segments.map(e=>nC(e)).join("/")}function ha(t,e){if(!t.hasChildren())return Nl(t);if(e){let n=t.children[K]?ha(t.children[K],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==K&&r.push(`${i}:${ha(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=ik(t,(r,i)=>i===K?[ha(t.children[K],!1)]:[`${i}:${ha(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[K]!=null?`${Nl(t)}/${n[0]}`:`${Nl(t)}/(${n.join("//")})`}}function tC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xl(t){return tC(t).replace(/%3B/gi,";")}function sk(t){return encodeURI(t)}function jg(t){return tC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ol(t){return decodeURIComponent(t)}function $0(t){return Ol(t.replace(/\+/g,"%20"))}function nC(t){return`${jg(t.path)}${ak(t.parameters)}`}function ak(t){return Object.entries(t).map(([e,n])=>`;${jg(e)}=${jg(n)}`).join("")}function ck(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${xl(n)}=${xl(i)}`).join("&"):`${xl(n)}=${xl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var uk=/^[^\/()?;#]+/;function Ng(t){let e=t.match(uk);return e?e[0]:""}var lk=/^[^\/()?;=#]+/;function dk(t){let e=t.match(lk);return e?e[0]:""}var hk=/^[^=?&#]+/;function fk(t){let e=t.match(hk);return e?e[0]:""}var pk=/^[^&#]+/;function gk(t){let e=t.match(pk);return e?e[0]:""}var Bg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ce([],{}):new ce([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[K]=new ce(e,n)),r}parseSegment(){let e=Ng(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new L(4009,!1);return this.capture(e),new ci(Ol(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=dk(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Ng(this.remaining);i&&(r=i,this.capture(r))}e[Ol(n)]=Ol(r)}parseQueryParam(e){let n=fk(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=gk(this.remaining);s&&(r=s,this.capture(r))}let i=$0(n),o=$0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ng(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new L(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=K);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[K]:new ce([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new L(4011,!1)}};function rC(t){return t.segments.length>0?new ce([],{[K]:t}):t}function iC(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=iC(i);if(r===K&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ce(t.segments,e);return mk(n)}function mk(t){if(t.numberOfChildren===1&&t.children[K]){let e=t.children[K];return new ce(t.segments.concat(e.segments),e.children)}return t}function Co(t){return t instanceof fr}function yk(t,e,n=null,r=null){let i=oC(t);return sC(i,e,n,r)}function oC(t){let e;function n(o){let s={};for(let c of o.children){let u=n(c);s[c.outlet]=u}let a=new ce(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=rC(r);return e??i}function sC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Og(i,i,i,n,r);let o=vk(e);if(o.toRoot())return Og(i,i,new ce([],{}),n,r);let s=_k(o,i,t),a=s.processChildren?ga(s.segmentGroup,s.index,o.commands):cC(s.segmentGroup,s.index,o.commands);return Og(i,s.segmentGroup,a,n,r)}function kl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function _a(t){return typeof t=="object"&&t!=null&&t.outlets}function Og(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let s;t===e?s=n:s=aC(t,e,n);let a=rC(iC(s));return new fr(a,o,i)}function aC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=aC(o,e,n)}),new ce(t.segments,r)}var Fl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&kl(r[0]))throw new L(4003,!1);let i=r.find(_a);if(i&&i!==Y0(r))throw new L(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function vk(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Fl(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Fl(n,e,r)}var Eo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function _k(t,e,n){if(t.isAbsolute)return new Eo(e,!0,0);if(!n)return new Eo(e,!1,NaN);if(n.parent===null)return new Eo(n,!0,0);let r=kl(t.commands[0])?0:1,i=n.segments.length-1+r;return wk(n,i,t.numberOfDoubleDots)}function wk(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new L(4005,!1);i=r.segments.length}return new Eo(r,!1,i-o)}function Ek(t){return _a(t[0])?t[0].outlets:{[K]:t}}function cC(t,e,n){if(t??=new ce([],{}),t.segments.length===0&&t.hasChildren())return ga(t,e,n);let r=Ik(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ce(t.segments.slice(0,r.pathIndex),{});return o.children[K]=new ce(t.segments.slice(r.pathIndex),t.children),ga(o,0,i)}else return r.match&&i.length===0?new ce(t.segments,{}):r.match&&!t.hasChildren()?Ug(t,e,n):r.match?ga(t,0,i):Ug(t,e,n)}function ga(t,e,n){if(n.length===0)return new ce(t.segments,{});{let r=Ek(n),i={};if(Object.keys(r).some(o=>o!==K)&&t.children[K]&&t.numberOfChildren===1&&t.children[K].segments.length===0){let o=ga(t.children[K],e,n);return new ce(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=cC(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ce(t.segments,i)}}function Ik(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(_a(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!H0(c,u,s))return o;r+=2}else{if(!H0(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ug(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(_a(o)){let c=Dk(o.outlets);return new ce(r,c)}if(i===0&&kl(n[0])){let c=t.segments[e];r.push(new ci(c.path,q0(n[0]))),i++;continue}let s=_a(o)?o.outlets[K]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&kl(a)?(r.push(new ci(s,q0(a))),i+=2):(r.push(new ci(s,{})),i++)}return new ce(r,{})}function Dk(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Ug(new ce([],{}),0,r))}),e}function q0(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function H0(t,e,n){return t==n.path&&yn(e,n.parameters)}var ma="imperative",He=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(He||{}),Ft=class{constructor(e,n){this.id=e,this.url=n}},To=class extends Ft{constructor(e,n,r="imperative",i=null){super(e,n),this.type=He.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},qn=class extends Ft{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=He.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},kt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(kt||{}),Vl=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Vl||{}),pr=class extends Ft{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=He.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},gr=class extends Ft{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=He.NavigationSkipped}},wa=class extends Ft{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=He.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ll=class extends Ft{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=He.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$g=class extends Ft{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=He.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qg=class extends Ft{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=He.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Hg=class extends Ft{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=He.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zg=class extends Ft{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=He.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gg=class{constructor(e){this.route=e,this.type=He.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Wg=class{constructor(e){this.route=e,this.type=He.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Kg=class{constructor(e){this.snapshot=e,this.type=He.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qg=class{constructor(e){this.snapshot=e,this.type=He.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yg=class{constructor(e){this.snapshot=e,this.type=He.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zg=class{constructor(e){this.snapshot=e,this.type=He.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jl=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=He.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ea=class{},Ia=class{constructor(e){this.url=e}};var Xg=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Sa,this.attachRef=null}},Sa=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Xg,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Bl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Jg(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Jg(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=em(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return em(e,this._root).map(n=>n.value)}};function Jg(t,e){if(t===e.value)return e;for(let n of e.children){let r=Jg(t,n);if(r)return r}return null}function em(t,e){if(t===e.value)return[e];for(let n of e.children){let r=em(t,n);if(r.length)return r.unshift(e),r}return[]}var bt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function wo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ul=class extends Bl{constructor(e,n){super(e),this.snapshot=n,lm(this,e)}toString(){return this.snapshot.toString()}};function uC(t){let e=Ck(t),n=new Qe([new ci("",{})]),r=new Qe({}),i=new Qe({}),o=new Qe({}),s=new Qe(""),a=new bo(n,r,o,s,i,K,t,e.root);return a.snapshot=e.root,new Ul(new bt(a,[]),e)}function Ck(t){let e={},n={},r={},i="",o=new Da([],e,r,i,n,K,t,null,{});return new $l("",new bt(o,[]))}var bo=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(j(u=>u[ba]))??F(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(j(e=>Do(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(j(e=>Do(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function um(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:N(N({},e.params),t.params),data:N(N({},e.data),t.data),resolve:N(N(N(N({},t.data),e.data),i?.data),t._resolvedData)}:r={params:N({},t.params),data:N({},t.data),resolve:N(N({},t.data),t._resolvedData??{})},i&&dC(i)&&(r.resolve[ba]=i.title),r}var Da=class{get title(){return this.data?.[ba]}constructor(e,n,r,i,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Do(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Do(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},$l=class extends Bl{constructor(e,n){super(n),this.url=e,lm(this,n)}toString(){return lC(this._root)}};function lm(t,e){e.value._routerState=t,e.children.forEach(n=>lm(t,n))}function lC(t){let e=t.children.length>0?` { ${t.children.map(lC).join(", ")} } `:"";return`${t.value}${e}`}function kg(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,yn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),yn(e.params,n.params)||t.paramsSubject.next(n.params),JO(e.url,n.url)||t.urlSubject.next(n.url),yn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function tm(t,e){let n=yn(t.params,e.params)&&rk(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||tm(t.parent,e.parent))}function dC(t){return typeof t.title=="string"||t.title===null}var Tk=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=K,this.activateEvents=new et,this.deactivateEvents=new et,this.attachEvents=new et,this.detachEvents=new et,this.parentContexts=C(Sa),this.location=C(na),this.changeDetector=C(ea),this.environmentInjector=C(pt),this.inputBinder=C(Wl,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new L(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new L(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new L(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new L(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new nm(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Xr({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ys]});let t=e;return t})(),nm=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===bo?this.route:e===Sa?this.childContexts:this.parent.get(e,n)}},Wl=new M(""),z0=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=Ss([i.queryParams,i.params,i.data]).pipe(_e(([s,a,c],u)=>(c=N(N(N({},s),a),c),u===0?F(c):Promise.resolve(c)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=o0(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function bk(t,e,n){let r=Ca(t,e._root,n?n._root:void 0);return new Ul(r,e)}function Ca(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Ak(t,e,n);return new bt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ca(t,a)),s}}let r=Sk(e.value),i=e.children.map(o=>Ca(t,o));return new bt(r,i)}}function Ak(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ca(t,r,i);return Ca(t,r)})}function Sk(t){return new bo(new Qe(t.url),new Qe(t.params),new Qe(t.queryParams),new Qe(t.fragment),new Qe(t.data),t.outlet,t.component,t)}var hC="ngNavigationCancelingError";function fC(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Co(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=pC(!1,kt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function pC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[hC]=!0,n.cancellationCode=e,n}function Mk(t){return gC(t)&&Co(t.url)}function gC(t){return!!t&&t[hC]}var xk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=fn({type:e,selectors:[["ng-component"]],standalone:!0,features:[QD],decls:1,vars:0,template:function(i,o){i&1&&de(0,"router-outlet")},dependencies:[Tk],encapsulation:2});let t=e;return t})();function Rk(t,e){return t.providers&&!t._injector&&(t._injector=fl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function dm(t){let e=t.children&&t.children.map(dm),n=e?me(N({},t),{children:e}):N({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==K&&(n.component=xk),n}function vn(t){return t.outlet||K}function Pk(t,e){let n=t.filter(r=>vn(r)===e);return n.push(...t.filter(r=>vn(r)!==e)),n}function Ma(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Nk=(t,e,n,r)=>j(i=>(new rm(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),rm=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),kg(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=wo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=wo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=wo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=wo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Zg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Qg(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(kg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),kg(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Ma(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},ql=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Io=class{constructor(e,n){this.component=e,this.route=n}};function Ok(t,e,n){let r=t._root,i=e?e._root:null;return fa(r,i,n,[r.value])}function kk(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function So(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!YE(t)?t:e.get(t):r}function fa(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=wo(e);return t.children.forEach(s=>{Fk(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ya(a,n.getContext(s),i)),i}function Fk(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Vk(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new ql(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?fa(t,e,a?a.children:null,r,i):fa(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Io(a.outlet.component,s))}else s&&ya(e,a,i),i.canActivateChecks.push(new ql(r)),o.component?fa(t,null,a?a.children:null,r,i):fa(t,null,n,r,i);return i}function Vk(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ui(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ui(t.url,e.url)||!yn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tm(t,e)||!yn(t.queryParams,e.queryParams);case"paramsChange":default:return!tm(t,e)}}function ya(t,e,n){let r=wo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ya(s,e.children.getContext(o),n):ya(s,null,n):ya(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Io(e.outlet.component,i)):n.canDeactivateChecks.push(new Io(null,i)):n.canDeactivateChecks.push(new Io(null,i))}function xa(t){return typeof t=="function"}function Lk(t){return typeof t=="boolean"}function jk(t){return t&&xa(t.canLoad)}function Bk(t){return t&&xa(t.canActivate)}function Uk(t){return t&&xa(t.canActivateChild)}function $k(t){return t&&xa(t.canDeactivate)}function qk(t){return t&&xa(t.canMatch)}function mC(t){return t instanceof Nn||t?.name==="EmptyError"}var Rl=Symbol("INITIAL_VALUE");function Ao(){return _e(t=>Ss(t.map(e=>e.pipe(kn(1),Hr(Rl)))).pipe(j(e=>{for(let n of e)if(n!==!0){if(n===Rl)return Rl;if(n===!1||n instanceof fr)return n}return!0}),$e(e=>e!==Rl),kn(1)))}function Hk(t,e){return ke(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?F(me(N({},n),{guardsResult:!0})):zk(s,r,i,t).pipe(ke(a=>a&&Lk(a)?Gk(r,o,t,e):F(a)),j(a=>me(N({},n),{guardsResult:a})))})}function zk(t,e,n,r){return se(t).pipe(ke(i=>Zk(i.component,i.route,n,e,r)),Pt(i=>i!==!0,!0))}function Gk(t,e,n,r){return se(e).pipe(On(i=>eo(Kk(i.route.parent,r),Wk(i.route,r),Yk(t,i.path,n),Qk(t,i.route,n))),Pt(i=>i!==!0,!0))}function Wk(t,e){return t!==null&&e&&e(new Yg(t)),F(!0)}function Kk(t,e){return t!==null&&e&&e(new Kg(t)),F(!0)}function Qk(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return F(!0);let i=r.map(o=>gu(()=>{let s=Ma(e)??n,a=So(o,s),c=Bk(a)?a.canActivate(e,t):pn(s,()=>a(e,t));return mr(c).pipe(Pt())}));return F(i).pipe(Ao())}function Yk(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>kk(s)).filter(s=>s!==null).map(s=>gu(()=>{let a=s.guards.map(c=>{let u=Ma(s.node)??n,l=So(c,u),d=Uk(l)?l.canActivateChild(r,t):pn(u,()=>l(r,t));return mr(d).pipe(Pt())});return F(a).pipe(Ao())}));return F(o).pipe(Ao())}function Zk(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return F(!0);let s=o.map(a=>{let c=Ma(e)??i,u=So(a,c),l=$k(u)?u.canDeactivate(t,e,n,r):pn(c,()=>u(t,e,n,r));return mr(l).pipe(Pt())});return F(s).pipe(Ao())}function Xk(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return F(!0);let o=i.map(s=>{let a=So(s,t),c=jk(a)?a.canLoad(e,n):pn(t,()=>a(e,n));return mr(c)});return F(o).pipe(Ao(),yC(r))}function yC(t){return lf(Re(e=>{if(Co(e))throw fC(t,e)}),j(e=>e===!0))}function Jk(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return F(!0);let o=i.map(s=>{let a=So(s,t),c=qk(a)?a.canMatch(e,n):pn(t,()=>a(e,n));return mr(c)});return F(o).pipe(Ao(),yC(r))}var Ta=class{constructor(e){this.segmentGroup=e||null}},Hl=class extends Error{constructor(e){super(),this.urlTree=e}};function _o(t){return Ji(new Ta(t))}function eF(t){return Ji(new L(4e3,!1))}function tF(t){return Ji(pC(!1,kt.GuardRejected))}var im=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return F(r);if(i.numberOfChildren>1||!i.children[K])return eF(e.redirectTo);i=i.children[K]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Hl(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new fr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new ce(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new L(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},om={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nF(t,e,n,r,i){let o=hm(t,e,n);return o.matched?(r=Rk(e,r),Jk(r,e,n,i).pipe(j(s=>s===!0?o:N({},om)))):F(o)}function hm(t,e,n){if(e.path==="**")return rF(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?N({},om):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||XO)(n,t,e);if(!i)return N({},om);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?N(N({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function rF(t){return{matched:!0,parameters:t.length>0?Y0(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function G0(t,e,n,r){return n.length>0&&sF(t,n,r)?{segmentGroup:new ce(e,oF(r,new ce(n,t.children))),slicedSegments:[]}:n.length===0&&aF(t,n,r)?{segmentGroup:new ce(t.segments,iF(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ce(t.segments,t.children),slicedSegments:n}}function iF(t,e,n,r){let i={};for(let o of n)if(Kl(t,e,o)&&!r[vn(o)]){let s=new ce([],{});i[vn(o)]=s}return N(N({},r),i)}function oF(t,e){let n={};n[K]=e;for(let r of t)if(r.path===""&&vn(r)!==K){let i=new ce([],{});n[vn(r)]=i}return n}function sF(t,e,n){return n.some(r=>Kl(t,e,r)&&vn(r)!==K)}function aF(t,e,n){return n.some(r=>Kl(t,e,r))}function Kl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function cF(t,e,n,r){return vn(t)!==r&&(r===K||!Kl(e,n,t))?!1:hm(e,t,n).matched}function uF(t,e,n){return e.length===0&&!t.children[n]}var sm=class{};function lF(t,e,n,r,i,o,s="emptyOnly"){return new am(t,e,n,r,i,s,o).recognize()}var dF=31,am=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new im(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new L(4002,`'${e.segmentGroup}'`)}recognize(){let e=G0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(j(n=>{let r=new Da([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,{},K,this.rootComponentType,null,{}),i=new bt(r,n),o=new $l("",i),s=yk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,K).pipe(rr(r=>{if(r instanceof Hl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ta?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=um(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(j(o=>o instanceof bt?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return se(i).pipe(On(o=>{let s=r.children[o],a=Pk(n,o);return this.processSegmentGroup(e,a,s,o)}),qr((o,s)=>(o.push(...s),o)),ir(null),wf(),ke(o=>{if(o===null)return _o(r);let s=vC(o);return hF(s),F(s)}))}processSegment(e,n,r,i,o,s){return se(n).pipe(On(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(rr(c=>{if(c instanceof Ta)return F(null);throw c}))),Pt(a=>!!a),rr(a=>{if(mC(a))return uF(r,i,o)?F(new sm):_o(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return cF(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):_o(i):_o(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=hm(n,i,o);if(!a)return _o(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>dF&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe(ke(h=>this.processSegment(e,r,n,h.concat(l),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=nF(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(_e(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(_e(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new Da(l,h,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,pF(r),vn(r),r.component??r._loadedComponent??null,r,gF(r)),{segmentGroup:v,slicedSegments:_}=G0(n,l,d,c);if(_.length===0&&v.hasChildren())return this.processChildren(u,c,v).pipe(j(E=>E===null?null:new bt(f,E)));if(c.length===0&&_.length===0)return F(new bt(f,[]));let m=vn(r)===o;return this.processSegment(u,c,v,_,m?K:o,!0).pipe(j(E=>new bt(f,E instanceof bt?[E]:[])))}))):_o(n)))}getChildConfig(e,n,r){return n.children?F({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?F({routes:n._loadedRoutes,injector:n._loadedInjector}):Xk(e,n,r,this.urlSerializer).pipe(ke(i=>i?this.configLoader.loadChildren(e,n).pipe(Re(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):tF(n))):F({routes:[],injector:e})}};function hF(t){t.sort((e,n)=>e.value.outlet===K?-1:n.value.outlet===K?1:e.value.outlet.localeCompare(n.value.outlet))}function fF(t){let e=t.value.routeConfig;return e&&e.path===""}function vC(t){let e=[],n=new Set;for(let r of t){if(!fF(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=vC(r.children);e.push(new bt(r.value,i))}return e.filter(r=>!n.has(r))}function pF(t){return t.data||{}}function gF(t){return t.resolve||{}}function mF(t,e,n,r,i,o){return ke(s=>lF(t,e,n,r,s.extractedUrl,i,o).pipe(j(({state:a,tree:c})=>me(N({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function yF(t,e){return ke(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return F(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of _C(c))s.add(u);let a=0;return se(s).pipe(On(c=>o.has(c)?vF(c,r,t,e):(c.data=um(c,c.parent,t).resolve,F(void 0))),Re(()=>a++),to(1),ke(c=>a===s.size?F(n):_t))})}function _C(t){let e=t.children.map(n=>_C(n)).flat();return[t,...e]}function vF(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!dC(i)&&(o[ba]=i.title),_F(o,t,e,r).pipe(j(s=>(t._resolvedData=s,t.data=um(t,t.parent,n).resolve,null)))}function _F(t,e,n,r){let i=Lg(t);if(i.length===0)return F({});let o={};return se(i).pipe(ke(s=>wF(t[s],e,n,r).pipe(Pt(),Re(a=>{o[s]=a}))),to(1),vf(o),rr(s=>mC(s)?_t:Ji(s)))}function wF(t,e,n,r){let i=Ma(e)??r,o=So(t,i),s=o.resolve?o.resolve(e,n):pn(i,()=>o(e,n));return mr(s)}function Fg(t){return _e(e=>{let n=t(e);return n?se(n).pipe(j(()=>e)):F(e)})}var wC=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===K);return i}getResolvedTitleForRoute(r){return r.data[ba]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(EF),providedIn:"root"});let t=e;return t})(),EF=(()=>{let e=class e extends wC{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(D(j0))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ra=new M("",{providedIn:"root",factory:()=>({})}),zl=new M(""),fm=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=C(gl)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return F(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=mr(r.loadComponent()).pipe(j(EC),Re(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),or(()=>{this.componentLoaders.delete(r)})),o=new Qi(i,()=>new Ue).pipe(Ki());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return F({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=IF(i,this.compiler,r,this.onLoadEndListener).pipe(or(()=>{this.childrenLoaders.delete(i)})),a=new Qi(s,()=>new Ue).pipe(Ki());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function IF(t,e,n,r){return mr(t.loadChildren()).pipe(j(EC),ke(i=>i instanceof zs||Array.isArray(i)?F(i):se(e.compileModuleAsync(i))),j(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(zl,[],{optional:!0,self:!0}).flat()),{routes:s.map(dm),injector:o}}))}function DF(t){return t&&typeof t=="object"&&"default"in t}function EC(t){return DF(t)?t.default:t}var pm=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(CF),providedIn:"root"});let t=e;return t})(),CF=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),IC=new M(""),DC=new M("");function TF(t,e,n){let r=t.get(DC),i=t.get(ot);return t.get(ne).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),bF(t))),{onViewTransitionCreated:c}=r;return c&&pn(t,()=>c({transition:a,from:e,to:n})),s})}function bF(t){return new Promise(e=>{eg(e,{injector:t})})}var gm=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ue,this.transitionAbortSubject=new Ue,this.configLoader=C(fm),this.environmentInjector=C(pt),this.urlSerializer=C(Aa),this.rootContexts=C(Sa),this.location=C(yo),this.inputBindingEnabled=C(Wl,{optional:!0})!==null,this.titleStrategy=C(wC),this.options=C(Ra,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=C(pm),this.createViewTransition=C(IC,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>F(void 0),this.rootComponentType=null;let r=o=>this.events.next(new Gg(o)),i=o=>this.events.next(new Wg(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(me(N(N({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Qe({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ma,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe($e(s=>s.id!==0),j(s=>me(N({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),_e(s=>{this.currentTransition=s;let a=!1,c=!1;return F(s).pipe(Re(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?me(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),_e(u=>{let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new gr(u.id,this.urlSerializer.serialize(u.rawUrl),h,Vl.IgnoredSameUrlNavigation)),u.resolve(null),_t}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return F(u).pipe(_e(h=>{let f=this.transitions?.getValue();return this.events.next(new To(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?_t:Promise.resolve(h)}),mF(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Re(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=me(N({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Ll(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:f,source:v,restoredState:_,extras:m}=u,E=new To(h,this.urlSerializer.serialize(f),v,_);this.events.next(E);let R=uC(this.rootComponentType).snapshot;return this.currentTransition=s=me(N({},u),{targetSnapshot:R,urlAfterRedirects:f,extras:me(N({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,F(s)}else{let h="";return this.events.next(new gr(u.id,this.urlSerializer.serialize(u.extractedUrl),h,Vl.IgnoredByUrlHandlingStrategy)),u.resolve(null),_t}}),Re(u=>{let l=new $g(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),j(u=>(this.currentTransition=s=me(N({},u),{guards:Ok(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),Hk(this.environmentInjector,u=>this.events.next(u)),Re(u=>{if(s.guardsResult=u.guardsResult,Co(u.guardsResult))throw fC(this.urlSerializer,u.guardsResult);let l=new qg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),$e(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",kt.GuardRejected),!1)),Fg(u=>{if(u.guards.canActivateChecks.length)return F(u).pipe(Re(l=>{let d=new Hg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),_e(l=>{let d=!1;return F(l).pipe(yF(this.paramsInheritanceStrategy,this.environmentInjector),Re({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",kt.NoDataFromResolver)}}))}),Re(l=>{let d=new zg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Fg(u=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Re(f=>{d.component=f}),j(()=>{})));for(let f of d.children)h.push(...l(f));return h};return Ss(l(u.targetSnapshot.root)).pipe(ir(null),kn(1))}),Fg(()=>this.afterPreactivation()),_e(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?se(d).pipe(j(()=>s)):F(s)}),j(u=>{let l=bk(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=me(N({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Re(()=>{this.events.next(new Ea)}),Nk(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),kn(1),Re({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new qn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),If(this.transitionAbortSubject.pipe(Re(u=>{throw u}))),or(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",kt.SupersededByNewNavigation),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),rr(u=>{if(c=!0,gC(u))this.events.next(new pr(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),Mk(u)?this.events.next(new Ia(u.url)):s.resolve(!1);else{this.events.next(new wa(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(l)}}return _t}))}))}cancelNavigationTransition(r,i,o){let s=new pr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function AF(t){return t!==ma}var SF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(MF),providedIn:"root"});let t=e;return t})(),cm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},MF=(()=>{let e=class e extends cm{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=nl(e)))(o||e)}})(),e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),CC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(xF),providedIn:"root"});let t=e;return t})(),xF=(()=>{let e=class e extends CC{constructor(){super(...arguments),this.location=C(yo),this.urlSerializer=C(Aa),this.options=C(Ra,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=C(pm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new fr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=uC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof To)this.stateMemento=this.createStateMemento();else if(r instanceof gr)this.rawUrlTree=i.initialUrl;else if(r instanceof Ll){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof Ea?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof pr&&(r.code===kt.GuardRejected||r.code===kt.NoDataFromResolver)?this.restoreHistory(i):r instanceof wa?this.restoreHistory(i,!0):r instanceof qn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=N(N({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=N(N({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=nl(e)))(o||e)}})(),e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pa=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(pa||{});function TC(t,e){t.events.pipe($e(n=>n instanceof qn||n instanceof pr||n instanceof wa||n instanceof gr),j(n=>n instanceof qn||n instanceof gr?pa.COMPLETE:(n instanceof pr?n.code===kt.Redirect||n.code===kt.SupersededByNewNavigation:!1)?pa.REDIRECTING:pa.FAILED),$e(n=>n!==pa.REDIRECTING),kn(1)).subscribe(()=>{e()})}function RF(t){throw t}var PF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},NF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},li=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=C(pl),this.stateManager=C(CC),this.options=C(Ra,{optional:!0})||{},this.pendingTasks=C(ti),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=C(gm),this.urlSerializer=C(Aa),this.location=C(yo),this.urlHandlingStrategy=C(pm),this._events=new Ue,this.errorHandler=this.options.errorHandler||RF,this.navigated=!1,this.routeReuseStrategy=C(SF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=C(zl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!C(Wl,{optional:!0}),this.eventsSubscription=new xe,this.isNgZoneEnabled=C(ne)instanceof ne&&ne.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof pr&&i.code!==kt.Redirect&&i.code!==kt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof qn)this.navigated=!0;else if(i instanceof Ia){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||AF(o.source)};this.scheduleNavigation(a,ma,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}kF(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ma,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let u=N({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(dm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=N(N({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=oC(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return sC(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Co(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,ma,null,i)}navigate(r,i={skipLocationChange:!1}){return OF(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=N({},PF):i===!1?o=N({},NF):o=i,Co(r))return U0(this.currentUrlTree,r,o);let s=this.parseUrl(r);return U0(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((h,f)=>{c=h,u=f});let d=this.pendingTasks.add();return TC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function OF(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new L(4008,!1)}function kF(t){return!(t instanceof Ea)&&!(t instanceof Ia)}var Gl=class{};var FF=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe($e(r=>r instanceof qn),On(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=fl(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return se(o).pipe(nr())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=F(null);let s=o.pipe(ke(a=>a===null?F(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return se([s,a]).pipe(nr())}else return s})}};e.\u0275fac=function(i){return new(i||e)(D(li),D(gl),D(pt),D(Gl),D(fm))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bC=new M(""),VF=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof To?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof qn?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof gr&&r.code===Vl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof jl&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new jl(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){wD()},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function LF(t){return t.routerState.root}function Pa(t,e){return{\u0275kind:t,\u0275providers:e}}function jF(){let t=C(Yt);return e=>{let n=t.get(ri);if(e!==n.components[0])return;let r=t.get(li),i=t.get(AC);t.get(mm)===1&&r.initialNavigation(),t.get(SC,null,Z.Optional)?.setUpPreloading(),t.get(bC,null,Z.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var AC=new M("",{factory:()=>new Ue}),mm=new M("",{providedIn:"root",factory:()=>1});function BF(){return Pa(2,[{provide:mm,useValue:0},{provide:vl,multi:!0,deps:[Yt],useFactory:e=>{let n=e.get(h0,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(li),o=e.get(AC);TC(i,()=>{r(!0)}),e.get(gm).afterPreactivation=()=>(r(!0),o.closed?F(void 0):o),i.initialNavigation()}))}}])}function UF(){return Pa(3,[{provide:vl,multi:!0,useFactory:()=>{let e=C(li);return()=>{e.setUpLocationChangeListener()}}},{provide:mm,useValue:2}])}var SC=new M("");function $F(t){return Pa(0,[{provide:SC,useExisting:FF},{provide:Gl,useExisting:t}])}function qF(){return Pa(8,[z0,{provide:Wl,useExisting:z0}])}function HF(t){let e=[{provide:IC,useValue:TF},{provide:DC,useValue:N({skipNextTransition:!!t?.skipInitialTransition},t)}];return Pa(9,e)}var W0=new M("ROUTER_FORROOT_GUARD"),zF=[yo,{provide:Aa,useClass:va},li,Sa,{provide:bo,useFactory:LF,deps:[li]},fm,[]],ym=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[zF,[],{provide:zl,multi:!0,useValue:r},{provide:W0,useFactory:QF,deps:[[li,new fo,new Vp]]},{provide:Ra,useValue:i||{}},i?.useHash?WF():KF(),GF(),i?.preloadingStrategy?$F(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?YF(i):[],i?.bindToComponentInputs?qF().\u0275providers:[],i?.enableViewTransitions?HF().\u0275providers:[],ZF()]}}static forChild(r){return{ngModule:e,providers:[{provide:zl,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(D(W0,8))},e.\u0275mod=be({type:e}),e.\u0275inj=Te({});let t=e;return t})();function GF(){return{provide:bC,useFactory:()=>{let t=C(y0),e=C(ne),n=C(Ra),r=C(gm),i=C(Aa);return n.scrollOffset&&t.setOffset(n.scrollOffset),new VF(i,r,t,e,n)}}}function WF(){return{provide:oi,useClass:p0}}function KF(){return{provide:oi,useClass:vg}}function QF(t){return"guarded"}function YF(t){return[t.initialNavigation==="disabled"?UF().\u0275providers:[],t.initialNavigation==="enabledBlocking"?BF().\u0275providers:[]]}var K0=new M("");function ZF(){return[{provide:K0,useFactory:jF},{provide:_l,multi:!0,useExisting:K0}]}var XF=[],MC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=be({type:e}),e.\u0275inj=Te({imports:[ym.forRoot(XF),ym]});let t=e;return t})();var xC=(()=>{let e=class e{constructor(r,i){this.elementRef=r,this.renderer=i,this.Colors={Default:"#8c84f3",Green:"#0bb7af",Blue:"#4880d4",Purple:"#845ae7",Red:"#f64e60",Gold:"#ffad2e",Dark:"#473e69"},this.backgroundColor="Default",this.ButtonCornner=""}onMouseEnter(){this.renderer.setStyle(this.elementRef.nativeElement,"opacity","0.7")}onMouseLeave(){this.renderer.setStyle(this.elementRef.nativeElement,"opacity","1")}GetColor(){return this.Colors[this.backgroundColor]}GetRound(){return this.ButtonCornner=="Round"?"100px":"6px"}ngAfterViewInit(){let r=this.elementRef.nativeElement,i={outline:"none",background:this.GetColor(),color:"#fff",border:"none",padding:"7px 15px","border-radius":this.GetRound(),cursor:"pointer","white-space":"nowrap"};Object.keys(i).forEach(o=>{this.renderer.setStyle(r,o,i[o])})}};e.\u0275fac=function(i){return new(i||e)(mn(ei),mn(po))},e.\u0275dir=Xr({type:e,selectors:[["","ButtonStyle",""]],hostBindings:function(i,o){i&1&&ra("mouseenter",function(){return o.onMouseEnter()})("mouseleave",function(){return o.onMouseLeave()})},inputs:{backgroundColor:"backgroundColor",ButtonCornner:"ButtonCornner"}});let t=e;return t})();function eV(t,e){if(t&1&&($(0,"span"),Ye(1),ee()),t&2){let n=e.$implicit;gn(),ia(n)}}var RC=(()=>{let e=class e{constructor(){this.TextTitle="",this.Arr=[]}Get_Str_Char(){let r=this.TextTitle;for(let i=0;i<r.length;i++)this.Arr.push(r[i])}ngOnInit(){this.Get_Str_Char()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=fn({type:e,selectors:[["app-wave-logo-animation"]],inputs:{TextTitle:"TextTitle"},decls:2,vars:1,consts:[[1,"spinner"],[4,"ngFor","ngForOf"]],template:function(i,o){i&1&&($(0,"div",0),Gs(1,eV,2,1,"span",1),ee()),i&2&&(gn(),ni("ngForOf",o.Arr))},dependencies:[g0],styles:[".spinner[_ngcontent-%COMP%]{height:50px;width:max-content;font-size:20px;font-weight:600;font-family:monospace;letter-spacing:6px;color:#f5f5f5;filter:drop-shadow(0 0 10px);display:flex;justify-content:center;align-items:center}.spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_loading6454 1.75s ease infinite}.spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:.25s}.spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){animation-delay:.5s}.spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(4){animation-delay:.75s}.spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(5){animation-delay:1s}.spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(6){animation-delay:1.25s}.spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(7){animation-delay:1.5s}@keyframes _ngcontent-%COMP%_loading6454{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}"]});let t=e;return t})();var PC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=fn({type:e,selectors:[["app-mobile-nav-bar"]],decls:15,vars:0,consts:[[1,"button-container"],[1,"button"],["xmlns","http://www.w3.org/2000/svg","width","1em","height","1em","viewBox","0 0 1024 1024","stroke-width","0","fill","currentColor","stroke","currentColor",1,"icon"],["d","M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 0 0-44.4 0L77.5 505a63.9 63.9 0 0 0-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0 0 18.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"],["xmlns","http://www.w3.org/2000/svg","width","1em","height","1em","aria-hidden","true","viewBox","0 0 24 24","stroke-width","2","fill","none","stroke","currentColor",1,"icon"],["d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z","stroke-linejoin","round","stroke-linecap","round"],["xmlns","http://www.w3.org/2000/svg","width","1em","height","1em","viewBox","0 0 24 24","stroke-width","0","fill","currentColor","stroke","currentColor",1,"icon"],["d","M12 2.5a5.5 5.5 0 0 1 3.096 10.047 9.005 9.005 0 0 1 5.9 8.181.75.75 0 1 1-1.499.044 7.5 7.5 0 0 0-14.993 0 .75.75 0 0 1-1.5-.045 9.005 9.005 0 0 1 5.9-8.18A5.5 5.5 0 0 1 12 2.5ZM8 8a4 4 0 1 0 8 0 4 4 0 0 0-8 0Z"],["xmlns","http://www.w3.org/2000/svg","width","1em","height","1em","stroke-linejoin","round","stroke-linecap","round","viewBox","0 0 24 24","stroke-width","2","fill","none","stroke","currentColor",1,"icon"],["r","1","cy","21","cx","9"],["r","1","cy","21","cx","20"],["d","M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"]],template:function(i,o){i&1&&($(0,"div",0)(1,"button",1),Xs(),$(2,"svg",2),de(3,"path",3),ee()(),tl(),$(4,"button",1),Xs(),$(5,"svg",4),de(6,"path",5),ee()(),tl(),$(7,"button",1),Xs(),$(8,"svg",6),de(9,"path",7),ee()(),tl(),$(10,"button",1),Xs(),$(11,"svg",8),de(12,"circle",9)(13,"circle",10)(14,"path",11),ee()()())},styles:[".button-container[_ngcontent-%COMP%]{display:flex;background-color:#362d5ae0;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);height:60px;align-items:center;justify-content:space-around;border-radius:10px;box-shadow:0 -8px 15px #17171759}.button[_ngcontent-%COMP%]{outline:0!important;border:0!important;width:40px;height:40px;border-radius:50%;background-color:transparent;display:flex;align-items:center;justify-content:center;color:#fff;transition:all ease-in-out .3s;cursor:pointer}.button[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.icon[_ngcontent-%COMP%]{font-size:20px}"]});let t=e;return t})();var NC=(()=>{let e=class e{constructor(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=fn({type:e,selectors:[["app-card-shop-viewr"]],inputs:{ShopData:"ShopData"},decls:50,vars:2,consts:[[1,"card-shop"],[1,"card-shop-head"],[1,"img-shop-logo"],["alt","loading..",3,"src"],[1,"shop-name"],[1,"shop-games"],[1,"games-type"],[1,"card-type"],["src","assets/Play-images/PS3.png","alt",""],["src","assets/Play-images/PS4.png","alt",""],["src","assets/Play-images/PS5.png","alt",""],["src","assets/Play-images/billiard.png","alt",""],["src","assets/Play-images/Ping-Pong.png","alt",""],["src","assets/Play-images/x-box-device.png","alt",""],[1,"games-into-device"],[1,"card-game"],["src","https://image.api.playstation.com/vulcan/ap/rnd/202301/0312/GU1vXFJpbzGYNV6UN3U0Cnnb.png","alt",""],["src","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSB_56jpaMTwqSr2tzZRsVkKHIXwFYqYg152U6cbOAYYA&s","alt",""],["src","https://m.media-amazon.com/images/I/81htlTqEckL._AC_UF1000,1000_QL80_.jpg","alt",""],["src","https://upload.wikimedia.org/wikipedia/en/c/c6/Far_Cry_3_PAL_box_art.jpg","alt",""],["src","https://m.media-amazon.com/images/I/817e-TqBYeL._AC_UF1000,1000_QL80_.jpg","alt",""],["src","https://m.media-amazon.com/images/I/81WkOj-p78L._AC_UF1000,1000_QL80_.jpg","alt",""],["src","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSxUJtB_9UNa_8MaJCP3MLBnYX5HtZaQ4rrUheRh3cDNw&s","alt",""]],template:function(i,o){i&1&&($(0,"div",0)(1,"div",1)(2,"div",2),de(3,"img",3),ee(),$(4,"div",4)(5,"h4"),Ye(6),ee()()(),$(7,"div",5)(8,"div",6)(9,"div",7),de(10,"img",8),ee(),$(11,"div",7),de(12,"img",9),ee(),$(13,"div",7),de(14,"img",10),ee(),$(15,"div",7),de(16,"img",11),ee(),$(17,"div",7),de(18,"img",12),ee(),$(19,"div",7),de(20,"img",13),ee()(),$(21,"div",14)(22,"div",15),de(23,"img",16),$(24,"label"),Ye(25,"Fifa 2023"),ee()(),$(26,"div",15),de(27,"img",17),$(28,"label"),Ye(29,"Assassin's Creed: Legacy"),ee()(),$(30,"div",15),de(31,"img",18),$(32,"label"),Ye(33,"GTA V"),ee()(),$(34,"div",15),de(35,"img",19),$(36,"label"),Ye(37,"FarCry 3"),ee()(),$(38,"div",15),de(39,"img",20),$(40,"label"),Ye(41,"FarCry 4"),ee()(),$(42,"div",15),de(43,"img",21),$(44,"label"),Ye(45,"FarCry 5"),ee()(),$(46,"div",15),de(47,"img",22),$(48,"label"),Ye(49,"FarCry Primal"),ee()()()()()),i&2&&(gn(3),sg("src",o.ShopData.imageLogo,dD),gn(3),ia(o.ShopData.name))},styles:[".card-shop[_ngcontent-%COMP%]{border:1px solid rgba(132,122,223,.3019607843);background:#673ab714;border-radius:8px;flex:1 0 270px;display:flex;flex-direction:column;align-items:center;height:380px;max-width:400px;position:relative;padding:6px;margin:74px 6px}.card-shop[_ngcontent-%COMP%]   .card-shop-head[_ngcontent-%COMP%]{position:absolute;top:-40px;left:0%;transform:translateY(-50%);display:flex;align-items:center;justify-content:center}.card-shop[_ngcontent-%COMP%]   .card-shop-head[_ngcontent-%COMP%]   .img-shop-logo[_ngcontent-%COMP%]{max-width:64px;border-radius:50%;box-shadow:0 13px 16px -4px #0000008c;overflow:hidden;margin:0 12px}.card-shop[_ngcontent-%COMP%]   .card-shop-head[_ngcontent-%COMP%]   .img-shop-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.card-shop[_ngcontent-%COMP%]   .shop-games[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:-webkit-fill-available}.card-shop[_ngcontent-%COMP%]   .shop-games[_ngcontent-%COMP%]   .games-type[_ngcontent-%COMP%]{overflow:auto;display:flex;padding-bottom:12px;min-height:105px}.card-shop[_ngcontent-%COMP%]   .shop-games[_ngcontent-%COMP%]   .games-type[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer}.card-shop[_ngcontent-%COMP%]   .shop-games[_ngcontent-%COMP%]   .games-type[_ngcontent-%COMP%]   .card-type[_ngcontent-%COMP%]{border-radius:6px;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:2px 8px;margin:8px;position:relative}.card-shop[_ngcontent-%COMP%]   .shop-games[_ngcontent-%COMP%]   .games-type[_ngcontent-%COMP%]   .card-type[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:64px;border-radius:6px;filter:drop-shadow(2px 20px 6px rgba(0,0,0,.5))}.card-shop[_ngcontent-%COMP%]   .shop-games[_ngcontent-%COMP%]   .games-into-device[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;overflow:auto;padding:16px}.card-shop[_ngcontent-%COMP%]   .shop-games[_ngcontent-%COMP%]   .games-into-device[_ngcontent-%COMP%]   .card-game[_ngcontent-%COMP%]{overflow:hidden;margin:4px;display:flex;flex-direction:column;justify-content:center;border-radius:8px;box-shadow:0 2px 2px #0000008c}.card-shop[_ngcontent-%COMP%]   .shop-games[_ngcontent-%COMP%]   .games-into-device[_ngcontent-%COMP%]   .card-game[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer}.card-shop[_ngcontent-%COMP%]   .shop-games[_ngcontent-%COMP%]   .games-into-device[_ngcontent-%COMP%]   .card-game[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:120px}.card-shop[_ngcontent-%COMP%]   .shop-games[_ngcontent-%COMP%]   .games-into-device[_ngcontent-%COMP%]   .card-game[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{text-align:center;text-overflow:ellipsis;max-width:80px;overflow:hidden;white-space:nowrap;background:#673ab7;font-size:small;padding:2px 8px}"]});let t=e;return t})();function iV(t,e){if(t&1&&de(0,"app-card-shop-viewr",14),t&2){let n=e.$implicit;ni("ShopData",n)}}var OC=(()=>{let e=class e{constructor(){this.title="Front",this.ArrTest=[{name:"Playstation",imageLogo:"https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/39fd3cf6-e264-4c96-a034-e9e469461bfc/d69yvt3-5b8e9bba-2238-4b33-8e3f-619e41b71073.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcLzM5ZmQzY2Y2LWUyNjQtNGM5Ni1hMDM0LWU5ZTQ2OTQ2MWJmY1wvZDY5eXZ0My01YjhlOWJiYS0yMjM4LTRiMzMtOGUzZi02MTllNDFiNzEwNzMucG5nIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.xGN14P3HzTWzsLSmO5B5C2rRrxPO7cfBGTz_4O44PCY"},{name:"BBA",imageLogo:"https://scontent.fcai20-1.fna.fbcdn.net/v/t39.30808-6/292345074_2148118135369614_7469800822003074115_n.jpg?_nc_cat=107&ccb=1-7&_nc_sid=efb6e6&_nc_eui2=AeGQgIyyWGe5ZNfc8mX-j-8XbLmhDSXv83xsuaENJe_zfM8pW_mYrwJYKIjoarsNQe9zXgCAcwfUiEWdkd4lDc08&_nc_ohc=6iIrXC6cF-0AX9MMDr1&_nc_ht=scontent.fcai20-1.fna&oh=00_AfBbJfYBuZDPC05iXXIR0Svcltr7KgV7UbLtzZQUO-CTDg&oe=65E716D7"}]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=fn({type:e,selectors:[["app-root"]],decls:24,vars:2,consts:[[1,"container"],[1,"section","Shop"],[3,"TextTitle"],[1,"section","section-links"],[1,"link"],[1,"section"],["ButtonStyle","",3,"ButtonCornner"],[1,"group"],[1,"content"],[1,"Head-content"],[1,"Text-content"],[1,"img"],["src","assets/img/Untitled.png","alt","",1,"Xbox-Controller-logo"],[1,"group","group-shop-viewr"],[3,"ShopData"]],template:function(i,o){i&1&&($(0,"div",0)(1,"nav")(2,"div",1),de(3,"app-wave-logo-animation",2),ee(),$(4,"div",3)(5,"span",4),Ye(6,"Home"),ee(),$(7,"span",4),Ye(8,"Contact"),ee()(),$(9,"div",5)(10,"button",6),Ye(11,"SIGN UP"),ee()()(),$(12,"div",7)(13,"div",8)(14,"p",9),Ye(15,"Welcome To BBA Shop"),ee(),$(16,"p",10),Ye(17,"Change your gaming exprerience to the next level"),ee()(),$(18,"div",11),de(19,"img",12),ee()(),$(20,"div",13),HD(21,iV,1,1,"app-card-shop-viewr",14,qD),ee(),de(23,"app-mobile-nav-bar"),ee()),i&2&&(gn(3),ni("TextTitle","BBA Shop"),gn(7),ni("ButtonCornner","Round"),gn(11),zD(o.ArrTest))},dependencies:[xC,RC,PC,NC],styles:['.container[_ngcontent-%COMP%]{padding-top:28px}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap;align-items:center}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{padding:8px 0;margin:auto}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section.Shop[_ngcontent-%COMP%]{font-size:20px;background:transparent;padding:8px 16px;border-radius:7px;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);position:relative}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section.Shop[_ngcontent-%COMP%]:before{position:absolute;content:"";top:50%;left:50%;box-shadow:0 0 100px 50px #605490;transform:translate(-50%,-50%)}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section.Shop[_ngcontent-%COMP%]   .Shop-Name[_ngcontent-%COMP%]{color:#8d88be;font-weight:700;margin-inline-end:6px}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{padding:8px;margin-inline-end:6px;cursor:pointer}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{opacity:.5}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{display:flex;align-items:center;margin:14px 0}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;text-align:center}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .Head-content[_ngcontent-%COMP%]{font-size:clamp(1.5rem,7vw,2.6rem);white-space:nowrap;color:#bab4eb}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .Text-content[_ngcontent-%COMP%]{color:#8d88be}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{display:flex;position:relative}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   .Xbox-Controller-logo[_ngcontent-%COMP%]{width:100%;filter:drop-shadow(0px 0px 90px #5f528b) opacity(.9)}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;font-size:clamp(4.8rem,20vw,5.6rem);font-weight:bolder;left:50%;top:70%;transform:translate(-50%,-50%);font-family:sans-serif;color:#ccbdff;z-index:0;text-shadow:0px 0px 20px #ccbdff}.container[_ngcontent-%COMP%]   .group.group-shop-viewr[_ngcontent-%COMP%]{justify-content:center;overflow:auto;justify-content:start}app-mobile-nav-bar[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 768px){.container[_ngcontent-%COMP%]{padding-top:128px}.container[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{flex-wrap:wrap-reverse}.container[_ngcontent-%COMP%]   .group.group-shop-viewr[_ngcontent-%COMP%]{justify-content:center}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:1;background-color:#433a65d7;background-color:transparent;width:100%;padding:6px 0;justify-content:space-between}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{margin:0 8px}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   .section-links[_ngcontent-%COMP%]{display:none}app-mobile-nav-bar[_ngcontent-%COMP%]{display:block;position:fixed;bottom:0;left:0;width:100%}}']});let t=e;return t})();var oV={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},O9=me(N({},oV),{"[class.ng-submitted]":"isSubmitted"});var sV=new M("CallSetDisabledState",{providedIn:"root",factory:()=>kC}),kC="always";var aV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=be({type:e}),e.\u0275inj=Te({});let t=e;return t})();var FC=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:sV,useValue:r.callSetDisabledState??kC}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=be({type:e}),e.\u0275inj=Te({imports:[aV]});let t=e;return t})();var cV="firebase",uV="10.8.0";tr(cV,uV,"app");var hi=new jn("ANGULARFIRE2_VERSION");var lV=(t,e)=>{let n=e?[e]:Mw(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},di=class{constructor(){return lV(dV)}},dV="app-check";function vm(){}var Ql=class{zone;delegate;constructor(e,n=pf){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},_m=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vm,{},vm,vm)),n.pipe(Re({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Yl=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Ql(Zone.current)),this.insideAngular=n.run(()=>new Ql(Zone.current,As)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(D(ne))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function hV(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Et(t){return fV(hV())(t)}function fV(t){return function(n){return n=n.lift(new _m(t.ngZone)),n.pipe(qt(t.outsideAngular),Rt(t.insideAngular))}}var mV=new Map,yV={activated:!1,tokenObservers:[]},vV={initialized:!1,enabled:!1};function Zt(t){return mV.get(t)||Object.assign({},yV)}function $C(){return vV}var _V="https://content-firebaseappcheck.googleapis.com/v1";var wV="exchangeDebugToken",LC={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},J9=24*60*60*1e3;var Em=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return y(this,null,function*(){this.stop();try{this.pending=new Zh,this.pending.promise.catch(n=>{}),yield EV(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Zh,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function EV(t){return new Promise(e=>{setTimeout(e,t)})}var IV={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},yr=new Aw("appCheck","AppCheck",IV);function qC(t){if(!Zt(t).activated)throw yr.create("use-before-activation",{appName:t.name})}function HC(r,i){return y(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let f=yield s.getHeartbeatsHeader();f&&(o["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(f){throw yr.create("fetch-network-error",{originalErrorMessage:f?.message})}if(c.status!==200)throw yr.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(f){throw yr.create("fetch-parse-error",{originalErrorMessage:f?.message})}let l=u.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw yr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let d=Number(l[1])*1e3,h=Date.now();return{token:u.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function zC(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${_V}/projects/${n}/apps/${r}:${wV}?key=${i}`,body:{debug_token:e}}}var DV="firebase-app-check-database",CV=1,Im="firebase-app-check-store";var Zl=null;function TV(){return Zl||(Zl=new Promise((t,e)=>{try{let n=indexedDB.open(DV,CV);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(yr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Im,{keyPath:"compositeKey"})}}}catch(n){e(yr.create("storage-open",{originalErrorMessage:n?.message}))}}),Zl)}function bV(t,e){return AV(SV(t),e)}function AV(t,e){return y(this,null,function*(){let r=(yield TV()).transaction(Im,"readwrite"),o=r.objectStore(Im).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(yr.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function SV(t){return`${t.options.appId}-${t.name}`}var Dm=new Kc("@firebase/app-check");function wm(t,e){return Wc()?bV(t,e).catch(n=>{Dm.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function GC(){return $C().enabled}function WC(){return y(this,null,function*(){let t=$C();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var MV={error:"UNKNOWN_ERROR"};function xV(t){return Cw.encodeString(JSON.stringify(t),!1)}function Cm(t,e=!1){return y(this,null,function*(){let n=t.app;qC(n);let r=Zt(n),i=r.token,o;if(i&&!Na(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(Na(c)?i=c:yield wm(n,void 0))}if(!e&&i&&Na(i))return{token:i.token};let s=!1;if(GC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=HC(zC(n,yield WC()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield wm(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Zt(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Dm.warn(c.message):Dm.error(c),o=c}let a;return i?o?Na(i)?a={token:i.token,internalError:o}:a=BC(o):(a={token:i.token},r.token=i,yield wm(n,i)):a=BC(o),s&&OV(n,a),a})}function RV(t){return y(this,null,function*(){let e=t.app;qC(e);let{provider:n}=Zt(e);if(GC()){let r=yield WC(),{token:i}=yield HC(zC(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function PV(t,e,n,r){let{app:i}=t,o=Zt(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Na(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),jC(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>jC(t))}function KC(t,e){let n=Zt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function jC(t){let{app:e}=t,n=Zt(e),r=n.tokenRefresher;r||(r=NV(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function NV(t){let{app:e}=t;return new Em(()=>y(this,null,function*(){let n=Zt(e),r;if(n.token?r=yield Cm(t,!0):r=yield Cm(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Zt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},LC.RETRIAL_MIN_WAIT,LC.RETRIAL_MAX_WAIT)}function OV(t,e){let n=Zt(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Na(t){return t.expireTimeMillis-Date.now()>0}function BC(t){return{token:xV(MV),error:t}}var Tm=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Zt(this.app);for(let n of e)KC(this.app,n.next);return Promise.resolve()}};function kV(t,e){return new Tm(t,e)}function FV(t){return{getToken:e=>Cm(t,e),getLimitedUseToken:()=>RV(t),addTokenListener:e=>PV(t,"INTERNAL",e),removeTokenListener:e=>KC(t.app,e)}}var VV="@firebase/app-check",LV="0.8.2";var jV="app-check",UC="app-check-internal";function BV(){Ds(new jr(jV,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return kV(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(UC).initialize()})),Ds(new jr(UC,t=>{let e=t.getProvider("app-check").getImmediate();return FV(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),tr(VV,LV)}BV();var UV=["localhost","0.0.0.0","127.0.0.1"],dG=typeof window<"u"&&UV.includes(window.location.hostname);var $V="firebase",qV="10.8.0";lt.registerVersion($V,qV,"app-compat");var HV=["ngOnDestroy"],ZC=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(HV.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(u=>n.run(()=>u)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,u)=>s.then(l=>{let d=l?.(...u);return r?.spy?.apply&&r.spy.apply(o,u,d),d})})})});var Xl=class{constructor(e){return e}},Mo=new M("angularfire2.app.options"),xo=new M("angularfire2.app.name");function Oa(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=lt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>lt.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;zV("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Xl(s)}var zV=(t,...e)=>{hg()&&typeof console<"u"&&console[t](...e)},GV={provide:Xl,useFactory:Oa,deps:[Mo,ne,[new fo,xo]]},XC=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Mo,useValue:n},{provide:xo,useValue:r}]}}constructor(n){lt.registerVersion("angularfire",hi.full,"core"),lt.registerVersion("angularfire",hi.full,"app-compat"),lt.registerVersion("angular",YD.full,n.toString())}static \u0275fac=function(r){return new(r||t)(D(rt))};static \u0275mod=be({type:t});static \u0275inj=Te({providers:[GV]})}return t})();function Jl(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return WV(i,s)||(YC("error",`${e} was already initialized on the ${n} Firebase App with different settings.${KV?" You may need to reload as Firebase is not HMR aware.":""}`),YC("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function WV(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var KV=typeof module<"u"&&!!module.hot,YC=(t,...e)=>{hg()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var bm=new M("angularfire2.auth.use-emulator"),Am=new M("angularfire2.auth.settings"),Sm=new M("angularfire2.auth.tenant-id"),Mm=new M("angularfire2.auth.langugage-code"),xm=new M("angularfire2.auth.use-device-language"),Rm=new M("angularfire.auth.persistence"),Pm=(t,e,n,r,i,o,s,a)=>Jl(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[u,l]of Object.entries(s))c.settings[u]=l;return a&&c.setPersistence(a),c},[n,r,i,o,s,a]),Nm=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,c,u,l,d,h,f){let v=new Ue,_=F(void 0).pipe(Rt(s.outsideAngular),_e(()=>o.runOutsideAngular(()=>import("./chunk-SFVC2T43.js"))),j(()=>Oa(n,o,r)),j(m=>Pm(m,o,a,u,l,d,c,h)),yu({bufferSize:1,refCount:!1}));if(si(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=F(null);else{_.pipe(Pt()).subscribe();let m=_.pipe(_e(T=>T.getRedirectResult().then(P=>P,()=>null)),Et,yu({bufferSize:1,refCount:!1})),E=_.pipe(_e(T=>new X(P=>({unsubscribe:o.runOutsideAngular(()=>T.onAuthStateChanged(B=>P.next(B),B=>P.error(B),()=>P.complete()))})))),R=_.pipe(_e(T=>new X(P=>({unsubscribe:o.runOutsideAngular(()=>T.onIdTokenChanged(B=>P.next(B),B=>P.error(B),()=>P.complete()))}))));this.authState=m.pipe(vu(E),qt(s.outsideAngular),Rt(s.insideAngular)),this.user=m.pipe(vu(R),qt(s.outsideAngular),Rt(s.insideAngular)),this.idToken=this.user.pipe(_e(T=>T?se(T.getIdToken()):F(null))),this.idTokenResult=this.user.pipe(_e(T=>T?se(T.getIdTokenResult()):F(null))),this.credential=yf(m,v,this.authState.pipe($e(T=>!T))).pipe(j(T=>T?.user?T:null),qt(s.outsideAngular),Rt(s.insideAngular))}return ZC(this,_,o,{spy:{apply:(m,E,R)=>{(m.startsWith("signIn")||m.startsWith("createUser"))&&R.then(T=>v.next(T))}}})}static \u0275fac=function(r){return new(r||t)(D(Mo),D(xo,8),D(rt),D(ne),D(Yl),D(bm,8),D(Am,8),D(Sm,8),D(Mm,8),D(xm,8),D(Rm,8),D(di,8))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),JC=(()=>{class t{constructor(){lt.registerVersion("angularfire",hi.full,"auth-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=be({type:t});static \u0275inj=Te({providers:[Nm]})}return t})();var YV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Jt={},A,ty=ty||{},H=YV||self;function fd(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Ka(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function ZV(t){return Object.prototype.hasOwnProperty.call(t,Om)&&t[Om]||(t[Om]=++XV)}var Om="closure_uid_"+(1e9*Math.random()>>>0),XV=0;function JV(t,e,n){return t.call.apply(t.bind,arguments)}function eL(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function st(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?st=JV:st=eL,st.apply(null,arguments)}function ed(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Ge(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function vr(){this.s=this.s,this.o=this.o}var tL=0;vr.prototype.s=!1;vr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),tL!=0)&&ZV(this)};vr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var hT=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function ny(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function eT(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(fd(r)){let i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function at(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}at.prototype.h=function(){this.defaultPrevented=!0};var nL=function(){if(!H.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};H.addEventListener("test",n,e),H.removeEventListener("test",n,e)}catch{}return t}();function Ba(t){return/^[\s\xa0]*$/.test(t)}function pd(){var t=H.navigator;return t&&(t=t.userAgent)?t:""}function _n(t){return pd().indexOf(t)!=-1}function ry(t){return ry[" "](t),t}ry[" "]=function(){};function rL(t,e){var n=zL;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var iL=_n("Opera"),Oo=_n("Trident")||_n("MSIE"),fT=_n("Edge"),jm=fT||Oo,pT=_n("Gecko")&&!(pd().toLowerCase().indexOf("webkit")!=-1&&!_n("Edge"))&&!(_n("Trident")||_n("MSIE"))&&!_n("Edge"),oL=pd().toLowerCase().indexOf("webkit")!=-1&&!_n("Edge");function gT(){var t=H.document;return t?t.documentMode:void 0}var Bm;e:{if(td="",nd=function(){var t=pd();if(pT)return/rv:([^\);]+)(\)|;)/.exec(t);if(fT)return/Edge\/([\d\.]+)/.exec(t);if(Oo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(oL)return/WebKit\/(\S+)/.exec(t);if(iL)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),nd&&(td=nd?nd[1]:""),Oo&&(rd=gT(),rd!=null&&rd>parseFloat(td))){Bm=String(rd);break e}Bm=td}var td,nd,rd,Um;H.document&&Oo?(km=gT(),Um=km||parseInt(Bm,10)||void 0):Um=void 0;var km,sL=Um;function Ua(t,e){if(at.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(pT){e:{try{ry(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:aL[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ua.$.h.call(this)}}Ge(Ua,at);var aL={2:"touch",3:"pen",4:"mouse"};Ua.prototype.h=function(){Ua.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Qa="closure_listenable_"+(1e6*Math.random()|0),cL=0;function uL(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++cL,this.fa=this.ia=!1}function gd(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function iy(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function lL(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function mT(t){let e={};for(let n in t)e[n]=t[n];return e}var tT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yT(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<tT.length;o++)n=tT[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function md(t){this.src=t,this.g={},this.h=0}md.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=qm(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new uL(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function $m(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=hT(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(gd(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function qm(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var oy="closure_lm_"+(1e6*Math.random()|0),Fm={};function vT(t,e,n,r,i){if(r&&r.once)return wT(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)vT(t,e[o],n,r,i);return null}return n=cy(n),t&&t[Qa]?t.O(e,n,Ka(r)?!!r.capture:!!r,i):_T(t,e,n,!1,r,i)}function _T(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Ka(i)?!!i.capture:!!i,a=ay(t);if(a||(t[oy]=a=new md(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=dL(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)nL||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(IT(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function dL(){function t(n){return e.call(t.src,t.listener,n)}let e=hL;return t}function wT(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)wT(t,e[o],n,r,i);return null}return n=cy(n),t&&t[Qa]?t.P(e,n,Ka(r)?!!r.capture:!!r,i):_T(t,e,n,!0,r,i)}function ET(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ET(t,e[o],n,r,i);else r=Ka(r)?!!r.capture:!!r,n=cy(n),t&&t[Qa]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=qm(o,n,r,i),-1<n&&(gd(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=ay(t))&&(e=t.g[e.toString()],t=-1,e&&(t=qm(e,n,r,i)),(n=-1<t?e[t]:null)&&sy(n))}function sy(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Qa])$m(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(IT(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ay(e))?($m(n,t),n.h==0&&(n.src=null,e[oy]=null)):gd(t)}}}function IT(t){return t in Fm?Fm[t]:Fm[t]="on"+t}function hL(t,e){if(t.fa)t=!0;else{e=new Ua(e,this);var n=t.listener,r=t.la||t.src;t.ia&&sy(t),t=n.call(r,e)}return t}function ay(t){return t=t[oy],t instanceof md?t:null}var Vm="__closure_events_fn_"+(1e9*Math.random()>>>0);function cy(t){return typeof t=="function"?t:(t[Vm]||(t[Vm]=function(e){return t.handleEvent(e)}),t[Vm])}function ze(){vr.call(this),this.i=new md(this),this.S=this,this.J=null}Ge(ze,vr);ze.prototype[Qa]=!0;ze.prototype.removeEventListener=function(t,e,n,r){ET(this,t,e,n,r)};function Xe(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new at(e,t);else if(e instanceof at)e.target=e.target||t;else{var i=e;e=new at(r,t),yT(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=id(s,r,!0,e)&&i}if(s=e.g=t,i=id(s,r,!0,e)&&i,i=id(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=id(s,r,!1,e)&&i}ze.prototype.N=function(){if(ze.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)gd(n[r]);delete t.g[e],t.h--}}this.J=null};ze.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ze.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function id(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,c=s.la||s.src;s.ia&&$m(t.i,s),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var uy=H.JSON.stringify,Hm=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function fL(){var t=ly;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var zm=class{constructor(){this.h=this.g=null}add(e,n){let r=DT.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},DT=new Hm(()=>new Gm,t=>t.reset()),Gm=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function pL(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function gL(t){H.setTimeout(()=>{throw t},0)}var $a,qa=!1,ly=new zm,CT=()=>{let t=H.Promise.resolve(void 0);$a=()=>{t.then(mL)}},mL=()=>{for(var t;t=fL();){try{t.h.call(t.g)}catch(n){gL(n)}var e=DT;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}qa=!1};function yd(t,e){ze.call(this),this.h=t||1,this.g=e||H,this.j=st(this.qb,this),this.l=Date.now()}Ge(yd,ze);A=yd.prototype;A.ga=!1;A.T=null;A.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Xe(this,"tick"),this.ga&&(dy(this),this.start()))}};A.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function dy(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}A.N=function(){yd.$.N.call(this),dy(this),delete this.g};function hy(t,e,n){if(typeof t=="function")n&&(t=st(t,n));else if(t&&typeof t.handleEvent=="function")t=st(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:H.setTimeout(t,e||0)}function TT(t){t.g=hy(()=>{t.g=null,t.i&&(t.i=!1,TT(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var Wm=class extends vr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:TT(this)}N(){super.N(),this.g&&(H.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Ha(t){vr.call(this),this.h=t,this.g={}}Ge(Ha,vr);var nT=[];function bT(t,e,n,r){Array.isArray(n)||(n&&(nT[0]=n.toString()),n=nT);for(var i=0;i<n.length;i++){var o=vT(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function AT(t){iy(t.g,function(e,n){this.g.hasOwnProperty(n)&&sy(e)},t),t.g={}}Ha.prototype.N=function(){Ha.$.N.call(this),AT(this)};Ha.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function vd(){this.g=!0}vd.prototype.Ea=function(){this.g=!1};function yL(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");s=2<=d.length&&d[1]=="type"?s+(l+"="+u+"&"):s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function vL(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function Po(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+wL(t,n)+(r?" "+r:"")})}function _L(t,e){t.info(function(){return"TIMEOUT: "+e})}vd.prototype.info=function(){};function wL(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return uy(n)}catch{return e}}var mi={},rT=null;function _d(){return rT=rT||new ze}mi.Ta="serverreachability";function ST(t){at.call(this,mi.Ta,t)}Ge(ST,at);function za(t){let e=_d();Xe(e,new ST(e))}mi.STAT_EVENT="statevent";function MT(t,e){at.call(this,mi.STAT_EVENT,t),this.stat=e}Ge(MT,at);function gt(t){let e=_d();Xe(e,new MT(e,t))}mi.Ua="timingevent";function xT(t,e){at.call(this,mi.Ua,t),this.size=e}Ge(xT,at);function Ya(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return H.setTimeout(function(){t()},e)}var wd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},RT={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function fy(){}fy.prototype.h=null;function iT(t){return t.h||(t.h=t.i())}function PT(){}var Za={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function py(){at.call(this,"d")}Ge(py,at);function gy(){at.call(this,"c")}Ge(gy,at);var Km;function Ed(){}Ge(Ed,fy);Ed.prototype.g=function(){return new XMLHttpRequest};Ed.prototype.i=function(){return{}};Km=new Ed;function Xa(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Ha(this),this.P=EL,t=jm?125:void 0,this.V=new yd(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new NT}function NT(){this.i=null,this.g="",this.h=!1}var EL=45e3,OT={},Qm={};A=Xa.prototype;A.setTimeout=function(t){this.P=t};function Ym(t,e,n){t.L=1,t.A=Dd(zn(e)),t.u=n,t.S=!0,kT(t,null)}function kT(t,e){t.G=Date.now(),Ja(t),t.B=zn(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),qT(n.i,"t",r),t.o=0,n=t.l.J,t.h=new NT,t.g=lb(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Wm(st(t.Pa,t,t.g),t.O)),bT(t.U,t.g,"readystatechange",t.nb),e=t.I?mT(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),za(),yL(t.j,t.v,t.B,t.m,t.W,t.u)}A.nb=function(t){t=t.target;let e=this.M;e&&wn(t)==3?e.l():this.Pa(t)};A.Pa=function(t){try{if(t==this.g)e:{let l=wn(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||jm||this.g&&(this.h.h||this.g.ja()||cT(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?za(3):za(2)),Id(this);var n=this.g.da();this.ca=n;t:if(FT(this)){var r=cT(this.g);t="";var i=r.length,o=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fi(this),ja(this);var s="";break t}this.h.i=new H.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,vL(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ba(a)){var u=a;break t}}u=null}if(n=u)Po(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zm(this,n);else{this.i=!1,this.s=3,gt(12),fi(this),ja(this);break e}}this.S?(VT(this,l,s),jm&&this.i&&l==3&&(bT(this.U,this.V,"tick",this.mb),this.V.start())):(Po(this.j,this.m,s,null),Zm(this,s)),l==4&&fi(this),this.i&&!this.J&&(l==4?sb(this.l,this):(this.i=!1,Ja(this)))}else $L(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),fi(this),ja(this)}}}catch{}finally{}};function FT(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function VT(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=IL(t,n),i==Qm){e==4&&(t.s=4,gt(14),r=!1),Po(t.j,t.m,null,"[Incomplete Response]");break}else if(i==OT){t.s=4,gt(15),Po(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Po(t.j,t.m,i,null),Zm(t,i);FT(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,gt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ey(e),e.M=!0,gt(11))):(Po(t.j,t.m,n,"[Invalid Chunked Response]"),fi(t),ja(t))}A.mb=function(){if(this.g){var t=wn(this.g),e=this.g.ja();this.o<e.length&&(Id(this),VT(this,t,e),this.i&&t!=4&&Ja(this))}};function IL(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Qm:(n=Number(e.substring(n,r)),isNaN(n)?OT:(r+=1,r+n>e.length?Qm:(e=e.slice(r,r+n),t.o=r+n,e)))}A.cancel=function(){this.J=!0,fi(this)};function Ja(t){t.Y=Date.now()+t.P,LT(t,t.P)}function LT(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Ya(st(t.lb,t),e)}function Id(t){t.C&&(H.clearTimeout(t.C),t.C=null)}A.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(_L(this.j,this.B),this.L!=2&&(za(),gt(17)),fi(this),this.s=2,ja(this)):LT(this,this.Y-t)};function ja(t){t.l.H==0||t.J||sb(t.l,t)}function fi(t){Id(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,dy(t.V),AT(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Zm(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Xm(n.i,t))){if(!t.K&&Xm(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)ud(n),bd(n);else break e;wy(n),gt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ya(st(n.ib,n),6e3));if(1>=GT(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else pi(n,11)}else if((t.K||n.g==t)&&ud(n),!Ba(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let v=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var o=r.i;o.g||v.indexOf("spdy")==-1&&v.indexOf("quic")==-1&&v.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(my(o,o.h),o.h=null))}if(r.F){let _=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,ye(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=ub(r,r.J?r.pa:null,r.Y),s.K){WT(r.i,s);var a=s,c=r.L;c&&a.setTimeout(c),a.C&&(Id(a),Ja(a)),r.g=s}else ib(r);0<n.j.length&&Ad(n)}else u[0]!="stop"&&u[0]!="close"||pi(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?pi(n,7):_y(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}za(4)}catch{}}function DL(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(fd(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function CL(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(fd(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function jT(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(fd(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=CL(t),r=DL(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var BT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function TL(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function gi(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof gi){this.h=t.h,ad(this,t.j),this.s=t.s,this.g=t.g,cd(this,t.m),this.l=t.l;var e=t.i,n=new Ga;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),oT(this,n),this.o=t.o}else t&&(e=String(t).match(BT))?(this.h=!1,ad(this,e[1]||"",!0),this.s=Va(e[2]||""),this.g=Va(e[3]||"",!0),cd(this,e[4]),this.l=Va(e[5]||"",!0),oT(this,e[6]||"",!0),this.o=Va(e[7]||"")):(this.h=!1,this.i=new Ga(null,this.h))}gi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(La(e,sT,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(La(e,sT,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(La(n,n.charAt(0)=="/"?SL:AL,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",La(n,xL)),t.join("")};function zn(t){return new gi(t)}function ad(t,e,n){t.j=n?Va(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function cd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function oT(t,e,n){e instanceof Ga?(t.i=e,RL(t.i,t.h)):(n||(e=La(e,ML)),t.i=new Ga(e,t.h))}function ye(t,e,n){t.i.set(e,n)}function Dd(t){return ye(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Va(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function La(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,bL),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function bL(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var sT=/[#\/\?@]/g,AL=/[#\?:]/g,SL=/[#\?]/g,ML=/[#\?@]/g,xL=/#/g;function Ga(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function _r(t){t.g||(t.g=new Map,t.h=0,t.i&&TL(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}A=Ga.prototype;A.add=function(t,e){_r(this),this.i=null,t=ko(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function UT(t,e){_r(t),e=ko(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function $T(t,e){return _r(t),e=ko(t,e),t.g.has(e)}A.forEach=function(t,e){_r(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};A.ta=function(){_r(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};A.Z=function(t){_r(this);let e=[];if(typeof t=="string")$T(this,t)&&(e=e.concat(this.g.get(ko(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};A.set=function(t,e){return _r(this),this.i=null,t=ko(this,t),$T(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};A.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function qT(t,e,n){UT(t,e),0<n.length&&(t.i=null,t.g.set(ko(t,e),ny(n)),t.h+=n.length)}A.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function ko(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function RL(t,e){e&&!t.j&&(_r(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(UT(this,r),qT(this,i,n))},t)),t.j=e}var PL=class{constructor(t,e){this.g=t,this.map=e}};function HT(t){this.l=t||NL,H.PerformanceNavigationTiming?(t=H.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(H.g&&H.g.Ka&&H.g.Ka()&&H.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var NL=10;function zT(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function GT(t){return t.h?1:t.g?t.g.size:0}function Xm(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function my(t,e){t.g?t.g.add(e):t.h=e}function WT(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}HT.prototype.cancel=function(){if(this.i=KT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function KT(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return ny(t.i)}var OL=class{stringify(t){return H.JSON.stringify(t,void 0)}parse(t){return H.JSON.parse(t,void 0)}};function kL(){this.g=new OL}function FL(t,e,n){let r=n||"";try{jT(t,function(i,o){let s=i;Ka(i)&&(s=uy(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function VL(t,e){let n=new vd;if(H.Image){let r=new Image;r.onload=ed(od,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ed(od,n,r,"TestLoadImage: error",!1,e),r.onabort=ed(od,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ed(od,n,r,"TestLoadImage: timeout",!1,e),H.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function od(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function ec(t){this.l=t.ec||null,this.j=t.ob||!1}Ge(ec,fy);ec.prototype.g=function(){return new Cd(this.l,this.j)};ec.prototype.i=function(t){return function(){return t}}({});function Cd(t,e){ze.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=yy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ge(Cd,ze);var yy=0;A=Cd.prototype;A.open=function(t,e){if(this.readyState!=yy)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Wa(this)};A.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||H).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};A.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,tc(this)),this.readyState=yy};A.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Wa(this)),this.g&&(this.readyState=3,Wa(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof H.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;QT(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function QT(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}A.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?tc(this):Wa(this),this.readyState==3&&QT(this)}};A.Za=function(t){this.g&&(this.response=this.responseText=t,tc(this))};A.Ya=function(t){this.g&&(this.response=t,tc(this))};A.ka=function(){this.g&&tc(this)};function tc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Wa(t)}A.setRequestHeader=function(t,e){this.v.append(t,e)};A.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};A.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Wa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Cd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var LL=H.JSON.parse;function Ae(t){ze.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=YT,this.L=this.M=!1}Ge(Ae,ze);var YT="",jL=/^https?$/i,BL=["POST","PUT"];A=Ae.prototype;A.Oa=function(t){this.M=t};A.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Km.g(),this.C=this.u?iT(this.u):iT(Km),this.g.onreadystatechange=st(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){aT(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=H.FormData&&t instanceof H.FormData,!(0<=hT(BL,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{JT(this),0<this.B&&((this.L=UL(this.g))?(this.g.timeout=this.B,this.g.ontimeout=st(this.ua,this)):this.A=hy(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){aT(this,o)}};function UL(t){return Oo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}A.ua=function(){typeof ty<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xe(this,"timeout"),this.abort(8))};function aT(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ZT(t),Td(t)}function ZT(t){t.F||(t.F=!0,Xe(t,"complete"),Xe(t,"error"))}A.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Xe(this,"complete"),Xe(this,"abort"),Td(this))};A.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Td(this,!0)),Ae.$.N.call(this)};A.La=function(){this.s||(this.G||this.v||this.l?XT(this):this.kb())};A.kb=function(){XT(this)};function XT(t){if(t.h&&typeof ty<"u"&&(!t.C[1]||wn(t)!=4||t.da()!=2)){if(t.v&&wn(t)==4)hy(t.La,0,t);else if(Xe(t,"readystatechange"),wn(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(BT)[1]||null;!i&&H.self&&H.self.location&&(i=H.self.location.protocol.slice(0,-1)),r=!jL.test(i?i.toLowerCase():"")}n=r}if(n)Xe(t,"complete"),Xe(t,"success");else{t.m=6;try{var o=2<wn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",ZT(t)}}finally{Td(t)}}}}function Td(t,e){if(t.g){JT(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Xe(t,"ready");try{n.onreadystatechange=r}catch{}}}function JT(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(H.clearTimeout(t.A),t.A=null)}A.isActive=function(){return!!this.g};function wn(t){return t.g?t.g.readyState:0}A.da=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}};A.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};A.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),LL(e)}};function cT(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case YT:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function $L(t){let e={};t=(t.g&&2<=wn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Ba(t[r]))continue;var n=pL(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[i]||[];e[i]=o,o.push(n)}lL(e,function(r){return r.join(", ")})}A.Ia=function(){return this.m};A.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function eb(t){let e="";return iy(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function vy(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=eb(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ye(t,e,n))}function ka(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function tb(t){this.Ga=0,this.j=[],this.l=new vd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ka("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ka("baseRetryDelayMs",5e3,t),this.hb=ka("retryDelaySeedMs",1e4,t),this.eb=ka("forwardChannelMaxRetries",2,t),this.xa=ka("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new HT(t&&t.concurrentRequestLimit),this.Ja=new kL,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}A=tb.prototype;A.ra=8;A.H=1;function _y(t){if(nb(t),t.H==3){var e=t.W++,n=zn(t.I);if(ye(n,"SID",t.K),ye(n,"RID",e),ye(n,"TYPE","terminate"),nc(t,n),e=new Xa(t,t.l,e),e.L=2,e.A=Dd(zn(n)),n=!1,H.navigator&&H.navigator.sendBeacon)try{n=H.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&H.Image&&(new Image().src=e.A,n=!0),n||(e.g=lb(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Ja(e)}cb(t)}function bd(t){t.g&&(Ey(t),t.g.cancel(),t.g=null)}function nb(t){bd(t),t.u&&(H.clearTimeout(t.u),t.u=null),ud(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&H.clearTimeout(t.m),t.m=null)}function Ad(t){if(!zT(t.i)&&!t.m){t.m=!0;var e=t.Na;$a||CT(),qa||($a(),qa=!0),ly.add(e,t),t.C=0}}function qL(t,e){return GT(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Ya(st(t.Na,t,e),ab(t,t.C)),t.C++,!0)}A.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Xa(this,this.l,t),o=this.s;if(this.U&&(o?(o=mT(o),yT(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=rb(this,i,e),n=zn(this.I),ye(n,"RID",t),ye(n,"CVER",22),this.F&&ye(n,"X-HTTP-Session-Id",this.F),nc(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(eb(o)))+"&"+e:this.o&&vy(n,this.o,o)),my(this.i,i),this.bb&&ye(n,"TYPE","init"),this.P?(ye(n,"$req",e),ye(n,"SID","null"),i.aa=!0,Ym(i,n,null)):Ym(i,n,e),this.H=2}}else this.H==3&&(t?uT(this,t):this.j.length==0||zT(this.i)||uT(this))};function uT(t,e){var n;e?n=e.m:n=t.W++;let r=zn(t.I);ye(r,"SID",t.K),ye(r,"RID",n),ye(r,"AID",t.V),nc(t,r),t.o&&t.s&&vy(r,t.o,t.s),n=new Xa(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=rb(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),my(t.i,n),Ym(n,r,e)}function nc(t,e){t.na&&iy(t.na,function(n,r){ye(e,r,n)}),t.h&&jT({},function(n,r){ye(e,r,n)})}function rb(t,e,n){n=Math.min(t.j.length,n);var r=t.h?st(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=o,0>u)o=Math.max(0,i[c].g-100),a=!1;else try{FL(l,s,"req"+u+"_")}catch{r&&r(l)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function ib(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;$a||CT(),qa||($a(),qa=!0),ly.add(e,t),t.A=0}}function wy(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Ya(st(t.Ma,t),ab(t,t.A)),t.A++,!0)}A.Ma=function(){if(this.u=null,ob(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ya(st(this.jb,this),t)}};A.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,gt(10),bd(this),ob(this))};function Ey(t){t.B!=null&&(H.clearTimeout(t.B),t.B=null)}function ob(t){t.g=new Xa(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=zn(t.wa);ye(e,"RID","rpc"),ye(e,"SID",t.K),ye(e,"AID",t.V),ye(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ye(e,"TO",t.qa),ye(e,"TYPE","xmlhttp"),nc(t,e),t.o&&t.s&&vy(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Dd(zn(e)),n.u=null,n.S=!0,kT(n,t)}A.ib=function(){this.v!=null&&(this.v=null,bd(this),wy(this),gt(19))};function ud(t){t.v!=null&&(H.clearTimeout(t.v),t.v=null)}function sb(t,e){var n=null;if(t.g==e){ud(t),Ey(t),t.g=null;var r=2}else if(Xm(t.i,e))n=e.F,WT(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=_d(),Xe(r,new xT(r,n)),Ad(t)}else ib(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&qL(t,e)||r==2&&wy(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:pi(t,5);break;case 4:pi(t,10);break;case 3:pi(t,6);break;default:pi(t,2)}}}function ab(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function pi(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=st(t.pb,t);n||(n=new gi("//www.google.com/images/cleardot.gif"),H.location&&H.location.protocol=="http"||ad(n,"https"),Dd(n)),VL(n.toString(),r)}else gt(2);t.H=0,t.h&&t.h.za(e),cb(t),nb(t)}A.pb=function(t){t?(this.l.info("Successfully pinged google.com"),gt(2)):(this.l.info("Failed to ping google.com"),gt(1))};function cb(t){if(t.H=0,t.ma=[],t.h){let e=KT(t.i);(e.length!=0||t.j.length!=0)&&(eT(t.ma,e),eT(t.ma,t.j),t.i.i.length=0,ny(t.j),t.j.length=0),t.h.ya()}}function ub(t,e,n){var r=n instanceof gi?zn(n):new gi(n);if(r.g!="")e&&(r.g=e+"."+r.g),cd(r,r.m);else{var i=H.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new gi(null);r&&ad(o,r),e&&(o.g=e),i&&cd(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&ye(r,n,e),ye(r,"VER",t.ra),nc(t,r),r}function lb(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Ae(new ec({ob:n})):new Ae(t.va),e.Oa(t.J),e}A.isActive=function(){return!!this.h&&this.h.isActive(this)};function db(){}A=db.prototype;A.Ba=function(){};A.Aa=function(){};A.za=function(){};A.ya=function(){};A.isActive=function(){return!0};A.Va=function(){};function ld(){if(Oo&&!(10<=Number(sL)))throw Error("Environmental error: no available transport.")}ld.prototype.g=function(t,e){return new At(t,e)};function At(t,e){ze.call(this),this.g=new tb(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ba(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ba(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Fo(this)}Ge(At,ze);At.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;gt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=ub(t,null,t.Y),Ad(t)};At.prototype.close=function(){_y(this.g)};At.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=uy(t),t=n);e.j.push(new PL(e.fb++,t)),e.H==3&&Ad(e)};At.prototype.N=function(){this.g.h=null,delete this.j,_y(this.g),delete this.g,At.$.N.call(this)};function hb(t){py.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Ge(hb,py);function fb(){gy.call(this),this.status=1}Ge(fb,gy);function Fo(t){this.g=t}Ge(Fo,db);Fo.prototype.Ba=function(){Xe(this.g,"a")};Fo.prototype.Aa=function(t){Xe(this.g,new hb(t))};Fo.prototype.za=function(t){Xe(this.g,new fb)};Fo.prototype.ya=function(){Xe(this.g,"b")};function HL(){this.blockSize=-1}function Xt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ge(Xt,HL);Xt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Lm(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}Xt.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)Lm(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){Lm(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){Lm(this,r),i=0;break}}this.h=i,this.i+=e};Xt.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ue(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var zL={};function Iy(t){return-128<=t&&128>t?rL(t,function(e){return new ue([e|0],0>e?-1:0)}):new ue([t|0],0>t?-1:0)}function En(t){if(isNaN(t)||!isFinite(t))return No;if(0>t)return Ze(En(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Jm;return new ue(e,0)}function pb(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ze(pb(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=En(Math.pow(e,8)),r=No,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=En(Math.pow(e,o)),r=r.R(o).add(En(s))):(r=r.R(n),r=r.add(En(s)))}return r}var Jm=4294967296,No=Iy(0),ey=Iy(1),lT=Iy(16777216);A=ue.prototype;A.ea=function(){if(Vt(this))return-Ze(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Jm+r)*e,e*=Jm}return t};A.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Hn(this))return"0";if(Vt(this))return"-"+Ze(this).toString(t);for(var e=En(Math.pow(t,6)),n=this,r="";;){var i=hd(n,e).g;n=dd(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Hn(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};A.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Hn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Vt(t){return t.h==-1}A.X=function(t){return t=dd(this,t),Vt(t)?-1:Hn(t)?0:1};function Ze(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ue(n,~t.h).add(ey)}A.abs=function(){return Vt(this)?Ze(this):this};A.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new ue(n,n[n.length-1]&-2147483648?-1:0)};function dd(t,e){return t.add(Ze(e))}A.R=function(t){if(Hn(this)||Hn(t))return No;if(Vt(this))return Vt(t)?Ze(this).R(Ze(t)):Ze(Ze(this).R(t));if(Vt(t))return Ze(this.R(Ze(t)));if(0>this.X(lT)&&0>t.X(lT))return En(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=s*c,sd(n,2*r+2*i),n[2*r+2*i+1]+=o*c,sd(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,sd(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,sd(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ue(n,0)};function sd(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Fa(t,e){this.g=t,this.h=e}function hd(t,e){if(Hn(e))throw Error("division by zero");if(Hn(t))return new Fa(No,No);if(Vt(t))return e=hd(Ze(t),e),new Fa(Ze(e.g),Ze(e.h));if(Vt(e))return e=hd(t,Ze(e)),new Fa(Ze(e.g),e.h);if(30<t.g.length){if(Vt(t)||Vt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=ey,r=e;0>=r.X(t);)n=dT(n),r=dT(r);var i=Ro(n,1),o=Ro(r,1);for(r=Ro(r,2),n=Ro(n,2);!Hn(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=Ro(r,1),n=Ro(n,1)}return e=dd(t,i.R(e)),new Fa(i,e)}for(i=No;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=En(n),s=o.R(e);Vt(s)||0<s.X(t);)n-=r,o=En(n),s=o.R(e);Hn(o)&&(o=ey),i=i.add(o),t=dd(t,s)}return new Fa(i,t)}A.gb=function(t){return hd(this,t).h};A.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ue(n,this.h&t.h)};A.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ue(n,this.h|t.h)};A.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ue(n,this.h^t.h)};function dT(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ue(n,t.h)}function Ro(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new ue(i,t.h)}ld.prototype.createWebChannel=ld.prototype.g;At.prototype.send=At.prototype.u;At.prototype.open=At.prototype.m;At.prototype.close=At.prototype.close;wd.NO_ERROR=0;wd.TIMEOUT=8;wd.HTTP_ERROR=6;RT.COMPLETE="complete";PT.EventType=Za;Za.OPEN="a";Za.CLOSE="b";Za.ERROR="c";Za.MESSAGE="d";ze.prototype.listen=ze.prototype.O;Ae.prototype.listenOnce=Ae.prototype.P;Ae.prototype.getLastError=Ae.prototype.Sa;Ae.prototype.getLastErrorCode=Ae.prototype.Ia;Ae.prototype.getStatus=Ae.prototype.da;Ae.prototype.getResponseJson=Ae.prototype.Wa;Ae.prototype.getResponseText=Ae.prototype.ja;Ae.prototype.send=Ae.prototype.ha;Ae.prototype.setWithCredentials=Ae.prototype.Oa;Xt.prototype.digest=Xt.prototype.l;Xt.prototype.reset=Xt.prototype.reset;Xt.prototype.update=Xt.prototype.j;ue.prototype.add=ue.prototype.add;ue.prototype.multiply=ue.prototype.R;ue.prototype.modulo=ue.prototype.gb;ue.prototype.compare=ue.prototype.X;ue.prototype.toNumber=ue.prototype.ea;ue.prototype.toString=ue.prototype.toString;ue.prototype.getBits=ue.prototype.D;ue.fromNumber=En;ue.fromString=pb;var gb=Jt.createWebChannelTransport=function(){return new ld},mb=Jt.getStatEventTarget=function(){return _d()},Sd=Jt.ErrorCode=wd,yb=Jt.EventType=RT,vb=Jt.Event=mi,Dy=Jt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},FG=Jt.FetchXmlHttpFactory=ec,rc=Jt.WebChannel=PT,_b=Jt.XhrIo=Ae,wb=Jt.Md5=Xt,yi=Jt.Integer=ue;var Eb="@firebase/firestore";var Le=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Le.UNAUTHENTICATED=new Le(null),Le.GOOGLE_CREDENTIALS=new Le("google-credentials-uid"),Le.FIRST_PARTY=new Le("first-party-uid"),Le.MOCK_USER=new Le("mock-user");var hs="10.8.0";var br=new Kc("@firebase/firestore");function Uo(){return br.logLevel}function wA(t){br.setLogLevel(t)}function I(t,...e){if(br.logLevel<=on.DEBUG){let n=e.map(T_);br.debug(`Firestore (${hs}): ${t}`,...n)}}function Pe(t,...e){if(br.logLevel<=on.ERROR){let n=e.map(T_);br.error(`Firestore (${hs}): ${t}`,...n)}}function jt(t,...e){if(br.logLevel<=on.WARN){let n=e.map(T_);br.warn(`Firestore (${hs}): ${t}`,...n)}}function T_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function x(t="Unexpected state"){let e=`FIRESTORE (${hs}) INTERNAL ASSERTION FAILED: `+t;throw Pe(e),new Error(e)}function k(t,e){t||x()}function EA(t,e){t||x()}function S(t,e){return t}var g={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},w=class extends bw{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var je=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var jd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Sy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Le.UNAUTHENTICATED))}shutdown(){}},My=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},xy=class{constructor(e){this.t=e,this.currentUser=Le.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new je;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new je,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>y(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{I("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(I("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new je)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(I("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(k(typeof r.accessToken=="string"),new jd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return k(e===null||typeof e=="string"),new Le(e)}},Ry=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Le.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Py=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Ry(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Le.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ny=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Oy=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&I("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,I("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{I("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):I("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(k(typeof n.token=="string"),this.R=n.token,new Ny(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function GL(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Bd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=GL(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function G(t,e){return t<e?-1:t>e?1:0}function Yo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function IA(t){return t+"\0"}var De=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new w(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new w(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new w(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new w(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?G(this.nanoseconds,e.nanoseconds):G(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var V=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new De(0,0))}static max(){return new t(new De(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ud=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&x(),r===void 0?r=e.length-n:r>e.length-n&&x(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ie=class t extends Ud{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new w(g.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},WL=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ne=class t extends Ud{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return WL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new w(g.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new w(g.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new w(g.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new w(g.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var b=class t{constructor(e){this.path=e}static fromPath(e){return new t(ie.fromString(e))}static fromName(e){return new t(ie.fromString(e).popFirst(5))}static empty(){return new t(ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ie(e.slice()))}};var Zo=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function ky(t){return t.fields.find(e=>e.kind===2)}function _i(t){return t.fields.filter(e=>e.kind!==2)}Zo.UNKNOWN_ID=-1;var Wo=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var gc=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Bt.min())}};function DA(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=V.fromTimestamp(r===1e9?new De(n+1,0):new De(n,r));return new Bt(i,b.empty(),e)}function CA(t){return new Bt(t.readTime,t.key,-1)}var Bt=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(V.min(),b.empty(),-1)}static max(){return new t(V.max(),b.empty(),-1)}};function b_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=b.comparator(t.documentKey,e.documentKey),n!==0?n:G(t.largestBatchId,e.largestBatchId))}var TA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$d=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Fr(t){return y(this,null,function*(){if(t.code!==g.FAILED_PRECONDITION||t.message!==TA)throw t;I("LocalStore","Unexpectedly lost primary lease")})}var p=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&x(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;n(e[u]).next(l=>{s[u]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var qd=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new je,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ti(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=A_(r.target.error);this.V.reject(new Ti(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new Ti(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(I("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new Vy(n)}},Kn=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Is())===12.2&&Pe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return I("SimpleDb","Removing database:",e),wi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Wc())return!1;if(t.C())return!0;let e=Is(),n=t.S(e),r=0<n&&n<10,i=t.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return y(this,null,function*(){return this.db||(I("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new Ti(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new w(g.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new w(g.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Ti(e,s))},i.onupgradeneeded=o=>{I("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{I("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return y(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(e);let a=qd.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),p.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&s<3;if(I("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Fy=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return wi(this.k.delete())}},Ti=class extends w{constructor(e,n){super(g.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Vr(t){return t.name==="IndexedDbTransactionError"}var Vy=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(I("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(I("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),wi(r)}add(e){return I("SimpleDb","ADD",this.store.name,e,e),wi(this.store.add(e))}get(e){return wi(this.store.get(e)).next(n=>(n===void 0&&(n=null),I("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return I("SimpleDb","DELETE",this.store.name,e),wi(this.store.delete(e))}count(){return I("SimpleDb","COUNT",this.store.name),wi(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new p((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.G(o,(a,c)=>{s.push(c)}).next(()=>s)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new p((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){I("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new p((r,i)=>{n.onerror=o=>{let s=A_(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){let r=[];return new p((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new Fy(a),u=n(a.primaryKey,a.value,c);if(u instanceof p){let l=u.catch(d=>(c.done(),p.reject(d)));r.push(l)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>p.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function wi(t){return new p((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=A_(r.target.error);n(i)}})}var Ib=!1;function A_(t){let e=Kn.S(Is());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new w("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ib||(Ib=!0,setTimeout(()=>{throw r},0)),r}}return t}var Ly=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){I("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>y(this,null,function*(){this.task=null;try{I("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(n){Vr(n)?I("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Fr(n)}yield this.ee(6e4)}))}},jy=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return y(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let r=new Set,i=n,o=!0;return p.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return I("IndexBackfiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(I("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=CA(o);b_(s,r)>0&&(r=s)}),new Bt(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var St=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Lc(t){return t==null}function mc(t){return t===0&&1/t==-1/0}function bA(t){return typeof t=="number"&&Number.isInteger(t)&&!mc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function mt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Db(e)),e=KL(t.get(n),e);return Db(e)}function KL(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Db(t){return t+""}function In(t){let e=t.length;if(k(e>=2),e===2)return k(t.charAt(0)===""&&t.charAt(1)===""),ie.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&x(),t.charAt(s+1)){case"":let a=t.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:x()}o=s+2}return new ie(r)}var Cb=["userId","batchId"];function Nd(t,e){return[t,mt(e)]}function AA(t,e,n){return[t,mt(e),n]}var QL={},YL=["prefixPath","collectionGroup","readTime","documentId"],ZL=["prefixPath","collectionGroup","documentId"],XL=["collectionGroup","readTime","prefixPath","documentId"],JL=["canonicalId","targetId"],e2=["targetId","path"],t2=["path","targetId"],n2=["collectionId","parent"],r2=["indexId","uid"],i2=["uid","sequenceNumber"],o2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],s2=["indexId","uid","orderedDocumentKey"],a2=["userId","collectionPath","documentId"],c2=["userId","collectionPath","largestBatchId"],u2=["userId","collectionGroup","largestBatchId"],SA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],l2=[...SA,"documentOverlays"],MA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xA=MA,d2=[...xA,"indexConfiguration","indexState","indexEntries"];var yc=class extends $d{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function Ke(t,e){let n=S(t);return Kn.M(n.ae,e)}function Tb(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function RA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ve=class t{constructor(e,n){this.comparator=e,this.root=n||Cn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Cn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Go(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Go(this.root,e,this.comparator,!1)}getReverseIterator(){return new Go(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Go(this.root,e,this.comparator,!0)}},Go=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Cn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw x();let e=this.left.check();if(e!==this.right.check())throw x();return e+(this.isRed()?0:1)}};Cn.EMPTY=null,Cn.RED=!0,Cn.BLACK=!1;Cn.EMPTY=new class{constructor(){this.size=0}get key(){throw x()}get value(){throw x()}get color(){throw x()}get left(){throw x()}get right(){throw x()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Cn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var fe=class t{constructor(e){this.comparator=e,this.data=new ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hd(this.data.getIterator())}getIteratorFrom(e){return new Hd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Hd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Vo(t){return t.hasNext()?t.getNext():void 0}var Mt=class t{constructor(e){this.fields=e,e.sort(Ne.comparator)}static empty(){return new t([])}unionWith(e){let n=new fe(Ne.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var zd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function PA(){return typeof atob<"u"}var We=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new zd("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return G(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};We.EMPTY_BYTE_STRING=new We("");var h2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(t){if(k(!!t),typeof t=="string"){let e=0,n=h2.exec(t);if(k(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Se(t.seconds),nanos:Se(t.nanos)}}function Se(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sr(t){return typeof t=="string"?We.fromBase64String(t):We.fromUint8Array(t)}function kh(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function S_(t){let e=t.mapValue.fields.__previous_value__;return kh(e)?S_(e):e}function vc(t){let e=Ar(t.mapValue.fields.__local_write_time__.timestampValue);return new De(e.seconds,e.nanos)}var By=class{constructor(e,n,r,i,o,s,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Mr=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Cr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Od={nullValue:"NULL_VALUE"};function bi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?kh(t)?4:NA(t)?9007199254740991:10:x()}function An(t,e){if(t===e)return!0;let n=bi(t);if(n!==bi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vc(t).isEqual(vc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Ar(i.timestampValue),a=Ar(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Sr(i.bytesValue).isEqual(Sr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Se(i.geoPointValue.latitude)===Se(o.geoPointValue.latitude)&&Se(i.geoPointValue.longitude)===Se(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Se(i.integerValue)===Se(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Se(i.doubleValue),a=Se(o.doubleValue);return s===a?mc(s)===mc(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Yo(t.arrayValue.values||[],e.arrayValue.values||[],An);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Tb(s)!==Tb(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!An(s[c],a[c])))return!1;return!0}(t,e);default:return x()}}function _c(t,e){return(t.values||[]).find(n=>An(n,e))!==void 0}function xr(t,e){if(t===e)return 0;let n=bi(t),r=bi(e);if(n!==r)return G(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return G(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Se(o.integerValue||o.doubleValue),c=Se(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return bb(t.timestampValue,e.timestampValue);case 4:return bb(vc(t),vc(e));case 5:return G(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Sr(o),c=Sr(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=G(a[u],c[u]);if(l!==0)return l}return G(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=G(Se(o.latitude),Se(s.latitude));return a!==0?a:G(Se(o.longitude),Se(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=xr(a[u],c[u]);if(l)return l}return G(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Cr.mapValue&&s===Cr.mapValue)return 0;if(o===Cr.mapValue)return 1;if(s===Cr.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let h=G(c[d],l[d]);if(h!==0)return h;let f=xr(a[c[d]],u[l[d]]);if(f!==0)return f}return G(c.length,l.length)}(t.mapValue,e.mapValue);default:throw x()}}function bb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return G(t,e);let n=Ar(t),r=Ar(e),i=G(n.seconds,r.seconds);return i!==0?i:G(n.nanos,r.nanos)}function Xo(t){return Uy(t)}function Uy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Ar(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Sr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return b.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Uy(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Uy(n.fields[s])}`;return i+"}"}(t.mapValue):x()}function Ai(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function $y(t){return!!t&&"integerValue"in t}function wc(t){return!!t&&"arrayValue"in t}function Ab(t){return!!t&&"nullValue"in t}function Sb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function kd(t){return!!t&&"mapValue"in t}function lc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Vi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=lc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=lc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function NA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function f2(t){return"nullValue"in t?Od:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ai(Mr.empty(),b.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:x()}function p2(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ai(Mr.empty(),b.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Cr:x()}function Mb(t,e){let n=xr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function xb(t,e){let n=xr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var ut=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!kd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=lc(n)}setAll(e){let n=Ne.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=lc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());kd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return An(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];kd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Vi(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(lc(this.value))}};function OA(t){let e=[];return Vi(t.fields,(n,r)=>{let i=new Ne([n]);if(kd(r)){let o=OA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Mt(e)}var Be=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,V.min(),V.min(),V.min(),ut.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,V.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,V.min(),V.min(),ut.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,V.min(),V.min(),ut.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(V.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=V.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Sn=class{constructor(e,n){this.position=e,this.inclusive=n}};function Rb(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=b.comparator(b.fromName(s.referenceValue),n.key):r=xr(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Pb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!An(t.position[n],e.position[n]))return!1;return!0}var Si=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function g2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Gd=class{},te=class t extends Gd{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new zy(e,n,r):n==="array-contains"?new Ky(e,r):n==="in"?new Wd(e,r):n==="not-in"?new Qy(e,r):n==="array-contains-any"?new Yy(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Gy(e,r):new Wy(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(xr(n,this.value)):n!==null&&bi(this.value)===bi(n)&&this.matchesComparison(xr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return x()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},le=class t extends Gd{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return Jo(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function Jo(t){return t.op==="and"}function qy(t){return t.op==="or"}function M_(t){return kA(t)&&Jo(t)}function kA(t){for(let e of t.filters)if(e instanceof le)return!1;return!0}function Hy(t){if(t instanceof te)return t.field.canonicalString()+t.op.toString()+Xo(t.value);if(M_(t))return t.filters.map(e=>Hy(e)).join(",");{let e=t.filters.map(n=>Hy(n)).join(",");return`${t.op}(${e})`}}function FA(t,e){return t instanceof te?function(r,i){return i instanceof te&&r.op===i.op&&r.field.isEqual(i.field)&&An(r.value,i.value)}(t,e):t instanceof le?function(r,i){return i instanceof le&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&FA(s,i.filters[a]),!0):!1}(t,e):void x()}function VA(t,e){let n=t.filters.concat(e);return le.create(n,t.op)}function LA(t){return t instanceof te?function(n){return`${n.field.canonicalString()} ${n.op} ${Xo(n.value)}`}(t):t instanceof le?function(n){return n.op.toString()+" {"+n.getFilters().map(LA).join(" ,")+"}"}(t):"Filter"}var zy=class extends te{constructor(e,n,r){super(e,n,r),this.key=b.fromName(r.referenceValue)}matches(e){let n=b.comparator(e.key,this.key);return this.matchesComparison(n)}},Gy=class extends te{constructor(e,n){super(e,"in",n),this.keys=jA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Wy=class extends te{constructor(e,n){super(e,"not-in",n),this.keys=jA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function jA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>b.fromName(r.referenceValue))}var Ky=class extends te{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return wc(n)&&_c(n.arrayValue,this.value)}},Wd=class extends te{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&_c(this.value.arrayValue,n)}},Qy=class extends te{constructor(e,n){super(e,"not-in",n)}matches(e){if(_c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!_c(this.value.arrayValue,n)}},Yy=class extends te{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!wc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_c(this.value.arrayValue,r))}};var Zy=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function Xy(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Zy(t,e,n,r,i,o,s)}function Mi(t){let e=S(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Hy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Lc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Xo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Xo(r)).join(",")),e.ce=n}return e.ce}function jc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!g2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!FA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Pb(t.startAt,e.startAt)&&Pb(t.endAt,e.endAt)}function Kd(t){return b.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Qd(t,e){return t.filters.filter(n=>n instanceof te&&n.field.isEqual(e))}function Nb(t,e,n){let r=Od,i=!0;for(let o of Qd(t,e)){let s=Od,a=!0;switch(o.op){case"<":case"<=":s=f2(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Od}Mb({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];Mb({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function Ob(t,e,n){let r=Cr,i=!0;for(let o of Qd(t,e)){let s=Cr,a=!0;switch(o.op){case">=":case">":s=p2(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Cr}xb({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];xb({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var en=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function BA(t,e,n,r,i,o,s,a){return new en(t,e,n,r,i,o,s,a)}function fs(t){return new en(t)}function kb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function x_(t){return t.collectionGroup!==null}function Ko(t){let e=S(t);if(e.le===null){e.le=[];let n=new Set;for(let o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new fe(Ne.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new Si(o,r))}),n.has(Ne.keyField().canonicalString())||e.le.push(new Si(Ne.keyField(),r))}return e.le}function yt(t){let e=S(t);return e.he||(e.he=m2(e,Ko(t))),e.he}function m2(t,e){if(t.limitType==="F")return Xy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Si(i.field,o)});let n=t.endAt?new Sn(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Sn(t.startAt.position,t.startAt.inclusive):null;return Xy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Jy(t,e){let n=t.filters.concat([e]);return new en(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yd(t,e,n){return new en(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bc(t,e){return jc(yt(t),yt(e))&&t.limitType===e.limitType}function UA(t){return`${Mi(yt(t))}|lt:${t.limitType}`}function $o(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>LA(i)).join(", ")}]`),Lc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Xo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Xo(i)).join(",")),`Target(${r})`}(yt(t))}; limitType=${t.limitType})`}function Uc(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):b.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Ko(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=Rb(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,Ko(r),i)||r.endAt&&!function(s,a,c){let u=Rb(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,Ko(r),i))}(t,e)}function $A(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qA(t){return(e,n)=>{let r=!1;for(let i of Ko(t)){let o=y2(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function y2(t,e,n){let r=t.field.isKeyField()?b.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?xr(c,u):x()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return x()}}var Mn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Vi(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return RA(this.inner)}size(){return this.innerSize}};var v2=new ve(b.comparator);function It(){return v2}var HA=new ve(b.comparator);function cc(...t){let e=HA;for(let n of t)e=e.insert(n.key,n);return e}function zA(t){let e=HA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Dn(){return dc()}function GA(){return dc()}function dc(){return new Mn(t=>t.toString(),(t,e)=>t.isEqual(e))}var _2=new ve(b.comparator),w2=new fe(b.comparator);function W(...t){let e=w2;for(let n of t)e=e.add(n);return e}var E2=new fe(G);function R_(){return E2}function WA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mc(e)?"-0":e}}function KA(t){return{integerValue:""+t}}function QA(t,e){return bA(e)?KA(e):WA(t,e)}var es=class{constructor(){this._=void 0}};function I2(t,e,n){return t instanceof Rr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&kh(o)&&(o=S_(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Qn?ZA(t,e):t instanceof Yn?XA(t,e):function(i,o){let s=YA(i,o),a=Fb(s)+Fb(i.Ie);return $y(s)&&$y(i.Ie)?KA(a):WA(i.serializer,a)}(t,e)}function D2(t,e,n){return t instanceof Qn?ZA(t,e):t instanceof Yn?XA(t,e):n}function YA(t,e){return t instanceof Pr?function(r){return $y(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Rr=class extends es{},Qn=class extends es{constructor(e){super(),this.elements=e}};function ZA(t,e){let n=JA(e);for(let r of t.elements)n.some(i=>An(i,r))||n.push(r);return{arrayValue:{values:n}}}var Yn=class extends es{constructor(e){super(),this.elements=e}};function XA(t,e){let n=JA(e);for(let r of t.elements)n=n.filter(i=>!An(i,r));return{arrayValue:{values:n}}}var Pr=class extends es{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function Fb(t){return Se(t.integerValue||t.doubleValue)}function JA(t){return wc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var xi=class{constructor(e,n){this.field=e,this.transform=n}};function C2(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Qn&&i instanceof Qn||r instanceof Yn&&i instanceof Yn?Yo(r.elements,i.elements,An):r instanceof Pr&&i instanceof Pr?An(r.Ie,i.Ie):r instanceof Rr&&i instanceof Rr}(t.transform,e.transform)}var ev=class{constructor(e,n){this.version=e,this.transformResults=n}},Me=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Fd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ts=class{};function eS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Or(t.key,Me.none()):new Nr(t.key,t.data,Me.none());{let n=t.data,r=ut.empty(),i=new fe(Ne.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new tn(t.key,r,new Mt(i.toArray()),Me.none())}}function T2(t,e,n){t instanceof Nr?function(i,o,s){let a=i.value.clone(),c=Lb(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof tn?function(i,o,s){if(!Fd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=Lb(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(tS(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function hc(t,e,n,r){return t instanceof Nr?function(o,s,a,c){if(!Fd(o.precondition,s))return a;let u=o.value.clone(),l=jb(o.fieldTransforms,c,s);return u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof tn?function(o,s,a,c){if(!Fd(o.precondition,s))return a;let u=jb(o.fieldTransforms,c,s),l=s.data;return l.setAll(tS(o)),l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,a){return Fd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function b2(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=YA(r.transform,i||null);o!=null&&(n===null&&(n=ut.empty()),n.set(r.field,o))}return n||null}function Vb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Yo(r,i,(o,s)=>C2(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Nr=class extends ts{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},tn=class extends ts{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function tS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function Lb(t,e,n){let r=new Map;k(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,D2(s,a,n[i]))}return r}function jb(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,I2(o,s,e))}return r}var Or=class extends ts{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ec=class extends ts{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ic=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&T2(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=hc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=hc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=GA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=eS(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(V.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),W())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,(n,r)=>Vb(n,r))&&Yo(this.baseMutations,e.baseMutations,(n,r)=>Vb(n,r))}},tv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){k(e.mutations.length===r.length);let i=function(){return _2}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Dc=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var nv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Fe,re;function nS(t){switch(t){default:return x();case g.CANCELLED:case g.UNKNOWN:case g.DEADLINE_EXCEEDED:case g.RESOURCE_EXHAUSTED:case g.INTERNAL:case g.UNAVAILABLE:case g.UNAUTHENTICATED:return!1;case g.INVALID_ARGUMENT:case g.NOT_FOUND:case g.ALREADY_EXISTS:case g.PERMISSION_DENIED:case g.FAILED_PRECONDITION:case g.ABORTED:case g.OUT_OF_RANGE:case g.UNIMPLEMENTED:case g.DATA_LOSS:return!0}}function rS(t){if(t===void 0)return Pe("GRPC error has no .code"),g.UNKNOWN;switch(t){case Fe.OK:return g.OK;case Fe.CANCELLED:return g.CANCELLED;case Fe.UNKNOWN:return g.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return g.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return g.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return g.INTERNAL;case Fe.UNAVAILABLE:return g.UNAVAILABLE;case Fe.UNAUTHENTICATED:return g.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return g.INVALID_ARGUMENT;case Fe.NOT_FOUND:return g.NOT_FOUND;case Fe.ALREADY_EXISTS:return g.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return g.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return g.FAILED_PRECONDITION;case Fe.ABORTED:return g.ABORTED;case Fe.OUT_OF_RANGE:return g.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return g.UNIMPLEMENTED;case Fe.DATA_LOSS:return g.DATA_LOSS;default:return x()}}(re=Fe||(Fe={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";var Bb=null;function iS(){return new TextEncoder}var A2=new yi([4294967295,4294967295],0);function Ub(t){let e=iS().encode(t),n=new wb;return n.update(e),new Uint8Array(n.digest())}function $b(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new yi([n,r],0),new yi([i,o],0)]}var rv=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ci(`Invalid padding: ${n}`);if(r<0)throw new Ci(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ci(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ci(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=yi.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(yi.fromNumber(r)));return i.compare(A2)===1&&(i=new yi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=Ub(e),[r,i]=$b(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let n=Ub(e),[r,i]=$b(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Re(s)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Ci=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Cc=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Tc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(V.min(),i,new ve(G),It(),W())}},Tc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,W(),W(),W())}};var Qo=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},Zd=class{constructor(e,n){this.targetId=e,this.fe=n}},Xd=class{constructor(e,n,r=We.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Jd=class{constructor(){this.ge=0,this.pe=Hb(),this.ye=We.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=W(),n=W(),r=W();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:x()}}),new Tc(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=Hb()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,k(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},iv=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=It(),this.Qe=qb(),this.Ke=new ve(G)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:x()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let o=i.target;if(Kd(o))if(r===0){let s=new b(o.path);this.We(n,s,Be.newNoDocument(s,V.min()))}else k(r===1);else{let s=this.Ze(n);if(s!==r){let a=this.Xe(e),c=a?this.et(a,e,s):1;if(c!==0){this.He(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}Bb?.tt(function(l,d,h,f,v){var _,m,E,R,T,P;let B={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},z=d.unchangedNames;return z&&(B.bloomFilter={applied:v===0,hashCount:(_=z?.hashCount)!==null&&_!==void 0?_:0,bitmapLength:(R=(E=(m=z?.bits)===null||m===void 0?void 0:m.bitmap)===null||E===void 0?void 0:E.length)!==null&&R!==void 0?R:0,padding:(P=(T=z?.bits)===null||T===void 0?void 0:T.padding)!==null&&P!==void 0?P:0,mightContain:pe=>{var xt;return(xt=f?.mightContain(pe))!==null&&xt!==void 0&&xt}}),B}(s,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Sr(r).toUint8Array()}catch(c){if(c instanceof zd)return jt("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new rv(s,i,o)}catch(c){return jt(c instanceof Ci?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&Kd(a.target)){let c=new b(a.target.path);this.qe.get(c)!==null||this.st(s,c)||this.We(s,c,Be.newNoDocument(c,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=W();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));let i=new Cc(e,n,this.Ke,this.qe,r);return this.qe=It(),this.Qe=qb(),this.Ke=new ve(G),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Jd,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new fe(G),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||I("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Jd),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function qb(){return new ve(b.comparator)}function Hb(){return new ve(b.comparator)}var S2={asc:"ASCENDING",desc:"DESCENDING"},M2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},x2={and:"AND",or:"OR"},ov=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function sv(t,e){return t.useProto3Json||Lc(e)?e:{value:e}}function ns(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function R2(t,e){return ns(t,e.toTimestamp())}function Oe(t){return k(!!t),V.fromTimestamp(function(n){let r=Ar(n);return new De(r.seconds,r.nanos)}(t))}function P_(t,e){return av(t,e).canonicalString()}function av(t,e){let n=function(i){return new ie(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function sS(t){let e=ie.fromString(t);return k(mS(e)),e}function bc(t,e){return P_(t.databaseId,e.path)}function Tn(t,e){let n=sS(e);if(n.get(1)!==t.databaseId.projectId)throw new w(g.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new w(g.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new b(uS(n))}function aS(t,e){return P_(t.databaseId,e)}function cS(t){let e=sS(t);return e.length===4?ie.emptyPath():uS(e)}function cv(t){return new ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uS(t){return k(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function zb(t,e,n){return{name:bc(t,e),fields:n.value.mapValue.fields}}function lS(t,e,n){let r=Tn(t,e.name),i=Oe(e.updateTime),o=e.createTime?Oe(e.createTime):V.min(),s=new ut({mapValue:{fields:e.fields}}),a=Be.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function P2(t,e){return"found"in e?function(r,i){k(!!i.found),i.found.name,i.found.updateTime;let o=Tn(r,i.found.name),s=Oe(i.found.updateTime),a=i.found.createTime?Oe(i.found.createTime):V.min(),c=new ut({mapValue:{fields:i.found.fields}});return Be.newFoundDocument(o,s,a,c)}(t,e):"missing"in e?function(r,i){k(!!i.missing),k(!!i.readTime);let o=Tn(r,i.missing),s=Oe(i.readTime);return Be.newNoDocument(o,s)}(t,e):x()}function N2(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:x()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,l){return u.useProto3Json?(k(l===void 0||typeof l=="string"),We.fromBase64String(l||"")):(k(l===void 0||l instanceof Uint8Array),We.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let l=u.code===void 0?g.UNKNOWN:rS(u.code);return new w(l,u.message||"")}(s);n=new Xd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Tn(t,r.document.name),o=Oe(r.document.updateTime),s=r.document.createTime?Oe(r.document.createTime):V.min(),a=new ut({mapValue:{fields:r.document.fields}}),c=Be.newFoundDocument(i,o,s,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new Qo(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Tn(t,r.document),o=r.readTime?Oe(r.readTime):V.min(),s=Be.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Qo([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Tn(t,r.document),o=r.removedTargetIds||[];n=new Qo([],o,i,null)}else{if(!("filter"in e))return x();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new nv(i,o),a=r.targetId;n=new Zd(a,s)}}return n}function Ac(t,e){let n;if(e instanceof Nr)n={update:zb(t,e.key,e.value)};else if(e instanceof Or)n={delete:bc(t,e.key)};else if(e instanceof tn)n={update:zb(t,e.key,e.data),updateMask:j2(e.fieldMask)};else{if(!(e instanceof Ec))return x();n={verify:bc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Rr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qn)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Yn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Pr)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw x()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:R2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:x()}(t,e.precondition)),n}function uv(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Me.updateTime(Oe(o.updateTime)):o.exists!==void 0?Me.exists(o.exists):Me.none()}(e.currentDocument):Me.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)k(a.setToServerValue==="REQUEST_TIME"),c=new Rr;else if("appendMissingElements"in a){let l=a.appendMissingElements.values||[];c=new Qn(l)}else if("removeAllFromArray"in a){let l=a.removeAllFromArray.values||[];c=new Yn(l)}else"increment"in a?c=new Pr(s,a.increment):x();let u=Ne.fromServerFormat(a.fieldPath);return new xi(u,c)}(t,i)):[];if(e.update){e.update.name;let i=Tn(t,e.update.name),o=new ut({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let u=c.fieldPaths||[];return new Mt(u.map(l=>Ne.fromServerFormat(l)))}(e.updateMask);return new tn(i,o,s,n,r)}return new Nr(i,o,n,r)}if(e.delete){let i=Tn(t,e.delete);return new Or(i,n)}if(e.verify){let i=Tn(t,e.verify);return new Ec(i,n)}return x()}function O2(t,e){return t&&t.length>0?(k(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Oe(i.updateTime):Oe(o);return s.isEqual(V.min())&&(s=Oe(o)),new ev(s,i.transformResults||[])}(n,e))):[]}function dS(t,e){return{documents:[aS(t,e.path)]}}function hS(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=aS(t,i);let o=function(u){if(u.length!==0)return gS(le.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(l=>function(h){return{field:qo(h.field),direction:F2(h.dir)}}(l))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=sv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ut:n,parent:i}}function fS(t){let e=cS(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){k(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];n.where&&(o=function(d){let h=pS(d);return h instanceof le&&M_(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(v){return new Si(Ho(v.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Lc(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new Sn(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){let h=!d.before,f=d.values||[];return new Sn(f,h)}(n.endAt)),BA(e,i,s,o,a,"F",c,u)}function k2(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return x()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function pS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ho(n.unaryFilter.field);return te.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ho(n.unaryFilter.field);return te.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ho(n.unaryFilter.field);return te.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ho(n.unaryFilter.field);return te.create(s,"!=",{nullValue:"NULL_VALUE"});default:return x()}}(t):t.fieldFilter!==void 0?function(n){return te.create(Ho(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return x()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return le.create(n.compositeFilter.filters.map(r=>pS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return x()}}(n.compositeFilter.op))}(t):x()}function F2(t){return S2[t]}function V2(t){return M2[t]}function L2(t){return x2[t]}function qo(t){return{fieldPath:t.canonicalString()}}function Ho(t){return Ne.fromServerFormat(t.fieldPath)}function gS(t){return t instanceof te?function(n){if(n.op==="=="){if(Sb(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NAN"}};if(Ab(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sb(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NOT_NAN"}};if(Ab(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qo(n.field),op:V2(n.op),value:n.value}}}(t):t instanceof le?function(n){let r=n.getFilters().map(i=>gS(i));return r.length===1?r[0]:{compositeFilter:{op:L2(n.op),filters:r}}}(t):x()}function j2(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var rs=class t{constructor(e,n,r,i,o=V.min(),s=V.min(),a=We.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var eh=class{constructor(e){this.ct=e}};function B2(t,e){let n;if(e.document)n=lS(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=b.fromSegments(e.noDocument.path),i=Pi(e.noDocument.readTime);n=Be.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return x();{let r=b.fromSegments(e.unknownDocument.path),i=Pi(e.unknownDocument.version);n=Be.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new De(i[0],i[1]);return V.fromTimestamp(o)}(e.readTime)),n}function Gb(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:th(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:bc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:ns(o,s.version.toTimestamp()),createTime:ns(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ri(e.version)};else{if(!e.isUnknownDocument())return x();r.unknownDocument={path:n.path.toArray(),version:Ri(e.version)}}return r}function th(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ri(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Pi(t){let e=new De(t.seconds,t.nanoseconds);return V.fromTimestamp(e)}function Ei(t,e){let n=(e.baseMutations||[]).map(o=>uv(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>uv(t.ct,o)),i=De.fromMillis(e.localWriteTimeMs);return new Ic(e.batchId,i,n,r)}function uc(t){let e=Pi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Pi(t.lastLimboFreeSnapshotVersion):V.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return k(o.documents.length===1),yt(fs(cS(o.documents[0])))}(t.query):function(o){return yt(fS(o))}(t.query),new rs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,We.fromBase64String(t.resumeToken))}function yS(t,e){let n=Ri(e.snapshotVersion),r=Ri(e.lastLimboFreeSnapshotVersion),i;i=Kd(e.target)?dS(t.ct,e.target):hS(t.ct,e.target).ut;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mi(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function N_(t){let e=fS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yd(e,e.limit,"L"):e}function Cy(t,e){return new Dc(e.largestBatchId,uv(t.ct,e.overlayMutation))}function Wb(t,e){let n=e.path.lastSegment();return[t,mt(e.path.popLast()),n]}function Kb(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ri(r.readTime),documentKey:mt(r.documentKey.path),largestBatchId:r.largestBatchId}}var lv=class{getBundleMetadata(e,n){return Qb(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Pi(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return Qb(e).put(function(i){return{bundleId:i.id,createTime:Ri(Oe(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return Yb(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:N_(o.bundledQuery),readTime:Pi(o.readTime)}}(r)})}saveNamedQuery(e,n){return Yb(e).put(function(i){return{name:i.name,readTime:Ri(Oe(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function Qb(t){return Ke(t,"bundles")}function Yb(t){return Ke(t,"namedQueries")}var nh=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return ic(e).get(Wb(this.userId,n)).next(r=>r?Cy(this.serializer,r):null)}getOverlays(e,n){let r=Dn();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new Dc(n,s);i.push(this.ht(e,a))}),p.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(mt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(ic(e).H("collectionPathOverlayIndex",a))}),p.waitFor(o)}getOverlaysForCollection(e,n,r){let i=Dn(),o=mt(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return ic(e).W("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let u=Cy(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=Dn(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ic(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,u,l)=>{let d=Cy(this.serializer,u);o.size()<i||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):l.done()}).next(()=>o)}ht(e,n){return ic(e).put(function(i,o,s){let[a,c,u]=Wb(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Ac(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function ic(t){return Ke(t,"documentOverlays")}var Gn=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Se(e.integerValue));else if("doubleValue"in e){let r=Se(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),mc(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Sr(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?NA(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):x()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),b.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Gn.bt=new Gn;function U2(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Zb(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=U2(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var dv=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Bt(e){let n=this.Lt(e),r=Zb(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Lt(e),r=Zb(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},hv=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}},fv=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Ii=class{constructor(){this.Gt=new dv,this.zt=new hv(this.Gt),this.jt=new fv(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Di=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function wr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Xb(t.arrayValue,e.arrayValue),n!==0?n:(n=Xb(t.directionalValue,e.directionalValue),n!==0?n:b.comparator(t.documentKey,e.documentKey)))}function Xb(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var rh=class{constructor(e){this.Yt=new fe((n,r)=>Ne.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(k(e.collectionGroup===this.collectionId),this.en)return!1;let n=ky(e);if(n!==void 0&&!this.nn(n))return!1;let r=_i(e),i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.rn(a,c)||!this.sn(this.Zt[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new fe(Ne.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Wo(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Wo(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Wo(r.field,r.dir==="asc"?0:1)));return new Zo(Zo.UNKNOWN_ID,this.collectionId,n,gc.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function vS(t){var e,n;if(k(t instanceof te||t instanceof le),t instanceof te){if(t instanceof Wd){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>te.create(t.field,"==",o)))||[];return le.create(i,"or")}return t}let r=t.filters.map(i=>vS(i));return le.create(r,t.op)}function $2(t){if(t.getFilters().length===0)return[];let e=mv(vS(t));return k(_S(e)),pv(e)||gv(e)?[e]:e.getFilters()}function pv(t){return t instanceof te}function gv(t){return t instanceof le&&M_(t)}function _S(t){return pv(t)||gv(t)||function(n){if(n instanceof le&&qy(n)){for(let r of n.getFilters())if(!pv(r)&&!gv(r))return!1;return!0}return!1}(t)}function mv(t){if(k(t instanceof te||t instanceof le),t instanceof te)return t;if(t.filters.length===1)return mv(t.filters[0]);let e=t.filters.map(r=>mv(r)),n=le.create(e,t.op);return n=ih(n),_S(n)?n:(k(n instanceof le),k(Jo(n)),k(n.filters.length>1),n.filters.reduce((r,i)=>O_(r,i)))}function O_(t,e){let n;return k(t instanceof te||t instanceof le),k(e instanceof te||e instanceof le),n=t instanceof te?e instanceof te?function(i,o){return le.create([i,o],"and")}(t,e):Jb(t,e):e instanceof te?Jb(e,t):function(i,o){if(k(i.filters.length>0&&o.filters.length>0),Jo(i)&&Jo(o))return VA(i,o.getFilters());let s=qy(i)?i:o,a=qy(i)?o:i,c=s.filters.map(u=>O_(u,a));return le.create(c,"or")}(t,e),ih(n)}function Jb(t,e){if(Jo(e))return VA(e,t.getFilters());{let n=e.filters.map(r=>O_(t,r));return le.create(n,"or")}}function ih(t){if(k(t instanceof te||t instanceof le),t instanceof te)return t;let e=t.getFilters();if(e.length===1)return ih(e[0]);if(kA(t))return t;let n=e.map(i=>ih(i)),r=[];return n.forEach(i=>{i instanceof te?r.push(i):i instanceof le&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:le.create(r,t.op)}var yv=class{constructor(){this._n=new Sc}addToCollectionParentIndex(e,n){return this._n.add(n),p.resolve()}getCollectionParents(e,n){return p.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return p.resolve()}deleteFieldIndex(e,n){return p.resolve()}deleteAllFieldIndexes(e){return p.resolve()}createTargetIndexes(e,n){return p.resolve()}getDocumentsMatchingTarget(e,n){return p.resolve(null)}getIndexType(e,n){return p.resolve(0)}getFieldIndexes(e,n){return p.resolve([])}getNextCollectionGroupToUpdate(e){return p.resolve(null)}getMinOffset(e,n){return p.resolve(Bt.min())}getMinOffsetFromCollectionGroup(e,n){return p.resolve(Bt.min())}updateCollectionGroup(e,n,r){return p.resolve()}updateIndexEntries(e,n){return p.resolve()}},Sc=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new fe(ie.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new fe(ie.comparator)).toArray()}};var Md=new Uint8Array(0),vv=class{constructor(e,n){this.databaseId=n,this.an=new Sc,this.un=new Mn(r=>Mi(r),(r,i)=>jc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:r,parent:mt(i)};return eA(e).put(o)}return p.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[IA(n),""],!1,!0);return eA(e).W(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(In(s.parent))}return r})}addFieldIndex(e,n){let r=oc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=jo(e);return o.next(a=>{s.put(Kb(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=oc(e),i=jo(e),o=Lo(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=oc(e),r=Lo(e),i=jo(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return p.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new rh(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=Lo(e),i=!0,o=new Map;return p.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=W(),a=[];return p.forEach(o,(c,u)=>{I("IndexedDbIndexManager",`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(P=>`${P.fieldPath}:${P.kind}`).join(",")}`}(c)} to execute ${Mi(n)}`);let l=function(T,P){let B=ky(P);if(B===void 0)return null;for(let z of Qd(T,B.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null}(u,c),d=function(T,P){let B=new Map;for(let z of _i(P))for(let pe of Qd(T,z.fieldPath))switch(pe.op){case"==":case"in":B.set(z.fieldPath.canonicalString(),pe.value);break;case"not-in":case"!=":return B.set(z.fieldPath.canonicalString(),pe.value),Array.from(B.values())}return null}(u,c),h=function(T,P){let B=[],z=!0;for(let pe of _i(P)){let xt=pe.kind===0?Nb(T,pe.fieldPath,T.startAt):Ob(T,pe.fieldPath,T.startAt);B.push(xt.value),z&&(z=xt.inclusive)}return new Sn(B,z)}(u,c),f=function(T,P){let B=[],z=!0;for(let pe of _i(P)){let xt=pe.kind===0?Ob(T,pe.fieldPath,T.endAt):Nb(T,pe.fieldPath,T.endAt);B.push(xt.value),z&&(z=xt.inclusive)}return new Sn(B,z)}(u,c),v=this.hn(c,u,h),_=this.hn(c,u,f),m=this.Pn(c,u,d),E=this.In(c.indexId,l,v,h.inclusive,_,f.inclusive,m);return p.forEach(E,R=>r.j(R,n.limit).next(T=>{T.forEach(P=>{let B=b.fromSegments(P.documentKey);s.has(B)||(s=s.add(B),a.push(B))})}))}).next(()=>a)}return p.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=$2(le.create(e.filters,"and")).map(r=>Xy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){let c=(n!=null?n.length:1)*Math.max(r.length,o.length),u=c/(n!=null?n.length:1),l=[];for(let d=0;d<c;++d){let h=n?this.Tn(n[d/u]):Md,f=this.En(e,h,r[d%u],i),v=this.dn(e,h,o[d%u],s),_=a.map(m=>this.En(e,h,m,!0));l.push(...this.createRange(f,v,_))}return l}En(e,n,r,i){let o=new Di(e,b.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){let o=new Di(e,b.empty(),n,r);return i?o.Jt():o}ln(e,n){let r=new rh(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.cn(n);return p.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let u=new fe(Ne.comparator),l=!1;for(let d of c.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?l=!0:u=u.add(h.field));for(let d of c.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(l?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new Ii;for(let i of _i(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Ht(i.kind);Gn.bt.Pt(o,s)}return r.Wt()}Tn(e){let n=new Ii;return Gn.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new Ii;return Gn.bt.Pt(Ai(this.databaseId,n),r.Ht(function(o){let s=_i(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new Ii);let o=0;for(let s of _i(e)){let a=r[o++];for(let c of i)if(this.Vn(n,s.fieldPath)&&wc(a))i=this.mn(i,s,a);else{let u=c.Ht(s.kind);Gn.bt.Pt(a,u)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Ii;c.seed(a.Wt()),Gn.bt.Pt(s,c.Ht(n.kind)),o.push(c)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof te&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=oc(e),i=jo(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{let s=[];return p.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(l,d){let h=d?new gc(d.sequenceNumber,new Bt(Pi(d.readTime),new b(In(d.documentKey)),d.largestBatchId)):gc.empty(),f=l.fields.map(([v,_])=>new Wo(Ne.fromServerFormat(v),_));return new Zo(l.indexId,l.collectionGroup,f,h)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:G(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=oc(e),o=jo(e);return this.gn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>p.forEach(a,c=>o.put(Kb(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return p.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?p.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),p.forEach(a,c=>this.pn(e,i,c).next(u=>{let l=this.yn(o,c);return u.isEqual(l)?p.resolve():this.wn(e,o,c,u,l)}))))})}Sn(e,n,r,i){return Lo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Lo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=Lo(e),o=new fe(wr);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new Di(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new fe(wr),i=this.An(n,e);if(i==null)return r;let o=ky(n);if(o!=null){let s=e.data.field(o.fieldPath);if(wc(s))for(let a of s.arrayValue.values||[])r=r.add(new Di(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new Di(n.indexId,e.key,Md,i));return r}wn(e,n,r,i,o){I("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,u,l,d,h){let f=c.getIterator(),v=u.getIterator(),_=Vo(f),m=Vo(v);for(;_||m;){let E=!1,R=!1;if(_&&m){let T=l(_,m);T<0?R=!0:T>0&&(E=!0)}else _!=null?R=!0:E=!0;E?(d(m),m=Vo(v)):R?(h(_),_=Vo(f)):(_=Vo(f),m=Vo(v))}}(i,o,wr,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),p.waitFor(s)}gn(e){let n=1;return jo(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>wr(s,a)).filter((s,a,c)=>!a||wr(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=wr(s,e),c=wr(s,n);if(a===0)i[0]=e.Jt();else if(a>0&&c<0)i.push(s),i.push(s.Jt());else if(c>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Md,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Md,[]];o.push(IDBKeyRange.bound(a,c))}return o}Dn(e,n){return wr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(tA)}getMinOffset(e,n){return p.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||x())).next(tA)}};function eA(t){return Ke(t,"collectionParents")}function Lo(t){return Ke(t,"indexEntries")}function oc(t){return Ke(t,"indexConfiguration")}function jo(t){return Ke(t,"indexState")}function tA(t){k(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;b_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Bt(e.readTime,e.documentKey,n)}var nA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function wS(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=r.Y({range:s},(l,d,h)=>(a++,h.delete()));o.push(c.next(()=>{k(a===1)}));let u=[];for(let l of n.mutations){let d=AA(e,l.key.path,n.batchId);o.push(i.delete(d)),u.push(l.key)}return p.waitFor(o).next(()=>u)}function oh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw x();e=t.noDocument}return JSON.stringify(e).length}Lt.DEFAULT_COLLECTION_PERCENTILE=10,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lt.DEFAULT=new Lt(41943040,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lt.DISABLED=new Lt(-1,0,0);var sh=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){k(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Er(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=zo(e),s=Er(e);return s.add({}).next(a=>{k(typeof a=="number");let c=new Ic(a,n,r,i),u=function(f,v,_){let m=_.baseMutations.map(R=>Ac(f.ct,R)),E=_.mutations.map(R=>Ac(f.ct,R));return{userId:v,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:m,mutations:E}}(this.serializer,this.userId,c),l=[],d=new fe((h,f)=>G(h.canonicalString(),f.canonicalString()));for(let h of i){let f=AA(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),l.push(s.put(u)),l.push(o.put(f,QL))}return d.forEach(h=>{l.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),p.waitFor(l).next(()=>c)})}lookupMutationBatch(e,n){return Er(e).get(n).next(r=>r?(k(r.userId===this.userId),Ei(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?p.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Er(e).Y({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(k(a.batchId>=r),o=Ei(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Er(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Er(e).W("userMutationsIndex",n).next(r=>r.map(i=>Ei(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=Nd(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return zo(e).Y({range:i},(s,a,c)=>{let[u,l,d]=s,h=In(l);if(u===this.userId&&n.path.isEqual(h))return Er(e).get(d).next(f=>{if(!f)throw x();k(f.userId===this.userId),o.push(Ei(this.serializer,f))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new fe(G),i=[];return n.forEach(o=>{let s=Nd(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=zo(e).Y({range:a},(u,l,d)=>{let[h,f,v]=u,_=In(f);h===this.userId&&o.path.isEqual(_)?r=r.add(v):d.done()});i.push(c)}),p.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=Nd(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new fe(G);return zo(e).Y({range:s},(c,u,l)=>{let[d,h,f]=c,v=In(h);d===this.userId&&r.isPrefixOf(v)?v.length===i&&(a=a.add(f)):l.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(Er(e).get(o).next(s=>{if(s===null)throw x();k(s.userId===this.userId),r.push(Ei(this.serializer,s))}))}),p.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return wS(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),p.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return p.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return zo(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=In(o[1]);i.push(c)}else a.done()}).next(()=>{k(i.length===0)})})}containsKey(e,n){return ES(e,this.userId,n)}xn(e){return IS(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function ES(t,e,n){let r=Nd(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return zo(t).Y({range:o,J:!0},(a,c,u)=>{let[l,d,h]=a;l===e&&d===i&&(s=!0),u.done()}).next(()=>s)}function Er(t){return Ke(t,"mutations")}function zo(t){return Ke(t,"documentMutations")}function IS(t){return Ke(t,"mutationQueues")}var is=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Bn(){return new t(-1)}};var _v=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{let r=new is(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>V.fromTimestamp(new De(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Bo(e).delete(n.targetId)).next(()=>this.Ln(e)).next(r=>(k(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return Bo(e).Y((s,a)=>{let c=uc(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>p.waitFor(o)).next(()=>i)}forEachTarget(e,n){return Bo(e).Y((r,i)=>{let o=uc(i);n(o)})}Ln(e){return rA(e).get("targetGlobalKey").next(n=>(k(n!==null),n))}kn(e,n){return rA(e).put("targetGlobalKey",n)}qn(e,n){return Bo(e).put(yS(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Mi(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Bo(e).Y({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let u=uc(a);jc(n,u.target)&&(o=u,c.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=Ir(e);return n.forEach(s=>{let a=mt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),p.waitFor(i)}removeMatchingKeys(e,n,r){let i=Ir(e);return p.forEach(n,o=>{let s=mt(o.path);return p.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=Ir(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ir(e),o=W();return i.Y({range:r,J:!0},(s,a,c)=>{let u=In(s[1]),l=new b(u);o=o.add(l)}).next(()=>o)}containsKey(e,n){let r=mt(n.path),i=IDBKeyRange.bound([r],[IA(r)],!1,!0),o=0;return Ir(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],c,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}_t(e,n){return Bo(e).get(n).next(r=>r?uc(r):null)}};function Bo(t){return Ke(t,"targets")}function rA(t){return Ke(t,"targetGlobal")}function Ir(t){return Ke(t,"targetDocuments")}function iA([t,e],[n,r]){let i=G(t,n);return i===0?G(e,r):i}var wv=class{constructor(e){this.Kn=e,this.buffer=new fe(iA),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();iA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},Ev=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){I("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>y(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Vr(n)?I("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Fr(n)}yield this.zn(3e5)}))}},Iv=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return p.resolve(St._e);let r=new wv(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(I("LruGarbageCollector","Garbage collection skipped; disabled"),p.resolve(nA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(I("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nA):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,c,u,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(I("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(o=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),Uo()<=on.DEBUG&&I("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-l}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-l}ms`),p.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})))}};function q2(t,e){return new Iv(t,e)}var Dv=class{constructor(e,n){this.db=e,this.garbageCollector=q2(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return xd(e,r)}removeReference(e,n,r){return xd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return xd(e,n)}er(e,n){return function(i,o){let s=!1;return IS(i).Z(a=>ES(i,a,o).next(c=>(c&&(s=!0),p.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Xn(e,(s,a)=>{if(a<=n){let c=this.er(e,s).next(u=>{if(!u)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,V.min()),Ir(e).delete(function(d){return[0,mt(d.path)]}(s))))});i.push(c)}}).next(()=>p.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return xd(e,n)}Xn(e,n){let r=Ir(e),i,o=St._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:u})=>{s===0?(o!==St._e&&n(new b(In(i)),o),o=u,i=c):o=St._e}).next(()=>{o!==St._e&&n(new b(In(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function xd(t,e){return Ir(t).put(function(r,i){return{targetId:0,path:mt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var ah=class{constructor(){this.changes=new Mn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Be.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?p.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Cv=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return vi(e).put(r)}removeEntry(e,n,r){return vi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],th(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Be.newInvalidDocument(n);return vi(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(sc(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:Be.newInvalidDocument(n)};return vi(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(sc(n))},(i,o)=>{r={document:this.nr(n,o),size:oh(o)}}).next(()=>r)}getEntries(e,n){let r=It();return this.ir(e,n,(i,o)=>{let s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=It(),i=new ve(b.comparator);return this.ir(e,n,(o,s)=>{let a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,oh(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return p.resolve();let i=new fe(aA);n.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(sc(i.first()),sc(i.last())),s=i.getIterator(),a=s.getNext();return vi(e).Y({index:"documentKeyIndex",range:o},(c,u,l)=>{let d=b.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&aA(a,d)<0;)r(a,null),a=s.getNext();a&&a.isEqual(d)&&(r(a,u),a=s.hasNext()?s.getNext():null),a?l.U(sc(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),th(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vi(e).W(IDBKeyRange.bound(a,c,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let l=It();for(let d of u){let h=this.nr(b.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(Uc(n,h)||i.has(h.key))&&(l=l.insert(h.key,h))}return l})}getAllFromCollectionGroup(e,n,r,i){let o=It(),s=sA(n,r),a=sA(n,Bt.max());return vi(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,u,l)=>{let d=this.nr(b.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(d.key,d),o.size===i&&l.done()}).next(()=>o)}newChangeBuffer(e){return new Tv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return oA(e).get("remoteDocumentGlobalKey").next(n=>(k(!!n),n))}tr(e,n){return oA(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=B2(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(V.min())))return r}return Be.newInvalidDocument(e)}};function DS(t){return new Cv(t)}var Tv=class extends ah{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Mn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new fe((o,s)=>G(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=Gb(this.ar.serializer,s);i=i.add(o.path.popLast());let u=oh(c);r+=u-a.size,n.push(this.ar.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=Gb(this.ar.serializer,s.convertToNoDocument(V.min()));n.push(this.ar.addEntry(e,o,c))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),p.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function oA(t){return Ke(t,"remoteDocumentGlobal")}function vi(t){return Ke(t,"remoteDocumentsV14")}function sc(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function sA(t,e){let n=e.documentKey.path.toArray();return[t,th(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function aA(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=G(n[o],r[o]),i)return i;return i=G(n.length,r.length),i||(i=G(n[n.length-2],r[r.length-2]),i||G(n[n.length-1],r[r.length-1]))}var bv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var ch=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&hc(r.mutation,i,Mt.empty(),De.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,W()).next(()=>r))}getLocalViewOfDocuments(e,n,r=W()){let i=Dn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=cc();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Dn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,W()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=It(),s=dc(),a=function(){return dc()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof tn)?o=o.insert(u.key,u):l!==void 0?(s.set(u.key,l.mutation.getFieldMask()),hc(l.mutation,u,l.mutation.getFieldMask(),De.now())):s.set(u.key,Mt.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,l)=>s.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new bv(l,(d=s.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=dc(),i=new ve((s,a)=>s-a),o=W();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||Mt.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||W()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=GA();l.forEach(h=>{if(!o.has(h)){let f=eS(n.get(h),r.get(h));f!==null&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,d))}return p.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return b.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):x_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):p.resolve(Dn()),a=-1,c=o;return s.next(u=>p.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(l)?p.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,W())).next(l=>({batchId:a,changes:zA(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new b(n)).next(r=>{let i=cc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=cc();return this.indexManager.getCollectionParents(e,o).next(a=>p.forEach(a,c=>{let u=function(d,h){return new en(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,u)=>{let l=u.getKey();s.get(l)===null&&(s=s.insert(l,Be.newInvalidDocument(l)))});let a=cc();return s.forEach((c,u)=>{let l=o.get(c);l!==void 0&&hc(l.mutation,u,Mt.empty(),De.now()),Uc(n,u)&&(a=a.insert(c,u))}),a})}};var Av=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return p.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Oe(i.createTime)}}(n)),p.resolve()}getNamedQuery(e,n){return p.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:N_(i.bundledQuery),readTime:Oe(i.readTime)}}(n)),p.resolve()}};var Sv=class{constructor(){this.overlays=new ve(b.comparator),this.hr=new Map}getOverlay(e,n){return p.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Dn();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),p.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),p.resolve()}getOverlaysForCollection(e,n,r){let i=Dn(),o=n.length+1,s=new b(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return p.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new ve((u,l)=>u-l),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=o.get(u.largestBatchId);l===null&&(l=Dn(),o=o.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=Dn(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return p.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Dc(n,r));let o=this.hr.get(n);o===void 0&&(o=W(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}};var Mc=class{constructor(){this.Pr=new fe(Ve.Ir),this.Tr=new fe(Ve.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new Ve(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Ve(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new b(new ie([])),r=new Ve(n,e),i=new Ve(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new b(new ie([])),r=new Ve(n,e),i=new Ve(n,e+1),o=W();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ve(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ve=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return b.comparator(e.key,n.key)||G(e.pr,n.pr)}static Er(e,n){return G(e.pr,n.pr)||b.comparator(e.key,n.key)}};var Mv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new fe(Ve.Ir)}checkEmpty(e){return p.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Ic(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new Ve(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return p.resolve(s)}lookupMutationBatch(e,n){return p.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),o=i<0?0:i;return p.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return p.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return p.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ve(n,0),i=new Ve(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),p.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new fe(G);return n.forEach(i=>{let o=new Ve(i,0),s=new Ve(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),p.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;b.isDocumentKey(o)||(o=o.child(""));let s=new Ve(new b(o),0),a=new fe(G);return this.wr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},s),p.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){k(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return p.forEach(n.mutations,i=>{let o=new Ve(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new Ve(n,0),i=this.wr.firstAfterOrEqual(r);return p.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,p.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var xv=class{constructor(e){this.vr=e,this.docs=function(){return new ve(b.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return p.resolve(r?r.document.mutableCopy():Be.newInvalidDocument(n))}getEntries(e,n){let r=It();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Be.newInvalidDocument(i))}),p.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=It(),s=n.path,a=new b(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||b_(CA(l),r)<=0||(i.has(l.key)||Uc(n,l))&&(o=o.insert(l.key,l.mutableCopy()))}return p.resolve(o)}getAllFromCollectionGroup(e,n,r,i){x()}Fr(e,n){return p.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Rv(this)}getSize(e){return p.resolve(this.size)}},Rv=class extends ah{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),p.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var Pv=class{constructor(e){this.persistence=e,this.Mr=new Mn(n=>Mi(n),jc),this.lastRemoteSnapshotVersion=V.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Mc,this.targetCount=0,this.Br=is.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),p.resolve()}getLastRemoteSnapshotVersion(e){return p.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return p.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),p.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),p.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new is(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,p.resolve()}updateTargetData(e,n){return this.qn(n),p.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,p.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),p.waitFor(o).next(()=>i)}getTargetCount(e){return p.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return p.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),p.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),p.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),p.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return p.resolve(r)}containsKey(e,n){return p.resolve(this.Nr.containsKey(n))}};var uh=class{constructor(e,n){this.Lr={},this.overlays={},this.kr=new St(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Pv(this),this.indexManager=new yv,this.remoteDocumentCache=function(i){return new xv(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new eh(n),this.$r=new Av(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Sv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new Mv(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){I("MemoryPersistence","Starting transaction:",e);let i=new Nv(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return p.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},Nv=class extends $d{constructor(e){super(),this.currentSequenceNumber=e}},lh=class t{constructor(e){this.persistence=e,this.zr=new Mc,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw x()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),p.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),p.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),p.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return p.forEach(this.Jr,r=>{let i=b.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,V.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return p.or([()=>p.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Ov=class{constructor(e){this.serializer=e}N(e,n,r,i){let o=new qd("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Cb,{unique:!0}),c.createObjectStore("documentMutations")}(e),cA(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=p.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),cA(e)),s=s.next(()=>function(c){let u=c.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:V.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",l)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,u){return u.store("mutations").W().next(l=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Cb,{unique:!0});let d=u.store("mutations"),h=l.map(f=>d.put(f));return p.waitFor(h)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let u=c.createObjectStore("documentOverlays",{keyPath:a2});u.createIndex("collectionPathOverlayIndex",c2,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",u2,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let u=c.createObjectStore("remoteDocumentsV14",{keyPath:YL});u.createIndex("documentKeyIndex",ZL),u.createIndex("collectionGroupIndex",XL)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:r2}).createIndex("sequenceNumberIndex",i2,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:o2}).createIndex("documentKeyIndex",s2,{unique:!1})}(e))),s}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=oh(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>p.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>p.forEach(a,c=>{k(c.userId===o.userId);let u=Ei(this.serializer,c);return wS(e,o.userId,u).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.Y((s,a)=>{let c=new ie(s),u=function(d){return[0,mt(d)]}(c);o.push(n.get(u).next(l=>l?p.resolve():(d=>n.put({targetId:0,path:mt(d),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>p.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:n2});let r=n.store("collectionParents"),i=new Sc,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:mt(c)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{let c=new ie(s);return o(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,c],u)=>{let l=In(a);return o(l.popLast())}))}ri(e){let n=e.store("targets");return n.Y((r,i)=>{let o=uc(i),s=yS(this.serializer,o);return n.put(s)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(d){return d.document?new b(ie.fromString(d.document.name).popFirst(5)):d.noDocument?b.fromSegments(d.noDocument.path):d.unknownDocument?b.fromSegments(d.unknownDocument.path):x()}(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(u))}).next(()=>p.waitFor(i))}si(e,n){let r=n.store("mutations"),i=DS(this.serializer),o=new uh(lh.Hr,this.serializer.ct);return r.W().next(s=>{let a=new Map;return s.forEach(c=>{var u;let l=(u=a.get(c.userId))!==null&&u!==void 0?u:W();Ei(this.serializer,c).keys().forEach(d=>l=l.add(d)),a.set(c.userId,l)}),p.forEach(a,(c,u)=>{let l=new Le(u),d=nh.lt(this.serializer,l),h=o.getIndexManager(l),f=sh.lt(l,this.serializer,h,o.referenceDelegate);return new ch(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new yc(n,St._e),c).next()})})}};function cA(t){t.createObjectStore("targetDocuments",{keyPath:e2}).createIndex("documentTargetsIndex",t2,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",JL,{unique:!0}),t.createObjectStore("targetGlobal")}var Ty="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",kv=class t{constructor(e,n,r,i,o,s,a,c,u,l,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=u,this.ai=l,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!t.D())throw new w(g.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Dv(this,i),this.Ti=n+"main",this.serializer=new eh(c),this.Ei=new Kn(this.Ti,this.ui,new Ov(this.serializer)),this.Qr=new _v(this.referenceDelegate,this.serializer),this.remoteDocumentCache=DS(this.serializer),this.$r=new lv,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,l===!1&&Pe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new w(g.FAILED_PRECONDITION,Ty);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new St(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>y(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>y(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>y(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Rd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Vr(e))return I("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return I("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return ac(e).get("owner").next(n=>p.resolve(this.Si(n)))}bi(e){return Rd(e).delete(this.clientId)}Di(){return y(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=Ke(n,"clientMetadata");return r.W().next(i=>{let o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return p.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?p.resolve(!0):ac(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new w(g.FAILED_PRECONDITION,Ty);return!1}}return!(!this.networkEnabled||!this.inForeground)||Rd(e).W().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&I("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return y(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new yc(e,St._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Bi()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>Rd(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return sh.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new vv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return nh.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){I("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(c){return c===15?d2:c===14?xA:c===13?MA:c===12?l2:c===11?SA:void x()}(this.ui),s;return this.Ei.runTransaction(e,i,o,a=>(s=new yc(a,this.kr?this.kr.next():St._e),n==="readwrite-primary"?this.gi(s).next(c=>!!c||this.pi(s)).next(c=>{if(!c)throw Pe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new w(g.FAILED_PRECONDITION,TA);return r(s)}).next(c=>this.wi(s).next(()=>c)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return ac(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new w(g.FAILED_PRECONDITION,Ty)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ac(e).put("owner",n)}static D(){return Kn.D()}yi(e){let n=ac(e);return n.get("owner").next(r=>this.Si(r)?(I("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):p.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Pe(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;Xh()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return I("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Pe("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Pe("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function ac(t){return Ke(t,"owner")}function Rd(t){return Ke(t,"clientMetadata")}function k_(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Fv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=W(),i=W();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var Vv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var dh=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Xh()?8:Kn.v(Is())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Vv;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Uo()<=on.DEBUG&&I("QueryEngine","SDK will not create cache indexes for query:",$o(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),p.resolve()):(Uo()<=on.DEBUG&&I("QueryEngine","Query:",$o(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Uo()<=on.DEBUG&&I("QueryEngine","The SDK decides to create cache indexes for query:",$o(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yt(n))):p.resolve())}ji(e,n){if(kb(n))return p.resolve(null);let r=yt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Yd(n,null,"F"),r=yt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=W(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Zi(n,a);return this.Xi(n,u,s,c.readTime)?this.ji(e,Yd(n,null,"F")):this.es(e,u,n,c)}))})))}Hi(e,n,r,i){return kb(n)||i.isEqual(V.min())?p.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,r,i)?p.resolve(null):(Uo()<=on.DEBUG&&I("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$o(n)),this.es(e,s,n,DA(i,-1)).next(a=>a))})}Zi(e,n){let r=new fe(qA(e));return n.forEach((i,o)=>{Uc(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return Uo()<=on.DEBUG&&I("QueryEngine","Using full collection scan to execute query:",$o(n)),this.zi.getDocumentsMatchingQuery(e,n,Bt.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Lv=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new ve(G),this.rs=new Mn(o=>Mi(o),jc),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ch(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function CS(t,e,n,r){return new Lv(t,e,n,r)}function TS(t,e){return y(this,null,function*(){let n=S(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=W();for(let u of i){s.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of o){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:s,addedBatchIds:a}))})})})}function H2(t,e){let n=S(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let d=u.batch,h=d.keys(),f=p.resolve();return h.forEach(v=>{f=f.next(()=>l.getEntry(c,v)).next(_=>{let m=u.docVersions.get(v);k(m!==null),_.version.compareTo(m)<0&&(d.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),l.addEntry(_)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=W();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function bS(t){let e=S(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function z2(t,e){let n=S(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(o,l.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(o,l.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(We.EMPTY_BYTE_STRING,V.min()).withLastLimboFreeSnapshotVersion(V.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(_,m,E){return _.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(h,f,l)&&a.push(n.Qr.updateTargetData(o,f))});let c=It(),u=W();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(AS(o,s,e.documentUpdates).next(l=>{c=l.cs,u=l.ls})),!r.isEqual(V.min())){let l=n.Qr.getLastRemoteSnapshotVersion(o).next(d=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return p.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.ns=i,o))}function AS(t,e,n){let r=W(),i=W();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=It();return n.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(V.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):I("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:s,ls:i}})}function G2(t,e){let n=S(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function os(t,e){let n=S(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,p.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new rs(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function ss(t,e,n){return y(this,null,function*(){let r=S(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Vr(s))throw s;I("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function hh(t,e,n){let r=S(t),i=V.min(),o=W();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,l){let d=S(c),h=d.rs.get(l);return h!==void 0?p.resolve(d.ns.get(h)):d.Qr.getTargetData(u,l)}(r,s,yt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:V.min(),n?o:W())).next(a=>(xS(r,$A(e),a),{documents:a,hs:o})))}function SS(t,e){let n=S(t),r=S(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function MS(t,e){let n=S(t),r=n.ss.get(e)||V.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,DA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(xS(n,e,i),i))}function xS(t,e,n){let r=t.ss.get(e)||V.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}function W2(t,e,n,r){return y(this,null,function*(){let i=S(t),o=W(),s=It();for(let u of n){let l=e.Ps(u.metadata.name);u.document&&(o=o.add(l));let d=e.Is(u);d.setReadTime(e.Ts(u.metadata.readTime)),s=s.insert(l,d)}let a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield os(i,function(l){return yt(fs(ie.fromString(`__bundle__/docs/${l}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>AS(u,a,s).next(l=>(a.apply(u),l)).next(l=>i.Qr.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Qr.addMatchingKeys(u,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,l.cs,l.ls)).next(()=>l.cs)))})}function K2(r,i){return y(this,arguments,function*(t,e,n=W()){let o=yield os(t,yt(N_(e.bundledQuery))),s=S(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Oe(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.$r.saveNamedQuery(a,e);let u=o.withResumeToken(We.EMPTY_BYTE_STRING,c);return s.ns=s.ns.insert(u.targetId,u),s.Qr.updateTargetData(a,u).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function uA(t,e){return`firestore_clients_${t}_${e}`}function lA(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function by(t,e){return`firestore_targets_${t}_${e}`}var fh=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new w(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(Pe("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},fc=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new w(r.error.code,r.error.message))),o?new t(e,r.state,i):(Pe("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},ph=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=R_();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=bA(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Pe("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},jv=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Pe("SharedClientState",`Failed to parse online state: ${e}`),null)}},xc=class{constructor(){this.activeTargetIds=R_()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},pc=class{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new ve(G),this.started=!1,this.ys=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=uA(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new xc),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return y(this,null,function*(){let e=yield this.syncEngine.Li();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(uA(this.persistenceKey,r));if(i){let o=ph.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,r){this.Bs(e,n,r),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(by(this.persistenceKey,e));if(r){let i=fc.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(by(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return I("SharedClientState","READ",e,n),n}setItem(e,n){I("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){I("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(I("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Pe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>y(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(o){let s=St._e;if(o!=null)try{let a=JSON.parse(o);k(typeof a=="number"),s=a}catch(a){Pe("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==St._e&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,r){let i=new fh(this.currentUser,e,n,r),o=lA(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Ls(e){let n=lA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=by(this.persistenceKey,e),o=new fc(e,n,r);this.setItem(i,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return ph.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return fh.Es(new Le(o),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return fc.Es(i,n)}xs(e){return jv.Es(e)}Js(e){return JSON.parse(e)}zs(e){return y(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);I("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=R_();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},gh=class{constructor(){this.no=new xc,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new xc,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Bv=class{io(e){}shutdown(){}};var mh=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){I("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){I("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Pd=null;function Ay(){return Pd===null?Pd=function(){return 268435456+Math.round(2147483648*Math.random())}():Pd++,"0x"+Pd.toString(16)}var Q2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Uv=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var ct="WebChannelConnection",$v=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(n,r,i,o,s){let a=Ay(),c=this.bo(n,r.toUriEncodedString());I("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,o,s),this.Co(n,c,u,i).then(l=>(I("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw jt("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}vo(n,r,i,o,s,a){return this.So(n,r,i,o,s)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}bo(n,r){let i=Q2[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let o=Ay();return new Promise((s,a)=>{let c=new _b;c.setWithCredentials(!0),c.listenOnce(yb.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Sd.NO_ERROR:let l=c.getResponseJson();I(ct,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),s(l);break;case Sd.TIMEOUT:I(ct,`RPC '${e}' ${o} timed out`),a(new w(g.DEADLINE_EXCEEDED,"Request time out"));break;case Sd.HTTP_ERROR:let d=c.getStatus();if(I(ct,`RPC '${e}' ${o} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let v=function(m){let E=m.toLowerCase().replace(/_/g,"-");return Object.values(g).indexOf(E)>=0?E:g.UNKNOWN}(f.status);a(new w(v,f.message))}else a(new w(g.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new w(g.UNAVAILABLE,"Connection failed."));break;default:x()}}finally{I(ct,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);I(ct,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",u,r,15)})}Fo(e,n,r){let i=Ay(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=gb(),a=mb(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=o.join("");I(ct,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=s.createWebChannel(l,c),h=!1,f=!1,v=new Uv({lo:m=>{f?I(ct,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(h||(I(ct,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),I(ct,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},ho:()=>d.close()}),_=(m,E,R)=>{m.listen(E,T=>{try{R(T)}catch(P){setTimeout(()=>{throw P},0)}})};return _(d,rc.EventType.OPEN,()=>{f||I(ct,`RPC '${e}' stream ${i} transport opened.`)}),_(d,rc.EventType.CLOSE,()=>{f||(f=!0,I(ct,`RPC '${e}' stream ${i} transport closed`),v.Vo())}),_(d,rc.EventType.ERROR,m=>{f||(f=!0,jt(ct,`RPC '${e}' stream ${i} transport errored:`,m),v.Vo(new w(g.UNAVAILABLE,"The operation could not be completed")))}),_(d,rc.EventType.MESSAGE,m=>{var E;if(!f){let R=m.data[0];k(!!R);let T=R,P=T.error||((E=T[0])===null||E===void 0?void 0:E.error);if(P){I(ct,`RPC '${e}' stream ${i} received error:`,P);let B=P.status,z=function(Qh){let ww=Fe[Qh];if(ww!==void 0)return rS(ww)}(B),pe=P.message;z===void 0&&(z=g.INTERNAL,pe="Unknown error status: "+B+" with message "+P.message),f=!0,v.Vo(new w(z,pe)),d.close()}else I(ct,`RPC '${e}' stream ${i} received:`,R),v.mo(R)}}),_(a,vb.STAT_EVENT,m=>{m.stat===Dy.PROXY?I(ct,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===Dy.NOPROXY&&I(ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.Ro()},0),v}};function RS(){return typeof window<"u"?window:null}function Vd(){return typeof document<"u"?document:null}function $c(t){return new ov(t,!0)}var Rc=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&I("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var yh=class{constructor(e,n,r,i,o,s,a,c){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Rc(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return y(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return y(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return y(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===g.RESOURCE_EXHAUSTED?(Pe(n.toString()),Pe("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===g.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new w(g.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>y(this,null,function*(){this.state=0,this.start()}))}__(e){return I("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(I("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},qv=class extends yh{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=N2(this.serializer,e),r=function(o){if(!("targetChange"in o))return V.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?V.min():s.readTime?Oe(s.readTime):V.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=cv(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=Kd(c)?{documents:dS(o,c)}:{query:hS(o,c).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=oS(o,s.resumeToken);let u=sv(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(V.min())>0){a.readTime=ns(o,s.snapshotVersion.toTimestamp());let u=sv(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=k2(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=cv(this.serializer),n.removeTarget=e,this.t_(n)}},Hv=class extends yh{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(k(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=O2(e.writeResults,e.commitTime),r=Oe(e.commitTime);return this.listener.T_(r,n)}return k(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=cv(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Ac(this.serializer,r))};this.t_(n)}};var zv=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new w(g.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,av(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new w(g.UNKNOWN,o.toString())})}vo(e,n,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,av(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new w(g.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var Gv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Pe(n),this.g_=!1):I("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var Wv=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{r.enqueueAndForget(()=>y(this,null,function*(){Lr(this)&&(I("RemoteStore","Restarting streams for network reachability change."),yield function(c){return y(this,null,function*(){let u=S(c);u.v_.add(4),yield ps(u),u.x_.set("Unknown"),u.v_.delete(4),yield qc(u)})}(this))}))}),this.x_=new Gv(r,i)}};function qc(t){return y(this,null,function*(){if(Lr(t))for(let e of t.F_)yield e(!0)})}function ps(t){return y(this,null,function*(){for(let e of t.F_)yield e(!1)})}function Fh(t,e){let n=S(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),L_(n)?V_(n):ms(n).Jo()&&F_(n,e))}function Pc(t,e){let n=S(t),r=ms(n);n.C_.delete(e),r.Jo()&&PS(n,e),n.C_.size===0&&(r.Jo()?r.Xo():Lr(n)&&n.x_.set("Unknown"))}function F_(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(V.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ms(t).c_(e)}function PS(t,e){t.O_.Oe(e),ms(t).l_(e)}function V_(t){t.O_=new iv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ms(t).start(),t.x_.p_()}function L_(t){return Lr(t)&&!ms(t).Ho()&&t.C_.size>0}function Lr(t){return S(t).v_.size===0}function NS(t){t.O_=void 0}function Y2(t){return y(this,null,function*(){t.C_.forEach((e,n)=>{F_(t,e)})})}function Z2(t,e){return y(this,null,function*(){NS(t),L_(t)?(t.x_.S_(e),V_(t)):t.x_.set("Unknown")})}function X2(t,e,n){return y(this,null,function*(){if(t.x_.set("Online"),e instanceof Xd&&e.state===2&&e.cause)try{yield function(i,o){return y(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){I("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield vh(t,r)}else if(e instanceof Qo?t.O_.$e(e):e instanceof Zd?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(V.min()))try{let r=yield bS(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.O_.it(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=o.C_.get(u);l&&o.C_.set(u,l.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let l=o.C_.get(c);if(!l)return;o.C_.set(c,l.withResumeToken(We.EMPTY_BYTE_STRING,l.snapshotVersion)),PS(o,c);let d=new rs(l.target,c,u,l.sequenceNumber);F_(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){I("RemoteStore","Failed to raise snapshot:",r),yield vh(t,r)}})}function vh(t,e,n){return y(this,null,function*(){if(!Vr(e))throw e;t.v_.add(1),yield ps(t),t.x_.set("Offline"),n||(n=()=>bS(t.localStore)),t.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){I("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield qc(t)}))})}function OS(t,e){return e().catch(n=>vh(t,n,e))}function gs(t){return y(this,null,function*(){let e=S(t),n=kr(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;J2(e);)try{let i=yield G2(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,ej(e,i)}catch(i){yield vh(e,i)}kS(e)&&FS(e)})}function J2(t){return Lr(t)&&t.D_.length<10}function ej(t,e){t.D_.push(e);let n=kr(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function kS(t){return Lr(t)&&!kr(t).Ho()&&t.D_.length>0}function FS(t){kr(t).start()}function tj(t){return y(this,null,function*(){kr(t).d_()})}function nj(t){return y(this,null,function*(){let e=kr(t);for(let n of t.D_)e.I_(n.mutations)})}function rj(t,e,n){return y(this,null,function*(){let r=t.D_.shift(),i=tv.from(r,e,n);yield OS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield gs(t)})}function ij(t,e){return y(this,null,function*(){e&&kr(t).P_&&(yield function(r,i){return y(this,null,function*(){if(function(s){return nS(s)&&s!==g.ABORTED}(i.code)){let o=r.D_.shift();kr(r).Zo(),yield OS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield gs(r)}})}(t,e)),kS(t)&&FS(t)})}function dA(t,e){return y(this,null,function*(){let n=S(t);n.asyncQueue.verifyOperationInProgress(),I("RemoteStore","RemoteStore received new credentials");let r=Lr(n);n.v_.add(3),yield ps(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield qc(n)})}function Kv(t,e){return y(this,null,function*(){let n=S(t);e?(n.v_.delete(2),yield qc(n)):e||(n.v_.add(2),yield ps(n),n.x_.set("Unknown"))})}function ms(t){return t.N_||(t.N_=function(n,r,i){let o=S(n);return o.R_(),new qv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:Y2.bind(null,t),To:Z2.bind(null,t),u_:X2.bind(null,t)}),t.F_.push(e=>y(this,null,function*(){e?(t.N_.Zo(),L_(t)?V_(t):t.x_.set("Unknown")):(yield t.N_.stop(),NS(t))}))),t.N_}function kr(t){return t.B_||(t.B_=function(n,r,i){let o=S(n);return o.R_(),new Hv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:tj.bind(null,t),To:ij.bind(null,t),E_:nj.bind(null,t),T_:rj.bind(null,t)}),t.F_.push(e=>y(this,null,function*(){e?(t.B_.Zo(),yield gs(t)):(yield t.B_.stop(),t.D_.length>0&&(I("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}var Qv=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new je,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new w(g.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ys(t,e){if(Pe("AsyncQueue",`${e}: ${t}`),Vr(t))return new w(g.UNAVAILABLE,`${e}: ${t}`);throw t}var _h=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||b.comparator(n.key,r.key):(n,r)=>b.comparator(n.key,r.key),this.keyedMap=cc(),this.sortedSet=new ve(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var wh=class{constructor(){this.L_=new ve(b.comparator)}track(e){let n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):x():this.L_=this.L_.insert(n,e)}k_(){let e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}},as=class t{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,_h.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Yv=class{constructor(){this.q_=void 0,this.Q_=[]}},Zv=class{constructor(){this.queries=new Mn(e=>UA(e),Bc),this.onlineState="Unknown",this.K_=new Set}};function j_(t,e){return y(this,null,function*(){let n=S(t),r=e.query,i=!1,o=n.queries.get(r);if(o||(i=!0,o=new Yv),i)try{o.q_=yield n.onListen(r)}catch(s){let a=ys(s,`Initialization of query '${$o(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.Q_.push(e),e.U_(n.onlineState),o.q_&&e.W_(o.q_)&&U_(n)})}function B_(t,e){return y(this,null,function*(){let n=S(t),r=e.query,i=!1,o=n.queries.get(r);if(o){let s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),i=o.Q_.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function oj(t,e){let n=S(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Q_)a.W_(i)&&(r=!0);s.q_=i}}r&&U_(n)}function sj(t,e,n){let r=S(t),i=r.queries.get(e);if(i)for(let o of i.Q_)o.onError(n);r.queries.delete(e)}function U_(t){t.K_.forEach(e=>{e.next()})}var Nc=class{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new as(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;let n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=as.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}};var Xv=class{constructor(e,n){this.X_=e,this.byteLength=n}ea(){return"metadata"in this.X_}};var Eh=class{constructor(e){this.serializer=e}Ps(e){return Tn(this.serializer,e)}Is(e){return e.metadata.exists?lS(this.serializer,e.document,!1):Be.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Oe(e)}},Jv=class{constructor(e,n,r){this.ta=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=VS(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++n;let r=ie.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ra(e){let n=new Map,r=new Eh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ps(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||W()).add(o);n.set(s,a)}}return n}complete(){return y(this,null,function*(){let e=yield W2(this.localStore,new Eh(this.serializer),this.documents,this.ta.id),n=this.ra(this.documents);for(let r of this.queries)yield K2(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}})}};function VS(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Ih=class{constructor(e){this.key=e}},Dh=class{constructor(e){this.key=e}},Ch=class{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=W(),this.mutatedKeys=W(),this.ua=qA(e),this.ca=new _h(this.ua)}get la(){return this.oa}ha(e,n){let r=n?n.Pa:new wh,i=n?n.ca:this.ca,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=Uc(this.query,d)?d:null,v=!!h&&this.mutatedKeys.has(h.key),_=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),m=!1;h&&f?h.data.isEqual(f.data)?v!==_&&(r.track({type:3,doc:f}),m=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),m=!0,(c&&this.ua(f,c)>0||u&&this.ua(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(c||u)&&(a=!0)),m&&(f?(s=s.add(f),o=_?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let l=this.query.limitType==="F"?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ca:s,Pa:r,Xi:a,mutatedKeys:o}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;let s=e.Pa.k_();s.sort((l,d)=>function(f,v){let _=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return x()}};return _(f)-_(v)}(l.type,d.type)||this.ua(l.doc,d.doc)),this.Ta(r),i=i!=null&&i;let a=n&&!i?this.Ea():[],c=this.aa.size===0&&this.current&&!i?1:0,u=c!==this._a;return this._a=c,s.length!==0||u?{snapshot:new as(this.query,e.ca,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new wh,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];let e=this.aa;this.aa=W(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});let n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new Dh(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new Ih(r))}),n}Ra(e){this.oa=e.hs,this.aa=W();let n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return as.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},e_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},t_=class{constructor(e){this.key=e,this.ma=!1}},n_=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Mn(a=>UA(a),Bc),this.pa=new Map,this.ya=new Set,this.wa=new ve(b.comparator),this.Sa=new Map,this.ba=new Mc,this.Da={},this.Ca=new Map,this.va=is.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function aj(t,e){return y(this,null,function*(){let n=G_(t),r,i,o=n.ga.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{let s=yield os(n.localStore,yt(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield $_(n,e,r,a==="current",s.resumeToken),n.isPrimaryClient&&Fh(n.remoteStore,s)}return i})}function $_(t,e,n,r,i){return y(this,null,function*(){t.Ma=(d,h,f)=>function(_,m,E,R){return y(this,null,function*(){let T=m.view.ha(E);T.Xi&&(T=yield hh(_.localStore,m.query,!1).then(({documents:pe})=>m.view.ha(pe,T)));let P=R&&R.targetChanges.get(m.targetId),B=R&&R.targetMismatches.get(m.targetId)!=null,z=m.view.applyChanges(T,_.isPrimaryClient,P,B);return r_(_,m.targetId,z.da),z.snapshot})}(t,d,h,f);let o=yield hh(t.localStore,e,!0),s=new Ch(e,o.hs),a=s.ha(o.documents),c=Tc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,c);r_(t,n,u.da);let l=new e_(e,n,s);return t.ga.set(e,l),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),u.snapshot})}function cj(t,e){return y(this,null,function*(){let n=S(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(o=>!Bc(o,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ss(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Pc(n.remoteStore,r.targetId),cs(n,r.targetId)}).catch(Fr))):(cs(n,r.targetId),yield ss(n.localStore,r.targetId,!0))})}function uj(t,e,n){return y(this,null,function*(){let r=W_(t);try{let i=yield function(s,a){let c=S(s),u=De.now(),l=a.reduce((f,v)=>f.add(v.key),W()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let v=It(),_=W();return c.os.getEntries(f,l).next(m=>{v=m,v.forEach((E,R)=>{R.isValidDocument()||(_=_.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,v)).next(m=>{d=m;let E=[];for(let R of a){let T=b2(R,d.get(R.key).overlayedDocument);T!=null&&E.push(new tn(R.key,T,OA(T.value.mapValue),Me.exists(!0)))}return c.mutationQueue.addMutationBatch(f,u,E,a)}).next(m=>{h=m;let E=m.applyToLocalDocumentSet(d,_);return c.documentOverlayCache.saveOverlays(f,m.batchId,E)})}).then(()=>({batchId:h.batchId,changes:zA(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Da[s.currentUser.toKey()];u||(u=new ve(G)),u=u.insert(a,c),s.Da[s.currentUser.toKey()]=u}(r,i.batchId,n),yield Jn(r,i.changes),yield gs(r.remoteStore)}catch(i){let o=ys(i,"Failed to persist write");n.reject(o)}})}function LS(t,e){return y(this,null,function*(){let n=S(t);try{let r=yield z2(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Sa.get(o);s&&(k(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.ma=!0:i.modifiedDocuments.size>0?k(s.ma):i.removedDocuments.size>0&&(k(s.ma),s.ma=!1))}),yield Jn(n,r,e)}catch(r){yield Fr(r)}})}function hA(t,e,n){let r=S(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ga.forEach((o,s)=>{let a=s.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=S(s);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let h of d.Q_)h.U_(a)&&(u=!0)}),u&&U_(c)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function lj(t,e,n){return y(this,null,function*(){let r=S(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Sa.get(e),o=i&&i.key;if(o){let s=new ve(b.comparator);s=s.insert(o,Be.newNoDocument(o,V.min()));let a=W().add(o),c=new Cc(V.min(),new Map,new ve(G),s,a);yield LS(r,c),r.wa=r.wa.remove(o),r.Sa.delete(e),z_(r)}else yield ss(r.localStore,e,!1).then(()=>cs(r,e,n)).catch(Fr)})}function dj(t,e){return y(this,null,function*(){let n=S(t),r=e.batch.batchId;try{let i=yield H2(n.localStore,e);H_(n,r,null),q_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Jn(n,i)}catch(i){yield Fr(i)}})}function hj(t,e,n){return y(this,null,function*(){let r=S(t);try{let i=yield function(s,a){let c=S(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(d=>(k(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);H_(r,e,n),q_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Jn(r,i)}catch(i){yield Fr(i)}})}function fj(t,e){return y(this,null,function*(){let n=S(t);Lr(n.remoteStore)||I("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=S(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Ca.get(r)||[];i.push(e),n.Ca.set(r,i)}catch(r){let i=ys(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function q_(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function H_(t,e,n){let r=S(t),i=r.Da[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function cs(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||jS(t,r)})}function jS(t,e){t.ya.delete(e.path.canonicalString());let n=t.wa.get(e);n!==null&&(Pc(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),z_(t))}function r_(t,e,n){for(let r of n)r instanceof Ih?(t.ba.addReference(r.key,e),pj(t,r)):r instanceof Dh?(I("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||jS(t,r.key)):x()}function pj(t,e){let n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(I("SyncEngine","New document in limbo: "+n),t.ya.add(r),z_(t))}function z_(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){let e=t.ya.values().next().value;t.ya.delete(e);let n=new b(ie.fromString(e)),r=t.va.next();t.Sa.set(r,new t_(n)),t.wa=t.wa.insert(n,r),Fh(t.remoteStore,new rs(yt(fs(n.path)),r,"TargetPurposeLimboResolution",St._e))}}function Jn(t,e,n){return y(this,null,function*(){let r=S(t),i=[],o=[],s=[];r.ga.isEmpty()||(r.ga.forEach((a,c)=>{s.push(r.Ma(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=Fv.Ki(c.targetId,u);o.push(l)}}))}),yield Promise.all(s),r.fa.u_(i),yield function(c,u){return y(this,null,function*(){let l=S(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>p.forEach(u,h=>p.forEach(h.qi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>p.forEach(h.Qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Vr(d))throw d;I("LocalStore","Failed to update sequence numbers: "+d)}for(let d of u){let h=d.targetId;if(!d.fromCache){let f=l.ns.get(h),v=f.snapshotVersion,_=f.withLastLimboFreeSnapshotVersion(v);l.ns=l.ns.insert(h,_)}}})}(r.localStore,o))})}function gj(t,e){return y(this,null,function*(){let n=S(t);if(!n.currentUser.isEqual(e)){I("SyncEngine","User change. New user:",e.toKey());let r=yield TS(n.localStore,e);n.currentUser=e,function(o,s){o.Ca.forEach(a=>{a.forEach(c=>{c.reject(new w(g.CANCELLED,s))})}),o.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Jn(n,r.us)}})}function mj(t,e){let n=S(t),r=n.Sa.get(e);if(r&&r.ma)return W().add(r.key);{let i=W(),o=n.pa.get(e);if(!o)return i;for(let s of o){let a=n.ga.get(s);i=i.unionWith(a.view.la)}return i}}function yj(t,e){return y(this,null,function*(){let n=S(t),r=yield hh(n.localStore,e.query,!0),i=e.view.Ra(r);return n.isPrimaryClient&&r_(n,e.targetId,i.da),i})}function vj(t,e){return y(this,null,function*(){let n=S(t);return MS(n.localStore,e).then(r=>Jn(n,r))})}function _j(t,e,n,r){return y(this,null,function*(){let i=S(t),o=yield function(a,c){let u=S(a),l=S(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>l.vn(d,c).next(h=>h?u.localDocuments.getDocuments(d,h):p.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield gs(i.remoteStore):n==="acknowledged"||n==="rejected"?(H_(i,e,r||null),q_(i,e),function(a,c){S(S(a).mutationQueue).Mn(c)}(i.localStore,e)):x(),yield Jn(i,o)):I("SyncEngine","Cannot apply mutation batch with id: "+e)})}function wj(t,e){return y(this,null,function*(){let n=S(t);if(G_(n),W_(n),e===!0&&n.Fa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield fA(n,r.toArray());n.Fa=!0,yield Kv(n.remoteStore,!0);for(let o of i)Fh(n.remoteStore,o)}else if(e===!1&&n.Fa!==!1){let r=[],i=Promise.resolve();n.pa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(cs(n,s),ss(n.localStore,s,!0))),Pc(n.remoteStore,s)}),yield i,yield fA(n,r),function(s){let a=S(s);a.Sa.forEach((c,u)=>{Pc(a.remoteStore,u)}),a.ba.mr(),a.Sa=new Map,a.wa=new ve(b.comparator)}(n),n.Fa=!1,yield Kv(n.remoteStore,!1)}})}function fA(t,e,n){return y(this,null,function*(){let r=S(t),i=[],o=[];for(let s of e){let a,c=r.pa.get(s);if(c&&c.length!==0){a=yield os(r.localStore,yt(c[0]));for(let u of c){let l=r.ga.get(u),d=yield yj(r,l);d.snapshot&&o.push(d.snapshot)}}else{let u=yield SS(r.localStore,s);a=yield os(r.localStore,u),yield $_(r,BS(u),s,!1,a.resumeToken)}i.push(a)}return r.fa.u_(o),i})}function BS(t){return BA(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ej(t){return function(n){return S(S(n).persistence).Li()}(S(t).localStore)}function Ij(t,e,n,r){return y(this,null,function*(){let i=S(t);if(i.Fa)return void I("SyncEngine","Ignoring unexpected query state notification.");let o=i.pa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield MS(i.localStore,$A(o[0])),a=Cc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",We.EMPTY_BYTE_STRING);yield Jn(i,s,a);break}case"rejected":yield ss(i.localStore,e,!0),cs(i,e,r);break;default:x()}})}function Dj(t,e,n){return y(this,null,function*(){let r=G_(t);if(r.Fa){for(let i of e){if(r.pa.has(i)){I("SyncEngine","Adding an already active target "+i);continue}let o=yield SS(r.localStore,i),s=yield os(r.localStore,o);yield $_(r,BS(o),s.targetId,!1,s.resumeToken),Fh(r.remoteStore,s)}for(let i of n)r.pa.has(i)&&(yield ss(r.localStore,i,!1).then(()=>{Pc(r.remoteStore,i),cs(r,i)}).catch(Fr))}})}function G_(t){let e=S(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lj.bind(null,e),e.fa.u_=oj.bind(null,e.eventManager),e.fa.xa=sj.bind(null,e.eventManager),e}function W_(t){let e=S(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hj.bind(null,e),e}function Cj(t,e,n){let r=S(t);(function(o,s,a){return y(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(f,v){let _=S(f),m=Oe(v.createTime);return _.persistence.runTransaction("hasNewerBundle","readonly",E=>_.$r.getBundleMetadata(E,v.id)).then(E=>!!E&&E.createTime.compareTo(m)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(VS(c));let u=new Jv(c,o.localStore,s.serializer),l=yield s.Oa();for(;l;){let h=yield u.na(l);h&&a._updateProgress(h),l=yield s.Oa()}let d=yield u.complete();return yield Jn(o,d.sa,void 0),yield function(f,v){let _=S(f);return _.persistence.runTransaction("Save bundle","readwrite",m=>_.$r.saveBundleMetadata(m,v))}(o.localStore,c),a._completeWith(d.progress),Promise.resolve(d.ia)}catch(c){return jt("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Oc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){this.serializer=$c(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return CS(this.persistence,new dh,e.initialUser,this.serializer)}createPersistence(e){return new uh(lh.Hr,this.serializer)}createSharedClientState(e){return new gh}terminate(){return y(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Th=class t extends Oc{constructor(e,n,r){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){yield Yh(t.prototype,this,"initialize").call(this,e),yield this.Na.initialize(this,e),yield W_(this.Na.syncEngine),yield gs(this.Na.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return CS(this.persistence,new dh,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new Ev(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new jy(n,this.persistence);return new Ly(e.asyncQueue,r)}createPersistence(e){let n=k_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Lt.withCacheSize(this.cacheSizeBytes):Lt.DEFAULT;return new kv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,RS(),Vd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new gh}},i_=class t extends Th{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return y(this,null,function*(){yield Yh(t.prototype,this,"initialize").call(this,e);let n=this.Na.syncEngine;this.sharedClientState instanceof pc&&(this.sharedClientState.syncEngine={Zs:_j.bind(null,n),Xs:Ij.bind(null,n),eo:Dj.bind(null,n),Li:Ej.bind(null,n),Ys:vj.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>y(this,null,function*(){yield wj(this.Na.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=RS();if(!pc.D(n))throw new w(g.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=k_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new pc(n,e.asyncQueue,r,e.clientId,e.initialUser)}},kc=class{initialize(e,n){return y(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=gj.bind(null,this.syncEngine),yield Kv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Zv}()}createDatastore(e){let n=$c(e.databaseInfo.databaseId),r=function(o){return new $v(o)}(e.databaseInfo);return function(o,s,a,c){return new zv(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new Wv(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>hA(this.syncEngine,n,0),function(){return mh.D()?new mh:new Bv}())}createSyncEngine(e,n){return function(i,o,s,a,c,u,l){let d=new n_(i,o,s,a,c,u);return l&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return y(this,null,function*(){var e;yield function(r){return y(this,null,function*(){let i=S(r);I("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield ps(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function pA(t,e=10240){let n=0;return{read(){return y(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return y(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var us=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Pe("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var o_=class{constructor(e,n){this.ka=e,this.serializer=n,this.metadata=new je,this.buffer=new Uint8Array,this.qa=function(){return new TextDecoder("utf-8")}(),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.X_)}`))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}getMetadata(){return y(this,null,function*(){return this.metadata.promise})}Oa(){return y(this,null,function*(){return yield this.getMetadata(),this.Qa()})}Qa(){return y(this,null,function*(){let e=yield this.Ka();if(e===null)return null;let n=this.qa.decode(e),r=Number(n);isNaN(r)&&this.$a(`length string (${n}) is not valid number`);let i=yield this.Ua(r);return new Xv(JSON.parse(i),e.length+r)})}Wa(){return this.buffer.findIndex(e=>e===123)}Ka(){return y(this,null,function*(){for(;this.Wa()<0&&!(yield this.Ga()););if(this.buffer.length===0)return null;let e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ua(e){return y(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ga())&&this.$a("Reached the end of bundle when more is expected.");let n=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){return y(this,null,function*(){let e=yield this.ka.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var s_=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new w(g.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return y(this,null,function*(){let s=S(i),a={documents:o.map(d=>bc(s.serializer,d))},c=yield s.vo("BatchGetDocuments",s.serializer.databaseId,ie.emptyPath(),a,o.length),u=new Map;c.forEach(d=>{let h=P2(s.serializer,d);u.set(h.key.toString(),h)});let l=[];return o.forEach(d=>{let h=u.get(d.toString());k(!!h),l.push(h)}),l})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Or(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=b.fromPath(r);this.mutations.push(new Ec(i,this.precondition(i)))}),yield function(r,i){return y(this,null,function*(){let o=S(r),s={writes:i.map(a=>Ac(o.serializer,a))};yield o.So("Commit",o.serializer.databaseId,ie.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw x();n=V.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new w(g.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(V.min())?Me.exists(!1):Me.updateTime(n):Me.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(V.min()))throw new w(g.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Me.updateTime(n)}return Me.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var a_=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.za=r.maxAttempts,this.jo=new Rc(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo(()=>y(this,null,function*(){let e=new s_(this.datastore),n=this.Ja(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Ya(i)}))}).catch(r=>{this.Ya(r)})}))}Ja(e){try{let n=this.updateFunction(e);return!Lc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!nS(n)}return!1}};var c_=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Le.UNAUTHENTICATED,this.clientId=Bd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>y(this,null,function*(){I("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(I("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new w(g.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new je;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=ys(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Ld(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),I("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield TS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function u_(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield K_(t);I("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>dA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>dA(e.remoteStore,i)),t._onlineComponents=e})}function US(t){return t.name==="FirebaseError"?t.code===g.FAILED_PRECONDITION||t.code===g.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function K_(t){return y(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){I("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ld(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!US(n))throw n;jt("Error using user provided cache. Falling back to memory cache: "+n),yield Ld(t,new Oc)}}else I("FirestoreClient","Using default OfflineComponentProvider"),yield Ld(t,new Oc);return t._offlineComponents})}function Vh(t){return y(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(I("FirestoreClient","Using user provided OnlineComponentProvider"),yield u_(t,t._uninitializedComponentsProvider._online)):(I("FirestoreClient","Using default OnlineComponentProvider"),yield u_(t,new kc))),t._onlineComponents})}function $S(t){return K_(t).then(e=>e.persistence)}function Q_(t){return K_(t).then(e=>e.localStore)}function qS(t){return Vh(t).then(e=>e.remoteStore)}function Y_(t){return Vh(t).then(e=>e.syncEngine)}function Tj(t){return Vh(t).then(e=>e.datastore)}function ls(t){return y(this,null,function*(){let e=yield Vh(t),n=e.eventManager;return n.onListen=aj.bind(null,e.syncEngine),n.onUnlisten=cj.bind(null,e.syncEngine),n})}function bj(t){return t.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield $S(t),n=yield qS(t);return e.setNetworkEnabled(!0),function(i){let o=S(i);return o.v_.delete(0),qc(o)}(n)}))}function Aj(t){return t.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield $S(t),n=yield qS(t);return e.setNetworkEnabled(!1),function(i){return y(this,null,function*(){let o=S(i);o.v_.add(0),yield ps(o),o.x_.set("Offline")})}(n)}))}function Sj(t,e){let n=new je;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o,s){return y(this,null,function*(){try{let a=yield function(u,l){let d=S(u);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,l))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new w(g.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=ys(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield Q_(t),e,n)})),n.promise}function HS(t,e,n={}){let r=new je;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(o,s,a,c,u){let l=new us({next:h=>{s.enqueueAndForget(()=>B_(o,d));let f=h.docs.has(a);!f&&h.fromCache?u.reject(new w(g.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?u.reject(new w(g.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new Nc(fs(a.path),l,{includeMetadataChanges:!0,Z_:!0});return j_(o,d)}(yield ls(t),t.asyncQueue,e,n,r)})),r.promise}function Mj(t,e){let n=new je;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o,s){return y(this,null,function*(){try{let a=yield hh(i,o,!0),c=new Ch(o,a.hs),u=c.ha(a.documents),l=c.applyChanges(u,!1);s.resolve(l.snapshot)}catch(a){let c=ys(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield Q_(t),e,n)})),n.promise}function zS(t,e,n={}){let r=new je;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(o,s,a,c,u){let l=new us({next:h=>{s.enqueueAndForget(()=>B_(o,d)),h.fromCache&&c.source==="server"?u.reject(new w(g.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new Nc(a,l,{includeMetadataChanges:!0,Z_:!0});return j_(o,d)}(yield ls(t),t.asyncQueue,e,n,r)})),r.promise}function xj(t,e){let n=new us(e);return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o){S(i).K_.add(o),o.next()}(yield ls(t),n)})),()=>{n.La(),t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o){S(i).K_.delete(o)}(yield ls(t),n)}))}}function Rj(t,e,n,r){let i=function(s,a){let c;return c=typeof s=="string"?iS().encode(s):s,function(l,d){return new o_(l,d)}(function(l,d){if(l instanceof Uint8Array)return pA(l,d);if(l instanceof ArrayBuffer)return pA(new Uint8Array(l),d);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,$c(e));t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){Cj(yield Y_(t),i,r)}))}function Pj(t,e){return t.asyncQueue.enqueue(()=>y(this,null,function*(){return function(r,i){let o=S(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield Q_(t),e)}))}function GS(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var gA=new Map;function Z_(t,e,n){if(!n)throw new w(g.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function X_(t,e,n,r){if(e===!0&&r===!0)throw new w(g.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function mA(t){if(!b.isDocumentKey(t))throw new w(g.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yA(t){if(b.isDocumentKey(t))throw new w(g.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Lh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":x()}function oe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new w(g.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Lh(t);throw new w(g.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function WS(t,e){if(e<=0)throw new w(g.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var bh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new w(g.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new w(g.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}X_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ni=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new w(g.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new w(g.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Sy;switch(r.type){case"firstParty":return new Py(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new w(g.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=gA.get(n);r&&(I("ComponentProvider","Removing Datastore"),gA.delete(n),r.terminate())}(this),Promise.resolve()}};function KS(t,e,n,r={}){var i;let o=(t=oe(t,Ni))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&jt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Le.MOCK_USER;else{a=Tw(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new w(g.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Le(u)}t._authCredentials=new My(new jd(a,c))}}var Je=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ge=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},bn=class t extends Je{constructor(e,n,r){super(e,n,fs(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ge(this.firestore,null,new b(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function J_(t,e,...n){if(t=Ee(t),Z_("collection","path",e),t instanceof Ni){let r=ie.fromString(e,...n);return yA(r),new bn(t,null,r)}{if(!(t instanceof ge||t instanceof bn))throw new w(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ie.fromString(e,...n));return yA(r),new bn(t.firestore,null,r)}}function QS(t,e){if(t=oe(t,Ni),Z_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new w(g.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Je(t,null,function(r){return new en(ie.emptyPath(),r)}(e))}function Hc(t,e,...n){if(t=Ee(t),arguments.length===1&&(e=Bd.newId()),Z_("doc","path",e),t instanceof Ni){let r=ie.fromString(e,...n);return mA(r),new ge(t,null,new b(r))}{if(!(t instanceof ge||t instanceof bn))throw new w(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ie.fromString(e,...n));return mA(r),new ge(t.firestore,t instanceof bn?t.converter:null,new b(r))}}function ew(t,e){return t=Ee(t),e=Ee(e),(t instanceof ge||t instanceof bn)&&(e instanceof ge||e instanceof bn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function tw(t,e){return t=Ee(t),e=Ee(e),t instanceof Je&&e instanceof Je&&t.firestore===e.firestore&&Bc(t._query,e._query)&&t.converter===e.converter}var l_=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Rc(this,"async_queue_retry"),this._u=()=>{let n=Vd();n&&I("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=Vd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;let n=Vd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});let n=new je;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){return y(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!Vr(e))throw e;I("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(e){let n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Pe("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);let i=Qv.createAndSchedule(this,e,n,r,o=>this.lu(o));return this.nu.push(i),i}au(){this.ru&&x()}verifyOperationInProgress(){}hu(){return y(this,null,function*(){let e;do e=this.Xa,yield e;while(e!==this.Xa)})}Pu(e){for(let n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){let n=this.nu.indexOf(e);this.nu.splice(n,1)}};function d_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var h_=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new je,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var YS=-1,we=class extends Ni{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new l_}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ZS(this),this._firestoreClient.terminate()}};function qe(t){return t._firestoreClient||ZS(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ZS(t){var e,n,r;let i=t._freezeSettings(),o=function(a,c,u,l){return new By(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,GS(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new c_(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function XS(t,e){aM(t=oe(t,we));let n=qe(t);if(n._uninitializedComponentsProvider)throw new w(g.FAILED_PRECONDITION,"SDK cache is already specified.");jt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new kc;return eM(n,i,new Th(i,r.cacheSizeBytes,e?.forceOwnership))}function JS(t){aM(t=oe(t,we));let e=qe(t);if(e._uninitializedComponentsProvider)throw new w(g.FAILED_PRECONDITION,"SDK cache is already specified.");jt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new kc;return eM(e,r,new i_(r,n.cacheSizeBytes))}function eM(t,e,n){let r=new je;return t.asyncQueue.enqueue(()=>y(this,null,function*(){try{yield Ld(t,n),yield u_(t,e),r.resolve()}catch(i){let o=i;if(!US(o))throw o;jt("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function tM(t){if(t._initialized&&!t._terminated)throw new w(g.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new je;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{yield function(r){return y(this,null,function*(){if(!Kn.D())return Promise.resolve();let i=r+"main";yield Kn.delete(i)})}(k_(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function nM(t){return function(n){let r=new je;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return fj(yield Y_(n),r)})),r.promise}(qe(t=oe(t,we)))}function rM(t){return bj(qe(t=oe(t,we)))}function iM(t){return Aj(qe(t=oe(t,we)))}function oM(t,e){let n=qe(t=oe(t,we)),r=new h_;return Rj(n,t._databaseId,e,r),r}function sM(t,e){return Pj(qe(t=oe(t,we)),e).then(n=>n?new Je(t,null,n.query):null)}function aM(t){if(t._initialized||t._terminated)throw new w(g.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var xn=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(We.fromBase64String(e))}catch(n){throw new w(g.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(We.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var nn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new w(g.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ne(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Zn=class{constructor(e){this._methodName=e}};var Oi=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new w(g.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new w(g.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return G(this._lat,e._lat)||G(this._long,e._long)}};var Nj=/^__.*__$/,f_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new tn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nr(e,this.data,n,this.fieldTransforms)}},Ah=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new tn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function cM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw x()}}var Sh=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Mh(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(cM(this.du)&&Nj.test(e))throw this.pu('Document fields cannot begin and end with "__"')}},p_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$c(e)}Su(e,n,r,i=!1){return new Sh({du:e,methodName:n,wu:r,path:Ne.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Li(t){let e=t._freezeSettings(),n=$c(t._databaseId);return new p_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jh(t,e,n,r,i,o={}){let s=t.Su(o.merge||o.mergeFields?2:0,e,n,i);iw("Data must be an object, but it was:",s,r);let a=dM(r,s),c,u;if(o.merge)c=new Mt(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let l=[];for(let d of o.mergeFields){let h=__(e,d,n);if(!s.contains(h))throw new w(g.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);fM(l,h)||l.push(h)}c=new Mt(l),u=s.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=s.fieldTransforms;return new f_(new ut(a),c,u)}var Fc=class t extends Zn{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function uM(t,e,n){return new Sh({du:3,wu:e.settings.wu,methodName:t._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var g_=class t extends Zn{_toFieldTransform(e){return new xi(e.path,new Rr)}isEqual(e){return e instanceof t}},m_=class t extends Zn{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){let n=uM(this,e,!0),r=this.bu.map(o=>ji(o,n)),i=new Qn(r);return new xi(e.path,i)}isEqual(e){return e instanceof t&&Jh(this.bu,e.bu)}},y_=class t extends Zn{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){let n=uM(this,e,!0),r=this.bu.map(o=>ji(o,n)),i=new Yn(r);return new xi(e.path,i)}isEqual(e){return e instanceof t&&Jh(this.bu,e.bu)}},v_=class t extends Zn{constructor(e,n){super(e),this.Du=n}_toFieldTransform(e){let n=new Pr(e.serializer,QA(e.serializer,this.Du));return new xi(e.path,n)}isEqual(e){return e instanceof t&&this.Du===e.Du}};function nw(t,e,n,r){let i=t.Su(1,e,n);iw("Data must be an object, but it was:",i,r);let o=[],s=ut.empty();Vi(r,(c,u)=>{let l=ow(e,c,n);u=Ee(u);let d=i.fu(l);if(u instanceof Fc)o.push(l);else{let h=ji(u,d);h!=null&&(o.push(l),s.set(l,h))}});let a=new Mt(o);return new Ah(s,a,i.fieldTransforms)}function rw(t,e,n,r,i,o){let s=t.Su(1,e,n),a=[__(e,r,n)],c=[i];if(o.length%2!=0)throw new w(g.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(__(e,o[h])),c.push(o[h+1]);let u=[],l=ut.empty();for(let h=a.length-1;h>=0;--h)if(!fM(u,a[h])){let f=a[h],v=c[h];v=Ee(v);let _=s.fu(f);if(v instanceof Fc)u.push(f);else{let m=ji(v,_);m!=null&&(u.push(f),l.set(f,m))}}let d=new Mt(u);return new Ah(l,d,s.fieldTransforms)}function lM(t,e,n,r=!1){return ji(n,t.Su(r?4:3,e))}function ji(t,e){if(hM(t=Ee(t)))return iw("Unsupported field value:",e,t),dM(t,e);if(t instanceof Zn)return function(r,i){if(!cM(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=ji(a,i.gu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Ee(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=De.fromDate(r);return{timestampValue:ns(i.serializer,o)}}if(r instanceof De){let o=new De(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ns(i.serializer,o)}}if(r instanceof Oi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xn)return{bytesValue:oS(i.serializer,r._byteString)};if(r instanceof ge){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.pu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:P_(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${Lh(r)}`)}(t,e)}function dM(t,e){let n={};return RA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vi(t,(r,i)=>{let o=ji(i,e.Ru(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function hM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof De||t instanceof Oi||t instanceof xn||t instanceof ge||t instanceof Zn)}function iw(t,e,n){if(!hM(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Lh(n);throw r==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function __(t,e,n){if((e=Ee(e))instanceof nn)return e._internalPath;if(typeof e=="string")return ow(t,e);throw Mh("Field path arguments must be of type string or ",t,!1,void 0,n)}var Oj=new RegExp("[~\\*/\\[\\]]");function ow(t,e,n){if(e.search(Oj)>=0)throw Mh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new nn(...e.split("."))._internalPath}catch{throw Mh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Mh(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new w(g.INVALID_ARGUMENT,a+t+c)}function fM(t,e){return t.some(n=>n.isEqual(e))}var ki=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new w_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Bh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},w_=class extends ki{data(){return super.data()}};function Bh(t,e){return typeof e=="string"?ow(t,e):e instanceof nn?e._internalPath:e._delegate._internalPath}function pM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new w(g.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Vc=class{},Fi=class extends Vc{};function er(t,e,...n){let r=[];e instanceof Vc&&r.push(e),r=r.concat(n),function(o){let s=o.filter(c=>c instanceof E_).length,a=o.filter(c=>c instanceof xh).length;if(s>1||s>0&&a>0)throw new w(g.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var xh=class t extends Fi{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return CM(e._query,n),new Je(e.firestore,e.converter,Jy(e._query,n))}_parse(e){let n=Li(e.firestore);return function(o,s,a,c,u,l,d){let h;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new w(g.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){_A(d,l);let f=[];for(let v of d)f.push(vA(c,o,v));h={arrayValue:{values:f}}}else h=vA(c,o,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||_A(d,l),h=lM(a,s,d,l==="in"||l==="not-in");return te.create(u,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function gM(t,e,n){let r=e,i=Bh("where",t);return xh._create(i,r,n)}var E_=class t extends Vc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:le.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)CM(s,c),s=Jy(s,c)}(e._query,n),new Je(e.firestore,e.converter,Jy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var I_=class t extends Fi{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new w(g.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new w(g.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Si(o,s)}(e._query,this._field,this._direction);return new Je(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new en(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function mM(t,e="asc"){let n=e,r=Bh("orderBy",t);return I_._create(r,n)}var Rh=class t extends Fi{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Je(e.firestore,e.converter,Yd(e._query,this._limit,this._limitType))}};function yM(t){return WS("limit",t),Rh._create("limit",t,"F")}function vM(t){return WS("limitToLast",t),Rh._create("limitToLast",t,"L")}var Ph=class t extends Fi{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=DM(e,this.type,this._docOrFields,this._inclusive);return new Je(e.firestore,e.converter,function(i,o){return new en(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function _M(...t){return Ph._create("startAt",t,!0)}function wM(...t){return Ph._create("startAfter",t,!1)}var Nh=class t extends Fi{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=DM(e,this.type,this._docOrFields,this._inclusive);return new Je(e.firestore,e.converter,function(i,o){return new en(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function EM(...t){return Nh._create("endBefore",t,!1)}function IM(...t){return Nh._create("endAt",t,!0)}function DM(t,e,n,r){if(n[0]=Ee(n[0]),n[0]instanceof ki)return function(o,s,a,c,u){if(!c)throw new w(g.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let l=[];for(let d of Ko(o))if(d.field.isKeyField())l.push(Ai(s,c.key));else{let h=c.data.field(d.field);if(kh(h))throw new w(g.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new w(g.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}l.push(h)}return new Sn(l,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=Li(t.firestore);return function(s,a,c,u,l,d){let h=s.explicitOrderBy;if(l.length>h.length)throw new w(g.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let v=0;v<l.length;v++){let _=l[v];if(h[v].field.isKeyField()){if(typeof _!="string")throw new w(g.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof _}`);if(!x_(s)&&_.indexOf("/")!==-1)throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${_}' contains a slash.`);let m=s.path.child(ie.fromString(_));if(!b.isDocumentKey(m))throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${m}' is not because it contains an odd number of segments.`);let E=new b(m);f.push(Ai(a,E))}else{let m=lM(c,u,_);f.push(m)}}return new Sn(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function vA(t,e,n){if(typeof(n=Ee(n))=="string"){if(n==="")throw new w(g.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!x_(e)&&n.indexOf("/")!==-1)throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(ie.fromString(n));if(!b.isDocumentKey(r))throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ai(t,new b(r))}if(n instanceof ge)return Ai(t,n._key);throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lh(n)}.`)}function _A(t,e){if(!Array.isArray(t)||t.length===0)throw new w(g.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CM(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new w(g.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new w(g.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var ds=class{convertValue(e,n="none"){switch(bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw x()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Vi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new Oi(Se(e.latitude),Se(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=S_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(vc(e));default:return null}}convertTimestamp(e){let n=Ar(e);return new De(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ie.fromString(e);k(mS(r));let i=new Mr(r.get(1),r.get(3)),o=new b(r.popFirst(5));return i.isEqual(n)||Pe(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Uh(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var D_=class extends ds{constructor(e){super(),this.firestore=e}convertBytes(e){return new xn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ge(this.firestore,null,n)}};var Wn=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ut=class extends ki{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Tr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Bh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Tr=class extends Ut{data(e={}){return super.data(e)}},rn=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Wn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Tr(this._firestore,this._userDataWriter,r.key,r,new Wn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new w(g.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Tr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Tr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:kj(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function kj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return x()}}function sw(t,e){return t instanceof Ut&&e instanceof Ut?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof rn&&e instanceof rn&&t._firestore===e._firestore&&tw(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function TM(t){t=oe(t,ge);let e=oe(t.firestore,we);return HS(qe(e),t._key).then(n=>lw(e,t,n))}var Xn=class extends ds{constructor(e){super(),this.firestore=e}convertBytes(e){return new xn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ge(this.firestore,null,n)}};function bM(t){t=oe(t,ge);let e=oe(t.firestore,we),n=qe(e),r=new Xn(e);return Sj(n,t._key).then(i=>new Ut(e,r,t._key,i,new Wn(i!==null&&i.hasLocalMutations,!0),t.converter))}function AM(t){t=oe(t,ge);let e=oe(t.firestore,we);return HS(qe(e),t._key,{source:"server"}).then(n=>lw(e,t,n))}function SM(t){t=oe(t,Je);let e=oe(t.firestore,we),n=qe(e),r=new Xn(e);return pM(t._query),zS(n,t._query).then(i=>new rn(e,r,t,i))}function MM(t){t=oe(t,Je);let e=oe(t.firestore,we),n=qe(e),r=new Xn(e);return Mj(n,t._query).then(i=>new rn(e,r,t,i))}function xM(t){t=oe(t,Je);let e=oe(t.firestore,we),n=qe(e),r=new Xn(e);return zS(n,t._query,{source:"server"}).then(i=>new rn(e,r,t,i))}function aw(t,e,n){t=oe(t,ge);let r=oe(t.firestore,we),i=Uh(t.converter,e,n);return vs(r,[jh(Li(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Me.none())])}function cw(t,e,n,...r){t=oe(t,ge);let i=oe(t.firestore,we),o=Li(i),s;return s=typeof(e=Ee(e))=="string"||e instanceof nn?rw(o,"updateDoc",t._key,e,n,r):nw(o,"updateDoc",t._key,e),vs(i,[s.toMutation(t._key,Me.exists(!0))])}function RM(t){return vs(oe(t.firestore,we),[new Or(t._key,Me.none())])}function PM(t,e){let n=oe(t.firestore,we),r=Hc(t),i=Uh(t.converter,e);return vs(n,[jh(Li(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Me.exists(!1))]).then(()=>r)}function uw(t,...e){var n,r,i;t=Ee(t);let o={includeMetadataChanges:!1},s=0;typeof e[s]!="object"||d_(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges};if(d_(e[s])){let d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,l;if(t instanceof ge)u=oe(t.firestore,we),l=fs(t._key.path),c={next:d=>{e[s]&&e[s](lw(u,t,d))},error:e[s+1],complete:e[s+2]};else{let d=oe(t,Je);u=oe(d.firestore,we),l=d._query;let h=new Xn(u);c={next:f=>{e[s]&&e[s](new rn(u,h,d,f))},error:e[s+1],complete:e[s+2]},pM(t._query)}return function(h,f,v,_){let m=new us(_),E=new Nc(f,m,v);return h.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return j_(yield ls(h),E)})),()=>{m.La(),h.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return B_(yield ls(h),E)}))}}(qe(u),l,a,c)}function NM(t,e){return xj(qe(t=oe(t,we)),d_(e)?e:{next:e})}function vs(t,e){return function(r,i){let o=new je;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return uj(yield Y_(r),i,o)})),o.promise}(qe(t),e)}function lw(t,e,n){let r=n.docs.get(e._key),i=new Xn(t);return new Ut(t,i,e._key,r,new Wn(n.hasPendingWrites,n.fromCache),e.converter)}var Fj={maxAttempts:5};var Oh=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Li(e)}set(e,n,r){this._verifyNotCommitted();let i=Dr(e,this._firestore),o=Uh(i.converter,n,r),s=jh(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Me.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=Dr(e,this._firestore),s;return s=typeof(n=Ee(n))=="string"||n instanceof nn?rw(this._dataReader,"WriteBatch.update",o._key,n,r,i):nw(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Me.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Dr(e,this._firestore);return this._mutations=this._mutations.concat(new Or(n._key,Me.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new w(g.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Dr(t,e){if((t=Ee(t)).firestore!==e)throw new w(g.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var C_=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Li(n)}get(n){let r=Dr(n,this._firestore),i=new D_(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return x();let s=o[0];if(s.isFoundDocument())return new ki(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new ki(this._firestore,i,r._key,null,r.converter);throw x()})}set(n,r,i){let o=Dr(n,this._firestore),s=Uh(o.converter,r,i),a=jh(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=Dr(n,this._firestore),a;return a=typeof(r=Ee(r))=="string"||r instanceof nn?rw(this._dataReader,"Transaction.update",s._key,r,i,o):nw(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=Dr(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Dr(e,this._firestore),r=new Xn(this._firestore);return super.get(e).then(i=>new Ut(this._firestore,r,n._key,i._document,new Wn(!1,!1),n.converter))}};function OM(t,e,n){t=oe(t,we);let r=Object.assign(Object.assign({},Fj),n);return function(o){if(o.maxAttempts<1)throw new w(g.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new je;return o.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){let u=yield Tj(o);new a_(o.asyncQueue,u,a,s,c).ja()})),c.promise}(qe(t),i=>e(new C_(t,i)),r)}function kM(){return new Fc("deleteField")}function FM(){return new g_("serverTimestamp")}function VM(...t){return new m_("arrayUnion",t)}function LM(...t){return new y_("arrayRemove",t)}function jM(t){return new v_("increment",t)}(function(e,n=!0){(function(i){hs=i})(Sw),Ds(new jr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new we(new xy(r.getProvider("auth-internal")),new Oy(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new w(g.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mr(u.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),tr(Eb,"4.4.2",e),tr(Eb,"4.4.2","esm2017")})();var Vj="@firebase/firestore-compat",Lj="0.3.25";function mw(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new w("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function BM(){if(typeof Uint8Array>"u")throw new w("unimplemented","Uint8Arrays are not available in this environment.")}function UM(){if(!PA())throw new w("unimplemented","Blobs are unavailable in Firestore in this environment.")}var $h=class t{constructor(e){this._delegate=e}static fromBase64String(e){return UM(),new t(xn.fromBase64String(e))}static fromUint8Array(e){return BM(),new t(xn.fromUint8Array(e))}toBase64(){return UM(),this._delegate.toBase64()}toUint8Array(){return BM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function dw(t){return jj(t,["next","error","complete"])}function jj(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var hw=class{enableIndexedDbPersistence(e,n){return XS(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return JS(e._delegate)}clearIndexedDbPersistence(e){return tM(e._delegate)}},qh=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Mr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&jt("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){KS(this._delegate,e,n,r)}enableNetwork(){return rM(this._delegate)}disableNetwork(){return iM(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,X_("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return nM(this._delegate)}onSnapshotsInSync(e){return NM(this._delegate,e)}get app(){if(!this._appCompat)throw new w("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Es(this,J_(this._delegate,e))}catch(n){throw vt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Rn(this,Hc(this._delegate,e))}catch(n){throw vt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new qi(this,QS(this._delegate,e))}catch(n){throw vt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return OM(this._delegate,n=>e(new Hh(this,n)))}batch(){return qe(this._delegate),new zh(new Oh(this._delegate,e=>vs(this._delegate,e)))}loadBundle(e){return oM(this._delegate,e)}namedQuery(e){return sM(this._delegate,e).then(n=>n?new qi(this,n):null)}},_s=class extends ds{constructor(e){super(),this.firestore=e}convertBytes(e){return new $h(new xn(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Rn.forKey(n,this.firestore,null)}};function Bj(t){wA(t)}var Hh=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new _s(e)}get(e){let n=Bi(e);return this._delegate.get(n).then(r=>new Ui(this._firestore,new Ut(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=Bi(e);return r?(mw("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Bi(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Bi(e);return this._delegate.delete(n),this}},zh=class{constructor(e){this._delegate=e}set(e,n,r){let i=Bi(e);return r?(mw("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Bi(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Bi(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},ws=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Tr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $i(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new _s(e),n),i.set(n,o)),o}};ws.INSTANCES=new WeakMap;var Rn=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new _s(e)}static forPath(e,n,r){if(e.length%2!==0)throw new w("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new ge(n._delegate,r,new b(e)))}static forKey(e,n,r){return new t(n,new ge(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Es(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Es(this.firestore,J_(this._delegate,e))}catch(n){throw vt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ee(e),e instanceof ge?ew(this._delegate,e):!1}set(e,n){n=mw("DocumentReference.set",n);try{return n?aw(this._delegate,e,n):aw(this._delegate,e)}catch(r){throw vt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?cw(this._delegate,e):cw(this._delegate,e,n,...r)}catch(i){throw vt(i,"updateDoc()","DocumentReference.update()")}}delete(){return RM(this._delegate)}onSnapshot(...e){let n=$M(e),r=qM(e,i=>new Ui(this.firestore,new Ut(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return uw(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=bM(this._delegate):e?.source==="server"?n=AM(this._delegate):n=TM(this._delegate),n.then(r=>new Ui(this.firestore,new Ut(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(ws.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function vt(t,e,n){return t.message=t.message.replace(e,n),t}function $M(t){for(let e of t)if(typeof e=="object"&&!dw(e))return e;return{}}function qM(t,e){var n,r;let i;return dw(t[0])?i=t[0]:dw(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Ui=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Rn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return sw(this._delegate,e._delegate)}},$i=class extends Ui{data(e){let n=this._delegate.data(e);return this._delegate._converter||EA(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},qi=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new _s(e)}where(e,n,r){try{return new t(this.firestore,er(this._delegate,gM(e,n,r)))}catch(i){throw vt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,er(this._delegate,mM(e,n)))}catch(r){throw vt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,er(this._delegate,yM(e)))}catch(n){throw vt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,er(this._delegate,vM(e)))}catch(n){throw vt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,er(this._delegate,_M(...e)))}catch(n){throw vt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,er(this._delegate,wM(...e)))}catch(n){throw vt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,er(this._delegate,EM(...e)))}catch(n){throw vt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,er(this._delegate,IM(...e)))}catch(n){throw vt(n,"endAt()","Query.endAt()")}}isEqual(e){return tw(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=MM(this._delegate):e?.source==="server"?n=xM(this._delegate):n=SM(this._delegate),n.then(r=>new zc(this.firestore,new rn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=$M(e),r=qM(e,i=>new zc(this.firestore,new rn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return uw(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(ws.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},fw=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new $i(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},zc=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new qi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new $i(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new fw(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new $i(this._firestore,r))})}isEqual(e){return sw(this._delegate,e._delegate)}},Es=class t extends qi{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Rn(this.firestore,e):null}doc(e){try{return e===void 0?new Rn(this.firestore,Hc(this._delegate)):new Rn(this.firestore,Hc(this._delegate,e))}catch(n){throw vt(n,"doc()","CollectionReference.doc()")}}add(e){return PM(this._delegate,e).then(n=>new Rn(this.firestore,n))}isEqual(e){return ew(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(ws.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Bi(t){return oe(t,ge)}var pw=class t{constructor(...e){this._delegate=new nn(...e)}static documentId(){return new t(Ne.keyField().canonicalString())}isEqual(e){return e=Ee(e),e instanceof nn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var gw=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=FM();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=kM();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=VM(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=LM(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=jM(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var Uj={Firestore:qh,GeoPoint:Oi,Timestamp:De,Blob:$h,Transaction:Hh,WriteBatch:zh,DocumentReference:Rn,DocumentSnapshot:Ui,Query:qi,QueryDocumentSnapshot:$i,QuerySnapshot:zc,CollectionReference:Es,FieldPath:pw,FieldValue:gw,setLogLevel:Bj,CACHE_SIZE_UNLIMITED:YS};function $j(t,e){t.INTERNAL.registerComponent(new jr("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Uj)))}function qj(t){$j(t,(e,n)=>new qh(e,n,new hw)),t.registerVersion(Vj,Lj)}qj(lt);function Hj(t,e=As){return new X(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function HM(t,e){return Hj(t,e)}function zj(t,e){return HM(t,e).pipe(Hr(void 0),Ms(),j(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function _w(t,e){return HM(t,e).pipe(j(n=>({payload:n,type:"query"})))}var Gh=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=QM(r,n);return new Kh(i,o,this.afs)}snapshotChanges(){return zj(this.ref,this.afs.schedulers.outsideAngular).pipe(Et)}valueChanges(e={}){return this.snapshotChanges().pipe(j(({payload:n})=>e.idField?me(N({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return se(this.ref.get(e)).pipe(Et)}};function Wh(t,e){return _w(t,e).pipe(Hr(void 0),Ms(),j(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let u=o.find(d=>d.doc.ref.isEqual(a.ref)),l=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&l&&JSON.stringify(l.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function zM(t,e,n){return Wh(t,n).pipe(qr((r,i)=>Gj(r,i.map(o=>o.payload),e),[]),_f(),j(r=>r.map(i=>({type:i.type,payload:i}))))}function Gj(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=Wj(t,r))}),t}function yw(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function Wj(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return yw(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return yw(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return yw(t,e.oldIndex,1);break}return t}function GM(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Kh=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Wh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(j(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Hr(void 0),Ms(),$e(([r,i])=>i.length>0||!r),j(([,r])=>r),Et)}auditTrail(e){return this.stateChanges(e).pipe(qr((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=GM(e);return zM(this.query,n,this.afs.schedulers.outsideAngular).pipe(Et)}valueChanges(e={}){return _w(this.query,this.afs.schedulers.outsideAngular).pipe(j(n=>n.payload.docs.map(r=>e.idField?me(N({},r.data()),{[e.idField]:r.id}):r.data())),Et)}get(e){return se(this.query.get(e)).pipe(Et)}add(e){return this.ref.add(e)}doc(e){return new Gh(this.ref.doc(e),this.afs)}},vw=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Wh(this.query,this.afs.schedulers.outsideAngular).pipe(Et):Wh(this.query,this.afs.schedulers.outsideAngular).pipe(j(n=>n.filter(r=>e.indexOf(r.type)>-1)),$e(n=>n.length>0),Et)}auditTrail(e){return this.stateChanges(e).pipe(qr((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=GM(e);return zM(this.query,n,this.afs.schedulers.outsideAngular).pipe(Et)}valueChanges(e={}){return _w(this.query,this.afs.schedulers.outsideAngular).pipe(j(r=>r.payload.docs.map(i=>e.idField?N({[e.idField]:i.id},i.data()):i.data())),Et)}get(e){return se(this.query.get(e)).pipe(Et)}},WM=new M("angularfire2.enableFirestorePersistence"),KM=new M("angularfire2.firestore.persistenceSettings"),Kj=new M("angularfire2.firestore.settings"),Qj=new M("angularfire2.firestore.use-emulator");function QM(t,e=n=>n){return{query:e(t),ref:t}}var Yj=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,c,u,l,d,h,f,v,_,m,E,R){this.schedulers=c;let T=Oa(n,a,r),P=l;d&&Pm(T,a,h,v,_,m,f,E),[this.firestore,this.persistenceEnabled$]=Jl(`${T.name}.firestore`,"AngularFirestore",T.name,()=>{let B=a.runOutsideAngular(()=>T.firestore());if(o&&B.settings(o),P&&B.useEmulator(...P),i&&!si(s)){let z=()=>{try{return se(B.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(pe){return typeof console<"u"&&console.warn(pe),F(!1)}};return[B,a.runOutsideAngular(z)]}else return[B,F(!1)]},[o,P,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=QM(i,r),a=this.schedulers.ngZone.run(()=>o);return new Kh(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new vw(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new Gh(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(D(Mo),D(xo,8),D(WM,8),D(Kj,8),D(rt),D(ne),D(Yl),D(KM,8),D(Qj,8),D(Nm,8),D(bm,8),D(Am,8),D(Sm,8),D(Mm,8),D(xm,8),D(Rm,8),D(di,8))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),YM=(()=>{class t{constructor(){lt.registerVersion("angularfire",hi.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:WM,useValue:!0},{provide:KM,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=be({type:t});static \u0275inj=Te({providers:[Yj]})}return t})();var ZM={production:!1,firebaseConfig:{apiKey:"AIzaSyBjK6Iepet70a0ApWMjYkEA6Wcx10MBy3Q",authDomain:"bk-burger.firebaseapp.com",databaseURL:"https://bk-burger-default-rtdb.firebaseio.com",projectId:"bk-burger",storageBucket:"bk-burger.appspot.com",messagingSenderId:"586729585880",appId:"1:586729585880:web:b16e71013809bec688ebad",measurementId:"G-S6TJCELC9P"}};var XM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=be({type:e,bootstrap:[OC]}),e.\u0275inj=Te({imports:[L0,MC,XC.initializeApp(ZM.firebaseConfig),YM,JC,M0,FC]});let t=e;return t})();V0().bootstrapModule(XM).catch(t=>console.error(t));
